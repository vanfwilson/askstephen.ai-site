/*! For license information please see start.js.LICENSE.txt */
(()=>{var t={2:(t,e,i)=>{var n=i(2199),s=i(4664),a=i(5950);t.exports=function(t){return n(t,a,s)}},42:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".fluentcrm_custom_fields>h3{cursor:pointer}.fc_item_label{color:#606266;cursor:pointer;font-size:110%;font-weight:700;margin-bottom:15px}",""]);const a=s},55:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".fluentcrm_photo_holder{align-items:flex-end;display:inline-flex}.fluentcrm_photo_holder img{margin-right:6px;max-height:100px}",""]);const a=s},79:(t,e,i)=>{var n=i(3702),s=i(80),a=i(4739),o=i(8655),r=i(1175);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=o,l.prototype.set=r,t.exports=l},80:(t,e,i)=>{var n=i(6025),s=Array.prototype.splice;t.exports=function(t){var e=this.__data__,i=n(e,t);return!(i<0)&&(i==e.length-1?e.pop():s.call(e,i,1),--this.size,!0)}},104:(t,e,i)=>{var n=i(3661);function s(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function(){var n=arguments,s=e?e.apply(this,n):n[0],a=i.cache;if(a.has(s))return a.get(s);var o=t.apply(this,n);return i.cache=a.set(s,o)||a,o};return i.cache=new(s.Cache||n),i}s.Cache=n,t.exports=s},270:(t,e,i)=>{var n=i(7068),s=i(346);t.exports=function t(e,i,a,o,r){return e===i||(null==e||null==i||!s(e)&&!s(i)?e!=e&&i!=i:n(e,i,a,o,t,r))}},289:(t,e,i)=>{var n=i(2651);t.exports=function(t){return n(this,t).get(t)}},294:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},317:t=>{t.exports=function(t){var e=-1,i=Array(t.size);return t.forEach(function(t,n){i[++e]=[n,t]}),i}},346:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},361:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,i){var n=typeof t;return!!(i=null==i?9007199254740991:i)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<i}},392:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},426:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,i){return null!=t&&e.call(t,i)}},514:(t,e,i)=>{var n=i(4932);t.exports=function(t,e){return n(e,function(e){return t[e]})}},583:(t,e,i)=>{var n=i(7237),s=i(7255),a=i(8586),o=i(7797);t.exports=function(t){return a(t)?n(o(t)):s(t)}},631:(t,e,i)=>{var n=i(8077),s=i(9326);t.exports=function(t,e){return null!=t&&s(t,e,n)}},641:(t,e,i)=>{var n=i(6649),s=i(5950);t.exports=function(t,e){return t&&n(t,e,s)}},659:(t,e,i)=>{var n=i(1873),s=Object.prototype,a=s.hasOwnProperty,o=s.toString,r=n?n.toStringTag:void 0;t.exports=function(t){var e=a.call(t,r),i=t[r];try{t[r]=void 0;var n=!0}catch(t){}var s=o.call(t);return n&&(e?t[r]=i:delete t[r]),s}},689:(t,e,i)=>{var n=i(2),s=Object.prototype.hasOwnProperty;t.exports=function(t,e,i,a,o,r){var l=1&i,c=n(t),u=c.length;if(u!=n(e).length&&!l)return!1;for(var d=u;d--;){var _=c[d];if(!(l?_ in e:s.call(e,_)))return!1}var p=r.get(t),m=r.get(e);if(p&&m)return p==e&&m==t;var f=!0;r.set(t,e),r.set(e,t);for(var h=l;++d<u;){var g=t[_=c[d]],v=e[_];if(a)var b=l?a(v,g,_,e,t,r):a(g,v,_,t,e,r);if(!(void 0===b?g===v||o(g,v,i,a,r):b)){f=!1;break}h||(h="constructor"==_)}if(f&&!h){var y=t.constructor,w=e.constructor;y==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(f=!1)}return r.delete(t),r.delete(e),f}},695:(t,e,i)=>{var n=i(8096),s=i(2428),a=i(6449),o=i(3656),r=i(361),l=i(7167),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var i=a(t),u=!i&&s(t),d=!i&&!u&&o(t),_=!i&&!u&&!d&&l(t),p=i||u||d||_,m=p?n(t.length,String):[],f=m.length;for(var h in t)!e&&!c.call(t,h)||p&&("length"==h||d&&("offset"==h||"parent"==h)||_&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||r(h,f))||m.push(h);return m}},756:(t,e,i)=>{var n=i(3805);t.exports=function(t){return t==t&&!n(t)}},776:(t,e,i)=>{var n=i(756),s=i(5950);t.exports=function(t){for(var e=s(t),i=e.length;i--;){var a=e[i],o=t[a];e[i]=[a,o,n(o)]}return e}},855:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".shortcode-header[data-v-6e8aa23c]{color:#606266;font-size:15px;font-weight:500;margin:0 0 12px}.helper-text[data-v-6e8aa23c]{color:#6b7280;display:block;font-size:12px;margin-top:8px}",""]);const a=s},909:(t,e,i)=>{var n=i(641),s=i(8329)(n);t.exports=s},938:t=>{t.exports=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}},945:(t,e,i)=>{var n=i(79),s=i(8223),a=i(3661);t.exports=function(t,e){var i=this.__data__;if(i instanceof n){var o=i.__data__;if(!s||o.length<199)return o.push([t,e]),this.size=++i.size,this;i=this.__data__=new a(o)}return i.set(t,e),this.size=i.size,this}},1013:(t,e,i)=>{var n=i(5160),s=i(6800),a=i(1489),o=Math.ceil,r=Math.max;t.exports=function(t,e,i){e=(i?s(t,e,i):void 0===e)?1:r(a(e),0);var l=null==t?0:t.length;if(!l||e<1)return[];for(var c=0,u=0,d=Array(o(l/e));c<l;)d[u++]=n(t,c,c+=e);return d}},1042:(t,e,i)=>{var n=i(6110)(Object,"create");t.exports=n},1074:t=>{t.exports=function(t){return t.split("")}},1086:(t,e,i)=>{var n=i(4932),s=i(5389),a=i(7420),o=i(3349);t.exports=function(t,e){if(null==t)return{};var i=n(o(t),function(t){return[t]});return e=s(e),a(t,i,function(t,i){return e(t,i[0])})}},1091:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".settings-section{margin-bottom:30px}",""]);const a=s},1175:(t,e,i)=>{var n=i(6025);t.exports=function(t,e){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,e])):i[s][1]=e,this}},1376:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".list-stat{background:#fff;padding:24px 15px}.el-link.el-link--default:hover{color:#409eff!important;cursor:pointer!important}",""]);const a=s},1380:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},1420:(t,e,i)=>{var n=i(79);t.exports=function(){this.__data__=new n,this.size=0}},1448:(t,e,i)=>{var n=i(426),s=i(9326);t.exports=function(t,e){return null!=t&&s(t,e,n)}},1459:t=>{t.exports=function(t){return this.__data__.has(t)}},1489:(t,e,i)=>{var n=i(7400);t.exports=function(t){var e=n(t),i=e%1;return e==e?i?e-i:e:0}},1502:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".fluentcrm-campaign .steps-nav{margin:0 auto;text-align:center}.fluentcrm-campaign .step-container{margin-top:30px}.fluentcrm-campaign .action-buttons{margin:0;text-align:right}.fluentcrm-campaign .action-buttons .campaign-title{display:inline-block;float:left;font-size:20px;font-weight:500;padding:10px}.fluentcrm-campaign .action-buttons .campaign-title span.status{color:#909399;font-size:12px;font-weight:400}.fluentcrm-campaign .action-buttons .campaign-title>span{color:#909399;cursor:pointer;font-size:12px;font-weight:400}.fluentcrm-campaign .action-buttons .campaign-title>span>span{color:#409eff}",""]);const a=s},1549:(t,e,i)=>{var n=i(2032),s=i(3862),a=i(6721),o=i(2749),r=i(5749);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=o,l.prototype.set=r,t.exports=l},1799:(t,e,i)=>{var n=i(7217),s=i(270);t.exports=function(t,e,i,a){var o=i.length,r=o,l=!a;if(null==t)return!r;for(t=Object(t);o--;){var c=i[o];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<r;){var u=(c=i[o])[0],d=t[u],_=c[1];if(l&&c[2]){if(void 0===d&&!(u in t))return!1}else{var p=new n;if(a)var m=a(d,_,u,t,e,p);if(!(void 0===m?s(_,d,3,a,p):m))return!1}}return!0}},1800:t=>{var e=/\s/;t.exports=function(t){for(var i=t.length;i--&&e.test(t.charAt(i)););return i}},1802:(t,e,i)=>{var n=i(2224),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=n(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(s,function(t,i,n,s){e.push(n?s.replace(a,"$1"):i||t)}),e});t.exports=o},1873:(t,e,i)=>{var n=i(9325).Symbol;t.exports=n},1882:(t,e,i)=>{var n=i(2552),s=i(3805);t.exports=function(t){if(!s(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1964:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".settings-section{margin-bottom:30px}",""]);const a=s},1986:(t,e,i)=>{var n=i(1873),s=i(7828),a=i(5288),o=i(5911),r=i(317),l=i(4247),c=n?n.prototype:void 0,u=c?c.valueOf:void 0;t.exports=function(t,e,i,n,c,d,_){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!d(new s(t),new s(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=r;case"[object Set]":var m=1&n;if(p||(p=l),t.size!=e.size&&!m)return!1;var f=_.get(t);if(f)return f==e;n|=2,_.set(t,e);var h=o(p(t),p(e),n,c,d,_);return _.delete(t),h;case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},1993:(t,e,i)=>{var n=i(9811),s=i(9698),a=i(7927);t.exports=function(t){return s(t)?a(t):n(t)}},2e3:(t,e,i)=>{var n=i(3945),s=i(2429),a=i(5389),o=i(6449);t.exports=function(t,e){return function(i,r){var l=o(i)?n:s,c=e?e():{};return l(i,t,a(r,2),c)}}},2032:(t,e,i)=>{var n=i(1042);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},2037:(t,e,i)=>{var n=i(7216),s=i(1993),a=i(1489),o=i(3222);t.exports=function(t,e,i){t=o(t);var r=(e=a(e))?s(t):0;return e&&r<e?n(e-r,i)+t:t}},2054:t=>{var e="\\ud800-\\udfff",i="["+e+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\\ud83c[\\udffb-\\udfff]",a="[^"+e+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",r="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+s+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+l+("(?:\\u200d(?:"+[a,o,r].join("|")+")"+c+l+")*"),d="(?:"+[a+n+"?",n,o,r,i].join("|")+")",_=RegExp(s+"(?="+s+")|"+d+u,"g");t.exports=function(t){return t.match(_)||[]}},2194:(t,e,i)=>{var n=i(5389),s=i(6048),a=i(1086);t.exports=function(t,e){return a(t,s(n(e)))}},2199:(t,e,i)=>{var n=i(4528),s=i(6449);t.exports=function(t,e,i){var a=e(t);return s(t)?a:n(a,i(t))}},2224:(t,e,i)=>{var n=i(104);t.exports=function(t){var e=n(t,function(t){return 500===i.size&&i.clear(),t}),i=e.cache;return e}},2240:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,"#fc_sub_email_actions .fc_filter_emails .el-radio-button.non-open .el-radio-button__inner{position:relative}#fc_sub_email_actions .fc_filter_emails .el-radio-button.non-open .el-radio-button__inner .non-open-icons span{background:#fff;border:1px solid #e55353;border-radius:50%;color:#e55353;font-size:10px;height:10px;line-height:7px;padding:0;position:absolute;right:10px;text-align:center;top:5px;transform:rotate(45deg);width:10px}",""]);const a=s},2428:(t,e,i)=>{var n=i(7534),s=i(346),a=Object.prototype,o=a.hasOwnProperty,r=a.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(t){return s(t)&&o.call(t,"callee")&&!r.call(t,"callee")};t.exports=l},2429:(t,e,i)=>{var n=i(909);t.exports=function(t,e,i,s){return n(t,function(t,n,a){e(s,t,i(t),a)}),s}},2523:t=>{t.exports=function(t,e,i,n){for(var s=t.length,a=i+(n?1:-1);n?a--:++a<s;)if(e(t[a],a,t))return a;return-1}},2552:(t,e,i)=>{var n=i(1873),s=i(659),a=i(9350),o=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?s(t):a(t)}},2562:t=>{t.exports=function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}},2651:(t,e,i)=>{var n=i(4218);t.exports=function(t,e){var i=t.__data__;return n(e)?i["string"==typeof e?"string":"hash"]:i.map}},2749:(t,e,i)=>{var n=i(1042),s=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:s.call(e,t)}},2804:(t,e,i)=>{var n=i(6110)(i(9325),"Promise");t.exports=n},2903:(t,e,i)=>{var n=i(3805),s=i(5527),a=i(2562),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return a(t);var e=s(t),i=[];for(var r in t)("constructor"!=r||!e&&o.call(t,r))&&i.push(r);return i}},2949:(t,e,i)=>{var n=i(2651);t.exports=function(t,e){var i=n(this,t),s=i.size;return i.set(t,e),this.size+=i.size==s?0:1,this}},3034:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".fluentcrm_button_preview{border:1px solid #dde6ed!important;border-radius:.3rem!important;display:flex;flex-direction:column!important;height:100%!important;text-align:center}.fluentcrm_button_preview .preview_header{background-color:#f2f5f9!important;color:#53657a!important}.fluentcrm_button_preview .preview_body{align-items:center!important;height:100%;padding:150px 0}",""]);const a=s},3040:(t,e,i)=>{var n=i(1549),s=i(79),a=i(8223);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||s),string:new n}}},3170:(t,e,i)=>{var n=i(6547),s=i(4150),a=i(361),o=i(3805),r=i(7797);t.exports=function(t,e,i,l){if(!o(t))return t;for(var c=-1,u=(e=s(e,t)).length,d=u-1,_=t;null!=_&&++c<u;){var p=r(e[c]),m=i;if("__proto__"===p||"constructor"===p||"prototype"===p)return t;if(c!=d){var f=_[p];void 0===(m=l?l(f,p,_):void 0)&&(m=o(f)?f:a(e[c+1])?[]:{})}n(_,p,m),_=_[p]}return t}},3181:(t,e,i)=>{var n=i(5508)();t.exports=n},3221:t=>{t.exports=function(t){return function(e,i,n){for(var s=-1,a=Object(e),o=n(e),r=o.length;r--;){var l=o[t?r:++s];if(!1===i(a[l],l,a))break}return e}}},3222:(t,e,i)=>{var n=i(7556);t.exports=function(t){return null==t?"":n(t)}},3243:(t,e,i)=>{var n=i(6110),s=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=s},3345:t=>{t.exports=function(){return[]}},3349:(t,e,i)=>{var n=i(2199),s=i(6375),a=i(7241);t.exports=function(t){return n(t,a,s)}},3360:(t,e,i)=>{var n=i(3243);t.exports=function(t,e,i){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}},3488:t=>{t.exports=function(t){return t}},3605:t=>{t.exports=function(t){return this.__data__.get(t)}},3650:(t,e,i)=>{var n=i(4335)(Object.keys,Object);t.exports=n},3656:(t,e,i)=>{t=i.nmd(t);var n=i(9325),s=i(9935),a=e&&!e.nodeType&&e,o=a&&t&&!t.nodeType&&t,r=o&&o.exports===a?n.Buffer:void 0,l=(r?r.isBuffer:void 0)||s;t.exports=l},3661:(t,e,i)=>{var n=i(3040),s=i(7670),a=i(289),o=i(4509),r=i(2949);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=o,l.prototype.set=r,t.exports=l},3663:(t,e,i)=>{var n=i(1799),s=i(776),a=i(7197);t.exports=function(t){var e=s(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(i){return i===t||n(i,t,e)}}},3667:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".fc_photo_name{align-items:flex-start;display:flex;gap:7px;line-height:1.2}",""]);const a=s},3702:t=>{t.exports=function(){this.__data__=[],this.size=0}},3805:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},3862:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},3912:(t,e,i)=>{var n=i(1074),s=i(9698),a=i(2054);t.exports=function(t){return s(t)?a(t):n(t)}},3945:t=>{t.exports=function(t,e,i,n){for(var s=-1,a=null==t?0:t.length;++s<a;){var o=t[s];e(n,o,i(o),t)}return n}},3959:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,'.fluentcrm-campaigns .action-buttons{margin:0 0 15px;text-align:right}.fluentcrm-campaigns .action-buttons .el-input__inner{background:#fff!important}.fluentcrm-campaigns .status{display:inline-block;font-size:10px;width:80px}.fluentcrm-campaigns .status-draft{border:1px solid #909399;color:#909399}.fluentcrm-campaigns .status-pending{border:1px solid #409eff;color:#409eff}.fluentcrm-campaigns .status-archived{border:1px solid #67c23a;color:#67c23a}.fluentcrm-campaigns .status-failed,.fluentcrm-campaigns .status-incomplete{border:1px solid #f56c6c;color:#f56c6c}.fluentcrm-campaigns .status-working{border:1px solid #a7cc90;color:#a7cc90;opacity:1;position:relative;transition:opacity .1s linear}.fluentcrm-campaigns .status-working:before{animation:working 2s linear infinite;border:3px solid;border-color:#eee #eee #a7cc90;border-radius:50%;content:"";height:10px;left:10px;opacity:inherit;position:absolute;top:50%;transform:translate3d(-50%,-50%,0);transform-origin:center;width:10px;will-change:transform}.fluentcrm-campaigns .status-purged{border:1px solid #e6a23d;color:#e6a23d}.fluentcrm-campaigns .status-archived,.fluentcrm-campaigns .status-draft,.fluentcrm-campaigns .status-failed,.fluentcrm-campaigns .status-incomplete,.fluentcrm-campaigns .status-pending,.fluentcrm-campaigns .status-purged,.fluentcrm-campaigns .status-working{border-radius:4px;display:inline-block;padding:0 4px}@keyframes working{0%{transform:translate3d(-50%,-50%,0) rotate(0deg)}to{transform:translate3d(-50%,-50%,0) rotate(1turn)}}',""]);const a=s},4028:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".fc_option_creatable{border-radius:4px;display:block;width:100%}.fc_option_creatable .el-select{float:left;width:100%}.fc_option_creatable .el-select input{margin:0}.fc_option_creatable .fc_with_select{float:left;position:absolute;right:0}",""]);const a=s},4051:t=>{var e=Math.floor;t.exports=function(t,i){var n="";if(!t||i<1||i>9007199254740991)return n;do{i%2&&(n+=t),(i=e(i/2))&&(t+=t)}while(i);return n}},4060:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".sample a{cursor:pointer}",""]);const a=s},4128:(t,e,i)=>{var n=i(1800),s=/^\s+/;t.exports=function(t){return t?t.slice(0,n(t)+1).replace(s,""):t}},4150:(t,e,i)=>{var n=i(6449),s=i(8586),a=i(1802),o=i(3222);t.exports=function(t,e){return n(t)?t:s(t,e)?[t]:a(o(t))}},4218:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},4247:t=>{t.exports=function(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}},4248:t=>{t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}},4307:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".fc_bulk_navs[data-v-c22478ac]{background:#f5f7fa;border-top:1px solid #e3e8ee;margin:20px -15px -28px;padding:0}.fc_bulk_navs p[data-v-c22478ac]{padding:5px 15px 15px}",""]);const a=s},4335:t=>{t.exports=function(t,e){return function(i){return t(e(i))}}},4383:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,"ul.fc_inline_filters{list-style:none;margin:0;padding:0}ul.fc_inline_filters li{border:1px solid #dddfe6;border-radius:5px;color:#606266;display:inline-block;font-weight:400;margin:0 5px 0 0;padding:3px 7px}",""]);const a=s},4394:(t,e,i)=>{var n=i(2552),s=i(346);t.exports=function(t){return"symbol"==typeof t||s(t)&&"[object Symbol]"==n(t)}},4509:(t,e,i)=>{var n=i(2651);t.exports=function(t){return n(this,t).has(t)}},4528:t=>{t.exports=function(t,e){for(var i=-1,n=e.length,s=t.length;++i<n;)t[s+i]=e[i];return t}},4664:(t,e,i)=>{var n=i(9770),s=i(3345),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,r=o?function(t){return null==t?[]:(t=Object(t),n(o(t),function(e){return a.call(t,e)}))}:s;t.exports=r},4693:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".fc_individual_progress{padding:20px 5px 0 42px}.fc_individual_progress *{box-sizing:border-box}.fc_individual_progress .fc_progress_card:nth-child(4n+1){clear:left}.fc_progress_item{background:#f7fafc;border:1px solid #7757e6;border-radius:10px;cursor:pointer;margin-bottom:20px;padding:20px;text-align:center;transition:.2s;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s}.fc_progress_item:hover{background:#fff;box-shadow:0 0 20px rgba(119,86,230,.2)}.fc_progress_item .stats_badges{display:block}.fc_progress_item.fc_sequence_type_benchmark{border:2px solid #f56c6b}.fc_progress_item.fc_sequence_type_result{border:2px solid #7757e6}",""]);const a=s},4739:(t,e,i)=>{var n=i(6025);t.exports=function(t){var e=this.__data__,i=n(e,t);return i<0?void 0:e[i][1]}},4840:(t,e,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;t.exports=n},4894:(t,e,i)=>{var n=i(1882),s=i(294);t.exports=function(t){return null!=t&&s(t.length)&&!n(t)}},4901:(t,e,i)=>{var n=i(2552),s=i(294),a=i(346),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&s(t.length)&&!!o[n(t)]}},4932:t=>{t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length,s=Array(n);++i<n;)s[i]=e(t[i],i,t);return s}},5015:(t,e,i)=>{var n=i(2552),s=i(6449),a=i(346);t.exports=function(t){return"string"==typeof t||!s(t)&&a(t)&&"[object String]"==n(t)}},5072:(t,e,i)=>{"use strict";var n,s=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},a=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),o=[];function r(t){for(var e=-1,i=0;i<o.length;i++)if(o[i].identifier===t){e=i;break}return e}function l(t,e){for(var i={},n=[],s=0;s<t.length;s++){var a=t[s],l=e.base?a[0]+e.base:a[0],c=i[l]||0,u="".concat(l," ").concat(c);i[l]=c+1;var d=r(u),_={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(o[d].references++,o[d].updater(_)):o.push({identifier:u,updater:h(_,e),references:1}),n.push(u)}return n}function c(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var s=i.nc;s&&(n.nonce=s)}if(Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])}),"function"==typeof t.insert)t.insert(e);else{var o=a(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function _(t,e,i,n){var s=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=d(e,s);else{var a=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function p(t,e,i){var n=i.css,s=i.media,a=i.sourceMap;if(s?t.setAttribute("media",s):t.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var m=null,f=0;function h(t,e){var i,n,s;if(e.singleton){var a=f++;i=m||(m=c(e)),n=_.bind(null,i,a,!1),s=_.bind(null,i,a,!0)}else i=c(e),n=p.bind(null,i,e),s=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else s()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=s());var i=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var s=r(i[n]);o[s].references--}for(var a=l(t,e),c=0;c<i.length;c++){var u=r(i[c]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}i=a}}}},5083:(t,e,i)=>{var n=i(1882),s=i(7296),a=i(3805),o=i(7473),r=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,_=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||s(t))&&(n(t)?_:r).test(o(t))}},5127:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".fluentcrm-campaigns .error{color:#f56c6c;font-size:12px}.fluentcrm-campaigns .save-campaign-dialog-footer{margin-top:30px}",""]);const a=s},5128:(t,e,i)=>{var n=i(909),s=i(4894);t.exports=function(t,e){var i=-1,a=s(t)?Array(t.length):[];return n(t,function(t,n,s){a[++i]=e(t,n,s)}),a}},5160:t=>{t.exports=function(t,e,i){var n=-1,s=t.length;e<0&&(e=-e>s?0:s+e),(i=i>s?s:i)<0&&(i+=s),s=e>i?0:i-e>>>0,e>>>=0;for(var a=Array(s);++n<s;)a[n]=t[n+e];return a}},5171:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".fc_condition_group{background:#efefef;border-radius:10px;margin-bottom:20px;padding:10px 15px}.fc_condition_group h4{margin:0}",""]);const a=s},5288:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},5378:(t,e,i)=>{var n=i(4932),s=i(5389),a=i(5128),o=i(6449);t.exports=function(t,e){return(o(t)?n:a)(t,s(e,3))}},5389:(t,e,i)=>{var n=i(3663),s=i(7978),a=i(3488),o=i(6449),r=i(583);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?o(t)?s(t[0],t[1]):n(t):r(t)}},5463:t=>{t.exports=function(t){return t!=t}},5481:(t,e,i)=>{var n=i(9325)["__core-js_shared__"];t.exports=n},5508:(t,e,i)=>{var n=i(6151),s=i(6800),a=i(7400);t.exports=function(t){return function(e,i,o){return o&&"number"!=typeof o&&s(e,i,o)&&(i=o=void 0),e=a(e),void 0===i?(i=e,e=0):i=a(i),o=void 0===o?e<i?1:-1:a(o),n(e,i,o,t)}}},5527:t=>{var e=Object.prototype;t.exports=function(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||e)}},5580:(t,e,i)=>{var n=i(6110)(i(9325),"DataView");t.exports=n},5749:(t,e,i)=>{var n=i(1042);t.exports=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},5797:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".settings-section{margin-bottom:30px}",""]);const a=s},5861:(t,e,i)=>{var n=i(5580),s=i(8223),a=i(2804),o=i(6545),r=i(8303),l=i(2552),c=i(7473),u="[object Map]",d="[object Promise]",_="[object Set]",p="[object WeakMap]",m="[object DataView]",f=c(n),h=c(s),g=c(a),v=c(o),b=c(r),y=l;(n&&y(new n(new ArrayBuffer(1)))!=m||s&&y(new s)!=u||a&&y(a.resolve())!=d||o&&y(new o)!=_||r&&y(new r)!=p)&&(y=function(t){var e=l(t),i="[object Object]"==e?t.constructor:void 0,n=i?c(i):"";if(n)switch(n){case f:return m;case h:return u;case g:return d;case v:return _;case b:return p}return e}),t.exports=y},5880:(t,e,i)=>{var n=i(514),s=i(5950);t.exports=function(t){return null==t?[]:n(t,s(t))}},5911:(t,e,i)=>{var n=i(8859),s=i(4248),a=i(9219);t.exports=function(t,e,i,o,r,l){var c=1&i,u=t.length,d=e.length;if(u!=d&&!(c&&d>u))return!1;var _=l.get(t),p=l.get(e);if(_&&p)return _==e&&p==t;var m=-1,f=!0,h=2&i?new n:void 0;for(l.set(t,e),l.set(e,t);++m<u;){var g=t[m],v=e[m];if(o)var b=c?o(v,g,m,e,t,l):o(g,v,m,t,e,l);if(void 0!==b){if(b)continue;f=!1;break}if(h){if(!s(e,function(t,e){if(!a(h,e)&&(g===t||r(g,t,i,o,l)))return h.push(e)})){f=!1;break}}else if(g!==v&&!r(g,v,i,o,l)){f=!1;break}}return l.delete(t),l.delete(e),f}},5950:(t,e,i)=>{var n=i(695),s=i(8984),a=i(4894);t.exports=function(t){return a(t)?n(t):s(t)}},6009:(t,e,i)=>{t=i.nmd(t);var n=i(4840),s=e&&!e.nodeType&&e,a=s&&t&&!t.nodeType&&t,o=a&&a.exports===s&&n.process,r=function(){try{var t=a&&a.require&&a.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=r},6025:(t,e,i)=>{var n=i(5288);t.exports=function(t,e){for(var i=t.length;i--;)if(n(t[i][0],e))return i;return-1}},6048:t=>{t.exports=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}},6110:(t,e,i)=>{var n=i(5083),s=i(392);t.exports=function(t,e){var i=s(t,e);return n(i)?i:void 0}},6131:(t,e,i)=>{var n=i(2523),s=i(5463),a=i(6959);t.exports=function(t,e,i){return e==e?a(t,e,i):n(t,s,i)}},6151:t=>{var e=Math.ceil,i=Math.max;t.exports=function(t,n,s,a){for(var o=-1,r=i(e((n-t)/(s||1)),0),l=Array(r);r--;)l[a?r:++o]=t,t+=s;return l}},6314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=t(e);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i}).join("")},e.i=function(t,i,n){"string"==typeof t&&(t=[[null,t,""]]);var s={};if(n)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(s[o]=!0)}for(var r=0;r<t.length;r++){var l=[].concat(t[r]);n&&s[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),e.push(l))}},e}},6375:(t,e,i)=>{var n=i(4528),s=i(8879),a=i(4664),o=i(3345),r=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)n(e,a(t)),t=s(t);return e}:o;t.exports=r},6449:t=>{var e=Array.isArray;t.exports=e},6545:(t,e,i)=>{var n=i(6110)(i(9325),"Set");t.exports=n},6547:(t,e,i)=>{var n=i(3360),s=i(5288),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,i){var o=t[e];a.call(t,e)&&s(o,i)&&(void 0!==i||e in t)||n(t,e,i)}},6649:(t,e,i)=>{var n=i(3221)();t.exports=n},6721:(t,e,i)=>{var n=i(1042),s=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return s.call(e,t)?e[t]:void 0}},6800:(t,e,i)=>{var n=i(5288),s=i(4894),a=i(361),o=i(3805);t.exports=function(t,e,i){if(!o(i))return!1;var r=typeof e;return!!("number"==r?s(i)&&a(e,i.length):"string"==r&&e in i)&&n(i[e],t)}},6959:t=>{t.exports=function(t,e,i){for(var n=i-1,s=t.length;++n<s;)if(t[n]===e)return n;return-1}},7068:(t,e,i)=>{var n=i(7217),s=i(5911),a=i(1986),o=i(689),r=i(5861),l=i(6449),c=i(3656),u=i(7167),d="[object Arguments]",_="[object Array]",p="[object Object]",m=Object.prototype.hasOwnProperty;t.exports=function(t,e,i,f,h,g){var v=l(t),b=l(e),y=v?_:r(t),w=b?_:r(e),C=(y=y==d?p:y)==p,$=(w=w==d?p:w)==p,k=y==w;if(k&&c(t)){if(!c(e))return!1;v=!0,C=!1}if(k&&!C)return g||(g=new n),v||u(t)?s(t,e,i,f,h,g):a(t,e,y,i,f,h,g);if(!(1&i)){var x=C&&m.call(t,"__wrapped__"),S=$&&m.call(e,"__wrapped__");if(x||S){var A=x?t.value():t,E=S?e.value():e;return g||(g=new n),h(A,E,i,f,g)}}return!!k&&(g||(g=new n),o(t,e,i,f,h,g))}},7167:(t,e,i)=>{var n=i(4901),s=i(7301),a=i(6009),o=a&&a.isTypedArray,r=o?s(o):n;t.exports=r},7197:t=>{t.exports=function(t,e){return function(i){return null!=i&&(i[t]===e&&(void 0!==e||t in Object(i)))}}},7216:(t,e,i)=>{var n=i(4051),s=i(7556),a=i(8754),o=i(9698),r=i(1993),l=i(3912),c=Math.ceil;t.exports=function(t,e){var i=(e=void 0===e?" ":s(e)).length;if(i<2)return i?n(e,t):e;var u=n(e,c(t/r(e)));return o(e)?a(l(u),0,t).join(""):u.slice(0,t)}},7217:(t,e,i)=>{var n=i(79),s=i(1420),a=i(938),o=i(3605),r=i(9817),l=i(945);function c(t){var e=this.__data__=new n(t);this.size=e.size}c.prototype.clear=s,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=r,c.prototype.set=l,t.exports=c},7237:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},7241:(t,e,i)=>{var n=i(695),s=i(2903),a=i(4894);t.exports=function(t){return a(t)?n(t,!0):s(t)}},7255:(t,e,i)=>{var n=i(7422);t.exports=function(t){return function(e){return n(e,t)}}},7296:(t,e,i)=>{var n,s=i(5481),a=(n=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!a&&a in t}},7301:t=>{t.exports=function(t){return function(e){return t(e)}}},7400:(t,e,i)=>{var n=i(9374),s=1/0;t.exports=function(t){return t?(t=n(t))===s||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},7420:(t,e,i)=>{var n=i(7422),s=i(3170),a=i(4150);t.exports=function(t,e,i){for(var o=-1,r=e.length,l={};++o<r;){var c=e[o],u=n(t,c);i(u,c)&&s(l,a(c,t),u)}return l}},7422:(t,e,i)=>{var n=i(4150),s=i(7797);t.exports=function(t,e){for(var i=0,a=(e=n(e,t)).length;null!=t&&i<a;)t=t[s(e[i++])];return i&&i==a?t:void 0}},7473:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},7534:(t,e,i)=>{var n=i(2552),s=i(346);t.exports=function(t){return s(t)&&"[object Arguments]"==n(t)}},7556:(t,e,i)=>{var n=i(1873),s=i(4932),a=i(6449),o=i(4394),r=n?n.prototype:void 0,l=r?r.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return s(e,t)+"";if(o(e))return l?l.call(e):"";var i=e+"";return"0"==i&&1/e==-1/0?"-0":i}},7670:(t,e,i)=>{var n=i(2651);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},7756:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".list-stat{background:#fff;padding:24px 15px}.el-link.el-link--default:hover{color:#409eff!important;cursor:pointer!important}",""]);const a=s},7791:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".fluentcrm-templates-action-buttons .el-date-editor .el-range-separator{width:7%!important}",""]);const a=s},7797:(t,e,i)=>{var n=i(4394);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},7805:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".tag{border:1px solid #333;border-radius:10px;font-size:12px;margin-right:5px;padding:3px}.name{font-size:15px;font-weight:700}.url{color:inherit;cursor:inherit;font-weight:500;margin:0 0 5px}",""]);const a=s},7828:(t,e,i)=>{var n=i(9325).Uint8Array;t.exports=n},7927:t=>{var e="\\ud800-\\udfff",i="["+e+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\\ud83c[\\udffb-\\udfff]",a="[^"+e+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",r="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+s+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+l+("(?:\\u200d(?:"+[a,o,r].join("|")+")"+c+l+")*"),d="(?:"+[a+n+"?",n,o,r,i].join("|")+")",_=RegExp(s+"(?="+s+")|"+d+u,"g");t.exports=function(t){for(var e=_.lastIndex=0;_.test(t);)++e;return e}},7978:(t,e,i)=>{var n=i(270),s=i(8156),a=i(631),o=i(8586),r=i(756),l=i(7197),c=i(7797);t.exports=function(t,e){return o(t)&&r(e)?l(c(t),e):function(i){var o=s(i,t);return void 0===o&&o===e?a(i,t):n(e,o,3)}}},8077:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},8096:t=>{t.exports=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}},8156:(t,e,i)=>{var n=i(7422);t.exports=function(t,e,i){var s=null==t?void 0:n(t,e);return void 0===s?i:s}},8223:(t,e,i)=>{var n=i(6110)(i(9325),"Map");t.exports=n},8303:(t,e,i)=>{var n=i(6110)(i(9325),"WeakMap");t.exports=n},8329:(t,e,i)=>{var n=i(4894);t.exports=function(t,e){return function(i,s){if(null==i)return i;if(!n(i))return t(i,s);for(var a=i.length,o=e?a:-1,r=Object(i);(e?o--:++o<a)&&!1!==s(r[o],o,r););return i}}},8448:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".wp_vue_editor{min-height:100px;width:100%}.wp_vue_editor_wrapper{position:relative}.wp_vue_editor_wrapper .wp-media-buttons .insert-media{vertical-align:middle}.wp_vue_editor_wrapper .popover-wrapper{position:absolute;right:0;top:0;z-index:2}.wp_vue_editor_wrapper .popover-wrapper-plaintext{left:auto;right:0;top:-32px}.wp_vue_editor_wrapper .wp-editor-tabs{float:left}.mce-fluentcrm_editor_btn button{border:1px solid gray;font-size:10px!important;margin-top:3px}.mce-fluentcrm_editor_btn:hover{border:1px solid transparent!important}",""]);const a=s},8586:(t,e,i)=>{var n=i(6449),s=i(4394),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!s(t))||(o.test(t)||!a.test(t)||null!=e&&t in Object(e))}},8655:(t,e,i)=>{var n=i(6025);t.exports=function(t){return n(this.__data__,t)>-1}},8754:(t,e,i)=>{var n=i(5160);t.exports=function(t,e,i){var s=t.length;return i=void 0===i?s:i,!e&&i>=s?t:n(t,e,i)}},8859:(t,e,i)=>{var n=i(3661),s=i(1380),a=i(1459);function o(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new n;++e<i;)this.add(t[e])}o.prototype.add=o.prototype.push=s,o.prototype.has=a,t.exports=o},8879:(t,e,i)=>{var n=i(4335)(Object.getPrototypeOf,Object);t.exports=n},8970:(t,e,i)=>{var n=i(3360),s=i(2e3)(function(t,e,i){n(t,i,e)});t.exports=s},8984:(t,e,i)=>{var n=i(5527),s=i(3650),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return s(t);var e=[];for(var i in Object(t))a.call(t,i)&&"constructor"!=i&&e.push(i);return e}},9219:t=>{t.exports=function(t,e){return t.has(e)}},9325:(t,e,i)=>{var n=i(4840),s="object"==typeof self&&self&&self.Object===Object&&self,a=n||s||Function("return this")();t.exports=a},9326:(t,e,i)=>{var n=i(4150),s=i(2428),a=i(6449),o=i(361),r=i(294),l=i(7797);t.exports=function(t,e,i){for(var c=-1,u=(e=n(e,t)).length,d=!1;++c<u;){var _=l(e[c]);if(!(d=null!=t&&i(t,_)))break;t=t[_]}return d||++c!=u?d:!!(u=null==t?0:t.length)&&r(u)&&o(_,u)&&(a(t)||s(t))}},9350:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},9374:(t,e,i)=>{var n=i(4128),s=i(3805),a=i(4394),o=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(a(t))return NaN;if(s(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=s(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=n(t);var i=r.test(t);return i||l.test(t)?c(t.slice(2),i?2:8):o.test(t)?NaN:+t}},9538:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,'.list .el-select-dropdown__item{height:55px!important}.list-metrics{color:#8492a6;display:block;font-size:13px;line-height:1}.fluentcrm-campaign .recipients .pull-left{float:left}.fluentcrm-campaign .recipients .pull-right{float:right}.fluentcrm-campaign .recipients .recipients-label{font-size:14px;margin-bottom:5px}.fluentcrm-campaign .recipients .status{display:inline-block;font-size:10px;width:80px}.fluentcrm-campaign .recipients .status-draft{border:1px solid #909399;color:#909399}.fluentcrm-campaign .recipients .status-pending{border:1px solid #409eff;color:#409eff}.fluentcrm-campaign .recipients .status-archived{border:1px solid #67c23a;color:#67c23a}.fluentcrm-campaign .recipients .status-incomplete{border:1px solid #f56c6c;color:#f56c6c}.fluentcrm-campaign .recipients .status-working{border:1px solid #a7cc90;color:#a7cc90;opacity:1;position:relative;transition:opacity .1s linear}.fluentcrm-campaign .recipients .status-working:before{animation:working 2s linear infinite;border:3px solid;border-color:#eee #eee #a7cc90;border-radius:50%;content:"";height:10px;left:10px;opacity:inherit;position:absolute;top:50%;transform:translate3d(-50%,-50%,0);transform-origin:center;width:10px;will-change:transform}@keyframes working{0%{transform:translate3d(-50%,-50%,0) rotate(0deg)}to{transform:translate3d(-50%,-50%,0) rotate(1turn)}}.fluentcrm-campaign .recipients .status-sent{border:1px solid #67c23a;color:#67c23a}.fluentcrm-campaign .recipients .status-purged{border:1px solid #e6a23d;color:#e6a23d}.fluentcrm-campaign .recipients .lists-string .cell{word-break:break-word}',""]);const a=s},9698:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},9770:t=>{t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length,s=0,a=[];++i<n;){var o=t[i];e(o,i,t)&&(a[s++]=o)}return a}},9811:(t,e,i)=>{var n=i(7237)("length");t.exports=n},9817:t=>{t.exports=function(t){return this.__data__.has(t)}},9859:(t,e,i)=>{var n=i(6131),s=i(4894),a=i(5015),o=i(1489),r=i(5880),l=Math.max;t.exports=function(t,e,i,c){t=s(t)?t:r(t),i=i&&!c?o(i):0;var u=t.length;return i<0&&(i=l(u+i,0)),a(t)?i<=u&&t.indexOf(e,i)>-1:!!u&&n(t,e,i)>-1}},9870:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(6314),s=i.n(n)()(function(t){return t[1]});s.push([t.id,".el-table .fc_table_row_completed{background:#f0f9eb}.el-table .fc_table_row_completed td{background:#f0f9eb!important}.el-table .fc_table_row_pending{background:oldlace}.el-table .fc_table_row_pending td{background:oldlace!important}",""]);const a=s},9935:t=>{t.exports=function(){return!1}}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var a=e[n]={id:n,loaded:!1,exports:{}};return t[n](a,a.exports,i),a.loaded=!0,a.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),i.nc=void 0,(()=>{"use strict";const t={extends:window.VueChartJs.Bar,mixins:[window.VueChartJs.mixins.reactiveProp],props:["stats","maxCumulativeValue"],data:function(){return{options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{id:"byDate",type:"linear",position:"left",gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,userCallback:function(t,e,i){if(Math.floor(t)===t)return t}}},{id:"byCumulative",type:"linear",position:"right",gridLines:{drawOnChartArea:!0},ticks:{beginAtZero:!0,userCallback:function(t,e,i){if(Math.floor(t)===t)return t}}}],xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,autoSkip:!0,maxTicksLimit:10}}]},drawBorder:!1,layout:{padding:{left:0,right:0,top:0,bottom:20}}}}},methods:{},mounted:function(){this.renderChart(this.chartData,this.options)}};function e(t,e,i,n,s,a,o,r){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):s&&(l=r?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}const n={name:"Dashboard",components:{SubscribersChart:e({name:"subscribers-growth",props:["date_range"],components:{GrowthChart:t},data:function(){return{fetching:!1,stats:{},chartData:{},maxCumulativeValue:0}},computed:{},methods:{fetchReport:function(){var t=this;this.fetching=!0,this.$get("reports/subscribers",{date_range:this.date_range}).then(function(e){t.stats=e.stats,t.setupChartItems()}).finally(function(){t.fetching=!1})},setupChartItems:function(){var t=[],e={label:this.$t("By Date"),yAxisID:"byDate",backgroundColor:"rgba(81, 52, 178, 0.5)",borderColor:"#b175eb",data:[],fill:!1,gridLines:{display:!1}},i={label:this.$t("Cumulative"),backgroundColor:"rgba(55, 162, 235, 0.1)",borderColor:"#37a2eb",data:[],yAxisID:"byCumulative",type:"line"},n=0;this.each(this.stats,function(s,a){e.data.push(s),t.push(a),n+=parseInt(s),i.data.push(n)});var s=/^[A-Za-z]{3} \d{4}$/;(function(t){return t.every(function(t){return s.test(t)})})(t)||t.sort(),this.maxCumulativeValue=n+10,this.chartData={labels:t,datasets:[e,i]}}},mounted:function(){this.fetchReport()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticClass:"fluentcrm_body fc_chart_box"},[e("growth-chart",{attrs:{maxCumulativeValue:t.maxCumulativeValue,"chart-data":t.chartData}})],1)},[],!1,null,null,null).exports,EmailSentChart:e({name:"email-sent-growth",props:["date_range"],components:{GrowthChart:t},data:function(){return{fetching:!1,stats:{},chartData:{},maxCumulativeValue:0}},computed:{},methods:{fetchReport:function(){var t=this;this.fetching=!0,this.$get("reports/email-sents",{date_range:this.date_range}).then(function(e){t.stats=e.stats,t.setupChartItems()}).finally(function(){t.fetching=!1})},setupChartItems:function(){var t=[],e={label:this.$t("By Date"),yAxisID:"byDate",backgroundColor:"rgba(81, 52, 178, 0.5)",borderColor:"#b175eb",data:[],fill:!1,gridLines:{display:!1}},i={label:this.$t("Cumulative"),backgroundColor:"rgba(55, 162, 235, 0.1)",borderColor:"#37a2eb",data:[],yAxisID:"byCumulative",type:"line"},n=0;this.each(this.stats,function(s,a){e.data.push(s),t.push(a),n+=parseInt(s),i.data.push(n)}),this.maxCumulativeValue=n+10,this.chartData={labels:t,datasets:[e,i]}}},mounted:function(){this.fetchReport()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticClass:"fluentcrm_body fc_chart_box"},[e("growth-chart",{attrs:{maxCumulativeValue:t.maxCumulativeValue,"chart-data":t.chartData}})],1)},[],!1,null,null,null).exports,EmailOpenChart:e({name:"email-open-chart",props:["date_range"],components:{GrowthChart:t},data:function(){return{fetching:!1,stats:{},chartData:{},maxCumulativeValue:0}},computed:{},methods:{fetchReport:function(){var t=this;this.fetching=!0,this.$get("reports/email-opens",{date_range:this.date_range}).then(function(e){t.stats=e.stats,t.setupChartItems()}).finally(function(){t.fetching=!1})},setupChartItems:function(){var t=[],e={label:this.$t("By Date"),yAxisID:"byDate",backgroundColor:"rgba(81, 52, 178, 0.5)",borderColor:"#b175eb",data:[],fill:!1,gridLines:{display:!1}},i={label:this.$t("Cumulative"),backgroundColor:"rgba(55, 162, 235, 0.1)",borderColor:"#37a2eb",data:[],yAxisID:"byCumulative",type:"line"},n=0;this.each(this.stats,function(s,a){e.data.push(s),t.push(a),n+=parseInt(s),i.data.push(n)}),this.maxCumulativeValue=n+10,this.chartData={labels:t,datasets:[e,i]}}},mounted:function(){this.fetchReport()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticClass:"fluentcrm_body fc_chart_box"},[e("growth-chart",{attrs:{maxCumulativeValue:t.maxCumulativeValue,"chart-data":t.chartData}})],1)},[],!1,null,null,null).exports,EmailClickChart:e({name:"email-click-chart",props:["date_range"],components:{GrowthChart:t},data:function(){return{fetching:!1,stats:{},chartData:{},maxCumulativeValue:0}},computed:{},methods:{fetchReport:function(){var t=this;this.fetching=!0,this.$get("reports/email-clicks",{date_range:this.date_range}).then(function(e){t.stats=e.stats,t.setupChartItems()}).finally(function(){t.fetching=!1})},setupChartItems:function(){var t=[],e={label:this.$t("By Date"),yAxisID:"byDate",backgroundColor:"rgba(81, 52, 178, 0.5)",borderColor:"#b175eb",data:[],fill:!1,gridLines:{display:!1}},i={label:this.$t("Cumulative"),backgroundColor:"rgba(55, 162, 235, 0.1)",borderColor:"#37a2eb",data:[],yAxisID:"byCumulative",type:"line"},n=0;this.each(this.stats,function(s,a){e.data.push(s),t.push(a),n+=parseInt(s),i.data.push(n)}),this.maxCumulativeValue=n+10,this.chartData={labels:t,datasets:[e,i]}}},mounted:function(){this.fetchReport()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticClass:"fluentcrm_body fc_chart_box"},[e("growth-chart",{attrs:{maxCumulativeValue:t.maxCumulativeValue,"chart-data":t.chartData}})],1)},[],!1,null,null,null).exports},data:function(){return{loading:!0,stats:[],quick_links:[],date_range:"",currently_showing:"subscribers-chart",chartMaps:{"subscribers-chart":this.$t("Subscribers Growth"),"email-sent-chart":this.$t("Email Sending Stats"),"email-open-chart":this.$t("Email Open Stats"),"email-click-chart":this.$t("Email Link Click Stats")},showing_charts:!0,timerId:null,ff_config:{is_installed:!0,create_form_link:""},installing_ff:!1,sales:[],onboarding:null,data_ready:!1,dashboard_notices:[],recommendation:!1,system_tips:null,showReviewWidget:!0}},methods:{fetchDashBoardData:function(){var t=this;this.loading=!0,setTimeout(function(){t.$get("reports/dashboard-stats").then(function(e){t.stats=e.stats,t.sales=e.sales,t.quick_links=e.quick_links,t.ff_config=e.ff_config,t.onboarding=e.onboarding,t.dashboard_notices=e.dashboard_notices,t.recommendation=e.recommendation,t.system_tips=e.system_tips}).finally(function(){t.loading=!1,t.data_ready=!0})},500)},goToRoute:function(t){t&&this.$router.push(t)},maybeRouteStep:function(t){t.completed||this.goToRoute(t.route)},handleComponentChange:function(t){this.currently_showing=t},filterReport:function(){var t=this,e=this.currently_showing;this.currently_showing={render:function(){}},this.$nextTick(function(){t.currently_showing=e})},refreshData:function(){var t=this;this.fetchDashBoardData(),this.showing_charts=!1,this.$nextTick(function(){t.showing_charts=!0})},installFF:function(){var t=this;this.installing_ff=!0,this.$post("setting/install-fluentform").then(function(e){t.ff_config=e.ff_config,t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.installing_ff=!1})},closeReviewWidget:function(){this.showReviewWidget=!1;var t,e=new Date;e.setTime(e.getTime()+6048e5),t="; expires="+e.toUTCString(),document.cookie="showReviewWidget=false"+t},checkIfReviewWidgetEnabled:function(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){-1!==t[e].trim().indexOf("showReviewWidget=")&&(this.showReviewWidget=!1)}}},mounted:function(){var t=this;this.fetchDashBoardData(),this.checkIfReviewWidgetEnabled(),this.timerId=setInterval(function(){t.refreshData()},3e5),this.changeTitle(this.$t("Dashboard"))},beforeDestroy:function(){this.timerId&&clearInterval(this.timerId)}};var s=i(5072),a=i.n(s),o=i(7791),r={insert:"head",singleton:!1};a()(o.A,r);o.A.locals;const l=e(n,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_admin_dashboard",style:t.loading?"background:white;position: relative":"position: relative"},[t.loading?e("div",{staticClass:"fc_loading_bar"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):t._e(),t._v(" "),t.loading?t._e():e("el-row",{attrs:{gutter:30}},[t.dashboard_notices&&t.dashboard_notices.length?e("div",{staticClass:"dashboard_notices",staticStyle:{"margin-bottom":"20px"}},t._l(t.dashboard_notices,function(i,n){return e("div",{key:n,staticClass:"fc_dashboard_notice",domProps:{innerHTML:t._s(i)}})}),0):t._e(),t._v(" "),e("el-col",{attrs:{sm:24,md:16,lg:18}},[e("div",{staticClass:"fc_card_widgets"},t._l(t.stats,function(i,n){return e("div",{key:n,staticClass:"fc_card_widget",on:{click:function(e){return t.goToRoute(i.route)}}},[e("div",{staticClass:"fluentcrm_body",domProps:{innerHTML:t._s(t.formatMoney(i.count))}}),t._v(" "),e("div",{staticClass:"stat_title",domProps:{innerHTML:t._s(i.title)}})])}),0),t._v(" "),e("div",{staticClass:"ns_subscribers_chart"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-dropdown",{staticStyle:{"margin-top":"10px"},on:{command:t.handleComponentChange}},[e("span",{staticClass:"el-dropdown-link"},[t._v("\n                                "+t._s(t.chartMaps[t.currently_showing])+"\n                                "),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),e("el-dropdown-menu",{staticClass:"fc_dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.chartMaps,function(i,n){return e("el-dropdown-item",{key:n,attrs:{command:n}},[t._v("\n                                    "+t._s(i)+"\n                                ")])}),1)],1)],1),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-date-picker",{attrs:{type:"daterange","range-separator":t.$t("To"),"start-placeholder":t.$t("Start date"),"end-placeholder":t.$t("End date"),"value-format":"yyyy-MM-dd"},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}}),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.filterReport}},[t._v("\n                            "+t._s(t.$t("Apply"))+"\n                        ")])],1)]),t._v(" "),t.showing_charts?e(t.currently_showing,{tag:"component",attrs:{date_range:t.date_range}}):t._e()],1)]),t._v(" "),e("el-col",{attrs:{sm:24,md:8,lg:6}},[t.onboarding?e("div",{staticClass:"fc_m_20 fc_onboarding"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                        "+t._s(t.$t("Getting Started"))+" ("+t._s(t.onboarding.completed)+" of "+t._s(t.onboarding.total)+" complete)\n                    ")])]),t._v(" "),e("div",{staticClass:"fluentcrm_body"},[e("ul",{staticClass:"fc_lined_items"},t._l(t.onboarding.steps,function(i,n){return e("li",{key:n,class:{fc_item_completed:i.completed},on:{click:function(e){return t.maybeRouteStep(i)}}},[i.completed?e("i",{staticClass:"el-icon el-icon-success"}):e("i",{staticClass:"fc_el_circle"}),t._v("\n                            "+t._s(i.label)+"\n                        ")])}),0)])]):t._e(),t._v(" "),t.appVars.disable_fluentmail_suggest?t._e():e("div",{staticClass:"fc_m_20 fc_quick_links"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                        "+t._s(t.$t("FluentSMTP"))+"\n                    ")])]),t._v(" "),e("div",{staticClass:"fluentcrm_body",staticStyle:{padding:"0px 20px 20px"}},[e("p",[t._v("\n                        "+t._s(t.$t("fluentsmtp.desc"))+"\n                    ")]),t._v(" "),e("router-link",{staticClass:"el-button el-button--info el-button--small",attrs:{to:{name:"smtp_settings"}}},[t._v("\n                        "+t._s(t.$t("Das_View_ESSS"))+"\n                    ")])],1)]),t._v(" "),t.sales&&t.sales.length?e("div",{staticClass:"fc_m_20 fc_quick_links"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                        "+t._s(t.$t("Sales"))+"\n                    ")])]),t._v(" "),e("div",{staticClass:"fluentcrm_body"},[e("ul",{staticClass:"fc_lined_items"},t._l(t.sales,function(i){return e("li",{key:i.title},[e("span",{staticClass:"fc_li_title",domProps:{innerHTML:t._s(i.title)}}),t._v(" "),e("span",{staticClass:"fc_li_value",domProps:{innerHTML:t._s(i.content)}})])}),0)])]):t._e(),t._v(" "),t.recommendation?e("div",{staticClass:"fc_m_20 fc_quick_links"},[e("div",{staticClass:"fluentcrm_header",staticStyle:{background:"#7757e7",color:"white"}},[e("div",{staticClass:"fluentcrm_header_title text-align-center",staticStyle:{width:"100%"}},[t._v("\n                        "+t._s(t.recommendation.title)+"\n                    ")])]),t._v(" "),e("div",{staticClass:"fluentcrm_body",staticStyle:{padding:"10px 20px"}},[e("p",{staticStyle:{"font-size":"110%"},domProps:{innerHTML:t._s(t.recommendation.description)}}),t._v(" "),e("p",[e("a",{staticClass:"el-button el-button--danger el-button--large",attrs:{href:"https://fluentcrm.com/?utm_source=dashboard&utm_medium=plugin&utm_campaign=pro&utm_id=wp",target:"_blank",rel:"noopener"}},[t._v(t._s(t.recommendation.btn_text))])]),t._v(" "),t.recommendation.learn_more?e("p",[e("a",{attrs:{target:"_blank",href:t.recommendation.learn_more}},[t._v("Learn more")]),t._v(" and "+t._s(t.recommendation.base_title))]):t._e()])]):t._e(),t._v(" "),e("div",{staticClass:"fc_m_20 fc_quick_links"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                        "+t._s(t.$t("Quick Links"))+"\n                    ")])]),t._v(" "),e("div",{staticClass:"fluentcrm_body"},[e("ul",{staticClass:"fc_quick_links"},t._l(t.quick_links,function(i,n){return e("li",{key:n},[e("a",{attrs:{target:i.is_external?"_blank":"_self",href:i.url}},[e("i",{class:i.icon}),t._v("\n                                "+t._s(i.title)+"\n                            ")])])}),0)])]),t._v(" "),t.ff_config.is_installed?t.has_campaign_pro?t._e():[e("div",{staticClass:"fc_m_20 fc_quick_links"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                            Hi "+t._s(t.appVars.auth.first_name)+" "+t._s(t.appVars.auth.last_name)+",\n                        ")])]),t._v(" "),e("div",{staticClass:"fluentcrm_body",staticStyle:{padding:"10px 20px"}},[e("p",{staticStyle:{"font-size":"110%"}},[t._v("Do more with "),e("b",[t._v("FluentCRM Pro")]),t._v(" by using more integrations, advanced automations, sequence emails and in-detailed analytics.")]),t._v(" "),e("p",[e("a",{staticClass:"el-button el-button--primary el-button--large",attrs:{href:"https://fluentcrm.com/?utm_source=dashboard&utm_medium=plugin&utm_campaign=pro&utm_id=wp",target:"_blank",rel:"noopener"}},[t._v("Upgrade to Pro Now")])])])])]:e("div",{staticClass:"fc_m_20 fc_quick_links"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                        "+t._s(t.$t("Grow Your Audience"))+"\n                    ")])]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.installing_ff,expression:"installing_ff"}],staticClass:"fluentcrm_body",staticStyle:{padding:"0px 20px 20px"},attrs:{"element-loading-text":"Installing Fluent Forms..."}},[e("p",[t._v(t._s(t.$t("quick_links.ff_desc")))]),t._v(" "),e("div",{staticClass:"text-align-center"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.installFF()}}},[t._v(t._s(t.$t("Das_Activate_FFI"))+"\n                        ")])],1)])]),t._v(" "),t.system_tips?e("div",{staticClass:"fc_m_20 fc_system_tips"},[e("div",{staticClass:"fluentcrm_header",staticStyle:{background:"rgb(255 239 98)",color:"black"}},[e("div",{staticClass:"fluentcrm_header_title text-align-center",staticStyle:{width:"100%"}},[t._v("\n                        "+t._s(t.system_tips.title)+"\n                    ")])]),t._v(" "),e("div",{staticClass:"fluentcrm_body",staticStyle:{padding:"10px 20px 20px"}},[e("div",{domProps:{innerHTML:t._s(t.system_tips.body)}})])]):t._e(),t._v(" "),t.showReviewWidget?e("div",{staticClass:"fc_m_20 fc_request_review_widget fc_quick_links"},[e("div",{staticClass:"fluentcrm_body"},[e("div",{staticClass:"fc_request_review_header"},[e("h4",[t._v(t._s(t.$t("Love this Plugin ?")))]),t._v(" "),e("i",{staticClass:"el-icon-circle-close",on:{click:t.closeReviewWidget}})]),t._v(" "),e("p",[t._v(t._s(t.$t("Request_review_Desc")))]),t._v(" "),e("a",{staticClass:"el-button el-button--primary el-button--small fc_primary_button",attrs:{href:"https://wordpress.org/support/plugin/fluent-crm/reviews/#new-post",target:"_blank"}},[t._v(t._s(t.$t("Write a Review")))])])]):t._e()],2)],1)],1)},[],!1,null,null,null).exports;const c=e({},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fcrm_no_permission text-align-center"},[e("h3",[t._v(t._s(t.$t("permission.title")))]),t._v(" "),e("p",[t._v(t._s(t.$t("permission.desc")))])])},[],!1,null,null,null).exports;const u=e({name:"email-view"},function(){return(0,this._self._c)("router-view")},[],!1,null,null,null).exports;const d=e({name:"Confirm",props:{placement:{default:"top-end"},message:{default:"Are you sure to delete this?"},width:{default:170}},data:function(){return{visible:!1}},methods:{hide:function(){this.visible=!1},confirm:function(){this.hide(),this.$emit("yes")},cancel:function(){this.hide(),this.$emit("no")}}},function(){var t=this,e=t._self._c;return e("el-popover",{attrs:{width:t.width,placement:t.placement},on:{hide:t.cancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("p",{domProps:{innerHTML:t._s(t.message)}}),t._v(" "),e("div",{staticClass:"action-buttons"},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.cancel()}}},[t._v("\n            "+t._s(t.$t("No"))+"\n        ")]),t._v(" "),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.confirm()}}},[t._v("\n            "+t._s(t.$t("Yes"))+"\n        ")])],1),t._v(" "),e("template",{slot:"reference"},[t._t("reference",function(){return[e("i",{staticClass:"el-icon-delete"})]})],2)],2)},[],!1,null,null,null).exports;function _(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}const m=e({name:"Pagination",props:{pagination:{required:!0,type:Object},extra_sizes:{required:!1,type:Array,default:function(){return[]}},hide_on_single:{required:!1,type:Boolean,default:function(){return!1}},layout:{required:!1,type:String,default:function(){return"total, sizes, prev, pager, next"}}},computed:{page_sizes:function(){var t=[];this.pagination.per_page<10&&t.push(this.pagination.per_page);return[].concat(t,[10,20,50,80,100,120,150],_(this.extra_sizes))}},methods:{changePage:function(t){this.pagination.current_page=t,this.$emit("fetch")},changeSize:function(t){this.pagination.per_page=t,this.$emit("per_page_change",t),this.$emit("fetch")}}},function(){var t=this;return(0,t._self._c)("el-pagination",{staticClass:"fluentcrm-pagination",attrs:{background:!1,layout:t.layout,"hide-on-single-page":t.hide_on_single,"current-page":t.pagination.current_page,"page-sizes":t.page_sizes,"page-size":t.pagination.per_page,total:t.pagination.total},on:{"current-change":t.changePage,"size-change":t.changeSize,"update:currentPage":function(e){return t.$set(t.pagination,"current_page",e)},"update:current-page":function(e){return t.$set(t.pagination,"current_page",e)}}})},[],!1,null,null,null).exports;const f={name:"SaveCampaign",props:["dialogTitle","dialogVisible","selectedCampaign"],data:function(){return{error:"",saving:!1,campaign:{id:null,title:""}}},computed:{isVisibile:{get:function(){return this.dialogVisible},set:function(t){this.$emit("toggleDialog",t)}}},methods:{save:function(){var t=this;if(this.campaign.title){this.error="",this.saving=!0;(parseInt(this.campaign.id)?this.$put("campaigns/".concat(this.campaign.id),this.campaign):this.$post("campaigns",this.campaign)).then(function(e){t.isVisibile=!1,t.$emit("saved",e)}).catch(function(e){var i=e.data?e.data:e;if(i.status&&403===i.status)t.isVisibile=!1,t.$message(i.message,t.$t("Oops!"),{center:!0,type:"warning",confirmButtonText:t.$t("Close"),dangerouslyUseHTMLString:!0,callback:function(e){t.$router.push({name:"campaigns",query:{t:(new Date).getTime()}})}});else{var n=Object.keys(i.title);t.error=i.title[n[0]]}}).finally(function(e){t.saving=!1})}else this.error=this.$t("Title field is required")},opened:function(){this.selectedCampaign&&(this.campaign.id=this.selectedCampaign.id,this.campaign.title=this.selectedCampaign.title),this.$refs.title.focus()},closed:function(){this.error="",this.campaign.title=""}}};var h=i(5127),g={insert:"head",singleton:!1};a()(h.A,g);h.A.locals;const v=e(f,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-campaigns"},[e("el-dialog",{attrs:{"close-on-click-modal":!1,width:"50%",title:t.dialogTitle,"append-to-body":!0,visible:t.isVisibile},on:{"update:visible":function(e){t.isVisibile=e},opened:t.opened,closed:t.closed}},[e("div",[e("el-col",{attrs:{span:24}},[e("el-input",{ref:"title",attrs:{placeholder:t.$t("Title")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save.apply(null,arguments)}},model:{value:t.campaign.title,callback:function(e){t.$set(t.campaign,"title",e)},expression:"campaign.title"}}),t._v(" "),e("span",{staticClass:"error"},[t._v(t._s(t.error))])],1)],1),t._v(" "),e("div",{staticClass:"save-campaign-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",loading:t.saving},on:{click:t.save}},[t._v("\n                "+t._s(t.$t("Create Campaign"))+"\n            ")])],1)])],1)},[],!1,null,null,null).exports;const b=e({name:"InlineDoc",props:["doc_id"],data:function(){return{loading:!1,doc:{},show_doc:!1,docSize:"700px",isLoaded:!1}},methods:{showDoc:function(){this.show_doc=!0,this.isLoaded||this.getDoc()},getDoc:function(){var t=this;this.loading=!0,this.$get("docs/"+this.doc_id).then(function(e){t.doc=e}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1,t.isLoaded=!0})}},mounted:function(){window.outerWidth<701&&(this.docSize=window.outerWidth-50+"px")}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_inline_doc",staticStyle:{display:"inline-block"}},[e("el-button",{attrs:{title:"View related documentation",size:"mini",type:"text",plain:""},on:{click:function(e){return t.showDoc()}}},[e("span",{staticClass:"dashicons dashicons-welcome-learn-more"})]),t._v(" "),t.show_doc?e("el-drawer",{attrs:{title:t.doc.title,visible:t.show_doc,"append-to-body":!0,size:t.docSize,direction:"rtl"},on:{"update:visible":function(e){t.show_doc=e}}},[t.loading?e("div",{staticClass:"doc_read"},[e("el-skeleton",{attrs:{animated:!0,rows:10}})],1):e("div",{staticClass:"doc_read",domProps:{innerHTML:t._s(t.doc.content)}})]):t._e()],1)},[],!1,null,null,null).exports;const y=e({name:"ContactHeaderPopNav",props:["head_title"],data:function(){return{routeName:this.$route.name}},methods:{handleCommand:function(t){t!=this.routeName&&this.$router.push({name:t})}}},function(){var t=this,e=t._self._c;return e("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.handleCommand}},[e("span",{staticStyle:{cursor:"pointer","font-size":"18px"}},[e("i",{staticClass:"el-icon-arrow-down fluentcrm_clickable el-icon--right"}),t._v(" "+t._s(t.head_title)+"\n    ")]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{class:{sub_item_active:"campaigns"==t.routeName},attrs:{command:"campaigns"}},[t._v(t._s(t.$t("Email Campaigns")))]),t._v(" "),e("el-dropdown-item",{class:{sub_item_active:"recurring_campaigns"==t.routeName},attrs:{command:"recurring_campaigns"}},[t._v(t._s(t.$t("Recurring Email Campaigns")))]),t._v(" "),e("el-dropdown-item",{class:{sub_item_active:"email-sequences"==t.routeName},attrs:{command:"email-sequences"}},[t._v(t._s(t.$t("Email Sequences")))]),t._v(" "),e("el-dropdown-item",{class:{sub_item_active:"templates"==t.routeName},attrs:{command:"templates"}},[t._v(t._s(t.$t("Email Templates")))]),t._v(" "),e("el-dropdown-item",{class:{sub_item_active:"all_emails"==t.routeName},attrs:{command:"all_emails"}},[t._v(t._s(t.$t("All Email Activities")))])],1)],1)},[],!1,null,null,null).exports;const w=e({name:"GlobalLabelDrawer",props:["open"],components:{Confirm:d},data:function(){return{openDrawer:this.open,updateLabel:!1,visibleForm:!1,creatingLabel:!1,labelColors:this.appVars.available_funnel_label_colors,fetchingLabel:!1,labels:[],labelForm:{id:"",title:"",color:"#D6D8FF",slug:""}}},methods:{fetchLabels:function(){var t=this;this.fetchingLabel=!0,this.$get("labels").then(function(e){t.labels=e.labels}).catch(function(e){t.handleError(e)}).finally(function(){t.fetchingLabel=!1})},handleCreateLabelDialog:function(){var t=this;this.visibleForm=!0,this.$nextTick(function(){t.$refs.labelInput.focus()})},handleCreateLabel:function(){var t=this;this.creatingLabel=!0,this.labelForm.title?(this.updateLabel||(this.labelForm.slug=this.generateSlug(this.labelForm.title)),this.$post("labels",{label:this.labelForm}).then(function(e){t.$notify.success(e.message),t.fetchLabels(),t.$emit("callFetchLabels")}).catch(function(e){t.handleError(e)}).finally(function(){t.visibleForm=!1,t.creatingLabel=!1,t.labelForm={title:"",color:"#D6D8FF",slug:""}})):this.$notify.error(this.$t("Label name is required"))},handleUpdateLabel:function(){var t=this;if(this.creatingLabel=!0,!this.labelForm.title)return this.$notify.error(this.$t("Label name is required")),void(this.creatingLabel=!1);this.$put("labels/".concat(this.labelForm.id),{label:this.labelForm}).then(function(e){t.$notify.success(e.message),t.fetchLabels(),t.$emit("callFetchLabels")}).catch(function(e){t.handleError(e)}).finally(function(){t.visibleForm=!1,t.creatingLabel=!1,t.labelForm={title:"",color:"#D6D8FF",slug:""}})},generateSlug:function(t){return t.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},handleEditLabel:function(t){var e=this;this.updateLabel=!0,this.labelForm={id:t.id,title:t.title,color:t.settings.color,slug:t.slug},this.visibleForm=!0,this.$nextTick(function(){e.$refs.labelInput.focus()})},resetForm:function(){this.updateLabel=!1,this.labelForm={title:"",color:"#D6D8FF",slug:""},this.visibleForm=!1},handleDeleteLabel:function(t){var e=this;this.$del("labels/"+t).then(function(t){e.$notify.success(t.message),e.fetchLabels(),e.$emit("callFetchLabels")}).catch(function(t){e.handleError(t)}).finally(function(){})},handleCloseDrawer:function(){this.openDrawer=!1,this.$emit("close")}},mounted:function(){this.fetchLabels()}},function(){var t=this,e=t._self._c;return e("el-drawer",{staticClass:"fc_drawer fc_drawer_manage_labels",attrs:{"append-to-body":!0,title:t.visibleForm&&!t.updateLabel?t.$t("Create New Label"):t.$t("Manage Labels"),visible:t.openDrawer},on:{"update:visible":function(e){t.openDrawer=e},close:t.handleCloseDrawer}},[e("div",{staticClass:"fc_drawer_manage_labels_header"},[t.visibleForm?e("h3",{staticStyle:{cursor:"pointer"},on:{click:t.resetForm}},[e("i",{staticClass:"el-icon-back"}),t._v(" "+t._s(t.$t("Back to Labels")))]):e("h3",[t._v(t._s(t.$t("System Labels")))]),t._v(" "),t.visibleForm?t._e():e("el-button",{staticClass:"fc_primary_button",attrs:{type:"primary",size:"small"},on:{click:t.handleCreateLabelDialog}},[t._v(t._s(t.$t("Create New Label")))])],1),t._v(" "),e("div",{staticClass:"fc_drawer_manage_labels_body"},[t.fetchingLabel?e("el-skeleton",{attrs:{animated:"",rows:6}}):t._e(),t._v(" "),t.fetchingLabel||t.visibleForm?t._e():e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.labels}},[e("el-table-column",{attrs:{prop:"title",label:t.$t("Label Title")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticClass:"fc_label_name"},[e("span",{staticClass:"fc_label_color",style:"background:"+i.row.settings.color}),t._v(" "+t._s(i.row.title)+"\n                        ")])]}}],null,!1,3842702426)}),t._v(" "),e("el-table-column",{attrs:{prop:"slug",label:t.$t("Slug"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticClass:"fc_label_slug"},[t._v(t._s(i.row.slug))])]}}],null,!1,984215907)}),t._v(" "),e("el-table-column",{attrs:{width:"90",label:t.$t("Action")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"fc_drawer_label_action"},[e("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleEditLabel(i.row)}}}),t._v(" "),e("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.handleDeleteLabel(i.row.id)}}},[e("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",icon:"el-icon-delete"},slot:"reference"})],1)],1)]}}],null,!1,4232612796)})],1),t._v(" "),t.visibleForm?e("el-form",{staticClass:"fc_label_form",attrs:{"label-position":"top"}},[e("el-form-item",{attrs:{label:t.$t("Label Title")}},[e("el-input",{ref:"labelInput",attrs:{autocomplete:"off"},model:{value:t.labelForm.title,callback:function(e){t.$set(t.labelForm,"title",e)},expression:"labelForm.title"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Label Color")}},[e("el-radio-group",{staticClass:"fc_labels_radio",model:{value:t.labelForm.color,callback:function(e){t.$set(t.labelForm,"color",e)},expression:"labelForm.color"}},t._l(t.labelColors,function(t){return e("el-radio",{key:t,style:"background: "+t,attrs:{label:t}})}),1)],1),t._v(" "),e("el-form-item",[t.updateLabel?e("el-button",{staticClass:"fc_primary_button",attrs:{type:"primary",size:"small",disabled:t.creatingLabel},on:{click:t.handleUpdateLabel}},[t._v(t._s(t.$t("Save")))]):e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.creatingLabel,expression:"creatingLabel"}],staticClass:"fc_primary_button",attrs:{type:"primary",size:"small",disabled:t.creatingLabel},on:{click:t.handleCreateLabel}},[t._v(t._s(t.$t("Create")))]),t._v(" "),e("el-button",{attrs:{size:"small"},on:{click:t.resetForm}},[t._v(t._s(t.$t("Cancel")))])],1)],1):t._e()],1)])},[],!1,null,null,null).exports;const C=e({name:"BulkCampaignActions",props:["selectedCampaigns","options"],components:{Confirm:d},data:function(){return{actions:{},select_job:{action_name:"",selected_options:[]},doing_action:!1,select_status:"",selectedLabels:[]}},watch:{"select_job.action_name":{handler:function(){this.select_job.selected_options=[],this.select_status=""},deep:!0}},methods:{doBulkAction:function(){var t=this,e=[];this.each(this.selectedCampaigns,function(t){e.push(t.id)}),this.doing_action=!0,this.$post("campaigns/do-bulk-action",{action_name:this.select_job.action_name,labels:this.selectedLabels,campaign_ids:e}).then(function(e){t.$notify.success(e.message),t.$emit("refetch"),t.selectedLabels=[]}).catch(function(e){t.handleError(e)}).finally(function(){t.doing_action=!1})}},mounted:function(){this.actions={apply_labels:{label:this.$t("Apply Labels"),options:this.options.labels},delete_campaigns:{label:this.$t("Delete Campaigns")}}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_bulk_wrap"},[e("div",{staticClass:"fc_bulk_item"},[e("label",[t._v(t._s(t.$t("Select Action")))]),t._v(" "),e("el-select",{staticClass:"mt-5",attrs:{clearable:"",filterable:"",size:"mini",placeholder:t.$t("Select Bulk Action")},model:{value:t.select_job.action_name,callback:function(e){t.$set(t.select_job,"action_name",e)},expression:"select_job.action_name"}},t._l(t.actions,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t.label}})}),1)],1),t._v(" "),"apply_labels"===t.select_job.action_name?[e("el-select",{attrs:{filterable:"",size:"mini",placeholder:t.$t("Select Labels"),multiple:""},model:{value:t.selectedLabels,callback:function(e){t.selectedLabels=e},expression:"selectedLabels"}},t._l(t.options.labels,function(i){return e("el-option",{key:i.id,attrs:{value:i.id}},[e("span",{style:"background:"+i.settings.color+";padding: 2px 5px 4px 5px;border-radius: 4px;"},[t._v("\n                    "+t._s(i.title)+"\n                ")])])}),1),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"ml-5",attrs:{disable:t.doing_action,size:"mini",disabled:!t.selectedLabels.length,type:"success"},on:{click:function(e){return t.doBulkAction()}}},[t._v("\n            "+t._s(t.$t("Apply Label"))+"\n        ")])]:"delete_campaigns"==t.select_job.action_name?[e("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.doBulkAction()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action,size:"mini",type:"danger"},slot:"reference"},[t._v(t._s(t.$t("Delete Campaigns"))+"\n            ")])],1)]:t._e()],2)},[],!1,null,"376937b5",null).exports;const $=e({name:"PreviewIframeBuilder",props:{preview_html:{type:String,default:function(){return""}},campaign:{type:Object,default:function(){return{}}},campaign_id:{default:function(){return 0}},frame_height:{type:String,default:function(){return"500px"}},show_audit:{type:Boolean,default:function(){return!1}}},data:function(){return{loading_preview:!0,invalidDoms:[],preview_full_html:this.preview_html}},methods:{loadFrame:function(){var t=this.$refs.fc_ifr.attachShadow({mode:"closed"}),e=document.createElement("div");e.innerHTML=this.preview_full_html,t.appendChild(e),this.loading_preview=!1,this.checkDoms(this.preview_full_html)},fetchHtml:function(){var t=this;this.loading_preview=!0,this.showing_view=!0,this.$post("campaigns/email-preview-html",{campaign_id:this.campaign_id,disable_subscriber:"yes"}).then(function(e){t.preview_full_html=e.preview_html,t.loadFrame()}).catch(function(e){t.handleError(e)}).finally(function(){t.loading_preview=!1})},checkDoms:function(t){var e=this;if(this.show_audit){this.invalidDoms=[];var i=jQuery('a[href=""], a:not([href]), a[href="#"]',t);this.each(i,function(t){console.log(t),e.invalidDoms.push({text:t.text||"Empty Text / Image"})})}}},mounted:function(){this.campaign_id?this.fetchHtml():this.loadFrame()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_iframe_wrap"},[t.loading_preview?e("h3",[t._v(t._s(t.$t("Loading Preview. Please wait...")))]):t.show_audit&&t.invalidDoms&&t.invalidDoms.length?e("div",{staticClass:"el-alert el-alert--error is-light",staticStyle:{display:"block",overflow:"hidden",padding:"0 20px","margin-bottom":"0px"}},[e("h3",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.$t("Invalid_Link_Detected"))+" ("+t._s(t.invalidDoms.length)+")")]),t._v(" "),e("ul",{staticClass:"inline_disc_lists"},t._l(t.invalidDoms,function(i,n){return e("li",{key:n},[t._v(t._s(i.text))])}),0)]):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading_preview,expression:"!loading_preview"}],ref:"fc_ifr",staticStyle:{width:"100%",height:"500px",overflow:"auto"},style:{height:t.frame_height}})])},[],!1,null,null,null).exports;function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}const x=e({name:"ContactSelector",props:["field","value"],data:function(){return{model:this.value,loading:!1,options:{},appReady:!1}},watch:{model:function(t){this.$emit("input",t),this.$emit("contactSelected",this.options[t])}},methods:{fetchOptions:function(t){var e=this;this.loading=!0,this.$get("subscribers/search-contacts",{search:t,values:this.model}).then(function(t){e.options=t.contacts}).catch(function(t){e.handleError(t)}).finally(function(){e.loading=!1})}},mounted:function(){var t=this;this.model&&"0"!=this.model||this.field.is_multiple||(this.model=""),this.field.pre_options&&this.field.pre_options.length&&this.each(this.field.pre_options,function(e){e&&e.id&&(e.id=e.id.toString(),t.options[e.id]=e)}),this.appReady=!0,this.model&&"object"!=k(this.model)&&!this.options[this.model]&&this.fetchOptions("")}},function(){var t=this,e=t._self._c;return t.appReady?e("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{multiple:t.field.is_multiple,filterable:"",remote:!t.field.cacheable,clearable:t.field.clearable,disabled:t.field.disabled,"reserve-keyword":"",size:t.field.size,placeholder:t.field.placeholder||t.$t("Search contact"),"remote-method":t.fetchOptions},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.options,function(t){return e("el-option",{key:t.id,attrs:{label:t.full_name+" ("+t.email+")",value:t.id}})}),1):t._e()},[],!1,null,null,null).exports;const S=e({name:"EmailPreview",props:["campaign","show_audit","auto_load","by_campaign_id"],components:{PreviewIframeBuilder:$,ContactSelector:x},data:function(){return{showing_view:!1,preview_html:"",loading_preview:!1,showChanger:!1,selectedId:!1,selectedContact:!1}},methods:{fetchHtml:function(){var t=this;this.loading_preview=!0,this.showing_view=!0;var e={campaign:this.campaign,contact_id:this.selectedId};this.by_campaign_id&&(e.campaign={id:this.campaign.id},e.campaign_id=this.campaign.id),this.$post("campaigns/email-preview-html",e).then(function(e){t.preview_html=e.preview_html,t.$emit("dataLoaded",e)}).catch(function(e){t.handleError(e)}).finally(function(){t.loading_preview=!1,t.showChanger=!1})},fireClose:function(){this.$emit("modalClosed"),this.showing_view=!1}},mounted:function(){this.auto_load&&this.fetchHtml()}},function(){var t=this,e=t._self._c;return e("span",{staticClass:"fc_email_preview",staticStyle:{display:"inline-block"}},[t.auto_load?t._e():e("el-button",{attrs:{size:"mini",icon:"el-icon-view",type:"primary"},on:{click:function(e){return t.fetchHtml()}}}),t._v(" "),e("el-drawer",{staticClass:"fc_company_info_drawer",attrs:{"with-header":!0,size:t.globalDrawerSize,title:t.$t("Email Preview (for better view, please send test email)"),"append-to-body":!0,"before-close":t.fireClose,visible:t.showing_view},on:{"update:visible":function(e){t.showing_view=e}}},[t.loading_preview?e("div",{staticStyle:{padding:"20px"}},[e("el-skeleton",{attrs:{rows:10,animated:!0}})],1):t.preview_html?e("div",[e("preview-iframe-builder",{attrs:{preview_html:t.preview_html,frame_height:"85vh",show_audit:!0}}),t._v(" "),e("div",{staticClass:"fc_company_save_wrap",staticStyle:{"background-color":"#f7fafc",padding:"10px 20px !important"}},[e("div",[t.selectedContact?e("span",[t._v("Showing preview for "+t._s(t.selectedContact.full_name)+" ("+t._s(t.selectedContact.email)+")")]):e("span",[t._v(t._s(t.$t("Showing preview for current contact")))]),t._v(" "),e("el-popover",{attrs:{placement:"top",width:"400",trigger:"manual"},model:{value:t.showChanger,callback:function(e){t.showChanger=e},expression:"showChanger"}},[t.showChanger?e("div",{staticClass:"contact_selector"},[e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.$t("Select Contact")))]),t._v(" "),e("contact-selector",{attrs:{field:{clearable:!0,size:"small"}},on:{contactSelected:function(e){t.selectedContact=e}},model:{value:t.selectedId,callback:function(e){t.selectedId=e},expression:"selectedId"}}),t._v(" "),e("div",{staticStyle:{padding:"20px 0"}},[e("el-button",{attrs:{disabled:!t.selectedId,size:"small",icon:"el-icon-refresh",type:"success"},on:{click:function(e){return t.fetchHtml()}}},[t._v("\n                                       "+t._s(t.$t("Refresh Email Preview"))+"\n                                ")])],1)],1):t._e(),t._v(" "),e("el-button",{attrs:{slot:"reference",size:"small",type:"default"},on:{click:function(e){t.showChanger=!t.showChanger}},slot:"reference"},[t._v(t._s(t.$t("Change preview contact")))])],1)],1)])],1):t._e()])],1)},[],!1,null,null,null).exports,A={name:"Campaigns",components:{BulkCampaignActions:C,Labels:w,Confirm:d,Pagination:m,UpdateOrCreate:v,InlineDoc:b,EmailHeaderPopNav:y,EmailPreview:S},data:function(){return{campaigns:[],pagination:{total:0,per_page:10,current_page:1},loading:!0,dialogVisible:!1,dialogTitle:this.$t("Add Campaign Title"),searchBy:"",filterByStatuses:[],statuses:[{key:"draft",label:this.$t("Draft")},{key:"pending",label:this.$t("Pending")},{key:"archived",label:this.$t("Archived")},{key:"incomplete",label:this.$t("Incomplete")},{key:"purged",label:this.$t("Purged")},{key:"processing",label:this.$t("Processing")},{key:"pending-scheduled",label:this.$t("Scheduled (pending)")},{key:"scheduled",label:this.$t("Scheduled")}],sort_type:"DESC",sort_by:"id",deleting:!1,selection:!1,selectedCampaigns:[],showingLabelsConfig:!1,options:{labels:[]},labelFilter:[],previewingCampaign:null}},methods:{create:function(){this.toggleDialog(!0)},toggleDialog:function(t){this.dialogVisible=t},isNotEditable:function(t){return["archived","working"].indexOf(t.status)>=0},scheduledAt:function(t){return null===t?this.$t("Not Scheduled"):this.nsDateFormat(t,"MMMM Do, YYYY [at] h:mm A")},saved:function(t){this.fetch(),this.$router.push({name:"campaign",params:{id:t.id}})},setup:function(){var t=this.$route.query;return window.fcrm_camp_sub_params&&(t=window.fcrm_camp_sub_params),this.sort_by=t.sort_by,this.sort_type=t.sort_type,this.searchBy=t.searchBy,this.filterByStatuses=t.statuses,this.with=t.with,t.page&&(this.pagination.current_page=parseInt(t.page)),t.per_page&&(this.pagination.per_page=parseInt(t.per_page)),!1},fetch:function(){var t=this;this.loading=!0;var e={sort_by:this.sort_by,sort_type:this.sort_type,searchBy:this.searchBy,statuses:this.filterByStatuses,per_page:this.pagination.per_page,page:this.pagination.current_page,labels:this.labelFilter,with:["stats"]},i={};Object.keys(e).forEach(function(t){void 0!==e[t]&&(i[t]=e[t])}),window.fcrm_camp_sub_params=i,i.t=Date.now(),this.$router.replace({name:"campaigns",query:i}),this.$get("campaigns",e).then(function(e){t.loading=!1,t.campaigns=e.campaigns.data,t.pagination.total=e.campaigns.total,t.registerHeartBeat(),t.$bus.$emit("refresh-stats")})},searchCampaigns:function(){this.fetch()},remove:function(t){var e=this;this.$del("campaigns/".concat(t.id)).then(function(t){e.fetch(),e.$notify.success({title:e.$t("Great!"),message:e.$t("Campaign deleted."),offset:19})}).catch(function(t){e.$message(t.message,e.$t("Oops!"),{center:!0,type:"warning",confirmButtonText:e.$t("Close"),dangerouslyUseHTMLString:!0,callback:function(t){e.$router.push({name:"campaigns",query:{t:(new Date).getTime()}})}})})},deleteSelected:function(){var t=this,e=[];this.each(this.selectedCampaigns,function(t){e.push(t.id)}),this.doing_action=!0,this.$post("campaigns/do-bulk-action",{campaign_ids:e}).then(function(e){t.$notify.success(e.message),t.fetch()}).catch(function(e){t.handleError(e)}).finally(function(){t.doing_action=!1})},onSelection:function(t){this.selection=!!t.length,this.selectedCampaigns=t},sortCampaigns:function(t){this.sort_type=t.order,this.sort_by=t.prop,this.fetch()},registerHeartBeat:function(){var t=this;jQuery(document).off("heartbeat-send").on("heartbeat-send",function(e,i){i.fluentcrm_campaign_ids=t.campaigns.map(function(t){return t.id})}),jQuery(document).off("heartbeat-tick").on("heartbeat-tick",function(e,i){if(i.fluentcrm_campaigns){var n=function(e){var n=i.fluentcrm_campaigns[e];t.campaigns.forEach(function(t){t.id===e&&t.status!==n&&(t.status=n)})};for(var s in i.fluentcrm_campaigns)n(s)}})},routeCampaign:function(t){var e="campaign-view";"draft"===t.status&&(e="campaign"),this.$router.push({name:e,params:{id:t.id},query:{t:(new Date).getTime(),step:t.next_step&&parseInt(t.next_step)<=3?t.next_step:0}})},generateUrl:function(t){var e="campaign-view";return"draft"===t.status&&(e="campaign"),this.$router.resolve({name:e,params:{id:t.id},query:{t:(new Date).getTime(),step:t.next_step&&parseInt(t.next_step)<=3?t.next_step:0}}).href},customOpenRateSort:function(t,e){return(t.stats&&t.stats.sent&&t.stats.views?t.stats.views/t.stats.sent:0)-(e.stats&&e.stats.sent&&e.stats.views?e.stats.views/e.stats.sent:0)},customClickRateSort:function(t,e){return(t.stats&&t.stats.sent&&t.stats.clicks?t.stats.clicks/t.stats.sent:0)-(e.stats&&e.stats.sent&&e.stats.clicks?e.stats.clicks/e.stats.sent:0)},getPercent:function(t,e){return e&&t?parseFloat(t/e*100).toFixed(2)+"%":"--"},cloneCampaign:function(t){var e=this;this.loading=!0,this.$post("campaigns/".concat(t.id,"/duplicate")).then(function(t){e.$notify.success(t.message),e.routeCampaign(t.campaign)}).catch(function(t){e.handleError(t)}).finally(function(){e.loading=!1})},handleSortable:function(t){"descending"===t.order?(this.sort_by=t.prop,this.sort_type="DESC"):(this.sort_by=t.prop,this.sort_type="ASC"),this.fetch()},fetchLabels:function(){var t=this;this.$get("labels").then(function(e){t.options.labels=e.labels}).catch(function(e){t.handleError(e)}).finally(function(){})},showLabelDialog:function(){this.showingLabelsConfig=!0},closeDrawer:function(){this.showingLabelsConfig=!1},applyLabels:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"attach";this.$put("campaigns/"+t.id+"/update-labels",{action:n,label_ids:e}).then(function(t){i.$notify.success(t.message),i.fetch()}).catch(function(t){i.handleError(t)}).finally(function(){})},exportCampaign:function(t){this.has_campaign_pro?location.href=window.ajaxurl+"?"+jQuery.param({action:"fluentcrm_export_email_campaign",campaign_id:t.id}):this.$notify.error(this.$t("Campaign_Export_Alert"))},showPreview:function(t){this.previewingCampaign=t}},watch:{filterByStatuses:function(){this.fetch()}},mounted:function(){this.setup(),this.fetch(),this.fetchLabels(),this.changeTitle(this.$t("Email Campaigns"))}};var E=i(3959),T={insert:"head",singleton:!1};a()(E.A,T);E.A.locals;const P=e(A,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[e("email-header-pop-nav",{attrs:{head_title:t.$t("Email Campaigns")}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.pagination.total,expression:"pagination.total"}],staticClass:"ff_small"},[t._v("("+t._s(t._f("formatMoney")(t.pagination.total))+")")])],1)]),t._v(" "),t.hasPermission("fcrm_manage_emails")?e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[t.selection?t._e():e("el-input",{staticClass:"mr-5",attrs:{size:"mini",placeholder:t.$t("Search by title...")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch()}},model:{value:t.searchBy,callback:function(e){t.searchBy=e},expression:"searchBy"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.fetch()}},slot:"append"})],1),t._v(" "),e("el-select",{staticClass:"mr-5",attrs:{size:"mini",multiple:"",clearable:"",placeholder:t.$t("Filter by status")},on:{change:t.fetch},model:{value:t.filterByStatuses,callback:function(e){t.filterByStatuses=e},expression:"filterByStatuses"}},t._l(t.statuses,function(t){return e("el-option",{key:t.key,attrs:{value:t.key,label:t.label}})}),1),t._v(" "),e("el-select",{staticClass:"mr-5",attrs:{size:"mini",multiple:"",clearable:"",placeholder:t.$t("Filter by Labels"),filterable:""},on:{change:t.fetch},model:{value:t.labelFilter,callback:function(e){t.labelFilter=e},expression:"labelFilter"}},t._l(t.options.labels,function(i){return e("el-option",{key:i.id,attrs:{value:i.id,label:i.title}},[e("span",{style:"background:"+i.settings.color+";padding: 2px 5px 4px 5px;border-radius: 4px;"},[t._v("\n                        "+t._s(i.title)+"\n                    ")])])}),1),t._v(" "),e("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:t.create}},[t._v("\n                "+t._s(t.$t("Create New Campaign"))+"\n            ")]),t._v(" "),e("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-upload"},on:{click:function(e){return t.$router.push({name:"import_email_campaigns"})}}},[t._v("\n                "+t._s(t.$t("Import"))+"\n            ")]),t._v(" "),e("inline-doc",{attrs:{doc_id:389}}),t._v(" "),e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link"},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{cursor:"pointer"}})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:t.showLabelDialog}},[t._v("\n                            "+t._s(t.$t("Manage Labels"))+"\n                        ")])])],1)],1)],1):t._e()]),t._v(" "),t.loading?e("div",{staticClass:"fc_loading_bar",staticStyle:{position:"relative"}},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.selection?e("div",{staticClass:"fluentcrm-header-secondary",staticStyle:{position:"relative"}},[e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{md:12,sm:24}},[e("bulk-campaign-actions",{attrs:{selectedCampaigns:t.selectedCampaigns,options:t.options},on:{refetch:t.fetch}}),t._v("\n                \n            ")],1)],1)],1):t._e(),t._v(" "),e("div",{staticClass:"fluentcrm_body"},[t.loading&&!t.pagination.total?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:10}}):t._e(),t._v(" "),t.pagination.total?e("div",{staticClass:"campaigns-table",staticStyle:{"padding-bottom":"10px"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{border:"",stripe:"",data:t.campaigns},on:{"sort-change":t.handleSortable,"selection-change":t.onSelection}},[e("el-table-column",{attrs:{type:"selection",fixed:"",width:45}}),t._v(" "),e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"fluentcrm_title_cards"},[e("h3",{staticStyle:{margin:"0"}},[t._v(t._s(t.$t("Quick Stats")))]),t._v(" "),i.row.stats?e("ul",{staticClass:"fluentcrm_inline_stats"},[e("li",[e("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(i.row.stats.sent||"--"))]),t._v(" "),e("p",[t._v(t._s(t.$t("Sent")))])]),t._v(" "),e("li",{attrs:{title:i.row.stats.views}},[e("span",{staticClass:"fluentcrm_digit"},[t._v("\n                                        "+t._s(t.getPercent(i.row.stats.views,i.row.stats.sent))+"\n                                    ")]),t._v(" "),e("p",[t._v(t._s(t.$t("Opened")))])]),t._v(" "),e("li",{attrs:{title:i.row.stats.clicks}},[e("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.getPercent(i.row.stats.clicks,i.row.stats.sent)))]),t._v(" "),e("p",[t._v(t._s(t.$t("Clicked")))])]),t._v(" "),e("li",{attrs:{title:i.row.stats.unsubscribers}},[e("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.getPercent(i.row.stats.unsubscribers,i.row.stats.sent)))]),t._v(" "),e("p",[t._v(t._s(t.$t("Unsubscribed")))])]),t._v(" "),i.row.stats.revenue?e("li",[e("span",{staticClass:"fluentcrm_digit"},[t._v("\n                                            "+t._s(i.row.stats.revenue.total)+"\n                                        ")]),t._v(" "),e("p",[t._v(t._s(i.row.stats.revenue.label))])]):t._e()]):t._e()]),t._v(" "),e("div",{staticClass:"fluentcrm_card_actions"},[e("el-button",{directives:[{name:"show",rawName:"v-show",value:"draft"!==i.row.status,expression:"scope.row.status !== 'draft'"}],staticClass:"fluentcrm-report-text-btn",attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.routeCampaign(i.row)}}},[t._v("\n                                "+t._s(t.$t("Reports"))+"\n                            ")]),t._v(" "),t.hasPermission("fcrm_manage_emails")?[e("el-button",{staticClass:"fluentcrm-duplicate-campaign",attrs:{type:"text",size:"mini",icon:"el-icon-download"},on:{click:function(e){return t.exportCampaign(i.row)}}},[t._v("\n                                    "+t._s(t.$t("Export"))+"\n                                ")]),t._v(" "),e("el-button",{staticClass:"fluentcrm-duplicate-campaign",attrs:{type:"text",size:"mini",icon:"el-icon-document-copy"},on:{click:function(e){return t.cloneCampaign(i.row)}}},[t._v("\n                                    "+t._s(t.$t("Duplicate"))+"\n                                ")]),t._v(" "),e("confirm",{directives:[{name:"show",rawName:"v-show",value:"working"!==i.row.status,expression:"scope.row.status !== 'working'"}],attrs:{placement:"top-start"},on:{yes:function(e){return t.remove(i.row)}}},[e("el-button",{staticClass:"fluentcrm-delete-campaign",attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[t._v("\n                                        "+t._s(t.$t("Delete"))+"\n                                    ")])],1)]:t._e()],2)]}}],null,!1,1513770989)}),t._v(" "),e("el-table-column",{attrs:{sortable:"",property:"title","min-width":250,label:t.$t("Title"),prop:"title"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("a",{attrs:{href:t.generateUrl(i.row)}},[t._v(t._s(i.row.title))]),t._v(" "),"draft"==i.row.status?e("span",{staticClass:"fluentcrm_cart_cta"},[e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.routeCampaign(i.row)}}},[t._v("\n                                "+t._s(t.$t("Setup"))+"\n                            ")])],1):e("span",[e("el-button",{attrs:{icon:"el-icon-view",size:"mini",type:"text"},on:{click:function(e){return t.showPreview(i.row)}}})],1)]}}],null,!1,758864999)}),t._v(" "),e("el-table-column",{attrs:{sortable:"",width:120,property:"status",label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("ucFirst")(e.row.status))+"\n                    ")]}}],null,!1,4073127260)}),t._v(" "),e("el-table-column",{attrs:{width:"250",label:t.$t("Labels")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.labels?e("div",{staticClass:"fc_funnel_labels"},t._l(i.row.labels,function(n,s){return e("el-tag",{key:s,style:"background:"+n.color,attrs:{size:"mini"}},[t._v("\n                                "+t._s(n.title)+"\n                                "),e("Confirm",{attrs:{message:t.$t("Remove_Label_From_campaign_Message")},on:{yes:function(e){return t.applyLabels(i.row,n.id,"detach")}}},[e("i",{staticClass:"el-tag__close el-icon-close",attrs:{slot:"reference"},slot:"reference"})])],1)}),1):t._e()]}}],null,!1,1352563911)}),t._v(" "),e("el-table-column",{attrs:{sortable:"",property:"created_at",width:180,label:t.$t("Created at")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(i.row.created_at)))])]}}],null,!1,2525433801)}),t._v(" "),e("el-table-column",{attrs:{sortable:"",property:"scheduled_at",width:180,label:t.$t("Broadcast")},scopedSlots:t._u([{key:"default",fn:function(i){return["processing"==i.row.status?e("span",[t._v("soon...")]):i.row.scheduled_at&&"draft"!=i.row.status?e("span",{attrs:{title:i.row.scheduled_at}},[t._v(t._s(t._f("nsHumanDiffTime")(i.row.scheduled_at)))]):e("span",[t._v(t._s(t.$t("n/a")))])]}}],null,!1,1680440191)}),t._v(" "),e("el-table-column",{attrs:{sortable:"",property:"recipients_count",width:130,label:t.$t("Recipients")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.recipients_count?e("span",[t._v(t._s(t.formatMoney(i.row.recipients_count))+" "),"processing"==i.row.status?e("span",[t._v("++")]):t._e()]):e("span",[t._v(t._s(t.$t("n/a")))])]}}],null,!1,2501710699)}),t._v(" "),e("el-table-column",{attrs:{sortable:"","sort-method":t.customOpenRateSort,width:110,label:t.$t("Open Rate")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.stats.views&&i.row.stats.sent?e("span",{staticClass:"fluentcrm_digit",attrs:{title:t.$t("Open Rate")}},[t._v("\n                                "+t._s(t.getPercent(i.row.stats.views,i.row.stats.sent))+"\n                            ")]):e("span",[t._v("--")])]}}],null,!1,2333146190)},[e("template",{slot:"header"},[t._v("\n                        "+t._s(t.$t("Open Rate"))+"\n                        "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("open_rate_info"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1)],2),t._v(" "),e("el-table-column",{attrs:{sortable:"","sort-method":t.customClickRateSort,width:120,label:t.$t("Click Rate")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.stats.clicks&&i.row.stats.sent?e("span",{staticClass:"fluentcrm_digit",attrs:{title:t.$t("Click Rate")}},[t._v("\n                             "+t._s(t.getPercent(i.row.stats.clicks,i.row.stats.sent))+"\n                            ")]):e("span",[t._v("--")])]}}],null,!1,2931057140)},[e("template",{slot:"header"},[t._v("\n                        "+t._s(t.$t("Click Rate"))+"\n                        "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("click_rate_info"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1)],2),t._v(" "),e("el-table-column",{attrs:{width:130,label:t.$t("Revenue")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.stats.revenue?e("span",{attrs:{title:t.$t("Revenue")}},[t._v("\n                            "+t._s(i.row.stats.revenue.total)+" "),e("span",{staticStyle:{"font-size":"70%"}},[t._v(t._s(i.row.stats.revenue.currency))])]):e("span",[t._v("--")])]}}],null,!1,1920275932)})],1),t._v(" "),e("el-row",[e("el-col",{attrs:{md:12}},[t._v("\n                    \n                ")]),t._v(" "),e("el-col",{attrs:{md:12}},[e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)],1)],1):e("div",[t.loading?t._e():e("div",{staticClass:"fluentcrm_hero_box"},[e("h2",[t._v(t._s(t.$t("Cam_Looks_lydnbaecy")))]),t._v(" "),e("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:t.create}},[t._v("\n                    "+t._s(t.$t("Cam_Create_YFEC"))+"\n                ")])],1)])],1),t._v(" "),e("UpdateOrCreate",{attrs:{dialogVisible:t.dialogVisible,dialogTitle:t.dialogTitle},on:{saved:t.saved,toggleDialog:t.toggleDialog}}),t._v(" "),t.showingLabelsConfig?e("labels",{attrs:{open:t.showingLabelsConfig},on:{close:t.closeDrawer,callFetchLabels:t.fetchLabels}}):t._e(),t._v(" "),t.previewingCampaign?e("div",[e("email-preview",{attrs:{auto_load:!0,by_campaign_id:!0,campaign:t.previewingCampaign},on:{modalClosed:function(){t.previewingCampaign=null}}})],1):t._e()],1)},[],!1,null,null,null).exports;function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,s,a,o,r=[],l=!0,c=!1;try{if(a=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=a.call(i)).done)&&(r.push(n.value),r.length!==e);l=!0);}catch(t){c=!0,s=t}finally{try{if(!l&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(c)throw s}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return D(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?D(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}const F=e({model:{prop:"value",event:"update"},name:"inputPopover",watch:{value:function(t,e){this.model=t},model:function(t,e){this.model=t}},props:{value:String,placeholder:{type:String,default:""},placement:{type:String,default:"bottom"},icon:{type:String,default:"el-icon-more"},fieldType:{type:String,default:"text"},popper_class:{type:String,default:""},data:Array,attrName:{type:String,default:"attribute_name"},popper_extra:{type:String,default:""},doc_url:{type:String,default:function(){return""}}},data:function(){return{model:this.value,activeIndex:"0",visible:!1,searchQuery:""}},methods:{selectEmoji:function(t){this.insertShortcode(t.data)},insertShortcode:function(t){this.model||(this.model=""),this.model?this.model=this.model.trim()+" "+t.replace(/param_name/,this.attrName):this.model+=t.replace(/param_name/,this.attrName),this.visible=!1,this.$emit("update",this.model)},filteredShortcodes:function(t){if(!this.searchQuery)return t;var e=this.searchQuery.toLowerCase(),i={};return Object.entries(t).forEach(function(t){var n=O(t,2),s=n[0],a=n[1];(s.toLowerCase().includes(e)||a.toLowerCase().includes(e))&&(i[s]=a)}),i}}},function(){var t=this,e=t._self._c;return e("div",[e("el-popover",{ref:"input-popover",attrs:{placement:"right-end","popper-class":"fcrm-smartcodes-popover el-dropdown-list-wrapper "+t.popper_extra,trigger:"click"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("div",{staticClass:"el_pop_data_group"},[e("div",{staticClass:"el_pop_data_headings"},[e("ul",t._l(t.data,function(i,n){return e("li",{key:n,class:t.activeIndex==n?"active_item_selected":"",attrs:{"data-item_index":n},on:{click:function(e){t.activeIndex=n}}},[t._v("\n                        "+t._s(i.title)+"\n                    ")])}),0),t._v(" "),t.doc_url?e("div",{staticClass:"pop_doc"},[e("a",{attrs:{href:t.doc_url,target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Learn More")))])]):t._e()]),t._v(" "),e("div",{staticClass:"el_pop_data_body"},[e("div",{staticClass:"el_pop_search"},[e("el-input",{attrs:{placeholder:t.$t("Search shortcodes..."),size:"small",clearable:""},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1),t._v(" "),t._l(t.data,function(i,n){return e("div",{key:n},[e("ul",{directives:[{name:"show",rawName:"v-show",value:t.activeIndex==n,expression:"activeIndex == current_index"}],class:"el_pop_body_item_"+n},t._l(t.filteredShortcodes(i.shortcodes),function(i,n){return e("li",{key:n,on:{click:function(e){return t.insertShortcode(n)}}},[t._v("\n                            "+t._s(i)),e("span",[t._v(t._s(n))])])}),0)])})],2)])]),t._v(" "),"textarea"==t.fieldType?e("div",{staticClass:"input-textarea-value"},[e("i",{directives:[{name:"popover",rawName:"v-popover:input-popover",arg:"input-popover"}],staticClass:"icon el-icon-tickets"}),t._v(" "),e("el-input",{attrs:{placeholder:t.placeholder,rows:4,type:"textarea"},on:{input:function(e){return t.$emit("update",e)}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1):e("el-input",{staticClass:"fc_pop_append",attrs:{placeholder:t.placeholder,type:t.fieldType},on:{input:function(e){return t.$emit("update",e)}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[e("template",{slot:"append"},[e("span",{directives:[{name:"popover",rawName:"v-popover:input-popover",arg:"input-popover"}],staticClass:"fluentcrm_url fluentcrm_clickable",class:t.icon})])],2)],1)},[],!1,null,null,null).exports;const j=e({name:"DynamicSegmentCampaignPromo"},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_promo_body"},[e("div",{staticClass:"promo_block",staticStyle:{background:"white",padding:"10px","text-align":"center",display:"block",overflow:"hidden"}},[e("h2",[t._v(t._s(t.$t("AbEmailSubjectPromo.title")))]),t._v(" "),e("p",[t._v("\n            "+t._s(t.$t("AbEmailSubjectPromo.desc"))+"\n        ")]),t._v(" "),e("div",{},[e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                "+t._s(t.$t("Get FluentCRM Pro"))+"\n            ")])])])])},[],!1,null,null,null).exports;const I=e({name:"InputText",props:["field","value"],data:function(){return{selectedMail:this.value,model:this.value,dialogWarningVisible:!1,warningMessage:this.$t("Warning default email change")}},watch:{model:function(t){this.$emit("input",t),null!=t&&t!=this.selectedMail&&(this.dialogWarningVisible=!0),null!=t&&t==this.selectedMail&&(this.dialogWarningVisible=!1)}},methods:{cancelChangeDefaultEmail:function(){this.model=this.selectedMail,this.dialogWarningVisible=!1},confirmChangeDefaultEmail:function(){this.dialogWarningVisible=!1,this.selectedMail=this.model}}},function(){var t=this,e=t._self._c;return e("div",[t.appVars.verified_senders.length?e("el-select",{attrs:{placeholder:t.field.placeholder,filterable:"","allow-create":""},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.appVars.verified_senders,function(t){return e("el-option",{key:t,attrs:{value:t}})}),1):e("el-input",{attrs:{type:t.field.data_type,placeholder:t.field.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),t._v(" "),t.field.show_warning?e("div",[e("el-dialog",{attrs:{title:"Confirm",visible:t.dialogWarningVisible,"close-on-click-modal":!1,"append-to-body":!0,width:"30%"},on:{"update:visible":function(e){t.dialogWarningVisible=e}}},[e("span",[t._v(t._s(t.warningMessage+" ")),e("strong",[t._v(t._s(t.model+"."))])]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelChangeDefaultEmail}},[t._v("Cancel")]),t._v(" "),e("el-button",{attrs:{type:"warning"},on:{click:t.confirmChangeDefaultEmail}},[t._v("Continue")])],1)])],1):t._e()],1)},[],!1,null,null,null).exports;const L=e({name:"MailerSettings",components:{VerifiedEmailInput:I},props:{mailer_settings:{type:Object,default:function(){return{from_name:"",from_email:"",reply_to_name:"",reply_to_email:"",is_custom:"no"}}}},mounted:function(){}},function(){var t=this,e=t._self._c;return e("div",[e("el-form-item",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.mailer_settings.is_custom,callback:function(e){t.$set(t.mailer_settings,"is_custom",e)},expression:"mailer_settings.is_custom"}},[t._v(t._s(t.$t("Vie_Set_CFNaE")))])],1),t._v(" "),"yes"==t.mailer_settings.is_custom?e("div",{staticClass:"fc_highlight_gray"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("From Name")}},[e("el-input",{attrs:{placeholder:t.$t("From Name")},model:{value:t.mailer_settings.from_name,callback:function(e){t.$set(t.mailer_settings,"from_name",e)},expression:"mailer_settings.from_name"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("From Email")}},[e("verified-email-input",{attrs:{field:{placeholder:t.$t("From Email"),"data-type":"email"}},model:{value:t.mailer_settings.from_email,callback:function(e){t.$set(t.mailer_settings,"from_email",e)},expression:"mailer_settings.from_email"}}),t._v(" "),e("p",{staticStyle:{margin:"0",padding:"0","font-size":"10px"}},[t._v(t._s(t.$t("Vie_Please_msteisbyS")))])],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Reply To Name")}},[e("el-input",{attrs:{placeholder:t.$t("Reply To Name")},model:{value:t.mailer_settings.reply_to_name,callback:function(e){t.$set(t.mailer_settings,"reply_to_name",e)},expression:"mailer_settings.reply_to_name"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Reply To Email")}},[e("el-input",{attrs:{placeholder:t.$t("Reply To Email"),type:"email"},model:{value:t.mailer_settings.reply_to_email,callback:function(e){t.$set(t.mailer_settings,"reply_to_email",e)},expression:"mailer_settings.reply_to_email"}})],1)],1)],1)],1):t._e()],1)},[],!1,null,null,null).exports;const N=e({name:"EmailSubjects",props:["campaign","label_align","multi_subject","mailer_settings"],components:{InputPopover:F,AbEmailSubjectPromo:j,MailerConfig:L},data:function(){return{loading:!1,codes_ready:!1,smartcodes:window.fcAdmin.globalSmartCodes,hide_subject:!1,multi_subject_status:!(!this.campaign.subjects||!this.campaign.subjects.length)}},methods:{addSubject:function(){this.campaign.subjects.push({key:50,value:""})},removeSubject:function(t){this.campaign.subjects.splice(t,1)},maybeResetSubject:function(){this.multi_subject_status&&this.has_campaign_pro?this.campaign.subjects&&this.campaign.subjects.length||(this.campaign.subjects=[],this.campaign.subjects.push({key:50,value:""})):this.campaign.subjects=[]}},mounted:function(){}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_email_composer"},[e("el-form",{attrs:{"label-position":t.label_align,"label-width":"220px",model:t.campaign}},[e("el-form-item",{attrs:{label:t.$t("Email Subject")}},[e("input-popover",{attrs:{doc_url:"https://fluentcrm.com/docs/merge-codes-smart-codes-usage/",popper_extra:"fc_with_c_fields",placeholder:t.$t("Email Subject"),data:t.smartcodes},model:{value:t.campaign.email_subject,callback:function(e){t.$set(t.campaign,"email_subject",e)},expression:"campaign.email_subject"}}),t._v(" "),t.multi_subject_status?e("p",{staticStyle:{margin:"0"}},[t._v(t._s(t.$t("A_B_Testing_Alert")))]):t._e()],1),t._v(" "),t.multi_subject?[e("el-form-item",[e("el-checkbox",{on:{change:function(e){return t.maybeResetSubject()}},model:{value:t.multi_subject_status,callback:function(e){t.multi_subject_status=e},expression:"multi_subject_status"}},[t._v("\n                    "+t._s(t.$t("Ema_Enable_Atfes"))+"\n                ")])],1),t._v(" "),t.multi_subject_status?[t.has_campaign_pro?e("div",[e("p",[t._v(t._s(t.$t("Ema_Your_ppwbctpair")))]),t._v(" "),e("table",{staticClass:"fc_horizontal_table"},[e("thead",[e("tr",[e("th",{staticStyle:{width:"60%"}},[t._v(t._s(t.$t("Subject")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Priority (%)")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),e("tbody",t._l(t.campaign.subjects,function(i,n){return e("tr",{key:n},[e("td",[e("input-popover",{attrs:{doc_url:"https://fluentcrm.com/docs/merge-codes-smart-codes-usage/",placeholder:t.$t("Subject Test")+" "+(n+1),data:t.smartcodes},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"subject.value"}})],1),t._v(" "),e("td",[e("el-input-number",{attrs:{min:1,max:99},model:{value:i.key,callback:function(e){t.$set(i,"key",e)},expression:"subject.key"}})],1),t._v(" "),e("td",[e("el-button",{attrs:{disabled:1==t.campaign.subjects.length,type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.removeSubject(n)}}})],1)])}),0)]),t._v(" "),e("div",{staticClass:"text-align-right"},[e("el-button",{attrs:{type:"info",size:"small"},on:{click:t.addSubject}},[t._v(t._s(t.$t("Add More")))])],1)]):e("div",[e("ab-email-subject-promo")],1)]:t._e()]:t._e(),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Email Pre-Header")}},[e("el-input",{attrs:{type:"textarea",placeholder:t.$t("Email Pre-Header"),rows:2},model:{value:t.campaign.email_pre_header,callback:function(e){t.$set(t.campaign,"email_pre_header",e)},expression:"campaign.email_pre_header"}})],1),t._v(" "),t.mailer_settings&&t.campaign.settings.mailer_settings?[e("mailer-config",{staticClass:"fc_its_gray",attrs:{mailer_settings:t.campaign.settings.mailer_settings}})]:t._e(),t._v(" "),e("el-form-item",[e("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.campaign.utm_status,callback:function(e){t.$set(t.campaign,"utm_status",e)},expression:"campaign.utm_status"}},[t._v("\n                "+t._s(t.$t("Ema_Add_UPFU"))+"\n            ")])],1),t._v(" "),1==t.campaign.utm_status||"1"==t.campaign.utm_status?e("div",{staticClass:"fluentcrm_highlight_white"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Campaign Source (required)")}},[e("el-input",{attrs:{placeholder:t.$t("The referrer: (e.g. google, newsletter)")},model:{value:t.campaign.utm_source,callback:function(e){t.$set(t.campaign,"utm_source",e)},expression:"campaign.utm_source"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Campaign Medium (required)")}},[e("el-input",{attrs:{placeholder:t.$t("Marketing medium: (e.g. cpc, banner, email)")},model:{value:t.campaign.utm_medium,callback:function(e){t.$set(t.campaign,"utm_medium",e)},expression:"campaign.utm_medium"}})],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Campaign Name (required)")}},[e("el-input",{attrs:{placeholder:t.$t("Product, promo code, or slogan (e.g. spring_sale)")},model:{value:t.campaign.utm_campaign,callback:function(e){t.$set(t.campaign,"utm_campaign",e)},expression:"campaign.utm_campaign"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Campaign Term")}},[e("el-input",{attrs:{placeholder:t.$t("Identify the paid keywords")},model:{value:t.campaign.utm_term,callback:function(e){t.$set(t.campaign,"utm_term",e)},expression:"campaign.utm_term"}})],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Campaign Content")}},[e("el-input",{attrs:{placeholder:t.$t("Use to differentiate ads")},model:{value:t.campaign.utm_content,callback:function(e){t.$set(t.campaign,"utm_content",e)},expression:"campaign.utm_content"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12,sm:24}},[e("span")])],1)],1):t._e()],2)],1)},[],!1,null,null,null).exports;var q=window.fcAdmin.auth.email;const M=e({name:"SendTestEmail",props:{campaign:{type:Object,default:function(){return{}}},btn_text:{type:String,default:function(){return""}},btn_type:{type:String,default:function(){return"default"}},placement:{type:String,default:function(){return"top"}}},data:function(){return{sending_test:!1,test_email:q}},methods:{sendTestEmail:function(){var t=this;return this.campaign.email_body?this.campaign.email_subject?(window.last_fc_test_email=this.test_email,this.sending_test=!0,void this.$post("campaigns/send-test-email",{campaign:{id:this.campaign.id,settings:this.campaign.settings,email_subject:this.campaign.email_subject,email_pre_header:this.campaign.email_pre_header,email_body:this.campaign.email_body,design_template:this.campaign.design_template},test_campaign:"yes",email:this.test_email}).then(function(e){t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.sending_test=!1})):this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peS"),offset:19}):this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peb"),offset:19})}},mounted:function(){window.last_fc_test_email&&(this.test_email=window.last_fc_test_email)}},function(){var t=this,e=t._self._c;return e("el-popover",{attrs:{placement:t.placement,width:"400","popper-class":"fcrm-send-test-email-popover",trigger:"click"}},[e("div",[e("p",[t._v(t._s(t.$t("Cam_Type_cetstolbtsc")))]),t._v(" "),e("el-input",{attrs:{placeholder:t.$t("Email Address")},model:{value:t.test_email,callback:function(e){t.test_email=e},expression:"test_email"}},[e("template",{slot:"append"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.sending_test,expression:"sending_test"}],attrs:{disabled:t.sending_test,type:"success"},on:{click:function(e){return t.sendTestEmail()}}},[t._v(t._s(t.$t("Send")))])],1)],2)],1),t._v(" "),e("el-button",{attrs:{slot:"reference",type:t.btn_type,size:"small"},slot:"reference"},[t._v("\n        "+t._s(t.btn_text||t.$t("Send a test email"))+"\n    ")]),t._v(" "),e("p",{staticStyle:{"font-size":"90%"}},[t._v(t._s(t.$t("Some_SmartCode_Not_Work_Alert")))])],1)},[],!1,null,null,null).exports;const z=e({name:"CampaignTemplate",props:["campaign","label_align"],components:{EmailSubjects:N,TestEmail:M},data:function(){return{fetchingTemplate:!1,editor_status:!0,loading:!1,smart_codes:[],inline_errors:""}},methods:{nextStep:function(){if(this.inline_errors="",!this.campaign.email_subject)return this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peS"),offset:19});if(this.campaign.subjects&&this.campaign.subjects.length&&!this.campaign.subjects.filter(function(t){return t.key&&t.value}).length)return this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_pSLfAT"),offset:19});this.updateCampaign()},updateCampaign:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.campaign)),i={title:e.title,update_subjects:!0,next_step:2,email_subject:e.email_subject,email_pre_header:e.email_pre_header,utm_status:e.utm_status,utm_source:e.utm_source,utm_medium:e.utm_medium,utm_campaign:e.utm_campaign,utm_term:e.utm_term,utm_content:e.utm_content,settings:e.settings,subjects:e.subjects};this.$put("campaigns/".concat(e.id),i).then(function(e){t.campaign.subjects=e.campaign.subjects,t.$emit("next",1)}).catch(function(e){e&&e.compliance_failed?t.inline_errors=e.message:t.inline_errors=""}).finally(function(){t.loading=!1})},goToPrev:function(){this.$emit("prev",0)}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"template"},[e("div",{staticClass:"fc_narrow_box fc_white_inverse"},[e("el-form",{attrs:{"label-position":"top",model:t.campaign}},[e("email-subjects",{attrs:{mailer_settings:!0,multi_subject:!0,label_align:"top",campaign:t.campaign}}),t._v(" "),e("el-form-item",[e("test-email",{attrs:{campaign:t.campaign}})],1)],1),t._v(" "),t.inline_errors?e("p",{staticClass:"el-alert el-alert--error is-light",staticStyle:{background:"white"},domProps:{innerHTML:t._s(t.inline_errors)}}):t._e()],1),t._v(" "),e("el-row",{staticStyle:{"max-width":"860px",margin:"0 auto"},attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.goToPrev()}}},[t._v(" "+t._s(t.$t("Back"))+"\n            ")])],1),t._v(" "),e("el-col",{staticClass:"text-align-right",attrs:{span:12}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{size:"small",type:"success"},on:{click:function(e){return t.nextStep()}}},[t._v("\n                "+t._s(t.$t("Cam_Continue_TNS_"))+"\n            ")])],1)],1)],1)},[],!1,null,null,null).exports;function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,s,a,o,r=[],l=!0,c=!1;try{if(a=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=a.call(i)).done)&&(r.push(n.value),r.length!==e);l=!0);}catch(t){c=!0,s=t}finally{try{if(!l&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(c)throw s}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return B(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?B(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}const V=e({name:"inputPopoverDropdownExtended",props:{data:Array,close_on_insert:{type:Boolean,default:function(){return!0}},buttonText:{type:String,default:function(){return'Add SmartCodes <i class="el-icon-arrow-down el-icon--right"></i>'}},btnType:{type:String,default:function(){return"success"}},btn_ref:{type:String,default:function(){return"input-popover1"}},doc_url:{type:String,default:function(){return""}}},data:function(){return{activeIndex:0,visible:!1,searchQuery:""}},methods:{selectEmoji:function(t){this.insertShortcode(t.data)},insertShortcode:function(t){this.$emit("command",t),this.close_on_insert&&(this.visible=!1)},filteredShortcodes:function(t){if(!this.searchQuery)return t;var e=this.searchQuery.toLowerCase(),i={};return Object.entries(t).forEach(function(t){var n=R(t,2),s=n[0],a=n[1];(s.toLowerCase().includes(e)||a.toLowerCase().includes(e))&&(i[s]=a)}),i}},mounted:function(){}},function(){var t=this,e=t._self._c;return e("div",[e("el-popover",{ref:t.btn_ref,attrs:{placement:"right-end",offset:"50","popper-class":"fcrm-smartcodes-popover el-dropdown-list-wrapper",trigger:"click"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("div",{staticClass:"el_pop_data_group"},[e("div",{staticClass:"el_pop_data_headings"},[e("ul",t._l(t.data,function(i,n){return e("li",{key:n,class:t.activeIndex==n?"active_item_selected":"",attrs:{"data-item_index":n},on:{click:function(e){t.activeIndex=n}}},[t._v("\n                        "+t._s(i.title)+"\n                    ")])}),0),t._v(" "),t.doc_url?e("div",{staticClass:"pop_doc"},[e("a",{attrs:{href:t.doc_url,target:"_blank",rel:"noopener"}},[t._v("Learn More")])]):t._e()]),t._v(" "),e("div",{staticClass:"el_pop_data_body"},[e("div",{staticClass:"el_pop_search"},[e("el-input",{attrs:{placeholder:t.$t("Search shortcodes..."),size:"small",clearable:""},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1),t._v(" "),t._l(t.data,function(i,n){return e("div",{key:n},[e("ul",{directives:[{name:"show",rawName:"v-show",value:t.activeIndex==n,expression:"activeIndex == current_index"}],class:"el_pop_body_item_"+n},t._l(t.filteredShortcodes(i.shortcodes),function(i,n){return e("li",{key:n,on:{click:function(e){return t.insertShortcode(n)}}},[t._v("\n                            "+t._s(i)),e("span",[t._v(t._s(n))])])}),0)])})],2)])]),t._v(" "),e("el-button-group",[e("el-button",{directives:[{name:"popover",rawName:"v-popover",value:t.btn_ref,expression:"btn_ref"}],staticClass:"editor-add-shortcode",attrs:{size:"mini",type:t.btnType},domProps:{innerHTML:t._s(t.buttonText)}})],1)],1)},[],!1,null,null,null).exports;function U(t){return function(t){if(Array.isArray(t))return H(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return H(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?H(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}const G=e({name:"RawtextEditor",props:["value","editor_design"],components:{popover:V},data:function(){return{content:this.value||"",editorShortcodes:window.fcAdmin.globalSmartCodes,cursorPos:this.value?this.value.length:0}},watch:{content:function(){this.$emit("input",this.content)}},methods:{handleCommand:function(t){var e=this.content.slice(0,this.cursorPos),i=this.content.slice(this.cursorPos,this.content.length);this.content=e+t+i,this.cursorPos+=t.length},updateCursorPos:function(t){var e=jQuery(".wp_editor_raw_html textarea").prop("selectionStart");this.$set(this,"cursorPos",e)}},mounted:function(){var t=this;jQuery(".wp_editor_raw_html textarea").on("click",function(e){t.updateCursorPos(e)})},created:function(){window.fcAdmin.extendedSmartCodes&&(this.editorShortcodes=[].concat(U(this.editorShortcodes),U(window.fcAdmin.extendedSmartCodes))),window.fcrm_funnel_context_codes&&(this.editorShortcodes=[].concat(U(this.editorShortcodes),U(window.fcrm_funnel_context_codes)))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_raw_body"},[e("popover",{staticClass:"popover-wrapper",attrs:{data:t.editorShortcodes},on:{command:t.handleCommand}}),t._v(" "),e("el-input",{staticClass:"wp_editor_raw_html",attrs:{type:"textarea",rows:30,placeholder:t.$t("Raw_Please_PHoyE")},nativeOn:{keyup:function(e){return t.updateCursorPos.apply(null,arguments)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)},[],!1,null,null,null).exports;const W={name:"tinyButtonDesigner",props:["visibility"],data:function(){return{controls:{button_text:{type:"text",label:this.$t("Button Text"),value:this.$t("click here")},button_url:{label:this.$t("Button URL"),type:"url",value:""},backgroundColor:{label:this.$t("Background Color"),type:"color_picker",value:"#0072ff"},textColor:{label:this.$t("Text Color"),type:"color_picker",value:"#ffffff"},borderRadius:{label:this.$t("Border Radius"),type:"slider",value:5,max:50,min:0},fontSize:{label:this.$t("Font Size"),type:"slider",value:16,min:8,max:40},fontStyle:{label:this.$t("Font Style"),type:"checkboxes",value:[],options:{bold:"Bold",italic:"Italic",underline:"Underline"}}},style:""}},watch:{controls:{handler:function(){this.generateStyle()},deep:!0}},methods:{close:function(){this.$emit("close")},insert:function(){if(this.controls.button_url.value&&this.controls.button_text.value){var t='<a  style="'.concat(this.style,'" href="').concat(this.controls.button_url.value,'">').concat(this.controls.button_text.value,"</a>");this.$emit("insert",t),this.close()}else this.$notify.error("Button Text and URL is required")},generateStyle:function(){var t=this.controls.fontStyle.value,e=-1===t.indexOf("underline")?"none":"underline",i=-1===t.indexOf("bold")?"normal":"bold",n=-1===t.indexOf("italic")?"normal":"italic";this.style="color:".concat(this.controls.textColor.value,";")+"background-color:".concat(this.controls.backgroundColor.value,";")+"font-size:".concat(this.controls.fontSize.value,"px;")+"border-radius:".concat(this.controls.borderRadius.value,"px;")+"text-decoration:".concat(e,";")+"font-weight:".concat(i,";")+"font-style:".concat(n,";")+"padding:0.8rem 1rem;border-color:#0072ff;"}},mounted:function(){this.generateStyle()}};var K=i(3034),J={insert:"head",singleton:!1};a()(K.A,J);K.A.locals;const Y=e(W,function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.$t("Design Your Button"),visible:t.visibility,"append-to-body":!0,"show-close":!1,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(e){t.visibility=e}}},[e("div",{staticClass:"fluentcrm_preview_mce"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:14}},[e("el-form",{attrs:{"label-position":"top"}},t._l(t.controls,function(i,n){return e("el-col",{key:n,attrs:{span:12}},[e("el-form-item",{attrs:{label:i.label}},["text"==i.type||"url"==i.type?[e("el-input",{attrs:{type:i.type},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"control.value"}})]:"color_picker"==i.type?[e("el-color-picker",{on:{"active-change":function(t){i.value=t}},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"control.value"}})]:"slider"==i.type?e("div",[e("el-slider",{attrs:{min:i.min,max:i.max},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"control.value"}})],1):"checkboxes"==i.type?[e("el-checkbox-group",{model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"control.value"}},t._l(i.options,function(i,n){return e("el-checkbox",{key:n,attrs:{label:n}},[t._v(t._s(i)+"\n                                    ")])}),1)]:t._e()],2)],1)}),1)],1),t._v(" "),e("el-col",{attrs:{span:10}},[e("div",{staticClass:"fluentcrm_button_preview"},[e("div",{staticClass:"preview_header"},[t._v("\n                        "+t._s(t.$t("Button Preview"))+":\n                    ")]),t._v(" "),e("div",{staticClass:"preview_body"},[e("a",{style:t.style,attrs:{href:"#"},on:{click:function(e){return t.insert()}}},[t._v(t._s(t.controls.button_text.value))])])])])],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){return t.close()}}},[t._v(t._s(t.$t("Cancel")))]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.insert()}}},[t._v(t._s(t.$t("Insert")))])],1)])},[],!1,null,null,null).exports;function Q(t){t=window.fcAdmin.trans[t]||t;var e=Array.prototype.slice.call(arguments,1);if(0===e.length)return t;var i=0;return t=t.replace(/%(\d*)s|%d/g,function(t,n){if(n){var s=parseInt(n,10)-1;return s<e.length?e[s]:t}return i<e.length?e[i++]:t})}var Z=[{label:Q("Contact Type"),value:"contact_type",position:1},{label:Q("Tags"),value:"tags",position:2},{label:Q("Prefix"),value:"prefix",position:2.5},{label:Q("First Name"),value:"first_name",position:3},{label:Q("Last Name"),value:"last_name",position:4},{label:Q("Lists"),value:"lists",position:5},{label:Q("Status"),value:"status",position:6},{label:Q("Source"),value:"source",position:7},{label:Q("Phone"),value:"phone",position:8},{label:Q("Date Of Birth"),value:"date_of_birth",position:9},{label:Q("Created At"),value:"created_at",position:10},{label:Q("Last Change Date"),value:"updated_at",position:11},{label:Q("Last Activity"),value:"last_activity",position:12},{label:Q("Address Line 1"),value:"address_line_1",position:13},{label:Q("Address Line 2"),value:"address_line_2",position:14},{label:Q("City"),value:"city",position:15},{label:Q("State"),value:"state",position:16},{label:Q("Zip Code"),value:"postal_code",position:17},{label:Q("Country"),value:"country",position:18}],X=[{label:Q("Industry"),value:"industry",position:1},{label:Q("Company Type"),value:"type",position:5},{label:Q("Company Owner"),value:"owner_id",position:3},{label:Q("Number of Employees"),value:"employees_number",position:4},{label:Q("Phone"),value:"phone",position:1},{label:Q("Website"),value:"website",position:2},{label:Q("Address"),value:"address",position:5},{label:Q("City"),value:"city",position:7},{label:Q("Country"),value:"country",position:8},{label:Q("Updated At"),value:"updated_at",position:11}],tt=[{label:Q("Trigger"),value:"trigger",position:1},{label:Q("Labels"),value:"labels",position:2},{label:Q("Stats"),value:"stats",position:4},{label:Q("Pause/Run"),value:"pause/run",position:5},{label:Q("Action"),value:"action",position:6}],et={SystemUi:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'",Arial:"Arial, 'Helvetica Neue', Helvetica, sans-serif","Comic Sans":"'Comic Sans MS', 'Marker Felt-Thin', Arial, sans-serif","Courier New":"'Courier New', Courier, 'Lucida Sans Typewriter', 'Lucida Typewriter', monospace",Georgia:"Georgia, Times, 'Times New Roman', serif",Helvetica:"Helvetica , Arial, Verdana, sans-serif",Lucida:"'Lucida Sans Unicode', 'Lucida Grande', sans-serif",Tahoma:"Tahoma, Verdana, Segoe, sans-serif","Times New Roman":"'Times New Roman', Times, Baskerville, Georgia, serif","Trebuchet MS":"'Trebuchet MS', 'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Tahoma, sans-serif",Verdana:"Verdana, Geneva, sans-serif",Lato:"'Lato', 'Helvetica Neue', Helvetica, Arial, sans-serif",Lora:"'Lora', Georgia, 'Times New Roman', serif",Merriweather:"'Merriweather', Georgia, 'Times New Roman', serif","Merriweather Sans":"'Merriweather Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif","Noticia Text":"'Noticia Text', Georgia, 'Times New Roman', serif","Open Sans":"'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif",Roboto:"'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif","Source Sans Pro":"'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif"},it=[{text:Q("Last week"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-6048e5),t.$emit("pick",[i,e])}},{text:Q("This Month"),onClick:function(t){var e=new Date,i=new Date(e.getFullYear(),e.getMonth(),1);t.$emit("pick",[i,e])}},{text:Q("Last month"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}},{text:Q("Last 3 months"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-7776e6),t.$emit("pick",[i,e])}},{text:Q("This quarter"),onClick:function(t){var e=new Date,i=Math.floor(e.getMonth()/3),n=new Date(e.getFullYear(),3*i,1);t.$emit("pick",[n,e])}},{text:Q("Last quarter"),onClick:function(t){var e=new Date,i=Math.floor(e.getMonth()/3),n=new Date(e.getFullYear(),3*i-3,1),s=new Date(n.getFullYear(),n.getMonth()+3,0);t.$emit("pick",[n,s])}},{text:Q("Year to Date"),onClick:function(t){var e=new Date,i=new Date((new Date).getFullYear(),0,1);t.$emit("pick",[i,e])}}],nt={disabledDate:function(t){return t.getTime()<=Date.now()-864e5},shortcuts:[{text:Q("After 1 Hour"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+36e5),t.$emit("pick",e)}},{text:Q("Tomorrow"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}},{text:Q("After 2 Days"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+1728e5),t.$emit("pick",e)}},{text:Q("After 1 Week"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+6048e5),t.$emit("pick",e)}}]},st={disabledDate:function(t){return t.getTime()<=Date.now()-864e5}},at=function(t){if(!t)return"";var e=t;return e=(e=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0]},ot=function(t){return[t.address_line_1,t.address_line_2,t.city,t.state,t.postal_code,t.country].filter(Boolean).join(", ")};const rt={name:"wp_editor",components:{popover:V,ButtonDesigner:Y},props:{editor_id:{type:String,default:function(){return"wp_editor_"+Date.now()+parseInt(1e3*Math.random())}},value:{type:String,default:function(){return""}},editorShortcodes:{type:Array,default:function(){return[]}},height:{type:Number,default:function(){return 250}},extra_style:{default:function(){return""}}},data:function(){return{showButtonDesigner:!1,hasWpEditor:!!window.wp.editor&&!!wp.editor.autop||!!window.wp.oldEditor,editor:window.wp.oldEditor||window.wp.editor,plain_content:this.value,cursorPos:this.value?this.value.length:0,app_ready:!1,buttonInitiated:!1,currentEditor:!1}},watch:{plain_content:function(){this.$emit("input",this.plain_content),this.$emit("change",this.plain_content)}},methods:{initEditor:function(){if(this.hasWpEditor){var t=[];this.each(et,function(e,i){t.push(i+"="+e)}),this.editor.remove(this.editor_id);var e=this;this.editor.initialize(this.editor_id,{mediaButtons:!0,tinymce:{height:e.height,fontsize_formats:"8px 10px 12px 14px 16px 18px 24px 30px 36px 45px",toolbar1:"formatselect,fontselect,fontsizeselect,customInsertButton,table,bold,italic,bullist,numlist,link,blockquote,alignleft,aligncenter,alignright,underline,strikethrough,forecolor,removeformat,codeformat,outdent,indent,undo,redo",font_formats:t.join("; "),setup:function(t){t.on("change",function(t,i){e.changeContentEvent()}),e.buttonInitiated||(e.buttonInitiated=!0,t.addButton("customInsertButton",{text:e.$t("Button"),classes:"fluentcrm_editor_btn",onclick:function(){e.showInsertButtonModal(t)}}))},formats:{alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-left",styles:{"text-align":"left"}},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-center",styles:{"text-align":"center"},attributes:{align:"center"}},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-right",styles:{"text-align":"right"},attributes:{align:"right"}}},content_style:e.extra_style},quicktags:!0}),jQuery("#"+this.editor_id).on("change",function(t){e.changeContentEvent()})}},showInsertButtonModal:function(t){this.currentEditor=t,this.showButtonDesigner=!0},insertHtml:function(t){this.currentEditor.insertContent(t)},changeContentEvent:function(){var t=this.editor.getContent(this.editor_id);this.$emit("input",t),this.$emit("change",t)},handleCommand:function(t){if(this.hasWpEditor)window.tinymce.activeEditor.insertContent(t);else{var e=this.plain_content.slice(0,this.cursorPos),i=this.plain_content.slice(this.cursorPos,this.plain_content.length);this.plain_content=e+t+i,this.cursorPos+=t.length}},updateCursorPos:function(){var t=jQuery(".wp_vue_editor_plain").prop("selectionStart");this.$set(this,"cursorPos",t)}},mounted:function(){this.initEditor(),this.app_ready=!0}};var lt=i(8448),ct={insert:"head",singleton:!1};a()(lt.A,ct);lt.A.locals;const ut=e(rt,function(){var t=this,e=t._self._c;return e("div",{staticClass:"wp_vue_editor_wrapper"},[t.editorShortcodes&&t.editorShortcodes.length?e("popover",{staticClass:"popover-wrapper",class:{"popover-wrapper-plaintext":!t.hasWpEditor},attrs:{doc_url:"https://fluentcrm.com/docs/merge-codes-smart-codes-usage/",data:t.editorShortcodes},on:{command:t.handleCommand}}):t._e(),t._v(" "),t.hasWpEditor?e("textarea",{staticClass:"wp_vue_editor",attrs:{id:t.editor_id}},[t._v(t._s(t.value))]):e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.plain_content,expression:"plain_content"}],staticClass:"wp_vue_editor wp_vue_editor_plain",domProps:{value:t.plain_content},on:{click:t.updateCursorPos,input:function(e){e.target.composing||(t.plain_content=e.target.value)}}}),t._v(" "),t.showButtonDesigner?e("button-designer",{attrs:{visibility:t.showButtonDesigner},on:{close:function(){t.showButtonDesigner=!1},insert:t.insertHtml}}):t._e()],1)},[],!1,null,null,null).exports;const dt=e({name:"FCBlockEditor",props:["value","design_template"],components:{WpEditor:ut},data:function(){return{content:this.value||"\x3c!-- wp:paragraph --\x3e<p>"+this.$t("Start Writing Here")+"</p>\x3c!-- /wp:paragraph --\x3e",has_block_editor:"function"==typeof window.fluentCrmBootEmailEditor,editorShortcodes:window.fcAdmin.globalSmartCodes}},methods:{init:function(){this.has_block_editor&&window.fluentCrmBootEmailEditor(this.content,this.handleChange)},handleChange:function(t){this.$emit("input",t),this.$emit("changed")}},mounted:function(){this.init(),jQuery(".block-editor-block-inspector__no-blocks").html('<div class="text-align-left"><b>'+this.$t("Tips")+":</b><ul><li>- "+this.$t("Type")+" <code>/</code> "+this.$t("to see all the available blocks")+"</li><li>- "+this.$t("Type")+" <code>@</code> "+this.$t("to insert dynamic tags")+"</li><li>- "+this.$t("Type")+" <code>[[</code> "+this.$t("to insert post/page links")+"</li><li>- "+this.$t("BlockEditor.You_can_Use_Fallback_value")+" <code>{{contact.first_name|There}}</code></li></ul>"+this.$t("Please")+' <b><a href="https://fluentcrm.com/docs/merge-codes-smart-codes-usage/" target="_blank" rel="noopener">'+this.$t("read the doc for advanced usage")+"</a></b></div>")}},function(){var t=this,e=t._self._c;return t.has_block_editor?e("div",{staticClass:"fc_block_editor",class:"fc_skin_"+t.design_template,attrs:{id:"fluentcrm_block_editor_x"}},[t._v("\n    "+t._s(t.$t("Loading Editor..."))+"\n")]):e("div",{staticClass:"fc_classic_editor_fallback",staticStyle:{"max-width":"800px",margin:"50px auto"}},[e("wp-editor",{attrs:{editorShortcodes:t.editorShortcodes},on:{change:t.handleChange},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),e("p",[t._v(t._s(t.$t("using_old_wordpress_version")))])],1)},[],!1,null,null,null).exports;const _t=e({name:"InputRadioImage",props:["field","value","boxWidth","boxHeight","tooltip_prefix"],data:function(){return{model:this.value,width:this.boxWidth||120,height:this.boxHeight||120}},watch:{model:function(t){this.$emit("input",t),this.$emit("change",t)}}},function(){var t=this,e=t._self._c;return e("el-radio-group",{staticClass:"fc_image_radio_tooltips",model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,function(i,n){return e("el-radio",{key:n,attrs:{label:i.id}},[e("el-tooltip",{attrs:{content:t.tooltip_prefix+i.label,placement:"top"}},[e("div",{staticClass:"fc_image_box",class:t.model==i.id?"fc_image_active":"",style:{backgroundImage:"url("+i.image+")",width:t.width+"px",height:t.height+"px"}})])],1)}),1)},[],!1,null,null,null).exports;const pt=e({name:"withLabelField",props:["field"]},function(){var t=this,e=t._self._c;return e("el-form-item",{class:t.field.wrapper_class},[t.field.label?e("div",{attrs:{slot:"label"},slot:"label"},[t._v("\n    "+t._s(t.field.label)+"\n        "),t.field.help?e("el-tooltip",{attrs:{"popper-class":"sidebar-popper",effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.field.help)},slot:"content"}),t._v(" "),e("i",{staticClass:"tooltip-icon el-icon-info"})]):t._e()],1):t._e(),t._v(" "),t._t("default"),t._v(" "),t.field.inline_help?e("p",{staticClass:"fc_inline_help",domProps:{innerHTML:t._s(t.field.inline_help)}}):t._e()],2)},[],!1,null,null,null).exports;const mt=e({name:"InputText",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},function(){var t=this;return(0,t._self._c)("el-input",{attrs:{type:t.field.data_type,min:t.field.min,max:t.field.max,placeholder:t.field.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})},[],!1,null,null,null).exports;const ft={name:"photo_widget",props:{value:{required:!1,type:String},btn_mode:{type:Boolean,default:function(){return!1}},btn_text:{required:!1,default:function(){return"+ Upload"}},btn_type:{required:!1,default:function(){return"default"}}},data:function(){return{app_ready:!1,image_url:this.value}},methods:{initUploader:function(t){var e=this,i=wp.media.editor.send.attachment;return wp.media.editor.send.attachment=function(t,n){e.$emit("input",n.url),e.$emit("changed",n.url),e.image_url=n.url,wp.media.editor.send.attachment=i},wp.media.editor.open(jQuery(t.target)),!1},getThumb:function(t){return t.url}},mounted:function(){window.wpActiveEditor||(window.wpActiveEditor=null),this.app_ready=!0}};var ht=i(55),gt={insert:"head",singleton:!1};a()(ht.A,gt);ht.A.locals;const vt=e(ft,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_photo_card"},[t.app_ready?e("div",{staticClass:"fluentcrm_photo_holder"},[t.value&&!t.btn_mode?e("img",{attrs:{src:t.value}}):t._e(),t._v(" "),e("el-button",{attrs:{size:"small",type:t.btn_type},on:{click:t.initUploader}},[t._v(t._s(t.btn_text))]),t._v(" "),t._t("after")],2):t._e()])},[],!1,null,null,null).exports;const bt=e({name:"WPEditorField",props:{value:{type:String,default:function(){return""}},field:{type:Object,default:function(){return{}}},extra_style:{default:function(){return""}},height:{type:Number,default:function(){return 250}}},components:{WpBaseEditor:ut},data:function(){return{model:this.value,smartcodes:window.fcAdmin.globalSmartCodes}},watch:{model:function(t){this.$emit("input",t)}},mounted:function(){console.log(this.field)}},function(){var t=this;return(0,t._self._c)("wp-base-editor",{attrs:{height:t.height,extra_style:t.extra_style,editorShortcodes:t.smartcodes},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})},[],!1,null,null,null).exports;function yt(t){return function(t){if(Array.isArray(t))return wt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return wt(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?wt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}const Ct=e({name:"InputTextPopper",props:["field","value"],components:{InputPopover:F},data:function(){return{model:this.value,smartcodes:window.fcAdmin.globalSmartCodes}},watch:{model:function(t){this.$emit("input",t)}},created:function(){this.field.context_codes&&window.fcrm_funnel_context_codes&&(this.smartcodes=[].concat(yt(this.smartcodes),yt(window.fcrm_funnel_context_codes))),window.fcAdmin.extendedSmartCodes&&(this.smartcodes=[].concat(yt(this.smartcodes),yt(window.fcAdmin.extendedSmartCodes)))}},function(){var t=this;return(0,t._self._c)("input-popover",{attrs:{doc_url:"https://fluentcrm.com/docs/merge-codes-smart-codes-usage/","field-type":t.field.field_type,placeholder:t.field.placeholder,popper_class:t.field.popper_class,data:t.smartcodes},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})},[],!1,null,null,null).exports;const $t=e({name:"InputRadioImage",props:["field","value","size"],data:function(){return{model:this.value,boxSize:this.size||120}},watch:{model:function(t){this.$emit("input",t)}}},function(){var t=this,e=t._self._c;return e("el-radio-group",{staticClass:"fc_image_radios",model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,function(i,n){return e("el-radio",{key:n,attrs:{label:i.id}},[e("div",{staticClass:"fc_image_box",class:t.model==i.id?"fc_image_active":"",style:{backgroundImage:"url("+i.image+")",width:t.boxSize+"px",height:t.boxSize+"px"}},[e("span",[t._v(t._s(i.label))])])])}),1)},[],!1,null,null,null).exports;const kt=e({name:"InputRadio",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},function(){var t=this,e=t._self._c;return e("el-radio-group",{class:t.field.wrapper_class,model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,function(i,n){return e("el-radio",{key:n,attrs:{label:i.id}},[t._v("\n        "+t._s(i.label)+"\n    ")])}),1)},[],!1,null,null,null).exports;const xt=e({name:"InputOption",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},function(){var t=this,e=t._self._c;return e("el-select",{class:t.field.wrapper_class,attrs:{clearable:"",filterable:"",placeholder:t.field.placeholder,multiple:t.field.multiple},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.label}})}),1)},[],!1,null,null,null).exports;const St=e({name:"InputColor",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},function(){var t=this;return(0,t._self._c)("el-color-picker",{attrs:{"color-format":t.field.colorFormat,"show-alpha":t.field.showAlpha},on:{"active-change":function(e){t.model=e}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})},[],!1,null,null,null).exports;const At=e({name:"InputDate",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},function(){var t=this;return(0,t._self._c)("el-date-picker",{attrs:{"value-format":t.field.value_format,placeholder:t.field.placeholder,type:t.field.data_type},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})},[],!1,null,null,null).exports;const Et=e({name:"InputNumber",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},function(){var t=this;return(0,t._self._c)("el-input-number",{attrs:{min:t.field.min,max:t.field.max,step:t.field.step},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})},[],!1,null,null,null).exports;function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}const Pt={name:"OptionSelector",props:["value","field"],data:function(){return{options:{},model:this.value&&Array.isArray(this.value)?this.value.map(String):this.value,element_ready:!1,new_item:"",creating:!1}},watch:{model:function(t){this.$emit("input",t)}},methods:{getOptions:function(){var t=this;this.app_ready=!1;var e={fields:"editable_statuses,"+this.field.option_key};this.$get("reports/options",e).then(function(e){window.fc_options_cache=e.options,t.options=e.options,t.element_ready=!0,t.$emit("element_ready")}).catch(function(e){t.handleError(e)}).finally(function(){})},createNewItem:function(){var t=this;if(this.creating=!0,!this.new_item.length)return this.$notify.error("Provide name Field is required"),!1;this.$post(this.field.option_key+"/bulk",{items:[{title:this.new_item}]}).then(function(e){t.$notify.success(e.message),t.getOptions(),e.ids&&e.ids[0]&&(t.field.is_multiple?t.model.push(String(e.ids[0])):t.model=String(e.ids[0])),t.new_item="","tags"==t.field.option_key?t.$bus.$emit("renew_options","tag"):"lists"==t.field.option_key&&t.$bus.$emit("renew_options","list")}).catch(function(e){t.handleError(e)}).finally(function(){t.creating=!1})}},mounted:function(){this.field.is_multiple&&"object"!==Tt(this.value)&&this.$set(this,"model",[]),"tags"==this.field.option_key?(this.options[this.field.option_key]=this.appVars.available_tags,this.element_ready=!0,this.$emit("element_ready")):"lists"==this.field.option_key?(this.options[this.field.option_key]=this.appVars.available_lists,this.element_ready=!0,this.$emit("element_ready")):window.fc_options_cache&&window.fc_options_cache[this.field.option_key]?(this.options=window.fc_options_cache,this.element_ready=!0,this.$emit("element_ready")):this.getOptions()}};var Ot=i(4028),Dt={insert:"head",singleton:!1};a()(Ot.A,Dt);Ot.A.locals;const Ft=e(Pt,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_options_selector",class:t.field.creatable?"fc_option_creatable":""},[e("el-select",{directives:[{name:"loading",rawName:"v-loading",value:!t.element_ready,expression:"!element_ready"}],attrs:{disabled:t.field.disabled,size:t.field.size,"value-key":"id",multiple:t.field.is_multiple,placeholder:t.field.placeholder,clearable:"",filterable:""},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.options[t.field.option_key],function(i){return t.element_ready?e("el-option",{key:i.id,attrs:{value:Number.isInteger(i.id)?String(i.id):i.id,label:i.title}},[e("span",{domProps:{innerHTML:t._s(i.title)}})]):t._e()}),1),t._v(" "),t.field.creatable&&!t.field.disabled?e("el-popover",{attrs:{placement:"right",width:400,trigger:"click"},scopedSlots:t._u([{key:"reference",fn:function(){return[e("el-button",{staticClass:"fc_with_select",attrs:{slot:"reference",type:"info"},slot:"reference"},[t._v("+")])]},proxy:!0}],null,!1,2943098797)},[e("div",[e("el-input",{attrs:{placeholder:t.$t("Provide Name")},model:{value:t.new_item,callback:function(e){t.new_item=e},expression:"new_item"}},[e("template",{slot:"append"},[e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.createNewItem()}}},[t._v(t._s(t.$t("Add")))])],1)],2)],1)]):t._e()],1)},[],!1,null,null,null).exports;const jt=e({name:"AjaxSelector",props:["field","value"],data:function(){return{model:this.value,loading:!1,options:[]}},watch:{model:function(t){this.$emit("input",t),this.$emit("change",t)}},methods:{fetchOptions:function(t){var e=this,i=this.field.option_key;this.field.extended_key&&(i+="_"+this.field.extended_key);var n="";if(this.field.cacheable){if(n+="_fcrm_ajax_cache_"+i,window[n])return void(this.options=window[n])}else if(this.field.experimental_cache&&(n+="_fcrm_ajax_cache_"+i+"_"+t+" "+JSON.stringify(this.model),this.field.sub_option_key&&(n+="_"+JSON.stringify(this.field.sub_option_key)),window[n]))return void(this.options=window[n]);if(this.doing_ajax)return!1;this.loading=!0;var s={search:t,values:this.model,option_key:i};this.field.sub_option_key&&(s.sub_option_key=this.field.sub_option_key),this.$get("reports/ajax-options",s).then(function(t){e.options=t.options,n&&t.options&&(window[n]=t.options)}).catch(function(t){e.handleError(t)}).finally(function(){e.loading=!1})}},mounted:function(){this.fetchOptions("")}},function(){var t=this,e=t._self._c;return e("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{multiple:t.field.is_multiple,filterable:"",remote:!t.field.cacheable,clearable:t.field.clearable,disabled:t.field.disabled,"reserve-keyword":"","allow-create":t.field.creatable,size:t.field.size,placeholder:t.field.placeholder||t.$t("Please enter a keyword"),"remote-method":t.fetchOptions},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.options,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)},[],!1,null,null,null).exports;const It=e({name:"InlineCheckbox",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},function(){var t=this;return(0,t._self._c)("el-checkbox",{attrs:{"true-label":t.field.true_label,disabled:t.field.disabled,"false-label":t.field.false_label},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[t._v(t._s(t.field.checkbox_label))])},[],!1,null,null,null).exports;const Lt={name:"CheckboxGroup",props:["field","value"],data:function(){var t;return{model:null!==(t=this.value)&&void 0!==t?t:[],isIndeterminate:!1,checkAll:!1}},watch:{model:function(t){this.$emit("input",t)}},computed:{optionKeys:function(){if(!this.field.has_all_selector)return[];var t=[];return this.each(this.field.options,function(e){t.push(e.id)}),t}},methods:{checked:function(t){if(this.field.has_all_selector){var e=this.optionKeys.length;this.checkAll=e===this.model.length,this.isIndeterminate=e>0&&e<this.model.length}},all:function(t){this.checkAll?this.model=this.optionKeys:this.model=[],this.isIndeterminate=!1}}};const Nt=e(Lt,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_checkbox_group"},[t.field.has_all_selector?[e("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.all},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("\n            "+t._s(t.field.all_selector_label)+"\n        ")]),t._v(" "),e("div",{staticStyle:{margin:"15px 0"}})]:t._e(),t._v(" "),e("el-checkbox-group",{class:t.field.input_class,on:{change:t.checked},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,function(i){return e("el-checkbox",{key:i.id,attrs:{label:i.id}},[t._v("\n            "+t._s(i.label)+"\n        ")])}),1)],2)},[],!1,null,null,null).exports;const qt=e({name:"InputText",props:["field","value"],components:{OptionSelector:Ft},data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_tag_list_wrapper",class:t.field.wrapper_class},[e("el-form-item",{attrs:{label:t.field.tag_label}},[e("option-selector",{attrs:{field:{is_multiple:!0,creatable:!0,option_key:"tags"}},model:{value:t.model.tags,callback:function(e){t.$set(t.model,"tags",e)},expression:"model.tags"}}),t._v(" "),t.field.tag_help?e("p",{staticClass:"fc_inline_help",domProps:{innerHTML:t._s(t.field.tag_help)}}):t._e()],1),t._v(" "),e("el-form-item",{attrs:{label:t.field.list_label}},[e("option-selector",{attrs:{field:{is_multiple:!0,creatable:!0,option_key:"lists"}},model:{value:t.model.lists,callback:function(e){t.$set(t.model,"lists",e)},expression:"model.lists"}}),t._v(" "),t.field.list_help?e("p",{staticClass:"fc_inline_help",domProps:{innerHTML:t._s(t.field.list_help)}}):t._e()],1)],1)},[],!1,null,null,null).exports;const Mt=e({name:"HtmlViewer",props:["field"]},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_html"},[t.field.heading?e("h3",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(t.field.heading))]):t._e(),t._v(" "),e("div",{domProps:{innerHTML:t._s(t.field.info)}})])},[],!1,null,null,null).exports;const zt=e({name:"TagAddRemoveElement",props:["field","value"],components:{OptionSelector:Ft},data:function(){return{model:this.value,tags_ready:!1}},watch:{model:function(t){this.$emit("input",t)}},mounted:function(){var t=this;this.renewOptionCache("tags",function(){t.tags_ready=!0})}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.tags_ready,expression:"!tags_ready"}],staticClass:"fc_tag_mappings"},[t.tags_ready?e("table",{staticClass:"fc_horizontal_table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.field.selector_label))]),t._v(" "),e("th",[t._v(t._s(t.field.add_tag_label))]),t._v(" "),e("th",[t._v(t._s(t.field.remove_tag_label))])])]),t._v(" "),e("tbody",t._l(t.field.selector_options,function(i){return e("tr",{key:i.id},[e("td",[t._v(t._s(i.title))]),t._v(" "),e("td",[e("option-selector",{attrs:{field:{option_key:"tags",creatable:!0,is_multiple:!0}},model:{value:t.model[i.id].add_tags,callback:function(e){t.$set(t.model[i.id],"add_tags",e)},expression:"model[option.id].add_tags"}})],1),t._v(" "),e("td",[e("option-selector",{attrs:{field:{option_key:"tags",creatable:!0,is_multiple:!0}},model:{value:t.model[i.id].remove_tags,callback:function(e){t.$set(t.model[i.id],"remove_tags",e)},expression:"model[option.id].remove_tags"}})],1)])}),0)]):t._e()])},[],!1,null,null,null).exports;function Rt(t){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function Bt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Vt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(i),!0).forEach(function(e){Ut(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Bt(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Ut(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Rt(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const Ht=e({name:"FormManyDropdownMapper",props:["field","value"],components:{OptionSelector:Ft,AjaxSelector:jt,InputText:mt,InputTextPopper:Ct},data:function(){return{render_table:!0}},methods:{addMore:function(){this.value.push({field_key:"",field_value:""})},deleteItem:function(t){this.value.splice(t,1)},movePosition:function(t,e){var i=this,n=t-1;"down"===e&&(n=t+1);var s=this.value,a=s[t];s.splice(t,1),s.splice(n,0,a),this.$set(this,"value",s),this.render_table=!1,this.$nextTick(function(){i.render_table=!0})}}},function(){var t=this,e=t._self._c;return t.render_table?e("table",{staticClass:"fc_horizontal_table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.field.local_label))]),t._v(" "),e("th",[t._v(t._s(t.field.remote_label))]),t._v(" "),e("th",{attrs:{width:"40px"}})])]),t._v(" "),e("tbody",[t._l(t.value,function(i,n){return e("tr",{key:n},[e("td",[t.field.field_ajax_selector?e("ajax-selector",{attrs:{field:Vt({placeholder:t.field.local_placeholder},t.field.field_ajax_selector)},model:{value:i.field_key,callback:function(e){t.$set(i,"field_key",e)},expression:"item.field_key"}}):t.field.field_option_selector?e("option-selector",{attrs:{field:Vt({placeholder:t.field.local_placeholder},t.field.field_option_selector)},model:{value:i.field_key,callback:function(e){t.$set(i,"field_key",e)},expression:"item.field_key"}}):e("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.field.local_placeholder},model:{value:i.field_key,callback:function(e){t.$set(i,"field_key",e)},expression:"item.field_key"}},t._l(t.field.fields,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t.label}})}),1)],1),t._v(" "),e("td",[t.field.value_option_selector?e("option-selector",{attrs:{field:Vt({placeholder:t.field.remote_placeholder},t.field.value_option_selector)},model:{value:i.field_value,callback:function(e){t.$set(i,"field_value",e)},expression:"item.field_value"}}):t.field.value_options?e("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.field.remote_placeholder},model:{value:i.field_value,callback:function(e){t.$set(i,"field_value",e)},expression:"item.field_value"}},t._l(t.field.value_options,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1):"input-text"==t.field.remote_field_type?e("input-text",{attrs:{field:t.field.remote_field},model:{value:i.field_value,callback:function(e){t.$set(i,"field_value",e)},expression:"item.field_value"}}):"input-text-popper"==t.field.remote_field_type?e("input-text-popper",{attrs:{field:t.field.remote_field},model:{value:i.field_value,callback:function(e){t.$set(i,"field_value",e)},expression:"item.field_value"}}):t._e()],1),t._v(" "),e("td",[e("div",{staticClass:"text-align-right"},[t.field.manage_serial?[e("el-button-group",[e("el-button",{attrs:{disabled:0==n,size:"mini",icon:"el-icon-arrow-up"},on:{click:function(e){return t.movePosition(n,"up")}}}),t._v(" "),e("el-button",{attrs:{disabled:n==t.value.length-1,size:"mini",icon:"el-icon-arrow-down"},on:{click:function(e){return t.movePosition(n,"down")}}})],1)]:t._e(),t._v(" "),e("el-button",{attrs:{disabled:1==t.value.length,type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.deleteItem(n)}}})],2)])])}),t._v(" "),e("tr",[e("td"),t._v(" "),e("td"),t._v(" "),e("td",[e("div",{staticClass:"text-align-right"},[e("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.addMore()}}},[t._v("\n                    "+t._s(t.$t("Add More"))+"\n                ")])],1)])])],2)]):t._e()},[],!1,null,null,null).exports;const Gt=e({name:"global_form_builder",components:{WithLabel:pt,InputText:mt,PhotoWidget:vt,InputTextPopper:Ct,WpEditor:bt,ImageRadio:$t,InputRadio:kt,InputOption:xt,AjaxSelector:jt,InputColor:St,InputNumber:Et,OptionSelector:Ft,InlineCheckbox:It,CheckboxGroup:Nt,VerifiedEmailInput:I,InputTagList:qt,HtmlViewer:Mt,TagAddRemoveMapping:zt,InputDate:At,WpBaseEditor:ut,"form-many-drop-down-mapper":Ht},props:{formData:{type:Object,required:!1,default:function(){return{}}},label_position:{required:!1,type:String,default:function(){return"top"}},fields:{required:!0,type:Object}},methods:{nativeSave:function(){this.$emit("nativeSave",this.formData)},compare:function(t,e,i){switch(e){case"=":return t===i;case"!=":return t!==i}},dependancyPass:function(t){if(t.dependency){var e=t.dependency.depends_on.split("/").reduce(function(t,e){return t[e]},this.formData);return!!this.compare(t.dependency.value,t.dependency.operator,e)}return!0}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_global_form_builder"},[e("el-form",{attrs:{data:t.formData,"label-position":t.label_position},nativeOn:{submit:function(e){return e.preventDefault(),t.nativeSave.apply(null,arguments)}}},t._l(t.fields,function(i,n){return t.dependancyPass(i)?e("with-label",{key:n,attrs:{field:i}},[e(i.type,{tag:"component",attrs:{field:i},model:{value:t.formData[n],callback:function(e){t.$set(t.formData,n,e)},expression:"formData[fieldIndex]"}})],1):t._e()}),1)],1)},[],!1,null,null,null).exports;const Wt=e({name:"EmailStyleEditor",props:["template_config","footer_settings"],components:{FormBuilder:Gt},data:function(){return{showBodyConfig:!1,email_font_families:et,activeTab:"global",email_footer_fields:{custom_footer:{type:"input-radio",label:this.$t("Email Footer Type"),options:[{id:"no",label:this.$t("Use Global Email Footer")},{id:"yes",label:this.$t("Use Custom Email Footer")}]},footer_content:{type:"wp-editor",placeholder:this.$t("Custom Email Footer Text"),label:this.$t("Custom Email Footer Text"),help:this.$t("This email footer text will be used to this email only"),inline_help:this.$t("You should provide your business address")+" {{crm.business_address}} "+this.$t("and manage subscription/unsubscribe url is mandatory")+"<br/>"+this.$t("Smartcode:")+" {{crm.business_name}}, {{crm.business_address}}, ##crm.manage_subscription_url##, ##crm.unsubscribe_url## "+this.$t("will be replaced with dynamic values."),dependency:{depends_on:"custom_footer",operator:"=",value:"yes"}}}}},watch:{template_config:{deep:!0,handler:function(){this.generateStyles()}}},computed:{settingsFields:function(){if(this.isEmptyValue(this.template_config))return{};var t=[];this.each(this.email_font_families,function(e,i){t.push({id:e,label:i})});var e={body_bg_color:{label:this.$t("Body Background Color"),type:"input-color",colorFormat:"hex",showAlpha:!1},content_width:{label:this.$t("Content Max Width (PX)"),inline_help:this.$t("Gut_Suggesting_vB6t8"),type:"input-number",min:400,step:10},content_padding:{label:this.$t("Content Padding Left/Right"),type:"input-number",min:0,step:1},content_bg_color:{label:this.$t("Content Background Color"),type:"input-color",colorFormat:"hex",showAlpha:!1},text_color:{label:this.$t("Default Content Color"),type:"input-color",colorFormat:"hex",showAlpha:!1},heading_color:{label:this.$t("Default Headings Color"),type:"input-color",colorFormat:"hex",showAlpha:!1},footer_text_color:{label:this.$t("Footer Text Color"),type:"input-color",colorFormat:"hex",showAlpha:!1},link_color:{label:this.$t("Default Link Color"),type:"input-color",colorFormat:"hex",showAlpha:!1},content_font_family:{label:this.$t("Content Font Family"),type:"input-option",options:t},headings_font_family:{label:this.$t("Headings Font Family"),type:"input-option",options:t},disable_footer:{type:"inline-checkbox",true_label:"yes",false_label:"no",checkbox_label:this.$t("Disable Default Email Footer"),inline_help:this.$t("email_will_be_sent_without_footer_contents")}},i=Object.keys(this.template_config),n={};return this.each(e,function(t,e){-1!=i.indexOf(e)&&(n[e]=t)}),n}},methods:{triggerUpdate:function(){this.$post("templates/set-global-style",{config:this.template_config}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),this.$emit("save"),this.showBodyConfig=!1},generateStyles:function(){var t="",e=this.template_config;if(this.isEmptyValue(e))jQuery("#fc_mail_config_style").html("");else{var i=".fluentcrm_visual_editor .fc_visual_body .fce-block-editor ";t+="".concat(i," .block-editor-writing-flow { background-color: ").concat(e.body_bg_color,"; }"),t+="".concat(i," .fc_editor_body { background-color: ").concat(e.content_bg_color,"; color: ").concat(e.text_color,"; max-width: ").concat(e.content_width,"px; font-family: ").concat(e.content_font_family," !important; }"),t+=".fc_skin_plain .fc_editor_body,.fc_skin_classic .fc_editor_body,.fc_skin_simple .fc_editor_body {padding-left: ".concat(e.content_padding,"px !important;padding-right: ").concat(e.content_padding,"px !important; }"),t+="".concat(i," .fc_editor_body p,\n            ").concat(i," .fc_editor_body li, ol { color: inherit; font-size: inherit; }"),t+="".concat(i," .fc_editor_body h1,\n            ").concat(i," .fc_editor_body h2,\n            ").concat(i," .fc_editor_body h3,\n            ").concat(i," .fc_editor_body h4 { color: ").concat(e.headings_color,"; font-family: ").concat(e.headings_font_family," !important; }\n            ").concat(i," .fc_editor_body a { color: ").concat(e.link_color,"; }"),jQuery("#fc_mail_config_style").html('<style type="text/css">'+t+"</style>")}}},mounted:function(){this.generateStyles(),this.footer_settings||(this.footer_settings={custom_footer:"no",footer_content:""}),(!this.footer_settings.footer_content||this.footer_settings.footer_content.length<10)&&(this.footer_settings.footer_content=window.fcAdmin.global_email_footer)}},function(){var t=this,e=t._self._c;return e("span",{staticClass:"fc_style_editor",staticStyle:{display:"inline-block"}},[t.isEmptyValue(t.template_config)?t._e():e("el-button",{attrs:{size:"mini",icon:"el-icon-setting",type:"info"},on:{click:function(e){t.showBodyConfig=!0}}}),t._v(" "),e("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.$t("Email Styling Settings & Footer Settings"),visible:t.showBodyConfig,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.showBodyConfig=e}}},[t.showBodyConfig?e("el-tabs",{staticClass:"fc_settings_popup",model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e("el-tab-pane",{attrs:{label:"Global Settings",name:"global"}},[e("div",{staticClass:"fc_2col_form_wrapper",staticStyle:{"margin-top":"20px"}},[t.showBodyConfig?e("form-builder",{attrs:{formData:t.template_config,fields:t.settingsFields}}):t._e()],1)]),t._v(" "),e("el-tab-pane",{attrs:{label:"Footer Settings",name:"email_footer"}},[e("div",{staticStyle:{"margin-top":"20px"}},[e("p",[t._v(t._s(t.$t("Customize_Email_Footer_Sec")))]),t._v(" "),e("form-builder",{attrs:{formData:t.footer_settings,fields:t.email_footer_fields}})],1)])],1):t._e(),t._v(" "),e("span",{staticClass:"dialog-footer text-align-right",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.triggerUpdate()}}},[t._v(t._s(t.$t("Update Settings")))])],1)],1),t._v(" "),e("div",{attrs:{id:"fc_mail_config_style"}})],1)},[],!1,null,null,null).exports;function Kt(t){return function(t){if(Array.isArray(t))return Jt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Jt(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Jt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}const Yt=e({name:"MergeCodes",components:{popover:V},props:["extra_tags"],data:function(){return{editorShortcodes:[]}},methods:{handleCommand:function(t){this.copyItem(t)},copyItem:function(t){this.copy_success=!1;var e=!1;if(window.clipboardData&&window.clipboardData.setData)window.clipboardData.clipboardData.setData("Text",t),e=!0;else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var i=document.createElement("textarea");i.textContent=t,i.style.position="fixed",document.body.appendChild(i),i.select();try{document.execCommand("copy"),e=!0}catch(t){console.warn("Copy to clipboard failed.",t),e=!1}finally{document.body.removeChild(i)}}e?(this.copy_success=!0,this.$notify({message:this.$t("Smartcode has been copied to your clipboard"),position:"bottom-right",customClass:"bottom_right fc_notify_z",type:"success"})):this.$notify({message:this.$t("Your Browser does not support JS copy. Please copy manually"),position:"bottom-right",customClass:"bottom_right",type:"error"})}},mounted:function(){var t,e,i;this.extra_tags&&this.extra_tags.length&&(t=this.editorShortcodes).push.apply(t,Kt(this.extra_tags));window.fcAdmin.globalSmartCodes&&(e=this.editorShortcodes).push.apply(e,Kt(window.fcAdmin.globalSmartCodes));window.fcAdmin.extendedSmartCodes&&(i=this.editorShortcodes).push.apply(i,Kt(window.fcAdmin.extendedSmartCodes))}},function(){var t=this;return(0,t._self._c)("popover",{staticClass:"popover-wrapper",staticStyle:{display:"inline-block"},attrs:{doc_url:"https://fluentcrm.com/docs/merge-codes-smart-codes-usage/",btnType:"text",buttonText:"{{ }}",data:t.editorShortcodes},on:{command:t.handleCommand}})},[],!1,null,null,null).exports;var Qt=i(2194),Zt=i.n(Qt);const Xt=e({name:"BuiltinTemplateDrawer",props:{open_drawer:{type:Boolean,default:function(){return!1}},create_mode:{type:Boolean,default:function(){return!1}}},data:function(){return{show_drawer:!1,builtInTemplates:[],isLoadingTemplates:!1,importing:!1,templateIdImporting:null,oneTimeFetch:!0,showTemplatePreview:!1,previewTemplateId:"",email_template:{post_title:"",post_content:"",post_excerpt:"",email_subject:"",edit_type:"html",design_template:"simple",settings:{template_config:{}}}}},watch:{open_drawer:function(t){t?this.fetchBuiltInTemplates():this.show_drawer=!1}},computed:{localDrawerVisible:{get:function(){return this.show_drawer},set:function(t){this.show_drawer=t,t||this.$emit("update:open_drawer",!1)}}},methods:{fetchBuiltInTemplates:function(){var t=this;this.show_drawer=!0,this.oneTimeFetch&&(this.oneTimeFetch=!1,this.isLoadingTemplates=!0,this.$get("templates/built-in-templates").then(function(e){t.builtInTemplates=e.templates}).catch(function(e){t.handleError(e)}).finally(function(){t.isLoadingTemplates=!1}))},importTemplate:function(t){var e=this;this.templateIdImporting=t.id,this.importing=!0,window.jQuery.post(window.ajaxurl,{body:{file:t.content},action:"fluentcrm_import_template"}).then(function(t){e.$notify.success(t.message),e.$router.push({name:"edit_template",params:{template_id:t.template_id}})}).catch(function(t){e.handleError(t.responseJSON.message)}).always(function(){e.templateIdImporting=null,e.importing=!1})},createFromStratch:function(){this.$router.push({name:"edit_template",params:{template_id:0}})}}},function(){var t=this,e=t._self._c;return e("el-drawer",{attrs:{title:t.create_mode?t.$t("Create New Email Template"):t.$t("Built In Templates"),"append-to-body":!0,wrapperClosable:!1,visible:t.localDrawerVisible,size:"50%"},on:{"update:visible":function(e){t.localDrawerVisible=e}}},[e("div",{staticClass:"fc_built_in_templates"},[t.create_mode?e("div",{staticClass:"fc_template_create_from_stratch",on:{click:function(e){return t.createFromStratch()}}},[e("h3",[e("i",{staticClass:"el-icon-plus"}),t._v(t._s(t.$t("Create from Scratch")))])]):t._e(),t._v(" "),t.isLoadingTemplates?e("el-skeleton",{staticStyle:{"margin-top":"20px"},attrs:{animated:"",throttle:500,count:3}},[e("template",{slot:"template"},[e("div",{staticClass:"skeleton-box"},[e("el-skeleton-item",{staticStyle:{width:"100%",height:"240px","margin-bottom":"10px"},attrs:{animated:"",variant:"image"}}),t._v(" "),e("el-skeleton-item",{staticStyle:{width:"50%"},attrs:{animated:"",variant:"h3"}}),t._v(" "),e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-top":"16px",height:"16px"}},[e("el-skeleton-item",{staticStyle:{width:"30%","margin-right":"7px"},attrs:{animated:"",variant:"text"}}),t._v(" "),e("el-skeleton-item",{staticStyle:{width:"30%"},attrs:{animated:"",variant:"text"}})],1)],1)])],2):t._e(),t._v(" "),!t.isLoadingTemplates&&t.builtInTemplates.length?e("div",{staticClass:"fc_built_in_templates_wrap"},[t.create_mode?e("h4",{staticStyle:{"grid-column":"1 / -1","font-size":"16px"}},[t._v(t._s(t.$t("Popular pre-built email templates")))]):t._e(),t._v(" "),t._l(t.builtInTemplates,function(i){return e("el-card",{key:i.id,staticClass:"fc_build_in_temp_box",attrs:{label:3}},[e("div",{staticClass:"fc_build_in_temp_box_inner"},[e("div",{staticClass:"img-box"},[i.cover_image?e("img",{attrs:{src:i.cover_image,alt:i.title}}):e("p",[t._v(t._s(t.$t("Empty")))])]),t._v(" "),e("div",{staticClass:"content"},[e("h2",[t._v(t._s(i.title))]),t._v(" "),e("p",[t._v(t._s(i.short_description))]),t._v(" "),e("div",{staticClass:"actions"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.importing&&t.templateIdImporting==i.id,expression:"importing && templateIdImporting == template.id"}],attrs:{size:"mini",type:"info","element-loading-spinner":"el-icon-loading",disabled:t.importing},on:{click:function(e){return t.importTemplate(i)}}},[t._v("\n                                "+t._s(t.$t("Import"))+"\n                            ")]),t._v(" "),e("el-link",{attrs:{href:i.link,type:"primary",target:"_blank"}},[t._v(t._s(t.$t("Preview")))])],1)])])])})],2):t._e(),t._v(" "),t.isLoadingTemplates||t.builtInTemplates.length?t._e():e("el-empty",{attrs:{description:t.$t("No Built In Templates Found")}})],1)])},[],!1,null,null,null).exports;const te=e({name:"BlockComposer",props:["campaign","enable_templates","disable_fixed","body_key","enable_template_save","show_merge","extra_tags","show_audit","disabled_templates"],components:{ImageRadioToolTip:_t,RawEditor:G,EmailStyleEditor:Wt,BlockEditor:dt,EmailPreview:S,WpEditor:bt,Pagination:m,MergeCodes:Yt,BuiltinTemplateDrawer:Xt},data:function(){return{loadingTemplates:!1,templates:[],fetchingTemplate:!1,loading:!1,editor_status:!0,templates_modal:!1,email_body_key:this.body_key||"email_body",search:"",pagination:{current_page:1,per_page:10,total:0},query_data:{sort_by:"ID",sort_type:"DESC"},new_template_name:"",new_template_pop:!1,saving_template:!1,footerSettings:{custom_footer:this.campaign.settings.footer_settings?this.campaign.settings.footer_settings.custom_footer:"no",footer_content:this.campaign.settings.footer_settings?this.campaign.settings.footer_settings.footer_content:""},previewTemplateId:"",showTemplatePreview:!1,email_template:{post_title:"",post_content:"",post_excerpt:"",email_subject:"",edit_type:"html",design_template:"simple",settings:{template_config:{}}},open_drawer:!1}},watch:{"campaign.settings.footer_settings":{deep:!0,handler:function(t){this.footerSettings=t}},"campaign.design_template":function(t,e){if(this.editor_status&&("raw_classic"!=t&&"raw_html"!=t&&"visual_builder"!=t||this.unmountBlockEditor(),this.email_template_designs[t])){var i=this.campaign.settings.template_config,n=this.email_template_designs[t].config;n&&i||(this.campaign.settings.template_config=n),this.each(n,function(t,e){"body_bg_color"!=e&&"content_bg_color"!=e&&i[e]&&(n[e]=i[e])}),this.campaign.settings.template_config=n}}},computed:{selectedDesign:function(){var t=this.email_template_designs[this.campaign.design_template];return t||this.email_template_designs.simple},classic_styles:function(){var t=this.campaign.settings.template_config.content_font_family;return t||(t="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'"),"body {font-family: "+t+";line-height: 150%;padding: 0px 20px 20px;} body p, ul, li, ol { font-size: 16px; }"},email_template_designs:function(){var t=this;return this.disabled_templates?Zt()(window.fcAdmin.email_template_designs,function(e,i){return t.disabled_templates[i]}):window.fcAdmin.email_template_designs}},methods:{triggerSave:function(){var t=this;this.campaign.settings.footer_settings=this.footerSettings,this.$nextTick(function(){t.$emit("save")})},fetchTemplates:function(){var t=this;this.loading=!0,this.loadingTemplates=!0,this.templates_modal=!0;var e={per_page:this.pagination.per_page,page:this.pagination.current_page,search:this.search,orderBy:this.query_data.sort_by,order:this.query_data.sort_type};this.$get("templates",e).then(function(e){t.templates=e.templates.data,t.pagination.total=e.templates.total,t.loading=!1}).catch(function(t){console.log(t)}).finally(function(){t.loadingTemplates=!1,t.loading=!1,t.editor_status=!0})},viewTemplateDetail:function(t){var e=this;t&&(this.templates_modal=!1,this.$router.push({name:"edit_template",params:{template_id:t}}),this.$nextTick(function(){e.$emit("fetch",t)}))},InsertChange:function(t){var e=this;t&&(this.unmountBlockEditor(),this.editor_status=!1,this.fetchingTemplate=!0,this.$get("templates/".concat(t)).then(function(i){e.disabled_templates&&e.disabled_templates[i.template.design_template]?e.$notify.error(e.$t("Email_Campaign_Insert_Error_Alert")):(e.campaign.template_id=t,e.campaign[e.email_body_key]=i.template.post_content,e.campaign.email_subject=i.template.email_subject,e.campaign.email_pre_header=i.template.post_excerpt,e.campaign.design_template=i.template.design_template,e.campaign.settings.template_config=i.template.settings.template_config,e.campaign.settings.footer_settings=i.template.settings.footer_settings?i.template.settings.footer_settings:{custom_footer:"no",footer_content:""},i.template._visual_builder_design&&(e.campaign._visual_builder_design=i.template._visual_builder_design),e.$emit("template_inserted",i.template))}).catch(function(t){e.handleError(t)}).finally(function(){e.fetchingTemplate=!1,e.editor_status=!0,e.templates_modal=!1}))},handleFixed:function(){this.disable_fixed||window.addEventListener("scroll",function(t){var e=document.querySelector(".fluentcrm_visual_editor.fc_is_guten");e&&(e.getBoundingClientRect().top<32?(e.classList.add("fc_element_fixed"),document.querySelector(".fc_visual_header").style.width=e.offsetWidth+"px"):e.classList.remove("fc_element_fixed"))})},showInserter:function(){jQuery(".fce_inserter button.block-editor-inserter__toggle").trigger("click")},handleSortable:function(t){"descending"===t.order?(this.query_data.sort_by=t.prop,this.query_data.sort_type="desc"):(this.query_data.sort_by=t.prop,this.query_data.sort_type="asc"),this.fetchTemplates()},saveAsTemplate:function(){var t=this;if(!this.new_template_name)return this.$notify.error(this.$t("Please provide a template name")),!1;var e={post_content:this.campaign[this.email_body_key],email_subject:this.campaign.email_subject,post_excerpt:this.campaign.email_pre_header,design_template:this.campaign.design_template,settings:{template_config:this.campaign.settings.template_config,footer_settings:this.footerSettings},post_title:this.new_template_name,edit_type:"html"};"visual_builder"==this.campaign.design_template&&(e._visual_builder_design=this.campaign._visual_builder_design),this.saving_template=!0,this.$post("templates",{template:JSON.stringify(e)}).then(function(e){t.$notify.success(e.message),t.new_template_name="",t.new_template_pop=!1}).catch(function(e){t.handleError(e)}).finally(function(){t.saving_template=!1})},showPreview:function(t){var e=this;this.previewTemplateId=t.ID,this.$get("templates/".concat(this.previewTemplateId)).then(function(t){e.email_template=t.template,e.showTemplatePreview=!0}).catch(function(t){console.log(t)}).finally(function(){})},openBuiltinTemplateDrawer:function(){this.open_drawer=!0}},mounted:function(){this.handleFixed()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_visual_editor",class:{fc_is_guten:t.selectedDesign&&t.selectedDesign.use_gutenberg}},[e("div",{staticClass:"fluentcrm_header fc_visual_header"},[e("div",{staticClass:"fluentcrm_header_title"},[t.selectedDesign.use_gutenberg?e("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.showInserter()}}}):t._e(),t._v(" "),e("h3",[e("el-popover",{attrs:{placement:"top-start",title:"Tips",width:"300",trigger:"hover"}},[e("div",{staticClass:"text-align-left"},[e("ul",[e("li",[t._v(t._s(t.$t("Type"))+" "),e("code",[t._v("@")]),t._v(" "+t._s(t.$t("to see smart tags")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Type"))+" "),e("code",[t._v("/")]),t._v(" "+t._s(t.$t("to see All Available Blocks")))])]),t._v(" "),e("p",[t._v(t._s(t.$t("Please"))+" "),e("a",{attrs:{href:"https://fluentcrm.com/docs/merge-codes-smart-codes-usage/",target:"_blank"}},[t._v(t._s(t.$t("read the doc for advanced usage")))])])]),t._v(" "),e("span",{staticClass:"el-icon el-icon-help",attrs:{slot:"reference"},slot:"reference"})]),t._v("\n                "+t._s(t.$t("Email Body"))+"\n                "),t.campaign.settings?e("email-style-editor",{staticClass:"ml-5",attrs:{footer_settings:t.footerSettings,template_config:t.campaign.settings.template_config},on:{save:function(e){return t.triggerSave()}}}):t._e(),t._v(" "),e("email-preview",{attrs:{show_audit:t.show_audit,campaign:t.campaign}})],1),t._v(" "),e("image-radio-tool-tip",{staticStyle:{margin:"-10px 0px !important"},attrs:{boxWidth:53,boxHeight:45,field:{options:t.email_template_designs},tooltip_prefix:"Template - "},model:{value:t.campaign.design_template,callback:function(e){t.$set(t.campaign,"design_template",e)},expression:"campaign.design_template"}})],1),t._v(" "),e("div",{staticClass:"fluentcrm-actions d-flex items-center"},[t.enable_templates?e("el-button",{attrs:{title:t.$t("Import Template"),type:"info",size:"small",icon:"el-icon-folder-opened"},on:{click:t.fetchTemplates}},[e("span",[t._v(t._s(t.$t("Import Template")))])]):t._e(),t._v(" "),t._t("fc_editor_actions"),t._v(" "),t.enable_template_save?[e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link"},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{"font-weight":"bold",cursor:"pointer"}})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("el-popover",{attrs:{placement:"right-start",width:"400",trigger:"click"},model:{value:t.new_template_pop,callback:function(e){t.new_template_pop=e},expression:"new_template_pop"}},[e("label",[t._v(t._s(t.$t("Template Name")))]),t._v(" "),e("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:t.$t("Template Name"),type:"text"},model:{value:t.new_template_name,callback:function(e){t.new_template_name=e},expression:"new_template_name"}}),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving_template,expression:"saving_template"}],attrs:{disabled:t.saving_template,type:"primary",size:"small"},on:{click:function(e){return t.saveAsTemplate()}}},[t._v(t._s(t.$t("Save"))+"\n                                ")]),t._v(" "),"visual_builder"==t.campaign.design_template?e("p",{staticStyle:{"font-size":"90%"}},[t._v(t._s(t.$t("Will be stored from your last saved email contents")))]):t._e(),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving_template,expression:"saving_template"}],attrs:{slot:"reference",disabled:t.saving_template,icon:"el-icon-plus",type:"text"},slot:"reference"},[t._v("\n                                    "+t._s(t.$t("Save as template"))+"\n                                ")])],1)],1)],1)],1)]:t._e(),t._v(" "),t.show_merge?e("merge-codes",{attrs:{extra_tags:t.extra_tags}}):t._e()],2)]),t._v(" "),t.editor_status?e("div",{staticClass:"fc_visual_body"},[t.selectedDesign.use_gutenberg?[e("block-editor",{attrs:{design_template:t.campaign.design_template},on:{changed:function(e){return t.$emit("changed")}},model:{value:t.campaign[t.email_body_key],callback:function(e){t.$set(t.campaign,t.email_body_key,e)},expression:"campaign[email_body_key]"}})]:[e("div",{staticClass:"fc_normal_editor_wrapper",class:"fc_design_template_"+t.selectedDesign.id+"_wrapper"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{staticClass:"fc_composer_body",attrs:{span:19}},["classic_editor"==t.selectedDesign.template_type?e("div",{staticClass:"fc_composer_classic"},[e("wp-editor",{attrs:{height:350,extra_style:t.classic_styles},model:{value:t.campaign[t.email_body_key],callback:function(e){t.$set(t.campaign,t.email_body_key,e)},expression:"campaign[email_body_key]"}})],1):"custom_component"==t.selectedDesign.template_type?e("div",{class:"fc_composer_"+t.selectedDesign.id},[e(t.selectedDesign.component,{tag:"component",attrs:{extra_tags:t.extra_tags,campaign:t.campaign},on:{save:function(e){return t.triggerSave()}},model:{value:t.campaign[t.email_body_key],callback:function(e){t.$set(t.campaign,t.email_body_key,e)},expression:"campaign[email_body_key]"}})],1):"visual_builder_demo"==t.selectedDesign.template_type?e("div",[e("div",{staticClass:"fluentcrm_databox",staticStyle:{"max-width":"600px",margin:"40px auto","text-align":"center"}},[e("h3",[t._v(t._s(t.$t("Build Email By Drag and Drop Visual Editor")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Visual_Email_Builder_Alert")))]),t._v(" "),e("p",[e("a",{staticClass:"el-button el-button--danger el-button--large",attrs:{href:"https://fluentcrm.com/?utm_source=dashboard&utm_medium=plugin&utm_campaign=pro&utm_id=wp",target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Upgrade to FluentCRM Pro")))])])])]):e("div",{staticClass:"fc_composer_raw_hrml"},[e("raw-editor",{model:{value:t.campaign[t.email_body_key],callback:function(e){t.$set(t.campaign,t.email_body_key,e)},expression:"campaign[email_body_key]"}})],1)]),t._v(" "),e("el-col",{attrs:{span:5}},[e("div",{staticClass:"fc_template_info"},[e("div",{domProps:{innerHTML:t._s(t.selectedDesign.template_info)}})])])],1)],1)],t._v(" "),t.campaign.settings.template_config&&"yes"==t.campaign.settings.template_config.disable_footer?e("div",{staticClass:"fc_complience_suggest"},[e("p",{staticClass:"fc_editor_warnning"},[t._v(t._s(t.$t("Default footer has been disabled. Please include"))+" "),e("code",[t._v("##crm.unsubscribe_url##")]),t._v("\n                "+t._s(t.$t("or"))+" "),e("code",[t._v("##crm.manage_subscription_url##")]),t._v("\n                "+t._s(t.$t("in your email body for compliance")))]),t._v(" "),e("div",[e("b",[t._v(t._s(t.$t("Suggested text to include:")))]),t._v(" "),e("p",{domProps:{innerHTML:t._s("{{crm.unsubscribe_html|Unsubscribe}} | {{crm.manage_subscription_html|Manage Preference}}")}})])]):t._e()],2):t._e(),t._v(" "),t.enable_templates?e("el-dialog",{staticClass:"fluentcrm_import_email_templates",attrs:{"close-on-click-modal":!1,title:t.$t("Select Template"),visible:t.templates_modal,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.templates_modal=e}}},[e("div",{staticClass:"fc-select-template-header"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.openBuiltinTemplateDrawer()}}},[t._v("\n                "+t._s(t.$t("See Built In Templates"))+"\n            ")]),t._v(" "),e("div",{staticClass:"fc-search-box"},[e("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetchTemplates},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchTemplates.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetchTemplates},slot:"append"})],1)],1)],1),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Available"),data:t.templates,stripe:"",border:""},on:{"sort-change":t.handleSortable}},[e("el-table-column",{attrs:{label:t.$t("ID"),property:"ID",width:"100",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.ID)+"\n                ")]}}],null,!1,4039022800)}),t._v(" "),e("el-table-column",{attrs:{prop:"post_title",label:t.$t("Title"),sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("h3",{staticClass:"template-name",on:{click:function(e){return t.InsertChange(i.row.ID)}}},["visual_builder"==i.row.design_template?e("span",[e("img",{staticStyle:{width:"15px"},attrs:{src:t.appVars.images_url+"/drag-drop.png"}})]):t._e(),t._v("\n                        "+t._s(i.row.post_title)+"\n                    ")])]}}],null,!1,813246507)}),t._v(" "),e("el-table-column",{attrs:{width:"200",label:t.$t("Action")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"fc-action-btns"},[e("el-button",{attrs:{icon:"el-icon-upload",size:"mini"},on:{click:function(e){return t.InsertChange(i.row.ID)}}},[t._v("\n                            "+t._s(t.$t("Import"))+"\n                        ")]),t._v(" "),e("el-button",{attrs:{icon:"el-icon-view",size:"mini",type:"text"},on:{click:function(e){return t.showPreview(i.row)}}},[t._v("\n                            "+t._s(t.$t("Preview"))+"\n                        ")])],1)]}}],null,!1,1660124838)})],1),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetchTemplates}})],1):t._e(),t._v(" "),t.showTemplatePreview?e("div",[e("email-preview",{attrs:{auto_load:!0,show_audit:!0,campaign:t.email_template},on:{modalClosed:function(){t.showTemplatePreview=!1}}})],1):t._e(),t._v(" "),e("builtin-template-drawer",{attrs:{open_drawer:t.open_drawer},on:{"update:open_drawer":function(e){t.open_drawer=e}}})],1)},[],!1,null,null,null).exports;const ee=e({name:"CampaignBodyTemplate",props:["campaign","extra_tags"],components:{EmailBlockComposer:te},data:function(){return{loading:!1}},methods:{nextStep:function(){var t=this;if(!this.campaign.email_body)return this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peb"),offset:19});this.updateCampaign(function(e){t.$emit("next")})},updateCampaign:function(t){var e=this;this.loading=!0;var i=JSON.parse(JSON.stringify(this.campaign));delete i.template;var n={next_step:1,title:i.title,email_subject:i.email_subject,email_pre_header:i.email_pre_header,settings:i.settings,design_template:i.design_template,email_body:i.email_body,template_id:i.template_id,campaign_id:this.campaign.id};i._visual_builder_design&&"visual_builder"==i.design_template&&(n._visual_builder_design_string=JSON.stringify(i._visual_builder_design)),this.$post("campaigns/update-single-campaign",n).then(function(i){t?t(i):e.$notify.success({message:e.$t("Cam_Email_bsu")})}).catch(function(t){e.handleError(t)}).finally(function(){e.loading=!1})},updateCampaignAjax:function(t){var e=this;this.loading=!0;var i=JSON.parse(JSON.stringify(this.campaign));delete i.template;var n={next_step:1,title:i.title,email_subject:i.email_subject,email_pre_header:i.email_pre_header,settings:i.settings,design_template:i.design_template,email_body:i.email_body,template_id:i.template_id};i._visual_builder_design&&"visual_builder"==i.design_template&&(n._visual_builder_design_string=JSON.stringify(i._visual_builder_design)),window.jQuery.post(window.ajaxurl,{action_data:JSON.stringify(n),campaign_id:i.id,action:"fluentcrm_save_campaign_email_body",query_timestamp:Date.now()}).then(function(i){t?t(i):e.$notify.success({message:e.$t("Cam_Email_bsu")})}).catch(function(t){e.handleError(t.responseJSON)}).always(function(){e.loading=!1})},maybeUpdateCampaign:function(){"visual_builder"==this.campaign.design_template?this.$bus.$emit("getVisualData",{reference:"save"}):this.updateCampaign()},maybeNextStep:function(){if("visual_builder"==this.campaign.design_template){var t=this;this.$bus.$emit("getVisualData",{callback:function(e){t.nextStep()},reference:"update_only"})}else this.nextStep()},initKeyboardSave:function(t){(window.navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&"s"===t.key&&(t.preventDefault(),this.maybeUpdateCampaign())}},mounted:function(){document.addEventListener("keydown",this.initKeyboardSave)},beforeDestroy:function(){document.removeEventListener("keydown",this.initKeyboardSave)}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"template"},[e("email-block-composer",{attrs:{show_audit:!0,extra_tags:t.extra_tags,show_merge:!0,enable_template_save:!0,enable_templates:!0,campaign:t.campaign},on:{save:function(e){return t.updateCampaign()}}},[e("template",{slot:"fc_editor_actions"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{size:"small",type:"success"},on:{click:function(e){return t.maybeUpdateCampaign()}}},[t._v("\n                "+t._s(t.$t("Save"))+"\n            ")]),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{size:"small",type:"primary",icon:"el-icon-right"},on:{click:function(e){return t.maybeNextStep()}}},[t._v(t._s(t.$t("Cam_Continue_S"))+"\n            ")])],1)],2)],1)},[],!1,null,null,null).exports;const ie=e({name:"DynamicSegmentCampaignPromo"},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_promo_body"},[e("div",{staticClass:"promo_block"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{sm:24,md:12}},[e("h2",[t._v(t._s(t.$t("DynamicSegmentCampaignPromo.title")))]),t._v(" "),e("p",[t._v("\n                    "+t._s(t.$t("create_as_many_dynamic_segment_introduction"))+"\n                ")]),t._v(" "),e("div",{},[e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                        "+t._s(t.$t("Get FluentCRM Pro"))+"\n                    ")])])]),t._v(" "),e("el-col",{attrs:{sm:24,md:12}},[e("div",{staticClass:"promo_content"},[e("img",{staticClass:"promo_image",attrs:{src:t.appVars.images_url+"/promo/segment_campaign.png"}})])])],1)],1)])},[],!1,null,null,null).exports;var ne=i(6449),se=i.n(ne);const ae=e({name:"TaxonomySelector",props:["field","value"],data:function(){return{model:this.value,loading:!1,options:[]}},watch:{model:function(t){this.$emit("input",t)}},methods:{fetchOptions:function(t){var e=this;this.loading=!0,this.$get("reports/taxonomy-terms",{search:t,values:this.model,taxonomy:this.field.taxonomy}).then(function(t){e.options=t.options}).catch(function(t){e.handleError(t)}).finally(function(){e.loading=!1})}},mounted:function(){this.fetchOptions("")}},function(){var t=this,e=t._self._c;return e("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{multiple:t.field.is_multiple,filterable:"",remote:"","reserve-keyword":"",disabled:t.field.disabled,size:t.field.size,placeholder:t.field.placeholder||t.$t("Please enter a keyword"),"remote-method":t.fetchOptions},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.options,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)},[],!1,null,null,null).exports;const oe={name:"RichFilterItem",props:["item","filterLabels","view_only"],components:{OptionSelector:Ft,AjaxSelector:jt,TaxonomyTermsSelector:ae,ItemTimesSelection:e({name:"ItemTimesSelection",props:["field","value","disabled"],components:{AjaxSelector:jt},data:function(){return{model:this.value,loading:!1,options:[]}},watch:{model:function(t){this.$emit("input",t)}},mounted:function(){se()(this.model)||(this.model=["",2])}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_item_num_selector"},[e("ajax-selector",{attrs:{field:{is_multiple:t.field.is_multiple,option_key:t.field.primary_selector,extended_key:t.field.extended_key||"",size:"mini",disabled:t.disabled,placeholder:t.field.primary_placeholder,cacheable:t.field.cacheable}},model:{value:t.model[0],callback:function(e){t.$set(t.model,0,e)},expression:"model[0]"}}),t._v(" "),e("el-input",{attrs:{disabled:t.disabled,placeholder:t.field.numeric_placeholder,size:"mini",type:"number",min:0},model:{value:t.model[1],callback:function(e){t.$set(t.model,1,e)},expression:"model[1]"}}),t._v(" "),t.field.input_help?e("span",[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.field.input_help,placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1):t._e()],1)},[],!1,null,null,null).exports,CascadeOptionSelector:e({name:"CascadeOptionSelector",props:["field","value"],data:function(){return{model:this.value,loading:!1,options:[],appReady:!0}},watch:{model:function(t){this.$emit("input",t)}},methods:{fetchOptions:function(t){var e=this;this.loading=!0,this.$get("reports/cascade_selections",{search:t,values:this.model,provider:this.field.provider,is_multiple:!!this.field.is_multiple}).then(function(t){e.options=t.options}).catch(function(t){e.handleError(t)}).finally(function(){e.loading=!1})},remoteMethod:function(t){if(this.loading)return!1;this.fetchOptions(t)}},mounted:function(){this.fetchOptions(""),this.value&&se()(this.value)||(this.model=[])}},function(){var t=this,e=t._self._c;return e("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"remote-method":t.remoteMethod,filterable:"",remote:"","reserve-keyword":"","value-key":"value",size:"small",multiple:t.field.is_multiple,placeholder:"Select"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.options,function(i){return e("el-option-group",{key:i.label,attrs:{label:i.label}},t._l(i.children,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)}),1)},[],!1,null,null,null).exports},data:function(){return{}},computed:{operatorOptionsNative:function(){if(this.itemConfig.custom_operators)return this.itemConfig.custom_operators;var t=this.itemConfig.type;if("extended_text"==t)return{"=":this.$t("equal"),"!=":this.$t("does not equal"),contains:this.$t("includes"),not_contains:this.$t("does not includes"),startsWith:this.$t("starts with"),endsWith:this.$t("ends with")};if(!t||"text"==t)return{"=":this.$t("equal"),"!=":this.$t("does not equal"),contains:this.$t("includes"),not_contains:this.$t("does not includes")};if("numeric"==t||"times_numeric"==t)return{">":this.$t("Greater Than"),"<":this.$t("Less Than"),"=":this.$t("equal"),"!=":this.$t("does not equal")};if("selections"==t)return this.itemConfig.custom_operators?this.itemConfig.custom_operators:"countries"===this.itemConfig.option_key?{in:this.$t("includes in"),not_in:this.$t("not includes in"),is_null:this.$t("Empty"),not_null:this.$t("Not Empty")}:this.itemConfig.is_multiple&&"subscriber"!=this.itemConfig.provider&&"custom_fields"!=this.itemConfig.provider&&!this.itemConfig.is_singular_value?{in:this.$t("includes"),not_in:this.$t("Does not include (in any)"),in_all:this.$t("includes all of"),not_in_all:this.$t("Includes none of (match all)")}:"custom_fields"==this.itemConfig.provider&&"selections"==this.itemConfig.type?{in:this.$t("includes in"),not_in:this.$t("not includes in"),"=":this.$t("equal"),"!=":this.$t("not equal")}:this.itemConfig.is_only_in?{in:this.$t("includes in")}:{in:this.$t("includes in"),not_in:this.$t("not includes in")};if("single_assert_option"==t)return{"=":this.$t("equal")};if("straight_assert_option"==t)return{"=":this.$t("equal"),"!=":this.$t("not equal")};if("dates"==t){var e={before:this.$t("before"),after:this.$t("after"),date_equal:this.$t("in the date"),days_before:this.$t("before days"),days_within:this.$t("within days")};if("activities"==this.itemConfig.provider){var i=this.$t("Never Opened");"email_link_clicked"==this.itemConfig.value&&(i=this.$t("Never Clicked")),e.never=i}return e}return"nullable_text"==t?{"=":this.$t("equal"),"!=":this.$t("does not equal"),contains:this.$t("includes"),not_contains:this.$t("does not includes"),is_null:this.$t("Empty"),not_null:this.$t("Not Empty")}:{}},operatorOptions:function(){var t=this.operatorOptionsNative;return"custom_fields"==this.itemConfig.provider&&(t.is_null=this.$t("Empty"),t.not_null=this.$t("Not Empty")),t},itemConfig:function(){var t=this.item.source.join("-");return this.filterLabels[t]||{}}},methods:{closingSource:function(t){var e=this;t||setTimeout(function(){jQuery(e.$el).find(".fc_filter_operator .el-select").trigger("click")},300)},maybeOperatorSelected:function(t){var e=this;!t&&this.item.operator&&("dates"==this.itemConfig.type&&(this.item.value=""),setTimeout(function(){jQuery(e.$el).find(".fc_filter_value input").focus()},200))},removeItem:function(){this.$emit("removeItem")},getProviderLabel:function(t){var e={ab_cart_woo:this.$t("Abandoned Cart"),custom_fields:this.$t("Custom Fields")};return e[t]?e[t]:(t=t.replace(/_/g," ").replace(/-/g," "),this.ucWords(t))}},mounted:function(){if(this.itemConfig.is_multiple&&!se()(this.item.value)&&(this.item.value=[]),this.item.operator){var t=this.item.operator,e=Object.keys(this.operatorOptions);e.length&&-1===e.indexOf(t)&&(this.item.operator=e[0])}else{var i=Object.keys(this.operatorOptions);i.length&&(this.item.operator=i[0],jQuery(this.$el).find(".fc_filter_operator .el-select").trigger("click"))}}};function re(t){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(t)}function le(t){return function(t){if(Array.isArray(t))return ce(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ce(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ce(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function ue(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function de(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=re(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==re(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const _e={name:"RichContactFilter",components:{FilterItem:e(oe,function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticStyle:{width:"210px","line-height":"110%"}},[t._v("\n        "+t._s(t.getProviderLabel(t.itemConfig.provider))+" "),e("span",{staticClass:"fs_provider_separator"},[t._v("/")]),t._v("\n        "+t._s(t.itemConfig.label)+"\n        "),t.itemConfig.help?e("span",[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"}),t._v(" "),e("span",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.itemConfig.help)},slot:"content"})])],1):t._e()]),t._v(" "),e("td",{staticClass:"fc_filter_operator",staticStyle:{width:"190px"}},[e("el-select",{attrs:{disabled:t.view_only,size:"mini",placeholder:t.$t("Select Operator")},on:{"visible-change":t.maybeOperatorSelected},model:{value:t.item.operator,callback:function(e){t.$set(t.item,"operator",e)},expression:"item.operator"}},t._l(t.operatorOptions,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t}})}),1)],1),t._v(" "),e("td",{staticClass:"fc_filter_value"},["is_null"==t.item.operator||"not_null"==t.item.operator||"never"==t.item.operator?[t._v("\n            --\n        ")]:[t.itemConfig.type&&"text"!=t.itemConfig.type&&"extended_text"!=t.itemConfig.type&&"nullable_text"!=t.itemConfig.type?"numeric"==t.itemConfig.type?e("el-input",{attrs:{disabled:t.view_only,size:"mini",type:"number",placeholder:t.$t("Condition Value"),min:t.itemConfig.min},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}}):"dates"==t.itemConfig.type?["days_before"==t.item.operator||"days_within"==t.item.operator?e("el-input",{attrs:{disabled:t.view_only,size:"mini",type:"number",placeholder:t.$t("Days")},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}}):t.item.operator?e("el-date-picker",{attrs:{type:t.itemConfig.date_type||"date",disabled:t.view_only,"value-format":t.itemConfig.value_format||"yyyy-MM-dd",size:"mini"},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}}):t._e()]:t._e():e("el-input",{attrs:{disabled:t.view_only,size:"mini",placeholder:t.$t("Condition Value"),type:"text"},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}}),t._v(" "),"selections"==t.itemConfig.type?["product_selector"==t.itemConfig.component?[e("ajax-selector",{attrs:{field:{is_multiple:t.itemConfig.is_multiple,option_key:"product_selector_"+t.itemConfig.provider,extended_key:t.itemConfig.extended_key||"",size:"mini",creatable:t.itemConfig.creatable,disabled:t.view_only,cacheable:t.itemConfig.cacheable,experimental_cache:t.itemConfig.experimental_cache}},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:"options_selector"==t.itemConfig.component?[e("option-selector",{attrs:{field:{is_multiple:t.itemConfig.is_multiple,size:"mini",disabled:t.view_only,option_key:t.itemConfig.option_key}},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:t.itemConfig.options?[e("el-select",{attrs:{disabled:t.view_only,size:"mini",multiple:t.itemConfig.is_multiple,placeholder:t.$t("Select Option")},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}},t._l(t.itemConfig.options,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t}})}),1)]:"ajax_selector"==t.itemConfig.component?[e("ajax-selector",{attrs:{field:{is_multiple:t.itemConfig.is_multiple,option_key:t.itemConfig.option_key,size:"mini",creatable:t.itemConfig.creatable,disabled:t.view_only,cacheable:t.itemConfig.cacheable,experimental_cache:t.itemConfig.experimental_cache}},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:"tax_selector"==t.itemConfig.component?[e("taxonomy-terms-selector",{attrs:{field:{is_multiple:t.itemConfig.is_multiple,size:"mini",disabled:t.view_only,taxonomy:t.itemConfig.taxonomy}},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:t.itemConfig.disable_values?[e("p",{domProps:{innerHTML:t._s(t.itemConfig.value_description)}})]:e("pre",[t._v(t._s(t.itemConfig))])]:"single_assert_option"==t.itemConfig.type||"straight_assert_option"==t.itemConfig.type?[e("el-select",{attrs:{size:"mini",placeholder:t.$t("Select Option"),disabled:t.view_only},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}},t._l(t.itemConfig.options,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t}})}),1)]:"times_numeric"==t.itemConfig.type?[e("item-times-selection",{attrs:{disabled:t.view_only,field:t.itemConfig},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:"composite_optioned_compare"==t.itemConfig.type?e("div",{staticClass:"fc_composite_filters"},[t.itemConfig.ajax_selector?e("div",{staticClass:"fc_composite_filter"},[e("label",[t._v(t._s(t.itemConfig.ajax_selector.label))]),t._v(" "),e("div",{staticClass:"fc_composite_input"},[e("ajax-selector",{attrs:{field:{is_multiple:t.itemConfig.ajax_selector.is_multiple,option_key:t.itemConfig.ajax_selector.option_key,size:"mini",creatable:t.itemConfig.ajax_selector.creatable,cacheable:t.itemConfig.ajax_selector.cacheable,experimental_cache:t.itemConfig.ajax_selector.experimental_cache}},model:{value:t.item.extra_value,callback:function(e){t.$set(t.item,"extra_value",e)},expression:"item.extra_value"}})],1)]):t._e(),t._v(" "),e("div",{staticClass:"fc_composite_filter"},[e("label",[t._v(t._s(t.itemConfig.value_config.label))]),t._v(" "),e("div",{staticClass:"fc_composite_input"},[e("el-input",{attrs:{size:"mini",type:t.itemConfig.value_config.data_type,placeholder:t.itemConfig.value_config.placeholder},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})],1)])]):"cascade_selections"==t.itemConfig.type?e("div",{staticClass:"fc_cascade_selections"},[e("CascadeOptionSelector",{attrs:{field:t.itemConfig},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})],1):t._e()]],2),t._v(" "),t.view_only?t._e():e("td",{staticStyle:{width:"50px","text-align":"right"}},[e("el-button",{attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(e){return t.removeItem()}}})],1)])},[],!1,null,null,null).exports},props:{items:{type:Array,default:function(){return[]}},add_label:{type:String,default:function(){return this.$t("Filters.instruction")}},filterOptions:{type:Array,default:function(){return this.appVars.advanced_filter_options}},view_only:{type:Boolean,default:function(){return!1}}},data:function(){return{addVisible:!1,new_item:[],working:!1,isRTL:window.fcAdmin.is_rtl}},computed:{filterLabels:function(){var t=this,e={};return this.each(this.filterOptions,function(i){t.each(i.children,function(t){e[i.value+"-"+t.value]=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(i),!0).forEach(function(e){de(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ue(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({provider:i.value},t)})}),e}},methods:{maybeSelected:function(){if(2==this.new_item.length){var t="";"subscriber"==this.new_item[0]&&"country"!=this.new_item[1]&&(t="contains"),this.items.push({source:le(this.new_item),operator:t,value:""}),this.addVisible=!1,this.new_item=[],this.$emit("showClearFilterButton")}},removeItem:function(t){var e=this;this.working=!0,this.$nextTick(function(){e.items.splice(t,1),e.items.length||e.$emit("maybeRemove"),e.working=!1})}}};const pe=e(_e,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_rich_filters"},[t.items.length&&!t.working?e("table",{staticClass:"fc_table",staticStyle:{width:"100%"}},[e("tbody",t._l(t.items,function(i,n){return e("filter-item",{key:n,attrs:{view_only:t.view_only,filterLabels:t.filterLabels,item:i},on:{removeItem:function(e){return t.removeItem(n)}}})}),1)]):t._e(),t._v(" "),0==t.items.length?e("div",{staticClass:"fc_filter_intro fc_pad_around_5"},[e("el-popover",{staticClass:"fc_contact_filter_pop",attrs:{placement:t.isRTL?"left":"right",width:"450",trigger:"manual"},model:{value:t.addVisible,callback:function(e){t.addVisible=e},expression:"addVisible"}},[e("el-cascader-panel",{staticStyle:{width:"100%"},attrs:{options:t.filterOptions},on:{change:t.maybeSelected},model:{value:t.new_item,callback:function(e){t.new_item=e},expression:"new_item"}}),t._v(" "),e("el-button",{attrs:{slot:"reference",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.addVisible=!t.addVisible}},slot:"reference"},[t._v("\n                "+t._s(t.$t("Add"))+"\n            ")])],1),t._v("\n        "+t._s(t.$t(t.add_label))+"\n        "),e("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.$emit("maybeRemove")}}})],1):t.view_only?t._e():e("div",{staticClass:"fc_filter_intro fc_pad_around_5"},[e("el-popover",{attrs:{placement:t.isRTL?"left":"right",width:"450",trigger:"manual"},model:{value:t.addVisible,callback:function(e){t.addVisible=e},expression:"addVisible"}},[e("el-cascader-panel",{staticStyle:{width:"100%"},attrs:{options:t.filterOptions},on:{change:t.maybeSelected},model:{value:t.new_item,callback:function(e){t.new_item=e},expression:"new_item"}}),t._v(" "),e("el-button",{attrs:{slot:"reference",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.addVisible=!t.addVisible}},slot:"reference"},[t._v("\n                "+t._s(t.$t("Add"))+"\n            ")])],1),t._v("\n        "+t._s(t.$t(t.add_label))+"\n    ")],1)])},[],!1,null,null,null).exports;const me=e({name:"AdvancedFilterPromo"},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_promo_body"},[e("div",{staticClass:"promo_block",staticStyle:{background:"#f9fafa",padding:"20px","text-align":"center",display:"block",overflow:"hidden"}},[e("h2",[t._v(t._s(t.$t("Advanced Filter is a pro feature")))]),t._v(" "),e("p",[t._v("\n            "+t._s(t.$t("segment_your_contacts"))+"\n        ")]),t._v(" "),e("div",{},[e("a",{staticClass:"el-button el-button--primary",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                "+t._s(t.$t("Get FluentCRM Pro"))+"\n            ")])])])])},[],!1,null,null,null).exports;const fe=e({name:"recipientTagger",props:["value"],components:{DynamicSegmentCampaignPromo:ie,RichFilter:pe,AdvancedFilterPromo:me},data:function(){return{settings:this.value,fetchingData:!1,settings_mock:{subscribers:[{list:null,tag:null}],excludedSubscribers:[{list:null,tag:null}],sending_filter:"list_tag",dynamic_segment:{id:"",slug:""},advanced_filters:[[]]},lists:[],tags:[],segments:[],advanced_filters:[[]],estimated_count:0,estimating:!1,FilterLabel:this.$t("Filters.instruction")}},computed:{all_tag_groups:function(){return{all:{title:"",options:[{title:this.$t("Rec_All_coSLs"),slug:"all",id:"all"}]},tags:{title:this.$t("Tags"),options:this.tags}}}},watch:{settings:{handler:function(t,e){this.$emit("input",t),"advanced_filters"!=this.settings.sending_filter&&this.fetchEstimatedCount()},deep:!0}},methods:{fetch:function(){var t=this;this.fetchingData=!0,this.$get("reports/options",{fields:"lists,tags,segments",with_count:["lists"]}).then(function(e){t.lists=e.options.lists,t.tags=e.options.tags,t.segments=e.options.segments}).catch(function(e){t.handleError(e)}).finally(function(){t.fetchingData=!1})},add:function(t,e){this.settings[t].splice(e+1,0,{list:"subscribers"==t?"all":null,tag:"all"})},remove:function(t,e){this.settings[t].length>1&&this.settings[t].splice(e,1)},fetchEstimatedCount:function(){var t=this,e=this.settings,i={sending_filter:e.sending_filter};if("list_tag"==e.sending_filter){var n=e.subscribers.filter(function(t){return t.list&&t.tag}),s=e.excludedSubscribers.filter(function(t){return t.list&&t.tag});if(!n.length)return!1;s.length&&(i.excludedSubscribers=s),i.subscribers=n}else if("dynamic_segment"==e.sending_filter){if(!e.dynamic_segment.uid)return!1;i.dynamic_segment=e.dynamic_segment}else{if("advanced_filters"!=e.sending_filter)return!1;i.advanced_filters=JSON.stringify(this.advanced_filters)}this.estimating=!0,this.$post("campaigns/estimated-contacts",i).then(function(e){t.estimated_count=e.count}).catch(function(e){t.handleError(e)}).finally(function(){t.estimating=!1})},addConditionGroup:function(){this.advanced_filters.push([])},maybeRemoveGroup:function(t){this.advanced_filters.length>1&&this.advanced_filters.splice(t,1)}},mounted:function(){this.fetch(),this.fetchEstimatedCount()},created:function(){var t=JSON.parse(JSON.stringify(this.settings_mock));this.settings?(this.settings.subscribers||(this.settings.subscribers=t.subscribers),this.settings.excludedSubscribers||(this.settings.excludedSubscribers=t.excludedSubscribers),this.settings.dynamic_segment||(this.settings.dynamic_segment=t.dynamic_segment),this.settings.advanced_filters?this.advanced_filters=this.settings.advanced_filters:this.settings.advanced_filters=this.advanced_filters,this.settings.sending_filter||(this.settings.sending_filter=t.sending_filter)):this.settings=t}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_recipient_tagger"},[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.fetchingData,expression:"fetchingData"}]},[e("div",{staticClass:"text-align-center",staticStyle:{"margin-bottom":"20px"}},[e("el-radio-group",{model:{value:t.settings.sending_filter,callback:function(e){t.$set(t.settings,"sending_filter",e)},expression:"settings.sending_filter"}},[e("el-radio-button",{staticClass:"fc_list_tag_selector",attrs:{label:"list_tag"}},[t._v(t._s(t.$t("By List & Tag")))]),t._v(" "),e("el-radio-button",{staticClass:"fc_dynamic_segment_selector",attrs:{label:"dynamic_segment"}},[t._v(t._s(t.$t("By Dynamic Segment")))]),t._v(" "),e("el-radio-button",{staticClass:"fc_advanced_filters_selector",attrs:{label:"advanced_filters"}},[t._v(t._s(t.$t("By Advanced Filter")))])],1)],1),t._v(" "),"list_tag"==t.settings.sending_filter?[e("div",{staticClass:"fc_narrow_box fc_white_inverse"},[e("div",{staticClass:"fc_section_heading"},[e("h3",[t._v(t._s(t.$t("Included Contacts")))]),t._v(" "),e("p",[t._v("\n                        "+t._s(t.$t("Rec_Select_LaTtywtse"))+"\n                    ")])]),t._v(" "),e("table",{staticClass:"fc_horizontal_table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("Select A List")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Select Tag")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),e("tbody",t._l(t.settings.subscribers,function(i,n){return e("tr",{key:n},[e("td",[e("el-select",{attrs:{size:"small",placeholder:t.$t("Choose a List"),filterable:"","popper-class":"list"},model:{value:i.list,callback:function(e){t.$set(i,"list",e)},expression:"formItem.list"}},[e("el-option",{attrs:{label:t.$t("All Lists"),value:"all"}},[e("span",[t._v("\n                                        "+t._s(t.$t("All available subscribers"))+"\n                                    ")]),t._v(" "),e("span",{staticClass:"list-metrics"},[t._v("\n                                        "+t._s(t.$t("Rec_This_wfaac"))+"\n                                    ")])]),t._v(" "),t._l(t.lists,function(i){return e("el-option",{key:i.id,attrs:{label:i.title,value:String(i.id)}},[e("span",[t._v("\n                                        "+t._s(i.title)+"\n                                    ")]),t._v(" "),e("span",{staticClass:"list-metrics"},[t._v("\n                                        "+t._s(i.subscribersCount)+" "+t._s(t.$t("subscribed contacts"))+"\n                                    ")])])})],2)],1),t._v(" "),e("td",[e("el-select",{attrs:{disabled:!i.list,placeholder:i.list?t.$t("Select Tag"):t.$t("Select List First"),size:"small",filterable:""},model:{value:i.tag,callback:function(e){t.$set(i,"tag",e)},expression:"formItem.tag"}},t._l(t.all_tag_groups,function(i,n){return e("el-option-group",{key:n,attrs:{label:i.title}},t._l(i.options,function(i,n){return e("el-option",{key:n,attrs:{label:i.title,value:String(i.id)}},[e("span",[t._v(t._s(i.title))])])}),1)}),1)],1),t._v(" "),e("td",[e("el-button-group",[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.add("subscribers",n)}}},[t._v("+")]),t._v(" "),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.remove("subscribers",n)}}},[t._v("-")])],1)],1)])}),0)]),t._v(" "),e("p",[t._v(t._s(t.$t("Rec_Select_Loasfatst")))])]),t._v(" "),e("div",{staticClass:"fc_narrow_box fc_white_inverse"},[e("div",{staticClass:"fc_section_heading"},[e("h3",[t._v(t._s(t.$t("Excluded Contacts")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Rec_Select_LaTtywtef")))])]),t._v(" "),e("table",{staticClass:"fc_horizontal_table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("Select A List")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Select Tag")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),e("tbody",t._l(t.settings.excludedSubscribers,function(i,n){return e("tr",{key:n},[e("td",[e("el-select",{attrs:{size:"small",clearable:"",filterable:"",placeholder:t.$t("Choose a List"),"popper-class":"list"},model:{value:i.list,callback:function(e){t.$set(i,"list",e)},expression:"formItem.list"}},[e("el-option",{attrs:{label:t.$t("All Lists"),value:"all"}},[e("span",[t._v("\n                                        "+t._s(t.$t("All available contacts"))+"\n                                    ")]),t._v(" "),e("span",{staticClass:"list-metrics"},[t._v("\n                                        "+t._s(t.$t("Rec_This_wfaac"))+"\n                                    ")])]),t._v(" "),t._l(t.lists,function(i){return e("el-option",{key:i.id,attrs:{label:i.title,value:String(i.id)}},[e("span",[t._v("\n                                        "+t._s(i.title)+"\n                                    ")]),t._v(" "),e("span",{staticClass:"list-metrics"},[t._v("\n                                        "+t._s(i.subscribersCount)+" "+t._s(t.$t("subscribed contacts"))+"\n                                    ")])])})],2)],1),t._v(" "),e("td",[e("el-select",{attrs:{disabled:!i.list,clearable:"",filterable:"",placeholder:i.list?t.$t("Select Tag"):t.$t("Select List First"),size:"small"},model:{value:i.tag,callback:function(e){t.$set(i,"tag",e)},expression:"formItem.tag"}},t._l(t.all_tag_groups,function(i,n){return e("el-option-group",{key:n,attrs:{label:i.title}},t._l(i.options,function(i,n){return e("el-option",{key:n,attrs:{label:i.title,value:String(i.id)}},[e("span",[t._v(t._s(i.title))])])}),1)}),1)],1),t._v(" "),e("td",[e("el-button-group",[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.add("excludedSubscribers",n)}}},[t._v("+")]),t._v(" "),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.remove("excludedSubscribers",n)}}},[t._v("-")])],1)],1)])}),0)])])]:"dynamic_segment"==t.settings.sending_filter?[e("div",{staticClass:"fc_narrow_box fc_white_inverse"},[t.has_campaign_pro?[e("div",{staticClass:"fc_section_heading"},[e("h3",[t._v(t._s(t.$t("Select Dynamic Segment")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Rec_Please_stwdsywts")))])]),t._v(" "),e("el-select",{attrs:{placeholder:t.$t("Select"),"value-key":"uid"},model:{value:t.settings.dynamic_segment,callback:function(e){t.$set(t.settings,"dynamic_segment",e)},expression:"settings.dynamic_segment"}},t._l(t.segments,function(t){return e("el-option",{key:t.slug+"_"+t.id,attrs:{value:{uid:t.slug+"_"+t.id,slug:t.slug,id:t.id},label:t.title}})}),1)]:e("dynamic-segment-campaign-promo")],2)]:"advanced_filters"==t.settings.sending_filter?[e("div",{staticClass:"fc_narrow_box fc_white_inverse"},[t.has_campaign_pro?e("div",{staticClass:"fc_rich_container"},[e("div",{staticClass:"fc_section_heading"},[e("h3",[t._v(t._s(t.$t("Select custom contacts by advanced filters")))])]),t._v(" "),e("div",{staticClass:"fc_rich_wrap"},t._l(t.advanced_filters,function(i,n){return e("div",{key:n},[e("div",{staticClass:"fc_rich_filter"},[e("rich-filter",{attrs:{add_label:t.FilterLabel,items:i},on:{maybeRemove:function(e){return t.maybeRemoveGroup(n)}}})],1),t._v(" "),e("div",{staticClass:"fc_cond_or"},[e("em",[t._v(t._s(t.$t("OR")))])])])}),0),t._v(" "),e("div",{staticClass:"fc_cond_or"},[e("em",{staticStyle:{cursor:"pointer",color:"rgb(0, 119, 204)","font-weight":"bold"},on:{click:function(e){return t.addConditionGroup()}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" "+t._s(t.$t("OR")))])]),t._v(" "),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.fetchEstimatedCount()}}},[t._v(t._s(t.$t("Filter")))]),t._v(" "),e("el-button",{attrs:{size:"small"},on:{click:function(e){t.settings.advanced_filters=[[]],t.fetch()}}},[t._v("\n                        "+t._s(t.$t("Clear Filters"))+"\n                    ")])],1):e("advanced-filter-promo")],1)]:t._e(),t._v(" "),e("h3",{directives:[{name:"loading",rawName:"v-loading",value:t.estimating,expression:"estimating"}],staticClass:"text-align-center fc_counting_heading",staticStyle:{"margin-bottom":"40px"}},[e("span",[t._v(t._s(t.estimated_count))]),t._v("\n            "+t._s(t.$t("Rec_contacts_fboys"))+"\n        ")])],2),t._v(" "),t._t("fc_tagger_bottom")],2)},[],!1,null,null,null).exports;function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}const ge={name:"Recipients",components:{RecipientTaggerForm:fe},props:["campaign"],data:function(){return{btnDeleting:!1,btnSubscribing:!1,inserting_page:1,inserting_total_page:0,total_contacts:0,inserted_total:0,inserting_now:!1,processingError:!1}},computed:{progressPercent:function(){return this.total_contacts?parseInt(this.inserted_total/this.total_contacts*100):1}},methods:{validateLists:function(){var t=this,e=this.campaign.settings,i=e.subscribers.filter(function(t){return t.list&&t.tag}),n=e.excludedSubscribers.filter(function(t){return t.list&&t.tag});if("list_tag"===e.sending_filter){if(i.length!==e.subscribers.length||n.length&&n.length!==e.excludedSubscribers.length)return void this.$notify.error({title:this.$t("Oops!"),message:this.$t("Recipients.instruction"),offset:19})}else if("dynamic_segment"==e.sending_filter){if(!e.dynamic_segment.uid)return void this.$notify.error({title:this.$t("Oops!"),message:this.$t("Please select the segment"),offset:19})}else if("advanced_filters"==e.sending_filter){var s=!1;if(this.each(e.advanced_filters,function(e){t.isEmptyValue(e)||(s=!0)}),!s)return void this.$notify.error({title:this.$t("Oops!"),message:this.$t("Please select the filters"),offset:19})}var a={subscribers:i,excludedSubscribers:n,sending_filter:e.sending_filter,dynamic_segment:e.dynamic_segment,page:this.inserting_page,advanced_filters:JSON.stringify(e.advanced_filters)};this.btnSubscribing=!0,this.processingError=!1,this.$post("campaigns/".concat(this.campaign.id,"/draft-recipients"),a).then(function(e){if("object"!=he(e))return t.handleError(e),void(t.processingError=e);e.has_more?(t.inserting_page=e.next_page,t.inserted_total=e.count,t.$nextTick(function(){t.validateLists()})):(t.campaign.recipients_count=e.count,t.$notify.success({title:t.$t("Great!"),message:t.$t("Contacts has been attached with this campaign"),offset:19}),t.$emit("next",1),t.btnSubscribing=!1,t.inserting_now=!1,t.inserting_page=1)}).catch(function(e){t.handleError(e),t.processingError=e||t.$t("Unknown error")}).finally(function(){})},startOver:function(){this.processingError=!1,this.btnSubscribing=!1,this.inserting_now=!1},retryProcess:function(){this.processingError=!1,this.validateLists()},goToPrev:function(){this.$emit("prev",1)},fetchEstimated:function(){var t=this,e=this.campaign.settings,i=e.subscribers.filter(function(t){return t.list&&t.tag}),n=e.excludedSubscribers.filter(function(t){return t.list&&t.tag});if("list_tag"===e.sending_filter){if(i.length!==e.subscribers.length||n.length&&n.length!==e.excludedSubscribers.length)return}else if("dynamic_segment"==e.sending_filter){if(!e.dynamic_segment.uid)return}else if("advanced_filters"==e.sending_filter){var s=!1;if(this.each(e.advanced_filters,function(e){t.isEmptyValue(e)||(s=!0)}),!s)return}var a={subscribers:i,excludedSubscribers:n,sending_filter:e.sending_filter,dynamic_segment:e.dynamic_segment,advanced_filters:JSON.stringify(e.advanced_filters)};this.$post("campaigns/estimated-contacts",a).then(function(e){t.total_contacts=e.count}).catch(function(e){t.handleError(e)})},start_process:function(){this.validateLists(),this.fetchEstimated()}}};var ve=i(9538),be={insert:"head",singleton:!1};a()(ve.A,be);ve.A.locals;const ye=e(ge,function(){var t=this,e=t._self._c;return e("div",{staticClass:"recipients"},[t.inserting_now?e("div",{staticClass:"text-align-center"},[e("h3",[t._v(t._s(t.$t("Processing now...")))]),t._v(" "),e("h4",[t._v(t._s(t.$t("Rec_Please_dnctw")))]),t._v(" "),t.total_contacts?[e("h2",[t._v(t._s(t.inserted_total)+"/"+t._s(t.total_contacts))]),t._v(" "),e("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:t.progressPercent,status:"success"}}),t._v(" "),e("p",{directives:[{name:"loading",rawName:"v-loading",value:t.inserting_now&&!t.processingError,expression:"inserting_now && !processingError"}]},[t._v(t._s(t.$t("Processing now.Please wait a bit...")))])]:t._e(),t._v(" "),t.processingError?e("div",[e("h3",[t._v(t._s(t.$t("Rec_Processing_EhMit")))]),t._v(" "),e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.retryProcess()}}},[t._v(t._s(t.$t("Resume")))]),t._v(" "),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.startOver()}}},[t._v(t._s(t.$t("StartOver")))]),t._v(" "),e("div",{staticStyle:{"text-align":"left"}},[e("h3",[t._v("Error Details")]),t._v(" "),e("pre",[t._v(t._s(t.processingError))])])],1):t._e()],2):e("el-form",[e("recipient-tagger-form",{model:{value:t.campaign.settings,callback:function(e){t.$set(t.campaign,"settings",e)},expression:"campaign.settings"}}),t._v(" "),e("el-row",{staticStyle:{"max-width":"860px",margin:"0 auto"},attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.goToPrev()}}},[t._v(" "+t._s(t.$t("Back"))+"\n                ")])],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-button",{staticClass:"pull-right",attrs:{size:"small",type:"success",loading:t.btnSubscribing},on:{click:function(e){return t.start_process()}}},[t._v("\n                    "+t._s(t.$t("Rec_Continue_TNS_aS"))+"\n                ")])],1)],1)],1)],1)},[],!1,null,null,null).exports;const we=e({name:"RecipientTaggerView",props:["settings"],components:{RichFilter:pe},data:function(){return{fetchingData:!1,lists:[],tags:[],segments:[],advanced_filters:[[]],FilterLabel:this.$t("Filters.instruction")}},computed:{all_tag_groups:function(){return{all:{title:"",options:[{title:this.$t("Rec_All_coSLs"),slug:"all",id:"all"}]},tags:{title:this.$t("Tags"),options:this.tags}}}},methods:{fetch:function(){var t=this;this.fetchingData=!0,this.$get("reports/options",{fields:"lists,tags,segments",with_count:["lists"]}).then(function(e){t.lists=e.options.lists,t.tags=e.options.tags,t.segments=e.options.segments}).catch(function(e){t.handleError(e)}).finally(function(){t.fetchingData=!1})}},mounted:function(){this.fetch()},created:function(){this.settings.advanced_filters?this.advanced_filters=this.settings.advanced_filters:this.settings.advanced_filters=this.advanced_filters}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetchingData,expression:"fetchingData"}]},["list_tag"==t.settings.sending_filter?[e("div",{},[e("div",{staticClass:"fc_section_heading"},[e("h3",[t._v(t._s(t.$t("Sending To Contacts")))])]),t._v(" "),e("table",{staticClass:"fc_horizontal_table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("List")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Tag")))])])]),t._v(" "),e("tbody",t._l(t.settings.subscribers,function(i,n){return e("tr",{key:n},[e("td",[e("el-select",{attrs:{disabled:!0,size:"small",placeholder:t.$t("Choose a List"),filterable:"","popper-class":"list"},model:{value:i.list,callback:function(e){t.$set(i,"list",e)},expression:"formItem.list"}},[e("el-option",{attrs:{label:t.$t("All Lists"),value:"all"}},[e("span",[t._v("\n                                        "+t._s(t.$t("All available subscribers"))+"\n                                    ")]),t._v(" "),e("span",{staticClass:"list-metrics"},[t._v("\n                                        "+t._s(t.$t("Rec_This_wfaac"))+"\n                                    ")])]),t._v(" "),t._l(t.lists,function(i){return e("el-option",{key:i.id,attrs:{label:i.title,value:String(i.id)}},[e("span",[t._v("\n                                        "+t._s(i.title)+"\n                                    ")]),t._v(" "),e("span",{staticClass:"list-metrics"},[t._v("\n                                        "+t._s(i.subscribersCount)+" "+t._s(t.$t("subscribed contacts"))+"\n                                    ")])])})],2)],1),t._v(" "),e("td",[e("el-select",{attrs:{disabled:!0,placeholder:t.$t("Select Tag"),size:"small",filterable:""},model:{value:i.tag,callback:function(e){t.$set(i,"tag",e)},expression:"formItem.tag"}},t._l(t.all_tag_groups,function(i,n){return e("el-option-group",{key:n,attrs:{label:i.title}},t._l(i.options,function(i,n){return e("el-option",{key:n,attrs:{label:i.title,value:String(i.id)}},[e("span",[t._v(t._s(i.title))])])}),1)}),1)],1)])}),0)])]),t._v(" "),t.settings.excludedSubscribers&&t.settings.excludedSubscribers.length?e("div",[e("div",{staticClass:"fc_section_heading"},[e("h3",[t._v(t._s(t.$t("Excluded Contacts")))])]),t._v(" "),e("table",{staticClass:"fc_horizontal_table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("List")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Tag")))])])]),t._v(" "),e("tbody",t._l(t.settings.excludedSubscribers,function(i,n){return e("tr",{key:n},[e("td",[e("el-select",{attrs:{disabled:!0,size:"small",clearable:"",placeholder:t.$t("Choose a List"),filterable:"","popper-class":"list"},model:{value:i.list,callback:function(e){t.$set(i,"list",e)},expression:"formItem.list"}},[e("el-option",{attrs:{label:t.$t("All Lists"),value:"all"}},[e("span",[t._v("\n                                        "+t._s(t.$t("All available contacts"))+"\n                                    ")]),t._v(" "),e("span",{staticClass:"list-metrics"},[t._v("\n                                        "+t._s(t.$t("Rec_This_wfaac"))+"\n                                    ")])]),t._v(" "),t._l(t.lists,function(i){return e("el-option",{key:i.id,attrs:{label:i.title,value:String(i.id)}},[e("span",[t._v("\n                                        "+t._s(i.title)+"\n                                    ")]),t._v(" "),e("span",{staticClass:"list-metrics"},[t._v("\n                                        "+t._s(i.subscribersCount)+" "+t._s(t.$t("subscribed contacts"))+"\n                                    ")])])})],2)],1),t._v(" "),e("td",[e("el-select",{attrs:{disabled:!0,clearable:"",filterable:"",placeholder:t.$t("Select"),size:"small"},model:{value:i.tag,callback:function(e){t.$set(i,"tag",e)},expression:"formItem.tag"}},t._l(t.all_tag_groups,function(i,n){return e("el-option-group",{key:n,attrs:{label:i.title}},t._l(i.options,function(i,n){return e("el-option",{key:n,attrs:{label:i.title,value:String(i.id)}},[e("span",[t._v(t._s(i.title))])])}),1)}),1)],1)])}),0)])]):t._e()]:"dynamic_segment"==t.settings.sending_filter?[e("div",[[e("div",{staticClass:"fc_section_heading"},[e("h3",[t._v(t._s(t.$t("Dynamic Segment")))])]),t._v(" "),e("el-select",{attrs:{disabled:!0,filterable:"",placeholder:t.$t("Select"),"value-key":"uid"},model:{value:t.settings.dynamic_segment,callback:function(e){t.$set(t.settings,"dynamic_segment",e)},expression:"settings.dynamic_segment"}},t._l(t.segments,function(t){return e("el-option",{key:t.slug+"_"+t.id,attrs:{value:{uid:t.slug+"_"+t.id,slug:t.slug,id:t.id},label:t.title}})}),1)]],2)]:"advanced_filters"==t.settings.sending_filter?[t.has_campaign_pro?e("div",{staticClass:"fc_rich_container"},[e("div",{staticClass:"fc_section_heading"},[e("h3",[t._v(t._s(t.$t("Advanced Filter")))])]),t._v(" "),e("div",{staticClass:"fc_rich_wrap"},t._l(t.advanced_filters,function(i,n){return e("div",{key:n},[e("div",{staticClass:"fc_rich_filter"},[e("rich-filter",{attrs:{add_label:t.FilterLabel,view_only:!0,items:i}})],1),t._v(" "),e("div",{staticClass:"fc_cond_or"},[e("em",[t._v(t._s(t.$t("OR")))])])])}),0)]):t._e()]:t._e()],2)},[],!1,null,null,null).exports;var Ce=e({name:"ViewSegmentRecipient",props:["campaign_id"],components:{Pagination:m},data:function(){return{subscribers:[],loading:!1,first_loading:!0,pagination:{current_page:1,per_page:10,total:0},search:"",sort_by:"id",sort_type:"desc"}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("campaigns/"+this.campaign_id+"/contacts-by-segment",{search:this.search,per_page:this.pagination.per_page,page:this.pagination.current_page,sort_by:this.sort_by,sort_type:this.sort_type}).then(function(e){t.pagination.total=e.subscribers.total,t.subscribers=e.subscribers.data}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1,t.first_loading=!1})},getRelations:function(t,e){return(t[e]||[]).map(function(t){return t.title}).join(", ")},handleSortable:function(t){"descending"===t.order?(this.sort_by=t.prop,this.sort_type="DESC"):(this.sort_by=t.prop,this.sort_type="ASC"),this.fetch()}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",[t.first_loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:10}}):e("div",[e("el-input",{staticClass:"input-with-select mr-10",attrs:{size:"mini",placeholder:t.$t("Search")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.fetch()}},slot:"append"})],1),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"subscribersTable",staticStyle:{width:"100%"},attrs:{"default-sort":{prop:t.sort_by,order:"DESC"==t.sort_type?"descending":"ascending"},"empty-text":t.$t("No Contacts Found"),data:t.subscribers,border:"",id:"fluentcrm-subscribers-table",stripe:""},on:{"sort-change":t.handleSortable}},[e("el-table-column",{attrs:{label:"",property:"id",sortable:"custom",width:"55"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"subscriber",params:{id:i.row.id}}}},[e("img",{staticClass:"fc_contact_photo",attrs:{title:t.$t("Contact ID:")+" "+i.row.id,src:i.row.photo}})])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Email"),property:"email",width:"220",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"subscriber",params:{id:i.row.id}}}},[t._v("\n                        "+t._s(i.row.email)+"\n                    ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Name"),"min-width":"180",property:"first_name",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.full_name)+"\n                ")]}}])}),t._v(" "),e("el-table-column",{attrs:{"min-width":"180",label:t.$t("Lists"),property:"lists"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t.getRelations(i.row,"lists")))])]}}])}),t._v(" "),e("el-table-column",{attrs:{"min-width":"180",label:t.$t("Tags"),property:"tags"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t.getRelations(i.row,"tags")))])]}}])}),t._v(" "),e("el-table-column",{attrs:{"min-width":"120",label:t.$t("Phone"),property:"phone"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.phone)+"\n                ")]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Type"),width:"150",property:"contact_type",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("ucWords")(t.trans(e.row.contact_type)))+"\n                ")]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Date Added"),"min-width":"190",property:"created_at",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.created_at?[e("i",{staticClass:"el-icon-time"}),t._v(" "),e("span",{attrs:{title:i.row.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(i.row.created_at)))])]:t._e()]}}])})],1),t._v(" "),e("pagination",{attrs:{pagination:t.pagination,hide_on_single:!1,extra_sizes:[200,250,300,400,600]},on:{per_page_change:function(e){t.storage.set("contact_perpage",e)},fetch:t.fetch}})],1)],1)},[],!1,null,null,null);const $e={name:"Campaign",components:{CampaignTemplate:z,Recipients:ye,CampaignReview:e({name:"CampaignReview",props:["campaign"],components:{ReadableRecipients:we,SendTestEmail:M,ViewSegmentRecipients:Ce.exports,PreviewIframeBuilder:$,Confirm:d},data:function(){return{campaignConfirmMessage:"<b>"+this.$t("Cam_Send_Now_Confirm_Header")+"</b><br />"+this.$t("Cam_Send_Now_Message"),btnSending:!1,sending_type:"send_now",schedule_date_time:"",subscribers_modal:!1,showing_recipients:!1,pickerOptions:nt,emailDateRangeConfig:st,show_selections:!1,count:null,showScheduleTimer:!0}},watch:{sending_type:function(t,e){this.campaignConfirmMessage="send_now"===t?"<b>"+this.$t("Cam_Send_Now_Confirm_Header")+"</b><br />"+this.$t("Cam_Send_Now_Message"):"<b>"+this.$t("Schedule_Cam_Confirm_Header")+"</b>"}},methods:{sendEmails:function(){var t=this,e={};if("schedule"===this.sending_type){if(!this.schedule_date_time)return void this.$notify.error(this.$t("Please select a date and time"));e.scheduled_at=this.schedule_date_time,e.sending_type="schedule"}else if("range_schedule"===this.sending_type){if(!this.schedule_date_time[0]||!this.schedule_date_time[1])return void this.$notify.error(this.$t("Please select a date and time"));if(!this.has_campaign_pro)return void this.$notify.error(this.$t("You need pro version to use this feature"));e.scheduled_at=this.schedule_date_time,e.sending_type="range_schedule"}this.btnSending=!0,this.$post("campaigns/".concat(this.campaign.id,"/schedule"),e).then(function(e){t.$notify.success({title:t.$t("Great!"),message:e.message,offset:19}),t.$router.push({name:"campaign-view",params:{id:t.campaign.id}})}).catch(function(e){t.$notify.error(e.message)}).finally(function(){t.btnSending=!1})},sendingTypeChanged:function(){var t=this;this.showScheduleTimer=!1,"send_now"===this.sending_type||"schedule"===this.sending_type?this.schedule_date_time="":"range_schedule"===this.sending_type&&(this.schedule_date_time=["",""]),this.$nextTick(function(){t.showScheduleTimer=!0})},goToStep:function(t){this.$emit("goToStep",t)},saveThisStep:function(){this.$post("campaigns/".concat(this.campaign.id,"/step"),{next_step:3})},getCount:function(){var t=this;this.$get("campaigns/".concat(this.campaign.id,"/estimated-recipients-count")).then(function(e){t.count=e.estimated_count})}},mounted:function(){this.saveThisStep(),this.getCount()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"camapign_review_wrapper"},[e("div",{staticClass:"campaign_review_items"},[e("div",{staticClass:"camapign_review_item"},[e("el-row",[e("el-col",{attrs:{span:20}},[e("h3",[t._v(t._s(t.$t("Recipients")))]),t._v(" "),e("p",{directives:[{name:"loading",rawName:"v-loading",value:null===t.count,expression:"count === null"}],staticStyle:{cursor:"pointer"},on:{click:function(e){t.show_selections=!t.show_selections}}},[t._v(t._s(t.$t("Total:"))+" "),e("b",[t._v(t._s(t.count||"~0+")+"\n                        "+t._s(t.$t("Recipients")))])]),t._v(" "),t.show_selections?e("div",[e("h3",[t._v(t._s(t.$t("Recipient Sections")))]),t._v(" "),e("readable-recipients",{attrs:{settings:t.campaign.settings}}),t._v(" "),e("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){t.showing_recipients=!t.showing_recipients}}},[t._v("\n                            "+t._s(t.$t("Show Individual Recipients"))+"\n                        ")])],1):t._e()]),t._v(" "),e("el-col",{staticClass:"text-align-right",attrs:{span:4}},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.goToStep(2)}}},[t._v(t._s(t.$t("Edit Recipients")))])],1)],1)],1),t._v(" "),e("div",{staticClass:"camapign_review_item"},[e("el-row",[e("el-col",{attrs:{span:20}},[e("h3",[t._v(t._s(t.$t("Subject")))]),t._v(" "),e("p",[t._v(t._s(t.campaign.email_subject))]),t._v(" "),e("p",{staticStyle:{color:"gray"}},[t._v(t._s(t.$t("Preview Text:"))+" "+t._s(t.campaign.email_pre_header))])]),t._v(" "),e("el-col",{staticClass:"text-align-right",attrs:{span:4}},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.goToStep(1)}}},[t._v(t._s(t.$t("Edit Subject")))])],1)],1)],1),t._v(" "),e("div",{staticClass:"camapign_review_item"},[e("el-row",[e("el-col",{attrs:{span:20}},[e("h3",[t._v(t._s(t.$t("Email Body")))]),t._v(" "),e("div",{staticClass:"fluentcrm_email_body_preview",staticStyle:{padding:"0","max-width":"800px","min-height":"350px"}},[e("preview-iframe-builder",{attrs:{show_audit:!0,frame_height:"300px",campaign:t.campaign,campaign_id:t.campaign.id}})],1),t._v(" "),e("br"),t._v(" "),e("send-test-email",{attrs:{placement:"right",campaign:t.campaign}})],1),t._v(" "),e("el-col",{staticClass:"text-align-right",attrs:{span:4}},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.goToStep(0)}}},[t._v("\n                        "+t._s(t.$t("Edit Email Body"))+"\n                    ")])],1)],1)],1),t._v(" "),e("div",{staticClass:"camapign_review_item"},[e("h3",[t._v(t._s(t.$t("Cam_Broadcast_Schedu")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Cam_If_yteiaYcbten")))]),t._v(" "),e("hr"),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("h4",[t._v(t._s(t.$t("When you send the emails?")))]),t._v(" "),e("el-radio-group",{staticClass:"fluentcrm_line_items",on:{change:function(e){return t.sendingTypeChanged()}},model:{value:t.sending_type,callback:function(e){t.sending_type=e},expression:"sending_type"}},[e("el-radio",{attrs:{label:"send_now"}},[t._v(t._s(t.$t("Send the emails right now")))]),t._v(" "),e("el-radio",{attrs:{label:"schedule"}},[t._v(t._s(t.$t("Schedule the emails")))]),t._v(" "),e("el-radio",{attrs:{label:"range_schedule"}},[t._v("\n                            "+t._s(t.$t("Schedule_Date_Time_Info"))+"\n                        ")])],1)],1),t._v(" "),t.showScheduleTimer?e("el-col",{attrs:{span:12}},["schedule"==t.sending_type?[e("h4",[t._v(t._s(t.$t("Please set date and time")))]),t._v(" "),e("div",{staticClass:"block"},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",required:"",type:"datetime","picker-options":t.pickerOptions,placeholder:t.$t("Select date and time")},model:{value:t.schedule_date_time,callback:function(e){t.schedule_date_time=e},expression:"schedule_date_time"}})],1),t._v(" "),e("p",[t._v(t._s(t.$t("Cam_Current_ST_oySS"))+": "),e("code",[t._v(t._s(t.campaign.server_time))])]),t._v(" "),e("br"),e("br")]:"range_schedule"==t.sending_type?[e("h4",[t._v(t._s(t.$t("Select_Date_Time_Alert")))]),t._v(" "),e("div",{staticClass:"block"},[e("el-date-picker",{attrs:{disabled:!this.has_campaign_pro,"value-format":"yyyy-MM-dd HH:mm:ss",required:"",type:"datetimerange","picker-options":t.emailDateRangeConfig,placeholder:t.$t("Select date and time")},model:{value:t.schedule_date_time,callback:function(e){t.schedule_date_time=e},expression:"schedule_date_time"}})],1),t._v(" "),this.has_campaign_pro?t._e():e("p",[t._v(t._s(t.$t("To use this feature you need FluentCRM Pro."))+" "),e("a",{attrs:{target:"_blank",href:t.appVars.upgrade_url}},[t._v(t._s(t.$t("Please upgrade.")))])]),t._v(" "),e("p",[t._v(t._s(t.$t("Camp_Notice_About_Time")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Cam_Current_ST_oySS"))+": "),e("code",[t._v(t._s(t.campaign.server_time))])]),t._v(" "),e("br"),e("br")]:t._e()],2):t._e()],1),t._v(" "),e("confirm",{attrs:{placement:"top-start",message:t.campaignConfirmMessage},on:{yes:function(e){return t.sendEmails()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.btnSending,expression:"btnSending"}],attrs:{slot:"reference",type:"success",size:"big"},slot:"reference"},["send_now"==t.sending_type?e("span",[t._v("\n                        "+t._s(t.$t("Send Emails Now"))+"\n                    ")]):e("span",[t._v(t._s(t.$t("Schedule this campaign")))])])],1)],1)]),t._v(" "),e("el-dialog",{attrs:{width:"70%",title:"Campaign Recipients","append-to-body":!0,"close-on-click-modal":!1,visible:t.showing_recipients},on:{"update:visible":function(e){t.showing_recipients=e}}},[t.showing_recipients?e("view-segment-recipients",{attrs:{campaign_id:t.campaign.id}}):t._e(),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"info"},on:{click:function(e){t.showing_recipients=!1}}},[t._v(t._s(t.$t("Close")))])],1)],1)],1)},[],!1,null,null,null).exports,CampaignBodyComposer:ee},data:function(){return{activeStep:parseInt(this.$route.query.step)||0,campaign_id:this.$route.params.id,campaign:null,dialogVisible:!1,dialogTitle:this.$t("Edit Campaign"),loading:!1,steps:[{title:this.$t("Compose"),description:this.$t("Compose Your Email Body")},{title:this.$t("Subject & Settings"),description:this.$t("Email Subject & Details")},{title:this.$t("Recipients"),description:this.$t("Select Email Recipients")},{title:this.$t("Review & Send"),description:this.$t("Cam_Send_osce")}],show_campaign_config:!1,updating:!1}},methods:{targetStep:function(t,e){(1!==e||this.campaign.email_subject)&&(2===e&&0===this.campaign.recipients_count||(3!==e||this.campaign.scheduled_at)&&e!==this.activeStep&&(this.activeStep=e,this.$router.push({name:"campaign",query:{step:e}})))},next:function(){0===this.activeStep&&this.unmountBlockEditor(),this.activeStep<3&&this.activeStep++,this.$router.push({name:"campaign",query:{step:this.activeStep}})},prev:function(){this.activeStep>0&&this.activeStep--,this.$router.push({name:"campaign",query:{step:this.activeStep}})},stepChange:function(t){this.activeStep=t,this.$router.push({name:"campaign",query:{step:this.activeStep}})},backToCampaigns:function(){this.activeStep=0,this.$router.push({name:"campaigns",query:{t:(new Date).getTime()}})},fetch:function(){var t=this;this.$get("campaigns/".concat(this.campaign_id),{with:["subjects","template"]}).then(function(e){t.campaign=e.campaign,"draft"!=t.campaign.status&&t.$router.push({name:"campaign-view",params:{id:t.campaign.id}}),t.changeTitle(t.campaign.title+" - Campaign")}).catch(function(e){t.redirectToCampaignsWithWarning(e.message)})},redirectToCampaignsWithWarning:function(t){var e=this;"campaign"===this.$route.name&&this.$message(t,this.$t("Oops!"),{center:!0,type:"warning",confirmButtonText:this.$t("View Report"),dangerouslyUseHTMLString:!0,callback:function(t){e.$router.push({name:"campaign-view",params:{id:e.campaign_id},query:{t:(new Date).getTime()}})}})},updateCampaignSettings:function(){var t=this;this.updating=!0,this.$put("campaigns/".concat(this.campaign_id,"/title"),{title:this.campaign.title}).then(function(e){t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.updating=!1,t.show_campaign_config=!1})}},mounted:function(){this.fetch(),this.changeTitle(this.$t("Campaign"))},beforeRouteLeave:function(t,e,i){this.unmountBlockEditor(),i()}};var ke=i(1502),xe={insert:"head",singleton:!1};a()(ke.A,xe);ke.A.locals;const Se=e($e,function(){var t=this,e=t._self._c;return t.campaign?e("div",{staticClass:"fluentcrm-campaign fluentcrm-view-wrapper"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"campaigns"}}},[t._v("\n            "+t._s(t.$t("Email Campaigns"))+"\n        ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n            "+t._s(t.campaign.title)+" "),e("i",{staticClass:"el-icon el-icon-edit",staticStyle:{cursor:"pointer"},on:{click:function(e){t.show_campaign_config=!0}}})])],1),t._v(" "),e("el-steps",{attrs:{active:t.activeStep,simple:"","finish-status":"success"}},t._l(t.steps,function(i,n){return e("el-step",{key:n,staticStyle:{cursor:"pointer"},attrs:{title:i.title,description:i.description},nativeOn:{click:function(e){return function(e){return t.targetStep(e,n)}.apply(null,arguments)}}})}),1),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body fluentcrm_body_boxed"},[0==t.activeStep?e("div",{staticClass:"step-container",staticStyle:{margin:"-20px -20px 0"}},[e("campaign-body-composer",{attrs:{campaign:t.campaign},on:{next:function(e){return t.next()}}})],1):t._e(),t._v(" "),1==t.activeStep?e("div",{staticClass:"step-container"},[e("campaign-template",{attrs:{campaign:t.campaign},on:{next:function(e){return t.next()},prev:function(e){return t.prev()}}})],1):t._e(),t._v(" "),2==t.activeStep?e("div",{staticClass:"step-container"},[e("Recipients",{attrs:{campaign:t.campaign},on:{prev:function(e){return t.prev()},next:function(e){return t.next()}}})],1):t._e(),t._v(" "),3==t.activeStep?e("div",{staticClass:"step-container"},[e("campaign-review",{attrs:{campaign:t.campaign},on:{goToStep:t.stepChange}})],1):t._e()]),t._v(" "),t.campaign.id?e("el-dialog",{attrs:{title:t.$t("Campaign Settings"),"append-to-body":!0,"close-on-click-modal":!1,visible:t.show_campaign_config,width:"60%"},on:{"update:visible":function(e){t.show_campaign_config=e}}},[e("el-form",{attrs:{"label-position":"top",data:t.campaign},nativeOn:{submit:function(e){return e.preventDefault(),t.updateCampaignSettings.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:t.$t("Campaign Title")}},[e("el-input",{attrs:{placeholder:t.$t("Internal Campaign Title")},model:{value:t.campaign.title,callback:function(e){t.$set(t.campaign,"title",e)},expression:"campaign.title"}})],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"success"},on:{click:t.updateCampaignSettings}},[t._v("\n                "+t._s(t.$t("Save"))+"\n            ")])],1)],1):t._e()],1):t._e()},[],!1,null,null,null).exports;var Ae=e({name:"IframeBuilder",props:{preview_html:{type:String,default:function(){return""}},frame_height:{type:String,default:function(){return"500px"}}},data:function(){return{loading_preview:!0}},methods:{loadFrame:function(){var t=this.$refs.fc_ifr.attachShadow({mode:"closed"}),e=document.createElement("div");e.innerHTML=this.preview_html,t.appendChild(e),this.loading_preview=!1,this.loading_preview=!1}},mounted:function(){this.loadFrame()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_iframe_wrap"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading_preview,expression:"!loading_preview"}],ref:"fc_ifr",staticStyle:{width:"100%",height:"500px",overflow:"auto"},style:{height:t.frame_height}})])},[],!1,null,null,null);const Ee=e({name:"EmailPreview",props:["preview"],components:{IframeBuilder:Ae.exports},data:function(){return{email:null,info:{},loading:!1}},methods:{fetch:function(){var t=this;this.email=null,this.loading=!0,this.$get("campaigns/emails/".concat(this.preview.id,"/preview")).then(function(e){t.email=e.email,t.info=e.info}).finally(function(){t.loading=!1})},onOpen:function(){this.fetch()},onClosed:function(){this.preview.isVisible=!1}}},function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{width:"60%",title:t.$t("Email Preview"),"append-to-body":!0,"close-on-click-modal":!1,visible:t.preview.isVisible},on:{open:t.onOpen,"update:visible":function(e){return t.$set(t.preview,"isVisible",e)}}},[t.email?t._e():e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]}),t._v(" "),t.email?e("div",{staticStyle:{"min-height":"300px"}},[e("ul",{staticClass:"email-header"},[e("li",[t._v(t._s(t.$t("Status"))+": "+t._s(t.info.status))]),t._v(" "),e("li",[t._v(t._s(t.$t("Campaign"))+": "+t._s(t.info.campaign?t.info.campaign.title:"n/a"))]),t._v(" "),e("li",[t._v(t._s(t.$t("Subject"))+": "+t._s(t.email.subject?t.email.subject:""))]),t._v(" "),e("li",[t._v(t._s(t.$t("To"))+": "+t._s(t.email.to.name)+" <"+t._s(t.email.to.email)+">")]),t._v(" "),e("li",[t._v(t._s(t.$t("Date"))+": "+t._s(t._f("nsDateFormat")(t.info.scheduled_at)))]),t._v(" "),e("li",{staticClass:"stats_badges"},[e("span",{attrs:{title:t.$t("Open Count")}},[e("i",{staticClass:"el-icon el-icon-folder-opened"}),t._v(" "),e("span",[t._v(t._s(t.info.is_open||0))])]),t._v(" "),e("span",{attrs:{title:t.$t("Click")}},[e("i",{staticClass:"el-icon el-icon-position"}),t._v(" "),e("span",[t._v(t._s(t.info.click_counter||0))])])]),t._v(" "),t.info.note?e("li",[t._v(t._s(t.$t("Note"))+": "+t._s(t.info.note))]):t._e()]),t._v(" "),t.email.clicks&&t.email.clicks.length?e("div",{staticClass:"fc_email_clicks"},[e("h4",[t._v(t._s(t.$t("Email Clicks")))]),t._v(" "),e("ul",t._l(t.email.clicks,function(i){return e("li",{key:i.id},[t._v(t._s(i.url)+" ("+t._s(i.counter)+")")])}),0)]):t._e(),t._v(" "),"sent"==t.info.status?e("p",{staticStyle:{color:"#ff3434"}},[t._v(t._s(t.$t("preview_email_info")))]):t._e(),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"email-body"},[e("iframe-builder",{attrs:{frame_height:"500px",preview_html:t.email.body}}),t._v(" "),e("div",{staticStyle:{width:"0px",height:"0px",clear:"both"}})],1)]):t._e(),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"danger"},on:{click:function(e){t.preview.isVisible=!1}}},[t._v(t._s(t.$t("Close")))])],1)])],1)},[],!1,null,null,null).exports;const Te=e({name:"GenericPromo",props:{heading:{type:String,required:!1,default:""}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_promo_body"},[e("div",{staticClass:"promo_block",staticStyle:{background:"white",padding:"10px","text-align":"center",display:"block",overflow:"hidden"}},[e("h2",[t._v(t._s(t.heading||t.$t("This is a pro feature")))]),t._v(" "),e("p",[t._v("\n            "+t._s(t.$t("Lin_This_iapfPdtFPta"))+"\n        ")]),t._v(" "),e("div",{},[e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Get FluentCRM Pro")))])])])])},[],!1,null,null,null).exports;const Pe=e({name:"CustomIcon",props:["type"]},function(){var t=this,e=t._self._c;return"company"==t.type?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("rect",{attrs:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}}),t._v(" "),e("line",{attrs:{x1:"3",y1:"9",x2:"21",y2:"9"}}),t._v(" "),e("line",{attrs:{x1:"9",y1:"3",x2:"9",y2:"21"}}),t._v(" "),e("line",{attrs:{x1:"15",y1:"3",x2:"15",y2:"21"}})]):"campaign"==t.type?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("rect",{attrs:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}}),t._v(" "),e("line",{attrs:{x1:"3",y1:"9",x2:"21",y2:"9"}}),t._v(" "),e("polyline",{attrs:{points:"15 15 12 18 9 15"}})]):"event-tracking"==t.type?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{d:"M3 3v18h18"}}),t._v(" "),e("path",{attrs:{d:"M18 9l-5 5-2-2-3 3"}}),t._v(" "),e("path",{attrs:{d:"M15 6h6v6"}})]):"failed-emails"==t.type?e("svg",{attrs:{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M50 15 L85 80 C87 83 85 85 82 85 L18 85 C15 85 13 83 15 80 L50 15",fill:"white",stroke:"#e55353","stroke-width":"6","stroke-linejoin":"round"}}),t._v(" "),e("path",{attrs:{d:"M50 35 L50 60 M50 65 L50 70",stroke:"#e55353","stroke-width":"6","stroke-linecap":"round"}})]):t._e()},[],!1,null,null,null).exports;const Oe=e({name:"CampaignEmails",components:{CustomIcon:Pe,Pagination:m,EmailPreview:Ee,GenericPromo:Te,Confirm:d},props:["campaign_id","manage_mode"],data:function(){return{loading:!1,emails:[],pagination:{total:0,per_page:20,current_page:1},preview:{id:null,isVisible:!1},filter_type:"all",selections:[],search:"",deleting:!1,failed_counts:0,retrying:!1,resending:!1}},methods:{fetch:function(){var t=this;this.loading=!0;var e={viewCampaign:null,per_page:this.pagination.per_page,page:this.pagination.current_page,filter_type:this.filter_type,search:this.search};this.$get("campaigns/".concat(this.campaign_id,"/emails"),e).then(function(e){t.emails=e.emails.data,t.pagination.total=e.emails.total,t.failed_counts=parseInt(e.failed_counts)}).catch(function(e){t.handleError(e)}).finally(function(e){t.loading=!1})},changeFilter:function(){this.pagination.current_page=1,this.fetch()},previewEmail:function(t){this.preview.id=t,this.preview.isVisible=!0},deleteSelected:function(){var t=this;this.deleting=!0;var e=this.selections.map(function(t){return t.id});this.$del("campaigns/".concat(this.campaign_id,"/emails"),{email_ids:e}).then(function(e){t.selections=[],t.$notify.success(e.message),t.$emit("updateCount",e.recipients_count),t.fetch()}).catch(function(e){t.handleError(e)}).finally(function(){t.deleting=!1})},handleSelectionChange:function(t){this.selections=t},retrySending:function(){var t=this;this.retrying=!0,this.$post("campaigns-pro/".concat(this.campaign_id,"/resend-failed-emails")).then(function(e){t.$notify.success(e.message),t.fetch(),t.$emit("fetchCampaign")}).catch(function(e){t.handleError(e)}).finally(function(){t.retrying=!1})},resendEmail:function(t){var e=this;if(!this.has_campaign_pro)return this.$notify.error(this.$t("_Ca_Please_utptutf")),!1;Array.isArray(t)||(t=[t]),this.resending=!0,this.$post("campaigns-pro/".concat(this.campaign_id,"/resend-emails"),{email_ids:t}).then(function(t){e.$notify.success(t.message),e.fetch()}).catch(function(t){e.handleError(t)}).finally(function(){e.resending=!1})},resendUnopenedEmails:function(){var t=this;if(!this.has_campaign_pro)return this.$notify.error(this.$t("_Ca_Please_utptutf")),!1;this.resending=!0,this.$post("campaigns-pro/".concat(this.campaign_id,"/resend-unopened-emails")).then(function(e){t.$notify.success(e.message),t.fetch()}).catch(function(e){t.handleError(e)}).finally(function(){t.resending=!1})},exportCampaignEmails:function(){this.has_campaign_pro?location.href=window.ajaxurl+"?"+jQuery.param({action:"fluentcrm_export_archived_campaign_emails",campaign_id:this.campaign_id,filter_type:this.filter_type}):this.$notify.error(this.$t("Exporting_archived_campaign_Emails_alert"))},canResend:function(t){var e=t&&("sent"===t.status||"failed"===t.status),i=this.hasPermission&&this.hasPermission("fcrm_manage_emails"),n=t&&t.subscriber&&"subscribed"===t.subscriber.status;return e&&i&&n}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_campaign_emails"},[e("div",{staticClass:"fluentcrm_inner_header"},[e("h3",{staticClass:"fluentcrm_inner_title"},[t._v(t._s(t.$t("Recipients")))]),t._v(" "),e("div",{staticClass:"fluentcrm_inner_actions d-flex items-center"},[e("div",{staticClass:"fluentcrm-searcher mr-5"},[e("el-input",{staticClass:"input-with-select",staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:t.$t("Search")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.fetch()}},slot:"append"})],1)],1),t._v(" "),e("el-radio-group",{attrs:{size:"mini"},on:{change:function(e){return t.changeFilter()}},model:{value:t.filter_type,callback:function(e){t.filter_type=e},expression:"filter_type"}},[e("el-radio-button",{attrs:{label:"all"}},[t._v(t._s(t.$t("All")))]),t._v(" "),e("el-tooltip",{attrs:{effect:"dark",content:t.$t("Click"),placement:"top"}},[e("el-radio-button",{attrs:{label:"click"}},[e("i",{staticClass:"el-icon el-icon-position"})])],1),t._v(" "),e("el-tooltip",{attrs:{effect:"dark",content:t.$t("View"),placement:"top"}},[e("el-radio-button",{attrs:{label:"view"}},[e("i",{staticClass:"el-icon el-icon-folder-opened"})])],1),t._v(" "),e("el-tooltip",{attrs:{effect:"dark",content:t.$t("Unopened"),placement:"top"}},[e("el-radio-button",{staticClass:"non-open",attrs:{label:"unopened"}},[e("div",{staticClass:"non-open-icons"},[e("i",{staticClass:"el-icon el-icon-message"}),t._v(" "),e("span",[t._v("+")])])])],1),t._v(" "),t.failed_counts?e("el-tooltip",{attrs:{effect:"dark",content:t.$t("failed"),placement:"top"}},[e("el-radio-button",{staticClass:"non-open",attrs:{label:"failed"}},[e("div",{staticClass:"failed-email-icons"},[e("i",{staticClass:"el-icon el-icon-message"}),t._v(" "),e("span",{staticClass:"warning-icon"},[e("CustomIcon",{attrs:{type:"failed-emails"}})],1)])])],1):t._e()],1),t._v(" "),t.hasPermission("fcrm_manage_contacts_export")?e("el-button",{staticClass:"ml-5",attrs:{size:"mini",type:"info",icon:"el-icon-download"},on:{click:function(e){return t.exportCampaignEmails()}}},[t._v("\n                "+t._s(t.$t("Export"))+"\n            ")]):t._e(),t._v(" "),e("el-button",{staticClass:"ml-5 refresh-campaign-btn",attrs:{size:"mini"},on:{click:t.fetch}},[e("i",{staticClass:"el-icon el-icon-refresh"})])],1)]),t._v(" "),t.failed_counts?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.retrying,expression:"retrying"}],staticClass:"fc_highlight_gray fc_m_30 text-align-center"},[e("h3",[t._v(t._s(t.failed_counts)+" "+t._s(t.$t("_Ca_failed_tstrTR")))]),t._v(" "),t.has_campaign_pro?e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.retrySending()}}},[t._v(t._s(t.$t("Retry Sending")))]):e("generic-promo")],1):t._e(),t._v(" "),"unopened"===t.filter_type?e("confirm",{attrs:{placement:"top-start",message:t.$t("Are you sure to Resend Unopened Emails?")},on:{yes:function(e){return t.resendUnopenedEmails()}}},[e("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{slot:"reference",size:"mini",type:"primary",icon:"el-icon-refresh-right"},slot:"reference"},[t._v("\n            "+t._s(t.$t("Resend Unopened Emails"))+"\n        ")])],1):t._e(),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading||t.resending,expression:"loading || resending"}],staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:t.emails},on:{"selection-change":t.handleSelectionChange}},[t.manage_mode?e("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._v(" "),e("el-table-column",{attrs:{"min-width":"110",label:t.$t("Name")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.subscriber?[i.row.subscriber.photo?e("img",{staticClass:"fc_contact_photo",staticStyle:{display:"inline-block","margin-bottom":"-6px"},attrs:{title:t.$t("Contact ID:")+i.row.subscriber.id,src:i.row.subscriber.photo}}):t._e(),t._v(" "),e("span",[t._v(t._s(i.row.subscriber.full_name||t.$t("Unknown")))])]:[e("i",{staticClass:"el-icon-user",staticStyle:{"margin-right":"6px"}}),t._v(" "),e("span",[t._v(t._s(t.$t("Unknown")))])]]}}])}),t._v(" "),e("el-table-column",{attrs:{"min-width":"200",label:t.$t("Email")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.subscriber_id?e("router-link",{attrs:{to:{name:"subscriber",params:{id:i.row.subscriber_id}}}},[t._v("\n                    "+t._s(i.row.email_address||t.$t("Unknown"))+"\n                ")]):e("span",[t._v(t._s(i.row.email_address||t.$t("Unknown")))]),t._v(" "),e("br"),t._v(" "),i.row.subscriber_id?t._e():e("span",[t._v("(custom email)")])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"170",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticClass:"ns_counter",attrs:{title:"Total Clicks"}},[e("i",{staticClass:"el-icon el-icon-position"}),t._v(" "+t._s(i.row.click_counter||0))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:i.row.click_counter||1==i.row.is_open,expression:"scope.row.click_counter || scope.row.is_open == 1"}],staticClass:"ns_counter",attrs:{title:"Email opened"}},[e("i",{staticClass:"el-icon el-icon-folder-opened"})]),t._v(" "),i.row.subscriber&&i.row.subscriber.status&&"subscribed"!==i.row.subscriber.status?e("span",{staticClass:"ns_counter",staticStyle:{display:"block","margin-top":"5px"}},[t._v("\n                    "+t._s(t._f("ucFirst")(i.row.subscriber.status))+"\n                ")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"scheduled_at",width:"190",label:t.$t("Date")}}),t._v(" "),e("el-table-column",{attrs:{width:"110",label:t.$t("Status"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{class:"status-"+i.row.status},[t._v("\n                    "+t._s(t._f("ucFirst")(i.row.status))+"\n                ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Preview"),width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-view"},on:{click:function(e){return t.previewEmail(i.row.id)}}}),t._v(" "),t.canResend(i.row)?e("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-refresh-right"},on:{click:function(e){return t.resendEmail(i.row.id)}}},[t._v(t._s(t.$t("Resend"))+"\n                ")]):t._e()]}}])})],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{"margin-top":"10px"}},[t.selections.length?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(e){return t.deleteSelected()}}},[t._v("\n                    "+t._s(t.$t("Delete Selected"))+" ("+t._s(t.selections.length)+")\n                ")]):t._e()],1)]),t._v(" "),e("el-col",{attrs:{span:12}},[e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)],1),t._v(" "),e("email-preview",{attrs:{preview:t.preview}})],1)},[],!1,null,null,null).exports;const De=e({name:"CampaignLinkMetrics",props:["campaign_id","hide_title"],data:function(){return{loading:!1,links:[]}},methods:{fetchReport:function(){var t=this;this.loading=!0,this.$get("campaigns/".concat(this.campaign_id,"/link-report")).then(function(e){t.links=e.links}).catch(function(e){t.handleError(e)}).finally(function(e){t.loading=!1})}},mounted:function(){this.has_campaign_pro&&this.fetchReport()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_link_metrics"},[t.hide_title?t._e():e("div",{staticClass:"fluentcrm_inner_header"},[e("h3",{staticClass:"fluentcrm_inner_title"},[t._v(t._s(t.$t("Campaign Link Clicks")))]),t._v(" "),e("div",{staticClass:"fluentcrm_inner_actions"},[e("el-button",{attrs:{size:"mini"},on:{click:t.fetchReport}},[e("i",{staticClass:"el-icon el-icon-refresh"})])],1)]),t._v(" "),t.has_campaign_pro?[t.links.length?e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{height:"270","empty-text":t.$t("No Data Found"),stripe:"",border:"",data:t.links}},[e("el-table-column",{attrs:{label:t.$t("URL")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("a",{attrs:{href:i.row.url,target:"_blank",rel:"noopener"}},[t._v(t._s(i.row.url))])]}}],null,!1,1550400355)}),t._v(" "),e("el-table-column",{attrs:{width:"150",label:t.$t("Unique Clicks"),prop:"total"}})],1):e("el-empty",{attrs:{"image-size":135,description:t.$t("No link activity recorded yet")}})]:e("div",{staticClass:"text-align-center",staticStyle:{padding:"20px 20px 40px"}},[t._m(0),t._v(" "),e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Get FluentCRM Pro")))])])],2)},[function(){var t=this,e=t._self._c;return e("p",[t._v("This feature is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features including "),e("b",[t._v("Link clicks analytics")])])}],!1,null,null,null).exports;const Fe=e({name:"CampaignSubjectAnalytics",props:["metrics","campaign"]},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_subject_metrics"},[e("div",{staticClass:"fluentcrm_inner_header"},[e("h3",{staticClass:"fluentcrm_inner_title"},[t._v(t._s(t.$t("Subject Analytics")))]),t._v(" "),e("div",{staticClass:"fluentcrm_inner_actions"})]),t._v(" "),e("el-table",{staticClass:"fc_el_border_table",attrs:{border:"","empty-text":t.$t("No Data Found"),stripe:"",data:t.metrics.subjects}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("ul",{staticClass:"fc_list"},t._l(i.row.metric.clicks,function(i,n){return e("li",{key:n},[e("a",{attrs:{target:"_blank",rel:"noopener",href:i.url}},[t._v(t._s(i.url))]),t._v(" - "),e("el-tag",{attrs:{size:"mini"}},[t._v(t._s(i.total))])],1)}),0)]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Subject")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.value))]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"140",label:t.$t("Email Sent %")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.percent(e.row.total,t.campaign.recipients_count))+" ("+t._s(e.row.total)+")\n            ")]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"140",label:t.$t("Open Rate")},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v("\n                "+t._s(t.percent(i.row.metric.total_opens,i.row.total))+"\n                "),e("span",{directives:[{name:"show",rawName:"v-show",value:i.row.metric.total_opens,expression:"scope.row.metric.total_opens"}]},[t._v("("+t._s(i.row.metric.total_opens)+")")])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"140",label:t.$t("Click Rate")},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v("\n                "+t._s(t.percent(i.row.metric.total_clicks,i.row.total))+"\n                "),e("span",{directives:[{name:"show",rawName:"v-show",value:i.row.metric.total_clicks,expression:"scope.row.metric.total_clicks"}]},[t._v("("+t._s(i.row.metric.total_clicks)+")")])]}}])})],1)],1)},[],!1,null,null,null).exports;const je=e({name:"RevenueReport",props:["campaign"],components:{Pagination:m},data:function(){return{orders:[],labels:[],pagination:{per_page:10,current_page:1,total:0},loading:!1}},methods:{fetchOrders:function(){var t=this;this.loading=!0,this.$get("campaigns/".concat(this.campaign.id,"/revenues"),{per_page:this.pagination.per_page,page:this.pagination.current_page}).then(function(e){t.orders=e.orders,t.labels=e.labels,t.pagination.total=e.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})}},mounted:function(){this.fetchOrders()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_revenue_report"},[e("h3",[t._v(t._s(t.$t("Revenue from this email campaign")))]),t._v(" "),t.loading?e("el-skeleton"):[e("el-table",{attrs:{data:t.orders,border:"",stripe:""}},t._l(t.labels,function(i,n){return e("el-table-column",{key:n,attrs:{label:i},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{domProps:{innerHTML:t._s(i.row[n])}})]}}],null,!0)})}),1),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetchOrders}})]],2)},[],!1,null,null,null).exports;function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function Le(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Ne(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Ie(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ie(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const qe=e({name:"CampaignActions",props:["campaign"],components:{GenericPromo:Te},data:function(){return{action_details:{action_type:"add_tags",tags:[],activity_type:"email_open",link_ids:[]},activity_types:{email_open:this.$t("Cam_Select_Swote"),email_not_open:this.$t("Cam_Select_Swdnoe"),email_clicked:this.$t("Cam_Select_Swcsl")},available_tags:window.fcAdmin.available_tags,clicked_links:[],processing:!1,processing_page:1,total_count:"calculating...",errors:null,total_processed:0,is_completed:!1}},methods:{getClickedLinks:function(){var t=this;this.$get("campaigns/".concat(this.campaign.id,"/link-report")).then(function(e){t.clicked_links=e.links})},process:function(){var t=this;return this.action_details.tags.length?"email_clicked"!==this.action_details.activity_type||this.action_details.link_ids.length?(this.errors=null,this.processing=!0,void this.$post("campaigns-pro/".concat(this.campaign.id,"/tag-actions"),function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(i),!0).forEach(function(e){Ne(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Le(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({processing_page:this.processing_page},this.action_details)).then(function(e){e.total_count&&(t.total_count=e.total_count),t.total_processed+=e.processed_contacts,e.has_more?(t.processing_page=t.processing_page+1,t.$nextTick(function(){t.process()})):t.is_completed=!0}).catch(function(e){t.errors=e,t.handleError(e)})):(this.$notify.error(this.$t("Please Select Clicked URLS")),!1):(this.$notify.error(this.$t("Please Select Tags first")),!1)},resetAction:function(){this.action_details={action_type:"add_tags",tags:[],activity_type:"email_open",link_ids:[]},this.is_completed=!1,this.total_processed=0,this.processing_page=1,this.processing=!1}},mounted:function(){this.getClickedLinks()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_link_metrics"},[e("div",{staticClass:"fluentcrm_inner_header"},[e("h3",[t._v(t._s(t.$t("Campaign Actions")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Cam_Add_Remove_ToyCb")))])]),t._v(" "),e("hr"),t._v(" "),t.has_campaign_pro?e("div",{staticClass:"fc_campaign_action_wrapper"},[t.processing?e("div",[t.is_completed?e("div",{staticClass:"text-align-center"},[e("h3",[t._v(t._s(t.$t("All Done")))]),t._v(" "),e("p",[t._v(t._s(t.total_processed)+" "+t._s(t.$t("Cam_contacts_hbp")))]),t._v(" "),e("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){return t.resetAction()}}},[t._v(t._s(t.$t("Do another Action")))])],1):e("div",{staticClass:"text-align-center"},[e("h3",{directives:[{name:"loading",rawName:"v-loading",value:t.processing,expression:"processing"}]},[t._v(t._s(t.$t("Processing now...")))]),t._v(" "),e("h4",[t._v(t._s(t.$t("Rec_Please_dnctw")))]),t._v(" "),e("h2",[t._v(t._s(t.total_processed)+"/"+t._s(t.total_count))]),t._v(" "),t.total_processed?e("p",[t._v(t._s(t.total_processed)+" "+t._s(t.$t("Cam_Contacts_psf")))]):t._e()]),t._v(" "),t.errors?e("div",[e("h3",[t._v(t._s(t.$t("Errors Found"))+":")]),t._v(" "),e("pre",[t._v(t._s(t.errors))])]):t._e()]):e("el-form",{attrs:{"label-position":"top",data:t.action_details}},[e("el-form-item",{attrs:{label:t.$t("Action Type")}},[e("el-radio-group",{model:{value:t.action_details.action_type,callback:function(e){t.$set(t.action_details,"action_type",e)},expression:"action_details.action_type"}},[e("el-radio",{attrs:{label:"add_tags"}},[t._v(t._s(t.$t("Add Tags")))]),t._v(" "),e("el-radio",{attrs:{label:"remove_tags"}},[t._v(t._s(t.$t("Remove Tags")))])],1)],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Select Tags")}},[e("el-select",{attrs:{multiple:!0},model:{value:t.action_details.tags,callback:function(e){t.$set(t.action_details,"tags",e)},expression:"action_details.tags"}},t._l(t.available_tags,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1)],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Filter Subscribers")}},[e("el-radio-group",{model:{value:t.action_details.activity_type,callback:function(e){t.$set(t.action_details,"activity_type",e)},expression:"action_details.activity_type"}},t._l(t.activity_types,function(i,n){return e("el-radio",{key:n,attrs:{label:n}},[t._v(t._s(i)+"\n                    ")])}),1)],1),t._v(" "),"email_clicked"==t.action_details.activity_type?e("el-form-item",{attrs:{label:t.$t("Cam_Select_Utwc_MfaS")}},[t.clicked_links.length?e("el-checkbox-group",{staticClass:"fc_new_line_items",model:{value:t.action_details.link_ids,callback:function(e){t.$set(t.action_details,"link_ids",e)},expression:"action_details.link_ids"}},t._l(t.clicked_links,function(i){return e("el-checkbox",{key:i.id,attrs:{label:i.id}},[t._v(t._s(i.url)+" -\n                        ("+t._s(i.total)+")\n                    ")])}),1):e("p",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("Cam_Sorry_nlftcc")))])],1):t._e(),t._v(" "),e("el-form-item",[e("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.process()}}},["add_tags"==t.action_details.action_type?e("span",[t._v(t._s(t.$t("Add Tags to Subscribers")))]):e("span",[t._v(t._s(t.$t("Cam_Remove_TFS")))])])],1)],1)],1):e("div",[e("generic-promo")],1)])},[],!1,null,null,null).exports;const Me={extends:window.VueChartJs.Pie,mixins:[window.VueChartJs.mixins.reactiveProp],props:["stats"],data:function(){return{options:{responsive:!0,legend:{display:!1,position:"right"},plugins:{legend:{position:"right",display:!1},title:{display:!1,text:""}},layout:{padding:20}}}},methods:{},mounted:function(){this.renderChart(this.chartData,this.options)}};const ze=e({name:"Unsbscribers",props:["campaign_id"],components:{Pagination:m},data:function(){return{loading:!0,unsubscribes:[],pagination:{total:0,per_page:20,current_page:1}}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("campaigns/".concat(this.campaign_id,"/unsubscribers"),{page:this.pagination.current_page,per_page:this.pagination.per_page}).then(function(e){t.unsubscribes=e.unsubscribes.data,t.pagination.total=e.unsubscribes.total}).catch(function(e){t.handleError(e)}).finally(function(e){t.loading=!1})}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fc_unsubscribers_table"},[t.pagination.total||t.loading?e("div",[e("el-table",{attrs:{stripe:"",data:t.unsubscribes,border:""}},[e("el-table-column",{attrs:{label:t.$t("Name"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("img",{staticClass:"fc_contact_photo",staticStyle:{display:"inline-block","margin-bottom":"-6px"},attrs:{title:"Contact ID: "+i.row.subscriber.id,src:i.row.subscriber.photo}}),t._v(" "),e("span",[t._v(t._s(i.row.subscriber.full_name))])]}}],null,!1,3862468360)}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Email")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"subscriber",params:{id:i.row.subscriber_id}}}},[t._v("\n                        "+t._s(i.row.subscriber.email)+"\n                    ")])]}}],null,!1,4034091633)}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Reason")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.subscriber.reason)+"\n                ")]}}],null,!1,2365124013)}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Date")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(i.row.created_at)))])]}}],null,!1,2525433801)})],1),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1):e("el-empty",{attrs:{"image-size":135,description:t.$t("Unsubscribes.instruction")}})],1)},[],!1,null,null,null).exports;const Re=e({name:"CampaignEmailProcessStat",props:["campaign"],components:{SendTestEmail:M,ReadableRecipients:we,PreviewIframeBuilder:$},data:function(){return{contact_count:null,loading:!1,loading_processing_stat:!1,completed:1,processing_counter:1,show_selections:!1,scheduling_method:""}},computed:{processing_percent:function(){return"processing"==this.campaign.status&&this.completed&&this.contact_count?parseInt(this.completed/this.contact_count*100):1},canCancelEmail:function(){var t=this.campaign.status;return"scheduled"==t||"pending-scheduled"==t||"processing"}},methods:{fetchCount:function(){var t=this;this.$get("campaigns/".concat(this.campaign.id,"/estimated-recipients-count")).then(function(e){t.contact_count=e.estimated_count})},getHumanStatusName:function(t){return"pending-scheduled"==t?this.$t("Scheduled"):this.ucFirst(t)},cancelSchedule:function(){var t=this;this.loading=!0,this.$post("campaigns/".concat(this.campaign.id,"/un-schedule")).then(function(e){t.$notify.success(e.message),t.$emit("unscheduled")}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},fetchProcessingStat:function(){var t=this;this.loading_processing_stat=!0,this.$get("campaigns/".concat(this.campaign.id,"/processing-stat"),{counter:this.processing_counter}).then(function(e){e.campaign||window.location.reload(!0),t.campaign.status!=e.campaign.status&&window.location.reload(!0),t.loading_processing_stat=!1,t.completed=e.campaign.recipients_count,t.campaign.status=e.campaign.status,t.scheduling_method=e.scheduling_method,t.campaign.scheduling_range=e.campaign.scheduling_range,"processing"==e.campaign.status&&t.fetchStatAgain()}).catch(function(e){t.handleError(e),t.loading_processing_stat=!1}).finally(function(){})},fetchStatAgain:function(){var t=this;setTimeout(function(){t.processing_counter+=1,t.fetchProcessingStat()},3e3)}},mounted:function(){this.fetchCount(),this.fetchProcessingStat()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_campaign_process_wrap"},["processing"==t.campaign.status?e("div",{staticClass:"fc_proc_sum"},[e("h3",{staticClass:"no_spaced",staticStyle:{"margin-bottom":"20px"}},[t._v(t._s(t.$t("Emails are currently on processing")))]),t._v(" "),e("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:t.processing_percent}}),t._v(" "),e("p",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_processing_stat,expression:"loading_processing_stat"}],staticStyle:{"text-align":"center"}},[t._v(t._s(t.completed)+" / "+t._s(t.contact_count))]),t._v(" "),t.campaign.scheduling_range?e("p",{staticStyle:{"font-size":"16px"}},[t._v("The emails will be scheduled randomly between the date-time of "),e("b",[t._v(t._s(t.campaign.scheduling_range.start))]),t._v(" and "),e("b",[t._v(t._s(t.campaign.scheduling_range.end))])]):t._e()],1):t._e(),t._v(" "),e("div",{staticClass:"fc_proc_sum campaign_review_items"},[e("div",{staticClass:"camapign_review_item fc_proc_heading"},[e("ul",[e("li",[e("b",[t._v(t._s(t.$t("Campaign Status:")))]),t._v(" "+t._s(t.getHumanStatusName(t.campaign.status)))]),t._v(" "),e("li",[e("b",[t._v(t._s(t.$t("Scheduled on:")))]),t._v(" "+t._s(t.campaign.scheduled_at)+" ("+t._s(t.nsHumanDiffTime(t.campaign.scheduled_at))+")\n                ")]),t._v(" "),e("li",{directives:[{name:"loading",rawName:"v-loading",value:null===t.contact_count,expression:"contact_count === null"}],staticStyle:{cursor:"pointer"},on:{click:function(e){t.show_selections=!t.show_selections}}},[e("b",[t._v(t._s(t.$t("Estimated Contacts:")))]),t._v(" "+t._s(t.contact_count)+"\n                ")])]),t._v(" "),t.show_selections?e("div",[e("readable-recipients",{attrs:{settings:t.campaign.settings}})],1):t._e()]),t._v(" "),e("div",{staticClass:"camapign_review_item"},[e("h3",{staticClass:"no_spaced"},[t._v(t._s(t.$t("Subject"))+": "+t._s(t.campaign.email_subject))]),t._v(" "),e("p",{staticStyle:{color:"gray"}},[t._v(t._s(t.$t("Preview Text:"))+" "+t._s(t.campaign.email_pre_header))])]),t._v(" "),e("div",{staticClass:"camapign_review_item"},[e("h3",[t._v(t._s(t.$t("Email Body")))]),t._v(" "),e("div",{staticStyle:{background:"white"}},[e("preview-iframe-builder",{attrs:{frame_height:"300px",campaign_id:t.campaign.id}})],1),t._v(" "),e("br"),t._v(" "),e("send-test-email",{attrs:{campaign:t.campaign}})],1),t._v(" "),t.canCancelEmail?e("div",{staticClass:"camapign_review_item"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{disabled:t.loading,size:"small",type:"danger",plain:""},on:{click:function(e){return t.cancelSchedule()}}},[t._v("\n                "+t._s(t.$t("Cancel Schedule"))+"\n            ")]),t._v(" "),"scheduled"==t.scheduling_method?e("p",[t._v(t._s(t.$t("Email_Schedule_Info")))]):t._e()],1):t._e()])])},[],!1,null,null,null).exports;const Be=e({name:"CampaignDetails",components:{PreviewIframeBuilder:$},props:["campaign"],methods:{scheduledAt:function(t){return null===t?this.$t("Not Scheduled"):this.nsDateFormat(t,"MMMM Do, YYYY [at] h:mm A")}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"campaign_summary"},[e("div",{staticClass:"line"},[e("el-row",{attrs:{gutter:40}},[e("el-col",{attrs:{span:4}},[e("strong",[t._v(t._s(t.$t("Title")))])]),t._v(" "),e("el-col",{attrs:{span:20}},[t._v(": "+t._s(t.campaign.title))])],1)],1),t._v(" "),e("div",{staticClass:"line"},[e("el-row",{attrs:{gutter:40}},[e("el-col",{attrs:{span:4}},[e("strong",[t._v(t._s(t.$t("Scheduled on")))])]),t._v(" "),e("el-col",{attrs:{span:20}},[t._v(": "+t._s(t.scheduledAt(t.campaign.scheduled_at)))])],1)],1),t._v(" "),e("div",{staticClass:"line"},[e("el-row",{attrs:{gutter:40}},[e("el-col",{attrs:{span:4}},[e("strong",[t._v(t._s(t.$t("Subject")))])]),t._v(" "),e("el-col",{attrs:{span:20}},[t._v("\n                : "+t._s(t.campaign.email_subject)+"\n            ")])],1)],1),t._v(" "),e("div",{staticClass:"line"},[e("el-row",{attrs:{gutter:40}},[e("el-col",{attrs:{span:4}},[e("strong",[t._v(t._s(t.$t("Total Recipients")))])]),t._v(" "),e("el-col",{attrs:{span:20}},[t._v(": "+t._s(t.campaign.recipients_count))])],1)],1),t._v(" "),t.campaign.sent_by?e("div",{staticClass:"line"},[e("el-row",{attrs:{gutter:40}},[e("el-col",{attrs:{span:4}},[e("strong",[t._v(t._s(t.$t("Sent By")))])]),t._v(" "),e("el-col",{attrs:{span:20}},[t._v(": "+t._s(t.campaign.sent_by))])],1)],1):t._e(),t._v(" "),e("div",{staticClass:"template-preview fluentcrm_email_body_preview",staticStyle:{"margin-top":"30px","max-width":"800px","max-height":"650px"}},[e("preview-iframe-builder",{attrs:{frame_height:"600px",campaign_id:t.campaign.id,show_audit:!1}})],1)])},[],!1,null,null,null).exports;const Ve=e({name:"IntermediateCampaignStat",components:{LinkMetrics:De},props:["campaign_id"],data:function(){return{sent_count:0,stat:[],analytics:[],loading:!1}},methods:{getPercent:function(t){return this.sent_count?parseFloat(t/this.sent_count*100).toFixed(2)+"%":"--"},getCampaignAllStats:function(){var t=this;this.loading=!0,this.$get("campaigns/".concat(this.campaign_id,"/overview_stats")).then(function(e){t.sent_count=e.sent_count,t.stat=e.stat,t.analytics=e.analytics}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})}},mounted:function(){this.getCampaignAllStats()}},function(){var t=this,e=t._self._c;return e("el-row",{staticClass:"fc_campaign_archived_wrapper",attrs:{gutter:30}},[e("el-col",{attrs:{md:12,sm:12,xs:24}},[e("div",{staticClass:"fc_campaign_report"},[e("h3",[t._v(t._s(t.$t("Current Status")))]),t._v(" "),t.loading?e("div",{staticStyle:{padding:"20px"}},[e("el-skeleton",{attrs:{rows:5,animated:!0}})],1):e("ul",[t._l(t.stat,function(i){return e("li",{key:i.status},[e("i",{staticClass:"el-icon el-icon-message"}),t._v(" "),e("span",{staticClass:"fc_report_title"},[t._v(t._s(t._f("ucFirst")(i.status))+" "+t._s(t.$t("Emails")))]),t._v(" "),e("span",{staticClass:"fc_report_value"},[t._v("\n                                        "+t._s(i.total)+"\n                                    ")])])}),t._v(" "),t._l(t.analytics,function(i){return e("li",{key:i.type,class:"fc_camp_data_"+i.type},[e("i",{class:i.icon_class}),t._v(" "),e("span",{staticClass:"fc_report_title"},[t._v(t._s(i.label))]),t._v(" "),"open"==i.type?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("open_rate_info"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])]:"click"==i.type?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("click_rate_info"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])]:t._e(),t._v(" "),i.is_percent?e("span",{staticClass:"fc_report_value"},[t._v("\n                                        "+t._s(t.getPercent(i.total))+"\n                                    ")]):e("span",{staticClass:"fc_report_value"},[t._v("\n                                        "+t._s(i.total)+"\n                                    ")])],2)})],2)])]),t._v(" "),e("el-col",{attrs:{md:12,sm:12,xs:24}},[e("div",{staticClass:"fc_campaign_report"},[e("h3",[t._v(t._s(t.$t("Link activity")))]),t._v(" "),e("div",{},[e("link-metrics",{attrs:{hide_title:!0,campaign_id:t.campaign_id}})],1)])])],1)},[],!1,null,null,null).exports;const Ue=e({name:"ItemCopier",props:["text","showViewButton"],data:function(){return{copy_success:!1}},computed:{icon:function(){return this.copy_success?"el-icon-check":"el-icon-copy-document"}},methods:{copyItem:function(){var t=this;this.copy_success=!1;var e=this.text,i=!1;if(window.clipboardData&&window.clipboardData.setData)window.clipboardData.clipboardData.setData("Text",e),i=!0;else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{document.execCommand("copy"),i=!0}catch(t){console.warn("Copy to clipboard failed.",t),i=!1}finally{document.body.removeChild(n)}}i?(this.copy_success=!0,this.$notify({message:this.$t("Copied to your clipboard"),position:"bottom-right",customClass:"bottom_right",type:"success"}),setTimeout(function(){t.copy_success=!1},2e3)):this.$notify({message:this.$t("Your Browser does not support JS copy. Please copy manually"),position:"bottom-right",customClass:"bottom_right",type:"error"})},openUrl:function(){this.text&&window.open(this.text,"_blank")}}},function(){var t=this,e=t._self._c;return e("el-input",{staticClass:"fc-item-copier-input",attrs:{size:"mini",readonly:!0},scopedSlots:t._u([{key:"append",fn:function(){return[t.showViewButton?e("el-button",{staticClass:"view-btn",attrs:{type:"primary"},on:{click:t.openUrl}},[e("i",{staticClass:"dashicons dashicons-external"})]):t._e(),t._v(" "),e("el-button",{attrs:{type:"primary",icon:t.icon},on:{click:t.copyItem}})]},proxy:!0}]),model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})},[],!1,null,null,null).exports;var He=e({name:"ViewNewsletterSettings",props:["campaign_id"],components:{ItemCopier:Ue},data:function(){return{newsletterUrl:"",loading:!1}},methods:{fetchNewsletterUrl:function(){var t=this;this.loading=!0,this.$get("campaigns/".concat(this.campaign_id,"/share-url")).then(function(e){t.newsletterUrl=e.sharable_url}).catch(function(e){t.$handleError(e)}).finally(function(){t.loading=!1})}},mounted:function(){this.fetchNewsletterUrl()}},function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"fluentcrm_inner_header"},[e("h3",[t._v(t._s(t.$t("Share Newsletter via URL")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Share_Newsletter_Desc")))]),t._v(" "),e("hr"),t._v(" "),e("item-copier",{attrs:{text:t.newsletterUrl,"show-view-button":!0,loading:t.loading}})],1)])},[],!1,null,null,null);const Ge=e({name:"ViewCampaign",components:{CampaignEmails:Oe,LinkMetrics:De,SubjectMetrics:Fe,CampaignActions:qe,CampaignChart:Me,RevenueReport:je,Unsubscribers:ze,ReadableRecipients:we,CampaignEmailProcessStat:Re,CampaignSummaryDetails:Be,IntermediateCampaignStat:Ve,ViewNewsletter:He.exports},data:function(){return{activeTab:"campaign_details",loading:!0,campaign:null,emails:[],dialogVisible:!1,sent_count:0,repeatingCall:!1,stat:[],analytics:{},request_counter:1,subject_analytics:{},campaign_id:this.$route.params.id,show_campaign_config:!1,fetch_status:!0,pickerOptions:{disabledDate:function(t){return t.getTime()<=Date.now()-864e5},shortcuts:[{text:this.$t("After 1 Hour"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+36e5),t.$emit("pick",e)}},{text:this.$t("Tomorrow"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}},{text:this.$t("After 2 Days"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+1728e5),t.$emit("pick",e)}},{text:this.$t("After 1 Week"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+6048e5),t.$emit("pick",e)}}]},updating:!1,shareModal:!1,showInlineEditCampaignTitle:!1}},computed:{chartData:function(){var t,e,i;Object.keys(this.analytics).length;var n=[this.sent_count,parseInt((null===(t=this.analytics.open)||void 0===t?void 0:t.total)||0),parseInt((null===(e=this.analytics.click)||void 0===e?void 0:e.total)||0),parseInt((null===(i=this.analytics.unsubscribe)||void 0===i?void 0:i.total)||0)];return{labels:[this.$t("Email Sent"),this.$t("Opens"),this.$t("Clicks"),this.$t("Unsubscribe")],datasets:[{label:this.$t("Emails"),data:JSON.parse(JSON.stringify(n)),backgroundColor:["#8154ce","#a45892","#6dcc3e","#ff5b5b"]}]}}},methods:{backToCampaigns:function(){this.$router.push({name:"campaigns",query:{t:(new Date).getTime()}})},getCampaignStatus:function(){var t=this;this.loading=!0,this.$get("campaigns/".concat(this.campaign_id,"/status"),{request_counter:this.request_counter}).then(function(e){t.campaign||"draft"!==e.campaign.status?(t.campaign=e.campaign,t.stat=e.stat,t.sent_count=e.sent_count,t.analytics=e.analytics,t.subject_analytics=e.subject_analytics,e.campaign.scheduling_range||"working"!==e.campaign.status||t.fetchStatAgain(),t.changeTitle(t.campaign.title+" - Campaign")):t.$router.push({name:"campaign",params:{id:e.campaign.id}})}).catch(function(e){t.campaign&&t.fetchStatAgain()}).finally(function(){t.loading=!1})},fetchStatAgain:function(){var t=this;setTimeout(function(){t.request_counter+=1,t.getCampaignStatus()},4e3)},scheduledAt:function(t){return null===t?this.$t("Not Scheduled"):this.nsDateFormat(t,"MMMM Do, YYYY [at] h:mm A")},getCampaignPercent:function(){return parseInt(this.sent_count/this.campaign.recipients_count*100)},getPercent:function(t){return this.sent_count?parseFloat(t/this.sent_count*100).toFixed(2)+"%":"--"},updateCampaignSettings:function(){var t=this;this.updating=!0,this.$put("campaigns/".concat(this.campaign_id,"/title"),{title:this.campaign.title,scheduled_at:this.campaign.scheduled_at}).then(function(e){t.campaign=e.campaign,t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.updating=!1,t.show_campaign_config=!1,t.showInlineEditCampaignTitle=!1,t.getCampaignStatus()})},pauseSending:function(){var t=this;this.updating=!0,this.$post("campaigns/".concat(this.campaign_id,"/pause")).then(function(e){t.campaign=e.campaign,t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.updating=!1,t.show_campaign_config=!1})},resumeSending:function(){var t=this;this.updating=!0,this.$post("campaigns/".concat(this.campaign_id,"/resume")).then(function(e){t.campaign=e.campaign,t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.updating=!1,t.getCampaignStatus()})},cancelSchedule:function(){var t=this;this.loading=!0,this.$post("campaigns/".concat(this.campaign_id,"/un-schedule")).then(function(e){t.$notify.success(e.message),t.$router.push({name:"campaign",params:{id:t.campaign_id},query:{t:(new Date).getTime(),step:3}})}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1,t.getCampaignStatus()})},handleUnscheduled:function(){this.$router.push({name:"campaign",params:{id:this.campaign.id},query:{t:(new Date).getTime(),step:3}})},handleResyncRevenue:function(){var t=this;this.loading=!0,this.$post("campaigns/".concat(this.campaign.id,"/revenues/resync")).then(function(e){t.$notify.success(e.message),t.analytics.revenue.total=e.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})}},mounted:function(){this.getCampaignStatus(),this.changeTitle(this.$t("Campaign"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[t.campaign?e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom fc_breadcrumb_inline_edit",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"campaigns"}}},[t._v("\n                    "+t._s(t.$t("Campaigns"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",{staticClass:"fc_breadcrumb_item"},[t.showInlineEditCampaignTitle?t._e():e("div",{staticClass:"fc_breadcrumb_title"},[t._v("\n                        "+t._s(t.campaign.title)+"\n                        "),e("span",{staticClass:"status",staticStyle:{width:"auto"}},[t._v(" - "+t._s(t.campaign.status))])]),t._v(" "),e("div",{staticClass:"fc_inline_editable"},[t.showInlineEditCampaignTitle?e("el-input",{attrs:{placeholder:t.$t("Internal Campaign Title")},model:{value:t.campaign.title,callback:function(e){t.$set(t.campaign,"title",e)},expression:"campaign.title"}}):t._e(),t._v(" "),t.showInlineEditCampaignTitle?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],staticClass:"fc_primary_btn",attrs:{size:"small",type:"success"},on:{click:function(e){return t.updateCampaignSettings()}}},[t._v(t._s(t.$t("Save")))]):t._e(),t._v(" "),t.showInlineEditCampaignTitle?e("el-button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.showInlineEditCampaignTitle=!1}}},[t._v("\n                            "+t._s(t.$t("Cancel"))+"\n                        ")]):t._e(),t._v(" "),t.showInlineEditCampaignTitle?t._e():e("i",{staticClass:"el-icon-edit",on:{click:function(e){t.showInlineEditCampaignTitle=!0}}})],1)])],1)],1),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},["working"==t.campaign.status?e("div",{staticClass:"text-align-center",staticStyle:{"margin-right":"10px"}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Vie_Emails_asatm"),placement:"top"}},[e("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.pauseSending()}}},[t._v(t._s(t.$t("Pause Sending"))+"\n                    ")])],1)],1):t._e(),t._v(" "),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.backToCampaigns()}}},[t._v(t._s(t.$t("Back To Campaigns")))]),t._v(" "),e("el-button-group",[e("el-button",{attrs:{icon:"el-icon-setting",size:"small"},on:{click:function(e){t.show_campaign_config=!0}}}),t._v(" "),e("el-button",{attrs:{size:"small"},on:{click:t.getCampaignStatus}},[e("i",{staticClass:"el-icon el-icon-refresh"})]),t._v(" "),!t.campaign||"archived"!=t.campaign.status&&"working"!=t.campaign.status?t._e():e("el-button",{attrs:{size:"small"},on:{click:function(e){t.shareModal=!0}}},[e("i",{staticClass:"el-icon el-icon-share"})])],1)],1)]):t._e(),t._v(" "),t.campaign?e("div",{staticClass:"fluentcrm_body fluentcrm_body_boxed"},["pending-scheduled"==t.campaign.status||"processing"==t.campaign.status?[e("campaign-email-process-stat",{attrs:{campaign:t.campaign},on:{unscheduled:function(e){return t.handleUnscheduled()}}})]:["paused"==t.campaign.status?e("div",{staticClass:"fc_highlight_gray text-align-center"},[e("h3",[t._v(t._s(t.$t("Vie_This_cino_sNEwbs")))]),t._v(" "),e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.resumeSending()}}},[t._v(t._s(t.$t("Resume Sending"))+"\n                ")])],1):"working"==t.campaign.status?[t.campaign.scheduling_range?e("div",[e("p",{staticStyle:{"font-size":"16px"}},[t._v("Emails has been scheduled from "+t._s(t.campaign.scheduling_range.start)+"\n                        to "+t._s(t.campaign.scheduling_range.end)+". Scheduled emails will be sent automatically.")])]):[e("h3",[t._v("\n                        "+t._s(t.$t("Vie_Your_easrn"))+" "),e("span",{directives:[{name:"loading",rawName:"v-loading",value:"working"==t.campaign.status,expression:"campaign.status == 'working'"}]},[t._v(t._s(t.$t("Sending")))])]),t._v(" "),e("el-progress",{attrs:{"text-inside":!0,"stroke-width":36,percentage:t.getCampaignPercent(),status:"success"}})]]:"scheduled"==t.campaign.status?[e("h3",[t._v(t._s(t.$t("Vie_This_chbs")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Vie_The_ewbsboysdat")))]),t._v(" "),e("pre",[t._v(t._s(t.campaign.scheduled_at)+" ("+t._s(t._f("nsHumanDiffTime")(t.campaign.scheduled_at))+")")]),t._v(" "),e("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.cancelSchedule()}}},[t._v(t._s(t.$t("Cancel this schedule"))+"\n                ")])]:t._e(),t._v(" "),"archived"==t.campaign.status?[t.appVars.addons.email_open_tracking&&t.appVars.addons.email_click_tracking?t._e():e("div",{staticClass:"mb-10"},[t.appVars.addons.email_open_tracking?t._e():e("el-alert",{staticClass:"mb-10",attrs:{closable:!1,type:"warning"}},[t._v(t._s(t.$t("Email Open tracking is disabled via PHP Hook"))+"\n                    ")]),t._v(" "),t.appVars.addons.email_click_tracking?t._e():e("el-alert",{attrs:{closable:!1,type:"warning"}},[t._v(t._s(t.$t("Email Click tracking is disabled via PHP Hook"))+"\n                    ")])],1),t._v(" "),e("el-row",{staticClass:"fc_campaign_archived_wrapper",attrs:{gutter:30}},[e("el-col",{attrs:{md:8,sm:12,xs:24}},[e("div",{staticClass:"fc_campaign_report"},[e("h3",[t._v(t._s(t.$t("Campaign Performance")))]),t._v(" "),e("ul",[t._l(t.stat,function(i){return e("li",{key:i.status},[e("i",{staticClass:"el-icon el-icon-message"}),t._v(" "),e("span",{staticClass:"fc_report_title"},[t._v(t._s(t._f("ucFirst")(i.status))+" "+t._s(t.$t("Emails")))]),t._v(" "),e("span",{staticClass:"fc_report_value"},[t._v("\n                                        "+t._s(i.total)+"\n                                    ")])])}),t._v(" "),t._l(t.analytics,function(i){return e("li",{key:i.type,class:"fc_camp_data_"+i.type},[e("i",{class:i.icon_class}),t._v(" "),e("span",{staticClass:"fc_report_title"},[t._v(t._s(i.label)+" "),"revenue"==i.type?e("el-button",{attrs:{size:"mini",title:t.$t("Re-Sync Revenue"),icon:t.loading?"el-icon-loading":"el-icon-refresh"},on:{click:t.handleResyncRevenue}}):t._e()],1),t._v(" "),"open"==i.type?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Open_Rate_Info"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])]:"click"==i.type?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("click_rate_info"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])]:t._e(),t._v(" "),i.is_percent?e("span",{staticClass:"fc_report_value"},[t._v("\n                                        "+t._s(t.getPercent(i.total))+"\n                                    ")]):e("span",{staticClass:"fc_report_value"},[t._v("\n                                        "+t._s(i.total)+"\n                                    ")])],2)})],2)])]),t._v(" "),e("el-col",{attrs:{md:8,sm:12,xs:24}},[e("div",{staticClass:"fc_campaign_report"},[e("h3",[t._v(t._s(t.$t("Emails Stats")))]),t._v(" "),e("div",{staticStyle:{"max-width":"270px",margin:"0 auto"}},[t.chartData&&!t.loading?e("campaign-chart",{attrs:{"chart-data":t.chartData}}):t._e()],1)])]),t._v(" "),e("el-col",{attrs:{md:8,sm:12,xs:24}},[e("div",{staticClass:"fc_campaign_report"},[e("h3",[t._v(t._s(t.$t("Link activity")))]),t._v(" "),e("div",{},[t.loading?t._e():e("link-metrics",{attrs:{hide_title:!0,campaign_id:t.campaign.id}})],1)])])],1)]:"working"==t.campaign.status&&t.campaign.scheduling_range?[t.loading?e("div",{staticStyle:{padding:"20px"}},[e("el-skeleton",{attrs:{rows:5,animated:!0}})],1):e("intermediate-campaign-stat",{attrs:{campaign_id:t.campaign.id}})]:e("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_stat_cards",staticStyle:{"min-height":"100px"}},[t._l(t.stat,function(i){return e("li",{key:i.status},[e("div",{staticClass:"fluentcrm_cart_counter"},[t._v(t._s(i.total))]),t._v(" "),e("h4",[t._v(t._s(t._f("ucFirst")(i.status))+" "+t._s(t.$t("Emails")))])])}),t._v(" "),e("li",[e("div",{staticClass:"fluentcrm_cart_counter"},[t._v(t._s(t.campaign.recipients_count))]),t._v(" "),e("h4",[t._v(t._s(t.$t("Total Emails")))])]),t._v(" "),t._l(t.analytics,function(i){return e("li",{key:i.type,class:"fc_camp_data_"+i.type},[e("div",{staticClass:"fluentcrm_cart_counter"},[i.is_percent?e("span",[t._v("\n                        "+t._s(t.getPercent(i.total))+"\n                    ")]):e("span",[t._v("\n                        "+t._s(i.total)+"\n                    ")])]),t._v(" "),e("h4",[t._v(t._s(i.label))])])})],2),t._v(" "),e("el-tabs",{staticStyle:{"min-height":"200px"},attrs:{type:"border-card","tab-position":"top"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e("el-tab-pane",{attrs:{name:"campaign_details",label:t.$t("Campaign Details")}},[e("campaign-summary-details",{attrs:{campaign:t.campaign}})],1),t._v(" "),e("el-tab-pane",{attrs:{lazy:!0,name:"campaign_subscribers",label:t.$t("Emails")}},[e("campaign-emails",{attrs:{campaign_id:t.campaign.id},on:{fetchCampaign:function(e){return t.getCampaignStatus()}}})],1),t._v(" "),t.analytics.unsubscribe?e("el-tab-pane",{attrs:{lazy:!0,name:"campaign_unsubscribers",label:t.$t("Unsubscribers")}},[e("unsubscribers",{attrs:{campaign_id:t.campaign.id}})],1):t._e(),t._v(" "),t.subject_analytics.subjects?e("el-tab-pane",{attrs:{name:"campaign_subject_analytics",label:t.$t("A/B Testing Result")}},[e("subject-metrics",{attrs:{campaign:t.campaign,metrics:t.subject_analytics}})],1):t._e(),t._v(" "),t.analytics.revenue?e("el-tab-pane",{attrs:{name:"campaign_revenue",label:t.$t("Revenue Report")}},["campaign_revenue"==t.activeTab?e("revenue-report",{attrs:{campaign:t.campaign}}):t._e()],1):t._e(),t._v(" "),e("el-tab-pane",{attrs:{lazy:!0,name:"campaign_actions",label:t.$t("Actions")}},[e("campaign-actions",{attrs:{campaign:t.campaign}})],1),t._v(" "),t.campaign?e("el-tab-pane",{attrs:{lazy:!0,name:"campaign_selections",label:t.$t("Contact Selections")}},[e("h2",[t._v("Contact Selections")]),t._v(" "),e("readable-recipients",{attrs:{settings:t.campaign.settings}})],1):t._e()],1)]],2):e("div",{staticClass:"fluentcrm_body_boxed"},[e("el-skeleton",{attrs:{rows:10,animated:!0}})],1),t._v(" "),t.loading&&t.campaign&&"working"!=t.campaign.status?e("div",{staticClass:"fluentcrm_body_boxed",staticStyle:{position:"relative"}},[e("div",{staticClass:"fc_loading_bar"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:7}}):t._e()],1):t._e(),t._v(" "),t.campaign?e("el-dialog",{attrs:{title:t.$t("Campaign Settings"),"append-to-body":!0,"close-on-click-modal":!1,visible:t.show_campaign_config,width:"60%"},on:{"update:visible":function(e){t.show_campaign_config=e}}},[e("el-form",{attrs:{"label-position":"top",data:t.campaign}},[e("el-form-item",{attrs:{label:t.$t("Campaign Title")}},[e("el-input",{attrs:{placeholder:t.$t("Internal Campaign Title")},model:{value:t.campaign.title,callback:function(e){t.$set(t.campaign,"title",e)},expression:"campaign.title"}})],1),t._v(" "),"scheduled"==t.campaign.status?e("div",{staticClass:"fc_highlight_gray text-align-center"},[e("h3",[t._v("Your campaign is currently on "),e("b",[t._v("scheduled")]),t._v(" state")]),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Schedule Time")}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","picker-options":t.pickerOptions,placeholder:t.$t("Select date and time")},model:{value:t.campaign.scheduled_at,callback:function(e){t.$set(t.campaign,"scheduled_at",e)},expression:"campaign.scheduled_at"}})],1)],1):t._e()],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"success"},on:{click:function(e){return t.updateCampaignSettings()}}},[t._v(t._s(t.$t("Save")))])],1)],1):t._e(),t._v(" "),t.campaign?e("el-dialog",{attrs:{title:t.$t("Share Newsletter via URL"),"append-to-body":!0,"close-on-click-modal":!1,visible:t.shareModal,width:"60%"},on:{"update:visible":function(e){t.shareModal=e}}},[t.shareModal?e("view-newsletter",{attrs:{campaign_id:t.campaign.id}}):t._e(),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.shareModal=!1}}},[t._v(t._s(t.$t("Close")))])],1)],1):t._e()],1)},[],!1,null,null,null).exports;var We=e({name:"BulkTemplateAction",props:["selectedTemplates"],components:{Confirm:d},data:function(){return{delete_confirm_message:"<b>"+this.$t("Are you sure to delete?")+"</b><br />"+this.$t("delete_all_templates_notice"),actions:{},select_job:{action_name:"",selected_options:[]},doing_action:!1,select_status:""}},watch:{"select_job.action_name":{handler:function(){this.select_job.selected_options=[],this.select_status=""},deep:!0}},methods:{doBulkAction:function(){var t=this,e=[];this.each(this.selectedTemplates,function(t){e.push(t.ID)}),console.log(e),this.doing_action=!0,this.$post("templates/do-bulk-action",{action_name:this.select_job.action_name,status:this.select_status,template_ids:e}).then(function(e){t.$notify.success(e.message),t.$emit("refetch")}).catch(function(e){t.handleError(e)}).finally(function(){t.doing_action=!1})}},mounted:function(){this.actions={delete_templates:{label:this.$t("Delete Templates")}}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_bulk_wrap"},[e("div",{staticClass:"fc_bulk_item"},[e("label",[t._v(t._s(t.$t("Select Action")))]),t._v(" "),e("el-select",{staticClass:"mt-5",attrs:{clearable:"",filterable:"",size:"mini",placeholder:t.$t("Select Bulk Action")},model:{value:t.select_job.action_name,callback:function(e){t.$set(t.select_job,"action_name",e)},expression:"select_job.action_name"}},t._l(t.actions,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t.label}})}),1)],1),t._v(" "),"delete_templates"==t.select_job.action_name?[e("confirm",{attrs:{placement:"top-start",message:t.delete_confirm_message},on:{yes:function(e){return t.doBulkAction()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action,size:"mini",type:"danger"},slot:"reference"},[t._v(t._s(t.$t("Delete Templates"))+"\n            ")])],1)]:t._e()],2)},[],!1,null,null,null);const Ke=e({name:"Templates",components:{EmailPreview:S,Confirm:d,Pagination:m,BulkTemplateAction:We.exports,InlineDoc:b,EmailHeaderPopNav:y,BuiltinTemplateDrawer:Xt},data:function(){return{loading:!1,templates:[],pagination:{current_page:1,per_page:20,total:0},url:"",title:"",dialogVisible:!1,order:"descending",orderBy:"ID",search:"",selection:!1,selectedTemplates:[],open_drawer:!1,show_drawer:!1,builtInTemplates:[],isLoadingTemplates:!1,importing:!1,oneTimeFetch:!0,showTemplatePreview:!1,previewTemplateId:"",email_template:{post_title:"",post_content:"",post_excerpt:"",email_subject:"",edit_type:"html",design_template:"simple",settings:{template_config:{}}}}},methods:{getStyleOfPostStatus:function(t){return{fontWeight:500,color:"publish"===t?"green":"gray"}},setup:function(){var t=this.$route.query;return window.fcrm_template_sub_params&&(t=window.fcrm_template_sub_params),this.search=t.search||"",this.order="ascending"===t.order?"ASC":"DESC",this.orderBy=t.orderBy,t.page&&(this.pagination.current_page=parseInt(t.page)),t.per_page&&(this.pagination.per_page=parseInt(t.per_page)),!1},fetch:function(){var t=this;this.loading=!0,this.selection=!1;var e={order:"ascending"==this.order?"ASC":"DESC",orderBy:this.orderBy,per_page:this.pagination.per_page,page:this.pagination.current_page,search:this.search},i={};Object.keys(e).forEach(function(t){void 0!==e[t]&&(i[t]=e[t])}),window.fcrm_template_sub_params=i,i.t=Date.now(),this.$router.replace({name:"templates",query:i}),e.types=["publish","draft"],this.$get("templates",e).then(function(e){t.templates=e.templates.data,t.pagination.total=e.templates.total,t.loading=!1})},onSelection:function(t){this.selection=!!t.length,this.selectedTemplates=t},duplicate:function(t){var e=this;this.duplicating=!0,this.$post("templates/duplicate/".concat(t.ID)).then(function(t){e.$notify.success(t.message),e.fetch(),e.$router.push({name:"edit_template",params:{template_id:t.template_id},query:{is_new:"yes"}})}).catch(function(t){e.handleError(t)}).finally(function(){e.duplicating=!1})},edit:function(t){this.$router.push({name:"edit_template",params:{template_id:t.ID}})},remove:function(t){var e=this;this.$del("templates/".concat(t.ID)).then(function(t){e.fetch(),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19})})},syncVisibility:function(){this.dialogVisible=!1},onDialogClose:function(){this.fetch(),this.url=""},sortTemplates:function(t){t.order,this.orderBy=t.prop,this.order=t.order,this.fetch()},exportTemplate:function(t){this.has_campaign_pro?location.href=window.ajaxurl+"?"+jQuery.param({action:"fluentcrm_export_template",template_id:t.ID}):this.$notify.error(this.$t("Template_Export_Alert"))},showPreview:function(t){this.previewTemplateId=t.ID,this.fetchTemplate()},openBuiltinTemplateDrawer:function(){this.open_drawer=!0},fetchTemplate:function(){var t=this;this.$get("templates/".concat(this.previewTemplateId)).then(function(e){t.email_template=e.template,t.showTemplatePreview=!0}).catch(function(t){console.log(t)}).finally(function(){})}},mounted:function(){this.setup(),this.fetch(),this.changeTitle(this.$t("Email Templates"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-templates fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[e("email-header-pop-nav",{attrs:{head_title:t.$t("Email Templates")}}),t._v(" "),t.pagination.total?e("span",{staticClass:"ff_small"},[t._v("("+t._s(t._f("formatMoney")(t.pagination.total))+")")]):t._e()],1)]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("div",{staticClass:"fc-search-box"},[e("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),t.hasPermission("fcrm_manage_email_templates")?e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.openBuiltinTemplateDrawer()}}},[t._v("\n                "+t._s(t.$t("Create New Template"))+"\n            ")]):t._e(),t._v(" "),e("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-upload"},on:{click:function(e){return t.$router.push({name:"import_template"})}}},[t._v("\n                "+t._s(t.$t("Import"))+"\n            ")]),t._v(" "),e("inline-doc",{attrs:{doc_id:1729}})],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_body",staticStyle:{position:"relative"}},[t.loading?e("div",{staticClass:"fc_loading_bar"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:7}}):t._e(),t._v(" "),t.loading?t._e():e("div",{staticClass:"templates-table"},[t.selection?e("div",{staticClass:"fluentcrm-header-secondary"},[e("bulk-template-action",{attrs:{selectedTemplates:t.selectedTemplates},on:{refetch:t.fetch}})],1):t._e(),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.templates,stripe:"","default-sort":{prop:t.orderBy,order:t.order}},on:{"sort-change":t.sortTemplates,"selection-change":t.onSelection}},[e("el-table-column",{attrs:{type:"selection",width:45}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("ID"),width:"100",prop:"ID",sortable:"custom"}}),t._v(" "),e("el-table-column",{attrs:{prop:"post_title","min-width":"450",label:t.$t("Title"),sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"edit_template",params:{template_id:i.row.ID}}}},["visual_builder"==i.row.design_template?e("span",[e("img",{staticStyle:{width:"15px"},attrs:{src:t.appVars.images_url+"/drag-drop.png"}})]):t._e(),t._v("\n                            "+t._s(i.row.post_title)+"\n                        ")]),t._v(" "),e("el-button",{attrs:{icon:"el-icon-view",size:"mini",type:"text"},on:{click:function(e){return t.showPreview(i.row)}}})]}}],null,!1,1919193883)}),t._v(" "),e("el-table-column",{attrs:{width:"190",label:t.$t("Created At"),prop:"post_date",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.post_date}},[t._v("\n                            "+t._s(t._f("nsHumanDiffTime")(i.row.post_date))+"\n                        ")])]}}],null,!1,2980467369)}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:t.$t("Actions"),align:"center","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tooltip",{attrs:{effect:"dark",content:"Edit",placement:"top"}},[e("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.edit(i.row)}}},[t._v(t._s(t.$t("edit"))+"\n                            ")])],1),t._v(" "),e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link"},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{"font-weight":"bold",cursor:"pointer"}})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.duplicate(i.row)}}},[e("span",{staticClass:"el-icon el-icon-copy-document"}),t._v(" "+t._s(t.$t("Duplicate"))+"\n                                ")])]),t._v(" "),e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.exportTemplate(i.row)}}},[e("span",{staticClass:"el-icon el-icon-download"}),t._v(" "+t._s(t.$t("Export"))+"\n                                    ")])]),t._v(" "),e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("confirm",{attrs:{placement:"top-start",message:t.$t("Delete_Template_Alert")},on:{yes:function(e){return t.remove(i.row)}}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"el-icon el-icon-delete"}),t._v("\n                                        "+t._s(t.$t("Delete Template"))+"\n                                    ")])])],1)],1)],1)]}}],null,!1,2169938234)})],1),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}}),t._v(" "),t.showTemplatePreview?e("div",[e("email-preview",{attrs:{auto_load:!0,show_audit:!0,campaign:t.email_template},on:{modalClosed:function(){t.showTemplatePreview=!1}}})],1):t._e()],1)],1),t._v(" "),e("builtin-template-drawer",{attrs:{create_mode:!0,open_drawer:t.open_drawer},on:{"update:open_drawer":function(e){t.open_drawer=e}}})],1)},[],!1,null,null,null).exports;const Je=e({name:"edit_template",props:["template_id"],components:{InputPopover:F,EmailBlockComposer:te,SendTestEmail:M},data:function(){return{email_template:{post_title:"",post_content:" ",post_excerpt:"",email_subject:"",edit_type:"html",design_template:"simple",settings:{template_config:{}}},email_template_designs:window.fcAdmin.email_template_designs,smart_codes:[],loading:!0,app_ready:!1,codes_ready:!1,is_dirty:!1,prevContent:""}},methods:{fetchSmartCodes:function(){var t=this;this.codes_ready=!1,this.$get("templates/smartcodes",{}).then(function(e){t.smart_codes=e.smartcodes}).catch(function(t){console.log(t)}).finally(function(){t.codes_ready=!0})},fetchTemplate:function(){var t=this;this.loading=!0,this.$get("templates/".concat(this.template_id)).then(function(e){t.email_template=e.template,t.$nextTick(function(){t.app_ready=!0,t.prevContent=t.email_template.post_content})}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1})},saveTemplate:function(){var t=this;this.loading=!0,this.is_dirty=!1;var e={};e=parseInt(this.template_id)?this.$post("templates",{template:JSON.stringify(this.email_template),template_id:this.template_id}):this.$post("templates",{template:JSON.stringify(this.email_template)}),this.prevContent=this.email_template.post_content,e.then(function(e){t.$notify.success(e.message),parseInt(t.template_id)||t.$router.push({name:"edit_template",params:{template_id:e.template_id}})}).catch(function(e){console.log(e),t.handleError(e)}).finally(function(){t.loading=!1})},maybeSaveTemplate:function(){"visual_builder"==this.email_template.design_template?this.$bus.$emit("getVisualData",{}):this.saveTemplate()},handleChangeContent:function(){this.is_dirty=!0},exportTemplate:function(){this.has_campaign_pro?location.href=window.ajaxurl+"?"+jQuery.param({action:"fluentcrm_export_template",template_id:this.template_id}):this.$notify.error(this.$t("Template_Export_Alert"))},initKeyboardSave:function(t){(window.navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&"s"===t.key&&(t.preventDefault(),this.maybeSaveTemplate())},handleBeforeUnload:function(t){if(this.is_dirty&&this.prevContent!==this.email_template.post_content)return t.preventDefault(),t.returnValue="",""}},mounted:function(){this.fetchSmartCodes(),this.fetchTemplate(),this.changeTitle(this.$t("Edit Template")),document.addEventListener("keydown",this.initKeyboardSave),window.addEventListener("beforeunload",this.handleBeforeUnload)},beforeRouteLeave:function(t,e,i){if(this.is_dirty&&(this.prevContent!=this.email_template.post_content&&!window.confirm(this.$t("Unsaved_Confirm_Msg"))))return!1;this.unmountBlockEditor(),document.removeEventListener("keydown",this.initKeyboardSave),i()},watch:{template_id:function(t){t&&t>0&&this.fetchTemplate()}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-templates fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[0==t.template_id?e("h3",[t._v(t._s(t.$t("Create Email Template")))]):e("div",[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"templates"}}},[t._v("\n                        "+t._s(t.$t("Email Templates"))+"\n                    ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                        "+t._s(t.email_template.post_title)+"\n                    ")])],1)],1)]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[0==t.template_id?e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.maybeSaveTemplate}},[t._v("\n                "+t._s(t.$t("Create Template"))+"\n            ")]):[e("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",type:"primary"},on:{click:t.maybeSaveTemplate}},[t._v("\n                    "+t._s(t.$t("Save Template"))+"\n                ")]),t._v(" "),e("send-test-email",{attrs:{btn_type:"danger",campaign:{email_subject:t.email_template.email_subject,email_pre_header:t.email_template.post_excerpt,email_body:t.email_template.post_content,design_template:t.email_template.design_template,settings:t.email_template.settings}}}),t._v(" "),e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link"},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{"font-weight":"bold",cursor:"pointer"}})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.exportTemplate()}}},[e("span",{staticClass:"el-icon el-icon-download"}),t._v(" "+t._s(t.$t("Export Template"))+"\n                        ")])])],1)],1)]],2)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body fluentcrm_body_boxed",staticStyle:{position:"relative"}},[t.loading?e("div",{staticClass:"fc_loading_bar"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.app_ready?e("div",[e("el-form",{attrs:{"label-position":"top","label-width":"120px",model:t.email_template}},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{sm:24,md:12}},[e("el-form-item",{attrs:{label:t.$t("Template Title")}},[e("el-input",{attrs:{placeholder:t.$t("Template Title")},model:{value:t.email_template.post_title,callback:function(e){t.$set(t.email_template,"post_title",e)},expression:"email_template.post_title"}})],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{sm:24,md:12}},[e("el-form-item",{attrs:{label:t.$t("Email Subject")}},[e("input-popover",{attrs:{doc_url:"https://fluentcrm.com/docs/merge-codes-smart-codes-usage/",popper_extra:"fc_with_c_fields",placeholder:t.$t("Email Subject"),data:t.smart_codes},model:{value:t.email_template.email_subject,callback:function(e){t.$set(t.email_template,"email_subject",e)},expression:"email_template.email_subject"}})],1)],1),t._v(" "),e("el-col",{attrs:{sm:24,md:12}},[e("el-form-item",{attrs:{label:t.$t("Email Pre-Header")}},[e("el-input",{staticClass:"min_textarea_40",attrs:{type:"textarea",placeholder:t.$t("Email Pre-Header"),rows:1},model:{value:t.email_template.post_excerpt,callback:function(e){t.$set(t.email_template,"post_excerpt",e)},expression:"email_template.post_excerpt"}})],1)],1)],1)],1)],1):t._e(),t._v(" "),t.app_ready&&t.codes_ready&&!t.loading?e("div",{staticStyle:{margin:"0 -20px"}},[e("email-block-composer",{attrs:{show_merge:!0,enable_templates:!0,show_audit:!0,body_key:"post_content",campaign:t.email_template},on:{save:function(e){return t.saveTemplate()},fetch:function(e){return t.fetchTemplate()},changed:function(e){return t.handleChangeContent()}}})],1):t._e()])])},[],!1,null,null,null).exports;const Ye=e({name:"ImportEmailTemplate",components:{GenericPromo:Te},data:function(){return{step:"upload",importing:!1,inline_errors:!1}},computed:{url:function(){var t=window.ajaxurl;return t+=(t.match(/\?/)?"&":"?")+jQuery.param({action:"fluentcrm_import_template"}),t}},methods:{success:function(t){this.$notify.success(t.message),this.$router.push({name:"edit_template",params:{template_id:t.template_id}})},error:function(t){var e=JSON.parse(t.message);this.$notify.error(e.message),e.requires&&(this.inline_errors=e.requires)}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_settings_wrapper fc_sequence_import"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"templates"}}},[t._v("\n                    "+t._s(t.$t("Email Templates"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.$t("Import"))+"\n                ")])],1)],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.importing,expression:"importing"}],staticClass:"fluentcrm_body fluentcrm_title_cards fc_narrow_box fc_white_inverse",staticStyle:{"margin-top":"30px","max-width":"1160px"}},[t.has_campaign_pro?[e("div",{staticClass:"fc_funnel_upload text-align-center"},[e("h3",[t._v(t._s(t.$t("Import_Email_Template")))]),t._v(" "),e("el-upload",{ref:"uploader",attrs:{drag:"",limit:1,action:t.url,multiple:!1,"on-error":t.error,"on-success":t.success}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n                        "+t._s(t.$t("Drop JSON file here or"))+" "),e("em",[t._v(t._s(t.$t("click to upload")))])])]),t._v(" "),e("h4",[t._v(t._s(t.$t("Not_Import_Templates_Alert")))]),t._v(" "),t.inline_errors?e("pre",[t._v(t._s(t.inline_errors))]):t._e()],1)]:e("div",[e("generic-promo")],1)],2)])},[],!1,null,null,null).exports;const Qe=e({name:"AllEmails",components:{Pagination:m,EmailPreview:Ee,Confirm:d,EmailHeaderPopNav:y},data:function(){return{emails:[],pagination:{total:0,per_page:10,current_page:1},loading:!1,preview:{id:null,isVisible:!1},resending:!1,selections:[],deleting:!1,statuses:null,selectStatus:""}},methods:{fetchEmails:function(){var t=this;this.loading=!0;var e={per_page:this.pagination.per_page,page:this.pagination.current_page,status:this.selectStatus};this.$get("reports/emails",e).then(function(e){t.emails=e.emails.data,e.statuses&&(t.statuses=e.statuses),t.pagination.total=e.emails.total,document.body.scrollTop=0,document.documentElement.scrollTop=0}).catch(function(e){t.handleError(e)}).finally(function(e){t.loading=!1})},resendEmail:function(t){var e=this;if(!this.has_campaign_pro)return this.$notify.error(this.$t("_Ca_Please_utptutf")),!1;this.resending=!0,this.$post("campaigns-pro/".concat(t.campaign_id,"/resend-emails"),{email_ids:[t.id]}).then(function(t){e.$notify.success(t.message),e.fetchEmails()}).catch(function(t){e.handleError(t)}).finally(function(){e.resending=!1})},previewEmail:function(t){this.preview.id=t,this.preview.isVisible=!0},deleteSelected:function(){var t=this;this.deleting=!0;var e=this.selections.map(function(t){return t.id});this.$del("reports/emails",{email_ids:e}).then(function(e){t.selections=[],t.$notify.success(e.message),t.fetchEmails()}).catch(function(e){t.handleError(e)}).finally(function(){t.deleting=!1})},handleSelectionChange:function(t){this.selections=t}},mounted:function(){this.fetchEmails(),this.changeTitle(this.$t("All Emails"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[e("email-header-pop-nav",{attrs:{head_title:t.$t("All Email Activities")}}),t._v(" "),t.pagination.total?e("span",{staticClass:"ff_small"},[t._v("("+t._s(t._f("formatMoney")(t.pagination.total))+")")]):t._e()],1)]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[t.statuses?[e("el-select",{attrs:{placeholder:"By Status",size:"mini"},on:{change:t.fetchEmails},model:{value:t.selectStatus,callback:function(e){t.selectStatus=e},expression:"selectStatus"}},[e("el-option",{attrs:{value:"",label:"All"}}),t._v(" "),t._l(t.statuses,function(i,n){return e("el-option",{key:n,attrs:{label:t.ucFirst(n)+" ("+i+")",value:n}})})],2)]:t._e()],2)]),t._v(" "),e("div",{staticClass:"fluentcrm_body fluentcrm_pad_b_20",staticStyle:{position:"relative"}},[t.loading||t.resending?e("div",{staticClass:"fc_loading_bar"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading&&!t.pagination.total?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):t._e(),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",stripe:"",data:t.emails},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),t._v(" "),e("el-table-column",{attrs:{width:"64",fixed:""},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.subscriber?e("router-link",{attrs:{to:{name:"subscriber",params:{id:i.row.subscriber_id}}}},[e("img",{staticClass:"fc_contact_photo",attrs:{title:t.$t("Contact ID:")+i.row.subscriber_id,src:i.row.subscriber.photo}})]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Contact"),width:"240"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.subscriber?e("router-link",{attrs:{to:{name:"subscriber",params:{id:i.row.subscriber_id}}}},[t._v("\n                        "+t._s(i.row.subscriber.full_name)+"\n                    ")]):e("span",[t._v(t._s(i.row.email_address))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Subject")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.email_subject))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Source")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.campaign?e("span",[t._v(t._s(i.row.campaign.title))]):e("span",[t._v(t._s(t.$t("n/a")))])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"120",label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.status)+"\n                ")]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"180",label:t.$t("Sending Time")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.scheduled_at}},[t._v("\n                        "+t._s(t._f("nsHumanDiffTime")(i.row.scheduled_at))+"\n                    ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Preview"),fixed:"right",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.subscriber?[e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-view"},on:{click:function(e){return t.previewEmail(i.row.id)}}}),t._v(" "),"sent"!=i.row.status&&"failed"!=i.row.status||!i.row.campaign_id?t._e():e("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-refresh-right"},on:{click:function(e){return t.resendEmail(i.row)}}},[t._v(t._s(t.$t("Resend"))+"\n                        ")])]:t._e()]}}])})],1),t._v(" "),t.emails.length?e("el-row",[e("el-col",{attrs:{md:12,sm:24}},[t.selections.length?e("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.deleteSelected()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],staticStyle:{margin:"10px 0 0 15px"},attrs:{slot:"reference",icon:"el-icon-delete",size:"mini",type:"danger"},slot:"reference"},[t._v("\n                        "+t._s(t.$t("Delete Selected"))+"\n                    ")])],1):t._e(),t._v("\n                \n            ")],1),t._v(" "),e("el-col",{attrs:{md:12,sm:24}},[e("pagination",{attrs:{pagination:t.pagination,extra_sizes:[200,250,300,400,600]},on:{fetch:t.fetchEmails}})],1)],1):t._e()],1),t._v(" "),e("email-preview",{attrs:{preview:t.preview}})],1)},[],!1,null,null,null).exports;function Ze(t){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}function Xe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function ti(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(i),!0).forEach(function(e){ei(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Xe(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function ei(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Ze(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ze(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ii(t){return ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ii(t)}function ni(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,si(n.key),n)}}function si(t){var e=function(t,e){if("object"!=ii(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=ii(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ii(e)?e:e+""}const ai=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}},(e=[{key:"get",value:function(t){if(this.errors[t])return Object.values(this.errors[t])[0]}},{key:"has",value:function(t){return!!this.errors[t]}},{key:"record",value:function(t){this.errors=t}},{key:"clear",value:function(){this.errors={}}}])&&ni(t.prototype,e),i&&ni(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}();const oi=e({name:"Error",props:["error"]},function(){var t=this,e=t._self._c;return t.error?e("span",{staticClass:"el-form-item__error"},[t._v("\n    "+t._s(t.error)+"\n")]):t._e()},[],!1,null,null,null).exports;var ri=i(1448),li=i.n(ri);var ci=e({name:"FieldForm",props:["field_types","item","form_type","existing_fields"],data:function(){return{optionInputVisible:!1,optionInputValue:"",editingOptionIndex:""}},computed:{groupOptions:function(){var t={};return this.each(this.existing_fields,function(e){e.group&&(t[e.group]=e.group)}),t}},methods:{maybeSetSlug:function(){if("new"!=this.form_type)return!1;var t=this.item.label.toLowerCase().replace(//gi,"d").replace(/\s*$/g,"").replace(/\s+/g,"_").substring(0,25);this.$set(this.item,"slug",t)},changeFieldType:function(){var t=this.item.field_key,e=this.field_types[t];this.$set(this.item,"type",e.type),this.$set(this.item,"label",""),this.hasOptions(e.type)?this.item.options||this.$set(this.item,"options",["Value Option 1"]):this.$delete(this.item,"options")},hasOptions:function(t){return-1!==["select-one","select-multi","radio","checkbox"].indexOf(t)},handleOptionInputConfirm:function(){var t=this.optionInputValue;t&&this.item.options.push(t),this.optionInputVisible=!1,this.optionInputValue=""},removeOptionItem:function(t){this.item.options.splice(t,1)},moveOptionsPosition:function(t,e){var i=t-1;if("down"===e&&(i=t+1),!(i<0||i>=this.item.options.length)){var n=this.item.options.splice(t,1)[0];this.item.options.splice(i,0,n)}},startEditing:function(t){var e=this;this.editingOptionIndex=t,this.$nextTick(function(){e.$refs.optionInput&&(Array.isArray(e.$refs.optionInput)?e.$refs.optionInput[0].focus():e.$refs.optionInput.focus())})},stopEditing:function(){this.editingOptionIndex=null}},mounted:function(){}},function(){var t=this,e=t._self._c;return e("el-form",{staticClass:"fcrm-update-custom-fields-form",attrs:{"label-position":"top",data:t.item}},[e("el-form-item",{attrs:{label:t.$t("Field Type")}},[e("el-select",{attrs:{placeholder:t.$t("Select Field Type")},on:{change:function(e){return t.changeFieldType()}},model:{value:t.item.field_key,callback:function(e){t.$set(t.item,"field_key",e)},expression:"item.field_key"}},t._l(t.field_types,function(t,i){return e("el-option",{key:i,attrs:{label:t.label,value:i}})}),1),t._v(" "),t.item.type?[e("el-form-item",{attrs:{label:t.$t("Label")}},[e("el-input",{attrs:{placeholder:t.$t("Custom Field Label")},nativeOn:{keyup:function(e){return t.maybeSetSlug()}},model:{value:t.item.label,callback:function(e){t.$set(t.item,"label",e)},expression:"item.label"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Slug (Optional)")}},[e("el-input",{attrs:{maxlength:"25",placeholder:t.$t("Custom Field Slug"),disabled:"update"==t.form_type},model:{value:t.item.slug,callback:function(e){t.$set(t.item,"slug",e)},expression:"item.slug"}}),t._v(" "),"new"==t.form_type?e("p",[t._v(t._s(t.$t("CustomFieldForm.slug.desc")))]):t._e()],1),t._v(" "),t.hasOptions(t.item.type)?e("el-form-item",{attrs:{label:t.$t("Field Value Options")}},[e("ul",{staticClass:"fluentcrm_option_lists"},t._l(t.item.options,function(i,n){return e("li",{key:n},[e("el-button-group",[e("el-button",{attrs:{disabled:0==n,size:"mini",icon:"el-icon-arrow-up"},on:{click:function(e){return t.moveOptionsPosition(n,"up")}}}),t._v(" "),e("el-button",{attrs:{disabled:n==t.item.options.length-1,size:"mini",icon:"el-icon-arrow-down"},on:{click:function(e){return t.moveOptionsPosition(n,"down")}}})],1),t._v(" "),t.editingOptionIndex!==n?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Click to edit"),placement:"top",enterable:!1}},[e("span",{staticClass:"option-text",on:{click:function(e){return t.startEditing(n)}}},[t._v("\n                                  "+t._s(i)+"\n                            ")])]):e("input",{directives:[{name:"model",rawName:"v-model",value:t.item.options[n],expression:"item.options[optionIndex]"}],ref:"optionInput",refInFor:!0,staticClass:"option-edit-input",attrs:{type:"text"},domProps:{value:t.item.options[n]},on:{blur:t.stopEditing,input:function(e){e.target.composing||t.$set(t.item.options,n,e.target.value)}}}),t._v(" "),e("i",{staticClass:"fluentcrm_clickable el-icon-close",on:{click:function(e){return t.removeOptionItem(n)}}})],1)}),0),t._v(" "),e("div",{staticClass:"fcrm-add-new-option-input-wrap"},[e("el-input",{attrs:{placeholder:t.$t("Type new option")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleOptionInputConfirm.apply(null,arguments)}},model:{value:t.optionInputValue,callback:function(e){t.optionInputValue=e},expression:"optionInputValue"}},[e("template",{slot:"append"},[e("el-button",{on:{click:t.handleOptionInputConfirm}},[t._v("\n                                "+t._s(t.$t("Add"))+"\n                            ")])],1)],2)],1)]):t._e(),t._v(" "),e("el-form-item",{attrs:{label:"Field Group (Optional)"}},[e("el-select",{attrs:{"no-data-text":"Type new group name to create",clearable:"",filterable:"","allow-create":"",placeholder:t.$t("Select or Create New Field Group")},model:{value:t.item.group,callback:function(e){t.$set(t.item,"group",e)},expression:"item.group"}},t._l(t.groupOptions,function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)]:t._e()],2)],1)},[],!1,null,null,null);function ui(t){return function(t){if(Array.isArray(t))return di(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return di(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?di(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function di(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}const _i=e({name:"custom_contact_fields",components:{Confirm:d,CustomFieldForm:ci.exports},props:{is_pop:{type:Boolean,default:function(){return!1}},section_title:{type:String,default:function(){return"Custom Contact Fields"}},route:{type:String,default:function(){return"custom-fields/contacts"}}},data:function(){return{loading:!1,fields:[],originalFields:[],new_item:{},field_types:{},addFieldVisible:!1,updateFieldVisible:!1,update_field:{},query_data:{sort_by:"",sort_order:""}}},methods:{fetchFields:function(){var t=this;this.loading=!0,this.$get(this.route,{with:["field_types","field_groups"],sort_by:this.query_data.sort_by,sort_order:this.query_data.sort_order}).then(function(e){t.fields=e.fields,t.originalFields=ui(t.fields),t.field_types=e.field_types}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},saveFields:function(){var t=this;this.loading=!0,this.$put(this.route,{fields:JSON.stringify(this.fields)}).then(function(e){t.appVars.available_custom_fields=e.fields,t.fields=e.fields,t.$emit("fieldsUpdated",e.fields),t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},createField:function(){if(!this.validateField(this.new_item))return!1;this.fields.push(this.new_item),this.addFieldVisible=!1,this.new_item={},this.saveFields()},validateField:function(t){return t.label?!(t.options&&!t.options.length)||(this.$notify.error(this.$t("Please Field Option Values")),!1):(this.$notify.error(this.$t("Please Provide label")),!1)},updateFieldModal:function(t){this.update_field=this.fields[t],this.updateFieldVisible=!0},updateField:function(){if(!this.validateField(this.update_field))return!1;this.updateFieldVisible=!1,this.update_field={},this.saveFields()},deleteField:function(t){this.fields.splice(t,1),this.saveFields()},movePosition:function(t,e){var i=t-1;"down"===e&&(i=t+1);var n=this.fields,s=n[t];n.splice(t,1),n.splice(i,0,s),this.$set(this,"fields",n),this.saveFields()},handleSortable:function(t){var e=this;this.query_data.sort_by===t.prop?this.query_data.sort_order="ascending"===this.query_data.sort_order?"descending":"ascending":(this.query_data.sort_by=t.prop,this.query_data.sort_order=t.order);var i=this.query_data.sort_by,n="descending"===this.query_data.sort_order;if(i){var s=ui(this.fields).sort(function(t,e){var s=(t[i]||"").toString().toLowerCase(),a=(e[i]||"").toString().toLowerCase();if("group"===i){var o=!s,r=!a;if(o&&!r)return 1;if(!o&&r)return-1}return s<a?n?1:-1:s>a?n?-1:1:0});this.fields=s,this.loading=!0,this.$nextTick(function(){e.loading=!1})}},resetFilter:function(){var t=this;this.query_data.sort_by="",this.query_data.sort_order="",this.fields=ui(this.originalFields),this.loading=!0,this.$nextTick(function(){t.loading=!1})}},mounted:function(){this.fetchFields(),this.is_pop||this.changeTitle(this.$t("Custom Fields"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.section_title))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addFieldVisible=!0}}},[t._v(t._s(t.$t("Add Field")))])],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_pad_around",staticStyle:{position:"relative"}},[t.loading?e("div",{staticClass:"fc_loading_bar",attrs:{slot:"before_contacts_table"},slot:"before_contacts_table"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.query_data.sort_by?e("div",{staticClass:"fc-reset-custom-fields-sort"},[e("el-tag",{attrs:{size:"mini",closable:""},on:{close:t.resetFilter}},[t._v("\n                "+t._s(t.query_data.sort_by?t.$t("Sorting By")+" "+t.$t(t.query_data.sort_by)+": "+t.$t(t.query_data.sort_order):"")+"\n            ")])],1):t._e(),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):e("el-table",{attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",data:t.fields},on:{"sort-change":t.handleSortable}},[e("el-table-column",{attrs:{label:t.$t("Label"),prop:"label",sortable:""}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Slug"),prop:"slug",sortable:""}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Group"),prop:"group",sortable:""}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Type"),prop:"type",sortable:""}}),t._v(" "),e("el-table-column",{attrs:{width:"160",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.updateFieldModal(i.$index)}}}),t._v(" "),e("confirm",{on:{yes:function(e){return t.deleteField(i.$index)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1),t._v(" "),e("el-button-group",[e("el-button",{attrs:{disabled:0==i.$index,size:"mini",icon:"el-icon-arrow-up"},on:{click:function(e){return t.movePosition(i.$index,"up")}}}),t._v(" "),e("el-button",{attrs:{disabled:i.$index==t.fields.length-1,size:"mini",icon:"el-icon-arrow-down"},on:{click:function(e){return t.movePosition(i.$index,"down")}}})],1)]}}])})],1)],1),t._v(" "),e("el-dialog",{attrs:{title:t.$t("Add New Custom Field"),visible:t.addFieldVisible,"close-on-click-modal":!1,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.addFieldVisible=e}}},[e("custom-field-form",{attrs:{existing_fields:t.fields,form_type:"new",field_types:t.field_types,item:t.new_item}}),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.createField()}}},[t._v("\n                "+t._s(t.$t("Add"))+"\n            ")])],1)],1),t._v(" "),e("el-dialog",{staticClass:"fcrm-update-dialog",attrs:{title:t.$t("Update Custom Field"),visible:t.updateFieldVisible,"close-on-click-modal":!1,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.updateFieldVisible=e}}},[e("custom-field-form",{attrs:{existing_fields:t.fields,form_type:"update",field_types:t.field_types,item:t.update_field}}),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.updateField()}}},[t._v(t._s(t.$t("Update Field")))])],1)],1)],1)},[],!1,null,null,null).exports,pi={name:"ProfileCustomFields",props:["subscriber","custom_fields"],components:{CustomFields:_i},data:function(){return{app_ready:!1,showingCustomFieldsConfig:!1,UpdatedGroupName:"",editingGroupName:null}},computed:{fieldGropups:function(){var t=this,e={};return this.each(this.custom_fields,function(i){li()(t.subscriber.custom_values,i.slug)&&(i.is_disabled=!0),i.group||(i.group=""),e[i.group]||(e[i.group]={}),e[i.group][i.slug]=i}),e}},methods:{clickGroupNameToEdit:function(t){var e=this;this.UpdatedGroupName=t,this.editingGroupName=t,this.$nextTick(function(){e.$refs.groupNameInput[0].focus()})},handleGroupNameUpdate:function(){var t=this,e=this.editingGroupName,i=this.UpdatedGroupName.trim();if(!i||i===e)return this.UpdatedGroupName="",void(this.editingGroupName=null);this.$put("custom-fields/contacts/update_group_name",{old_name:e,new_name:i}).then(function(n){t.$notify.success({title:t.$t("Great!"),message:n.message,offset:19}),t.custom_fields.forEach(function(t){t.group===e&&(t.group=i)})}).catch(function(e){t.errors=e,t.handleError(e)}).finally(function(){t.UpdatedGroupName="",t.editingGroupName=null})}},mounted:function(){var t=this;this.each(this.custom_fields,function(e){var i="";-1!==["select-multi","checkbox"].indexOf(e.type)&&(i=[]),li()(t.subscriber.custom_values,e.slug)||t.$set(t.subscriber.custom_values,e.slug,i)}),this.app_ready=!0}};var mi=i(42),fi={insert:"head",singleton:!1};a()(mi.A,fi);mi.A.locals;const hi=e(pi,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_custom_field_wrapper"},[t.custom_fields.length?e("div",{staticClass:"fluentcrm_custom_fields"},[e("h3",[t._v("\n            "+t._s(t.$t("Custom Profile Data"))+"\n            "),t.hasPermission("fcrm_manage_settings")?e("el-button",{attrs:{type:"default",plain:"",size:"mini",icon:"el-icon-s-operation"},on:{click:function(e){t.showingCustomFieldsConfig=!0}}}):t._e()],1),t._v(" "),t.app_ready?e("el-form",{attrs:{data:t.subscriber.custom_values,"label-position":"top"}},t._l(t.fieldGropups,function(i,n){return e("div",{key:n,staticClass:"fc_custom_field_box",class:n?"fc_custom_field_group_box":""},[n&&t.editingGroupName!==n?e("div",{staticClass:"fc_item_label",on:{click:function(e){return t.clickGroupNameToEdit(n)}}},[t._v(t._s(n))]):t._e(),t._v(" "),n&&t.editingGroupName===n?e("div",{staticClass:"fc_item_label"},[e("el-input",{ref:"groupNameInput",refInFor:!0,attrs:{type:"text"},on:{blur:t.handleGroupNameUpdate},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleGroupNameUpdate.apply(null,arguments)}},model:{value:t.UpdatedGroupName,callback:function(e){t.UpdatedGroupName=e},expression:"UpdatedGroupName"}})],1):t._e(),t._v(" "),e("div",{staticClass:"fluentcrm_layout"},t._l(i,function(i,n){return e("el-form-item",{key:n,staticClass:"fluentcrm_layout_half",attrs:{label:i.label}},["text"==i.type||"number"==i.type||"textarea"==i.type?e("el-input",{attrs:{placeholder:i.label,type:i.type},model:{value:t.subscriber.custom_values[n],callback:function(e){t.$set(t.subscriber.custom_values,n,e)},expression:"subscriber.custom_values[fieldKey]"}}):"radio"==i.type?[e("el-radio-group",{model:{value:t.subscriber.custom_values[n],callback:function(e){t.$set(t.subscriber.custom_values,n,e)},expression:"subscriber.custom_values[fieldKey]"}},t._l(i.options,function(t){return e("el-radio",{key:t,attrs:{value:t,label:t}})}),1)]:"select-one"==i.type||"select-multi"==i.type?[e("el-select",{attrs:{placeholder:t.$t("Select")+" "+i.label,clearable:"",filterable:"",multiple:"select-multi"==i.type},model:{value:t.subscriber.custom_values[n],callback:function(e){t.$set(t.subscriber.custom_values,n,e)},expression:"subscriber.custom_values[fieldKey]"}},t._l(i.options,function(t){return e("el-option",{key:t,attrs:{value:t,label:t}})}),1)]:"checkbox"==i.type?[e("el-checkbox-group",{staticClass:"fc_checkbox_group",model:{value:t.subscriber.custom_values[n],callback:function(e){t.$set(t.subscriber.custom_values,n,e)},expression:"subscriber.custom_values[fieldKey]"}},t._l(i.options,function(t){return e("el-checkbox",{key:t,staticClass:"fc_checkbox",attrs:{value:t,label:t}})}),1)]:"date"==i.type?[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:t.$t("Pick a date")},model:{value:t.subscriber.custom_values[n],callback:function(e){t.$set(t.subscriber.custom_values,n,e)},expression:"subscriber.custom_values[fieldKey]"}})]:"date_time"==i.type?[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:t.$t("Pick a date and time")},model:{value:t.subscriber.custom_values[n],callback:function(e){t.$set(t.subscriber.custom_values,n,e)},expression:"subscriber.custom_values[fieldKey]"}})]:[t._v("\n                            "+t._s(i)+"\n                        ")]],2)}),1)])}),0):t._e()],1):e("div",{staticClass:"fc_no_custom_fields_btn"},[e("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-s-operation"},on:{click:function(e){t.showingCustomFieldsConfig=!0}}},[t._v("\n            "+t._s(t.$t("Custom Fields"))+"\n        ")])],1),t._v(" "),e("el-drawer",{attrs:{"append-to-body":!0,title:t.$t("Custom Fields Config"),visible:t.showingCustomFieldsConfig,size:"50%"},on:{"update:visible":function(e){t.showingCustomFieldsConfig=e}}},[t.showingCustomFieldsConfig?e("custom-fields",{attrs:{is_pop:!0},on:{fieldsUpdated:function(e){t.$bus.$emit("contact_custom_fields_updated",e)}}}):t._e()],1)],1)},[],!1,null,null,null).exports;const gi=e({name:"CompanySelector",props:["value","field"],data:function(){return{model:this.value,results:[],loading:!1,doing_ajax:!1}},watch:{model:function(t){this.$emit("input",t)}},methods:{fetchOptions:function(t){var e=this;if(this.hasPermission("fcrm_manage_contact_cats"))return!this.doing_ajax&&void(window.fc_all_company_cache?this.results=window.fc_all_company_cache:(this.loading=!0,this.doing_ajax=!0,this.$get("companies/search",{search:t,values:this.model}).then(function(t){e.results=t.results,t.has_more||(window.fc_all_company_cache=t.results,e.field.cacheable=!0)}).catch(function(t){e.handleError(t)}).finally(function(){e.loading=!1,e.doing_ajax=!1})))}},mounted:function(){this.fetchOptions("")}},function(){var t=this,e=t._self._c;return e("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{multiple:t.field.is_multiple,filterable:"",remote:!t.field.cacheable,clearable:t.field.clearable,disabled:t.field.disabled,"reserve-keyword":"",size:t.field.size,placeholder:t.field.placeholder||t.$t("Please enter a keyword"),"remote-method":t.fetchOptions},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.results,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)},[],!1,null,null,null).exports;var vi=i(3181),bi=i.n(vi),yi=i(5378),wi=i.n(yi),Ci=i(2037),$i=i.n(Ci);const ki=e({name:"DateDropDownPicker",props:["value"],data:function(){return{appReady:!1,dateParts:{day:"",month:"",year:""},months:[{label:this.$t("January"),value:"01"},{label:this.$t("February"),value:"02"},{label:this.$t("March"),value:"03"},{label:this.$t("April"),value:"04"},{label:this.$t("May"),value:"05"},{label:this.$t("June"),value:"06"},{label:this.$t("July"),value:"07"},{label:this.$t("August"),value:"08"},{label:this.$t("September"),value:"09"},{label:this.$t("October"),value:"10"},{label:this.$t("November"),value:"11"},{label:this.$t("December"),value:"12"}],days:[],years:[]}},watch:{dateParts:{handler:function(){this.appReady&&this.pushDate()},deep:!0}},methods:{initDateParts:function(){var t=this;if(this.value){var e=window.moment(this.value);this.dateParts.day=e.format("DD"),this.dateParts.month=e.format("MM"),this.dateParts.year=e.format("YYYY")}this.$nextTick(function(){t.appReady=!0})},range:bi(),pushDate:function(){var t=this.dateParts,e=t.day,i=t.month,n=t.year;if(e&&i&&n){var s=window.moment("".concat(n,"-").concat(i,"-").concat(e));if(!s.isValid())return void this.$emit("input","");this.$emit("input",s.format("YYYY-MM-DD"))}else this.$emit("input","")}},mounted:function(){this.days=wi()(bi()(1,32),function(t){return $i()(t,2,"0")}),this.years=bi()((new Date).getFullYear(),1899),this.initDateParts()}},function(){var t=this,e=t._self._c;return t.appReady?e("div",{staticClass:"fc_date_parts_picker"},[e("div",[e("el-select",{attrs:{clearable:"",placeholder:t.$t("Day")},model:{value:t.dateParts.day,callback:function(e){t.$set(t.dateParts,"day",e)},expression:"dateParts.day"}},t._l(t.days,function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})}),1),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.dateParts.day,expression:"dateParts.day"}]},[t._v(t._s(t.$t("Day")))])],1),t._v(" "),e("div",{staticClass:"fc_date_picker_month"},[e("el-select",{attrs:{clearable:"",placeholder:t.$t("Month")},model:{value:t.dateParts.month,callback:function(e){t.$set(t.dateParts,"month",e)},expression:"dateParts.month"}},t._l(t.months,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.dateParts.month,expression:"dateParts.month"}]},[t._v(t._s(t.$t("Month")))])],1),t._v(" "),e("div",[e("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("Year")},model:{value:t.dateParts.year,callback:function(e){t.$set(t.dateParts,"year",e)},expression:"dateParts.year"}},t._l(t.years,function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})}),1),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.dateParts.year,expression:"dateParts.year"}]},[t._v(t._s(t.$t("Year")))])],1)]):t._e()},[],!1,null,null,null).exports;const xi=e({name:"Form",components:{Error:oi,CustomFields:hi,CompanySelector:gi,OptionSelector:Ft,DateDropDownPicker:ki},props:{subscriber:{required:!0,type:Object},errors:{required:!0,type:Object},listId:{default:null},tagId:{default:null},company_id:{default:null}},data:function(){return{show_address:!1,show_custom_data:!1,countries:window.fcAdmin.countries,name_prefixes:window.fcAdmin.contact_prefixes,pickerOptions:{disabledDate:function(t){return t.getTime()>=Date.now()}},options:{statuses:this.appVars.available_contact_statuses,contact_types:this.appVars.available_contact_types,custom_fields:this.appVars.available_custom_fields}}}},function(){var t=this,e=t._self._c;return e("el-form",{attrs:{"label-position":"top","label-width":"100px"}},[e("h3",[t._v(t._s(t.$t("Basic Info")))]),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{lg:4,md:4,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Prefix")}},[e("el-select",{attrs:{placeholder:t.$t("Select")},model:{value:t.subscriber.prefix,callback:function(e){t.$set(t.subscriber,"prefix",e)},expression:"subscriber.prefix"}},t._l(t.name_prefixes,function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)],1),t._v(" "),e("el-col",{attrs:{lg:8,md:8,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("First Name")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.first_name,callback:function(e){t.$set(t.subscriber,"first_name",e)},expression:"subscriber.first_name"}}),t._v(" "),e("error",{attrs:{error:t.errors.get("first_name")}})],1)],1),t._v(" "),e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Last Name")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.last_name,callback:function(e){t.$set(t.subscriber,"last_name",e)},expression:"subscriber.last_name"}}),t._v(" "),e("error",{attrs:{error:t.errors.get("last_name")}})],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("el-form-item",{staticClass:"is-required",attrs:{label:t.$t("Email")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.email,callback:function(e){t.$set(t.subscriber,"email",e)},expression:"subscriber.email"}}),t._v(" "),e("error",{attrs:{error:t.errors.get("email")}})],1)],1),t._v(" "),e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Phone")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.phone,callback:function(e){t.$set(t.subscriber,"phone",e)},expression:"subscriber.phone"}})],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Date of Birth")}},[t._e(),t._v(" "),e("date-drop-down-picker",{model:{value:t.subscriber.date_of_birth,callback:function(e){t.$set(t.subscriber,"date_of_birth",e)},expression:"subscriber.date_of_birth"}})],1)],1),t._v(" "),t.has_company_module&&!t.company_id?e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Company / Business")}},[e("company-selector",{attrs:{field:{is_multiple:!1,creatable:!0}},model:{value:t.subscriber.company_id,callback:function(e){t.$set(t.subscriber,"company_id",e)},expression:"subscriber.company_id"}})],1)],1):t._e()],1),t._v(" "),e("el-form-item",[e("el-checkbox",{model:{value:t.show_address,callback:function(e){t.show_address=e},expression:"show_address"}},[t._v(t._s(t.$t("Add Address Info")))])],1),t._v(" "),t.show_address?[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12}},[e("el-form-item",{attrs:{label:t.$t("Address Line 1")}},[e("el-input",{attrs:{placeholder:t.$t("Address Line 1"),autocomplete:"new-password"},model:{value:t.subscriber.address_line_1,callback:function(e){t.$set(t.subscriber,"address_line_1",e)},expression:"subscriber.address_line_1"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12}},[e("el-form-item",{attrs:{label:t.$t("Address Line 2")}},[e("el-input",{attrs:{placeholder:t.$t("Address Line 2"),autocomplete:"new-password"},model:{value:t.subscriber.address_line_2,callback:function(e){t.$set(t.subscriber,"address_line_2",e)},expression:"subscriber.address_line_2"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12}},[e("el-form-item",{attrs:{label:t.$t("City")}},[e("el-input",{attrs:{placeholder:t.$t("City"),autocomplete:"new-password"},model:{value:t.subscriber.city,callback:function(e){t.$set(t.subscriber,"city",e)},expression:"subscriber.city"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12}},[e("el-form-item",{attrs:{label:t.$t("State")}},[e("el-input",{attrs:{placeholder:t.$t("State"),autocomplete:"new-password"},model:{value:t.subscriber.state,callback:function(e){t.$set(t.subscriber,"state",e)},expression:"subscriber.state"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12}},[e("el-form-item",{attrs:{label:t.$t("Postal Code")}},[e("el-input",{attrs:{placeholder:t.$t("Postal Code"),autocomplete:"new-password"},model:{value:t.subscriber.postal_code,callback:function(e){t.$set(t.subscriber,"postal_code",e)},expression:"subscriber.postal_code"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12}},[e("el-form-item",{attrs:{label:t.$t("Country")}},[e("el-select",{staticClass:"el-select-multiple",attrs:{clearable:"",filterable:"",autocomplete:"off",placeholder:t.$t("Select country")},model:{value:t.subscriber.country,callback:function(e){t.$set(t.subscriber,"country",e)},expression:"subscriber.country"}},t._l(t.countries,function(i){return e("el-option",{key:i.code,attrs:{value:i.code,label:i.title}},[t._v("\n                            "+t._s(i.title)+"\n                        ")])}),1)],1)],1)],1)]:t._e(),t._v(" "),t.options.custom_fields.length?e("el-form-item",[e("el-checkbox",{model:{value:t.show_custom_data,callback:function(e){t.show_custom_data=e},expression:"show_custom_data"}},[t._v(t._s(t.$t("Add Custom Data")))])],1):t._e(),t._v(" "),t.show_custom_data?[e("custom-fields",{attrs:{subscriber:t.subscriber,custom_fields:t.options.custom_fields}})]:t._e(),t._v(" "),e("h3",[t._v(t._s(t.$t("Identifiers")))]),t._v(" "),e("el-row",{attrs:{gutter:20}},[t.listId?t._e():e("el-col",{attrs:{md:8,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Lists")}},[e("option-selector",{attrs:{field:{placeholder:t.$t("Select lists"),is_multiple:!0,creatable:!0,option_key:"lists"}},model:{value:t.subscriber.lists,callback:function(e){t.$set(t.subscriber,"lists",e)},expression:"subscriber.lists"}})],1)],1),t._v(" "),t.tagId?t._e():e("el-col",{attrs:{md:8,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Tags")}},[e("option-selector",{attrs:{field:{placeholder:t.$t("Select Tags"),is_multiple:!0,creatable:!0,option_key:"tags"}},model:{value:t.subscriber.tags,callback:function(e){t.$set(t.subscriber,"tags",e)},expression:"subscriber.tags"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:8,sm:24}},[e("el-form-item",{staticClass:"is-required",attrs:{label:t.$t("Status")}},[e("el-select",{attrs:{placeholder:t.$t("Select")},model:{value:t.subscriber.status,callback:function(e){t.$set(t.subscriber,"status",e)},expression:"subscriber.status"}},t._l(t.options.statuses,function(i){return e("el-option",{key:i.id,attrs:{label:t._f("ucFirst")(i.title),value:i.id}})}),1),t._v(" "),e("error",{attrs:{error:t.errors.get("status")}})],1)],1)],1),t._v(" "),"pending"===t.subscriber.status?e("el-row",[e("el-col",[e("el-checkbox",{attrs:{label:t.$t("Enable Double-Optin Email Confirmation")},model:{value:t.subscriber.double_optin,callback:function(e){t.$set(t.subscriber,"double_optin",e)},expression:"subscriber.double_optin"}})],1)],1):t._e()],2)},[],!1,null,null,null).exports;var Si=e({name:"SkeletonLoading"},function(){var t=this,e=t._self._c;return e("el-skeleton",{staticStyle:{"margin-top":"50px"},attrs:{animated:""}},[e("template",{slot:"template"},[e("div",{staticStyle:{margin:"0 -10px",display:"block"}},[e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:4}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:8}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:12}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:12}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:12}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:4}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:4}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:4}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:12}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:24}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:24}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:8}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:8}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1),t._v(" "),e("el-col",{staticStyle:{padding:"0 10px","margin-bottom":"22px"},attrs:{span:8}},[e("el-skeleton-item",{staticStyle:{height:"40px"},attrs:{variant:"p"}})],1)],1)])],2)},[],!1,null,"31acd3e2",null);function Ai(t){return Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ai(t)}function Ei(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Ti(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Ai(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Ai(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ai(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const Pi=e({name:"ContactFormHandler",props:["listId","tagId","company_id"],components:{SkeletonLoading:Si.exports,Forma:xi},data:function(){return{exist:!1,errors:new ai,subscriber:this.fresh(),creating:!1}},methods:{fresh:function(){return{first_name:null,last_name:null,email:null,phone:"",date_of_birth:"",status:"subscribed",address_line_1:"",address_line_2:"",city:"",state:"",postal_code:"",country:"",tags:[],lists:[],custom_values:{},double_optin:!1}},save:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.errors.clear(),this.subscriber.email){var i=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ei(Object(i),!0).forEach(function(e){Ti(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ei(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},this.subscriber);this.listId&&(i.lists=[this.listId]),this.tagId&&(i.tags=[this.tagId]),this.company_id&&(i.company_id=this.company_id),this.creating=!0,this.$post("subscribers",i).then(function(i){t.$notify.success({title:t.$t("Great!"),message:i.message,offset:19}),t.$emit("created",i.contact,e)}).catch(function(e){t.errors.record(e),e.subscriber&&(t.exist=e.subscriber)}).finally(function(){t.creating=!1}),this.subscriber=this.fresh()}else this.$notify.error({message:this.$t("Email field is required"),offset:19})}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"contact_form_handler"},[t.creating?e("SkeletonLoading"):e("forma",{attrs:{"list-id":t.listId,"tag-id":t.tagId,errors:t.errors,subscriber:t.subscriber,company_id:t.company_id}}),t._v(" "),e("div",{staticClass:"fc_drawer_footer_wrap"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.save()}}},[t._v("\n            "+t._s(t.$t("Create Contact"))+"\n        ")]),t._v(" "),e("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.save(!0)}}},[t._v("\n            "+t._s(t.$t("Create & Add Another"))+"\n        ")])],1)],1)},[],!1,null,null,null).exports;const Oi=e({name:"Adder",components:{FormHandler:Pi},props:["visible","listId","tagId"],data:function(){return{showing:this.visible}},watch:{visible:function(t){this.showing=t}},methods:{handleCreated:function(t,e){!0===e?(this.showing=!0,this.$emit("fetch")):(this.showing=!1,this.$router.push({name:"subscriber",params:{id:t.id}}),this.$emit("close"))}}},function(){var t=this,e=t._self._c;return e("el-drawer",{staticClass:"fc_company_info_drawer",attrs:{"with-header":!0,size:t.globalDrawerSize,title:t.$t("Add New Contact"),"append-to-body":!0,visible:t.showing},on:{"update:visible":function(e){t.showing=e}}},[e("div",{staticStyle:{padding:"0 20px"}},[e("form-handler",{attrs:{listId:t.listId,tagId:t.tagId},on:{created:t.handleCreated}})],1)])},[],!1,null,null,null).exports;const Di=e({name:"ImportSourceSelector",props:["value"],data:function(){return{loading:!1,option:this.value,import_sources:!1}},computed:{buttonDisabled:function(){return!(this.value&&this.import_sources&&this.import_sources[this.value]&&!this.import_sources[this.value].disabled)},disabledText:function(){return this.value&&this.import_sources&&this.import_sources[this.value]&&this.import_sources[this.value].disabled?this.import_sources[this.value].disabled_message:""}},watch:{option:function(){return this.$emit("input",this.option)}},methods:{next:function(){this.$emit("next")},getSources:function(){var t=this;this.loading=!0,this.$get("import/drivers").then(function(e){t.import_sources=e.drivers}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})}},mounted:function(){this.getSources()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("h4",[t._v("\n        "+t._s(t.$t("SourceSelector.title"))+"\n    ")]),t._v(" "),t.import_sources?[e("el-radio-group",{staticClass:"sources fc_inline_image_radio",model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},t._l(t.import_sources,function(i,n){return e("el-radio",{key:n,staticClass:"option",attrs:{label:n}},[e("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:i.logo}}),t._v(" "),e("span",{staticClass:"fc_text_label"},[t._v(t._s(i.label))]),t._v(" "),i.disabled?e("span",{staticClass:"fc_import_pro"},[t._v(t._s(t.$t("Pro")))]):t._e()])}),1),t._v(" "),e("router-link",{staticStyle:{display:"inline-block","margin-top":"20px"},attrs:{to:{name:"crm_migrations"}}},[e("div",{staticClass:"fc_inline_image_radio"},[e("label",[e("img",{staticStyle:{"max-height":"64px"},attrs:{src:t.appVars.images_url+"/migrators/crm_importers.png"}}),t._v(" "),e("span",{staticClass:"fc_text_label"},[t._v(t._s(t.$t("Import From Other Providers")))])])])])]:t._e(),t._v(" "),t.disabledText&&t.buttonDisabled?e("div",{staticClass:"fc_narrow_box fluentcrm_databox text-align-center"},[e("p",{domProps:{innerHTML:t._s(t.disabledText)}}),t._v(" "),e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Get FluentCRM Pro")))])]):t._e(),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{disabled:t.buttonDisabled,size:"small",type:"primary"},on:{click:t.next}},[t._v("\n            "+t._s(t.$t("Next"))+"\n        ")])],1)],2)},[],!1,null,null,null).exports;const Fi={name:"Csv",components:{Error:oi},props:["options"],data:function(){return{errors:new ai,delimiter_options:{comma:this.$t("Comma Separated (,)"),semicolon:this.$t("Semicolon Separated (;)")}}},computed:{url:function(){return-1!=window.FLUENTCRM.appVars.rest.url.indexOf("?")?window.FLUENTCRM.appVars.rest.url+"/import/csv-upload&_wpnonce="+window.FLUENTCRM.appVars.rest.nonce+"&delimiter="+this.options.delimiter+"&type="+this.options.type:window.FLUENTCRM.appVars.rest.url+"/import/csv-upload?_wpnonce="+window.FLUENTCRM.appVars.rest.nonce+"&delimiter="+this.options.delimiter+"&type="+this.options.type}},methods:{success:function(t){this.errors.clear(),t.map||(t.map=t.headers.map(function(t){return{csv:t,table:null}})),this.$emit("success",t)},remove:function(){this.errors.clear()},exceed:function(){this.errors.record({file:{exceed:this.$t("You cannot upload more than one file.")}})},error:function(t){var e=JSON.parse(t.message);this.handleError(e),this.errors.record({file:{invalid:e.message||this.$t("unknown error. Please check your csv first")}})},sample:function(){location.href=this.options.sampleCsv},clear:function(){this.$refs.uploader.clearFiles()},next:function(){this.$notify.error(this.$t("Please Upload a CSV first"))}}};var ji=i(4060),Ii={insert:"head",singleton:!1};a()(ji.A,Ii);ji.A.locals;const Li=e(Fi,function(){var t=this,e=t._self._c;return e("div",{staticClass:"csv-uploader"},[e("div",{staticClass:"csv_upload_container",staticStyle:{"min-height":"300px"}},[e("label",{staticStyle:{margin:"10px 0px",display:"block"}},[t._v(t._s(t.$t("Select Your CSV Delimiter")))]),t._v(" "),e("el-select",{model:{value:t.options.delimiter,callback:function(e){t.$set(t.options,"delimiter",e)},expression:"options.delimiter"}},t._l(t.delimiter_options,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t}})}),1),t._v(" "),t.options.delimiter?[e("h3",[t._v(t._s(t.$t("Upload CSV")))]),t._v(" "),e("el-upload",{ref:"uploader",class:{"is-error":t.errors.has("file")},attrs:{drag:"",limit:1,action:t.url,multiple:!1,"on-error":t.error,"on-remove":t.remove,"on-exceed":t.exceed,"on-success":t.success}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n                    "+t._s(t.$t("Drop file here or"))+" "),e("em",[t._v(t._s(t.$t("click to upload")))])])]),t._v(" "),e("error",{attrs:{error:t.errors.get("file")}}),t._v(" "),e("div",{staticClass:"sample"},[e("a",{on:{click:t.sample}},[t._v(t._s(t.$t("Download sample file")))])]),t._v(" "),e("p",[t._v(t._s(t.$t("csv.download_desc")))])]:t._e()],2),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.next}},[t._v("\n            "+t._s(t.$t("Next [Map Columns]"))+"\n        ")])],1)])},[],!1,null,null,null).exports;function Ni(t){return Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ni(t)}function qi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Mi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?qi(Object(i),!0).forEach(function(e){zi(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qi(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function zi(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Ni(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Ni(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ni(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ri=e({name:"ReviewConfigurator",components:{OptionSelector:Ft},props:["config","import_info","driver","labels"],data:function(){return{general_config:{tags:[],lists:[],update:!0,new_status:"",import_silently:"yes",double_optin_email:"no"},importing:!1,importing_page:1,import_page_total:0,done:!1,done_message:this.$t("Import has been completed, You may close this modal now")}},methods:{importData:function(){var t=this;this.importing=!0,this.$post("import/drivers/"+this.driver,{config:Mi(Mi({},this.config),this.general_config),importing_page:this.importing_page}).then(function(e){e.has_more?(t.import_page_total=e.page_total,e.next_page?t.importing_page=e.next_page:t.importing_page=t.importing_page+1,t.$nextTick(function(){t.importData()})):(t.done=!0,e.message&&(t.done_message=e.message,t.$notify.success(e.message)),t.$emit("fetch"))}).catch(function(e){t.handleError(e)}).finally(function(){})}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_review_configurator"},[t.done?e("div",[e("h3",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.done_message))])]):[t.importing?e("div",{staticClass:"text-align-center"},[e("h3",[t._v(t._s(t.$t("Importing now...")))]),t._v(" "),e("h4",[t._v(t._s(t.$t("Use_Please_dnctm")))]),t._v(" "),t.import_page_total?[t.import_page_total?e("h2",[t._v(t._s(t.importing_page)+"/"+t._s(t.import_page_total))]):t._e(),t._v(" "),e("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.importing_page/t.import_page_total*100),status:"success"}})]:t._e()],2):e("el-form",{staticClass:"manager",attrs:{"label-position":"top"}},[t.import_info.subscribers?[e("el-form-item",{attrs:{label:t.$t("Use_Some_otumyc")}}),t._v(" "),e("el-table",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{border:"",stripe:"",data:t.import_info.subscribers}},[e("el-table-column",{attrs:{prop:"name",label:t.$t("Name")}}),t._v(" "),e("el-table-column",{attrs:{prop:"email",label:t.$t("Email")}})],1),t._v(" "),t.import_info.total?e("p",[t._v(t._s(t.$t("Total Found Result:"))+" "+t._s(t.import_info.total))]):t._e()]:t._e(),t._v(" "),e("el-row",{attrs:{gutter:20}},[t.import_info.has_list_config?e("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[e("el-form-item",{attrs:{label:t.$t("Apply Lists")}},[e("option-selector",{attrs:{field:{is_multiple:!0,creatable:!0,option_key:"lists"}},model:{value:t.general_config.lists,callback:function(e){t.$set(t.general_config,"lists",e)},expression:"general_config.lists"}})],1)],1):t._e(),t._v(" "),t.import_info.has_tag_config?e("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[e("el-form-item",{attrs:{label:t.$t("Apply Tags")}},[e("option-selector",{attrs:{field:{is_multiple:!0,creatable:!0,option_key:"tags"}},model:{value:t.general_config.tags,callback:function(e){t.$set(t.general_config,"tags",e)},expression:"general_config.tags"}})],1)],1):t._e()],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[t.import_info.has_update_config?e("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[e("el-form-item",{staticClass:"no-margin-bottom"},[e("template",{slot:"label"},[t._v("\n                            "+t._s(t.$t("Update Subscribers"))+"\n                            "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("h3",[t._v(t._s(t.$t("Update Subscribers")))]),t._v(" "),e("p",[t._v("\n                                        "+t._s(t.$t("update_subscribers_data_notice"))+"\n                                    ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("el-radio-group",{model:{value:t.general_config.update,callback:function(e){t.$set(t.general_config,"update",e)},expression:"general_config.update"}},[e("el-radio",{attrs:{label:!0}},[t._v(t._s(t.$t("Yes")))]),t._v(" "),e("el-radio",{attrs:{label:!1}},[t._v(t._s(t.$t("No")))])],1)],2)],1):t._e(),t._v(" "),t.import_info.has_status_config?e("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[e("el-form-item",{staticClass:"no-margin-bottom"},[e("template",{slot:"label"},[t._v("\n                            "+t._s(t.$t("New Subscriber Status"))+"\n                            "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n                                    "+t._s(t.$t("New Subscriber Status"))+"\n\n                                    "),e("p",[t._v("\n                                        "+t._s(t.$t("Map_Status_ftns"))+"\n                                    ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("option-selector",{attrs:{field:{is_multiple:!1,option_key:"editable_statuses"}},model:{value:t.general_config.status,callback:function(e){t.$set(t.general_config,"status",e)},expression:"general_config.status"}}),t._v(" "),"pending"==t.general_config.status?e("el-checkbox",{attrs:{"true-label":"yes"},model:{value:t.general_config.double_optin_email,callback:function(e){t.$set(t.general_config,"double_optin_email",e)},expression:"general_config.double_optin_email"}},[t._v("\n                            "+t._s(t.$t("Send Double Optin Email for new contacts"))+"\n                        ")]):t._e()],2)],1):t._e()],1),t._v(" "),t.import_info.has_silent_config?e("el-checkbox",{staticStyle:{"margin-top":"20px"},attrs:{"true-label":"yes","false-label":"no"},model:{value:t.general_config.import_silently,callback:function(e){t.$set(t.general_config,"import_silently",e)},expression:"general_config.import_silently"}},[t._v("\n                "+t._s(t.$t("Do Not Trigger Automations (Tag & List related Events)"))+"\n            ")]):t._e(),t._v(" "),"yes"==t.general_config.import_silently?e("p",[t._v("\n                "+t._s(t.$t("Uncheck this if you want to trigger automation events"))+"\n            ")]):t._e()],2),t._v(" "),t.importing?t._e():e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.importData()}}},[t.labels.step_3?e("span",[t._v(t._s(t.labels.step_3))]):e("span",[t._v(t._s(t.$t("Import Now")))])])],1)]],2)},[],!1,null,null,null);var Bi=e({name:"ImportConfiguration",props:["option","options"],components:{FormBuilder:Gt,ReviewConfigurator:Ri.exports},data:function(){return{fields:{},config:!1,labels:{},loading:!1,step:"config",import_info:!1,general_settings:{tags:[],lists:[],status:"",update_if_exist:"no",disable_triggers:"no"}}},methods:{fetchDriver:function(){var t=this;this.loading=!0,this.$get("import/drivers/"+this.option).then(function(e){t.fields=e.fields,t.config=e.config,t.labels=e.labels}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},validateConfig:function(){var t=this;this.loading=!0,this.$get("import/drivers/"+this.option,{config:this.config,summary:"yes"}).then(function(e){t.import_info=e.import_info,t.step="general_config"}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},emitFetch:function(){this.$emit("fetch")}},mounted:function(){this.fetchDriver()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fc_import_configuration",staticStyle:{"min-height":"300px"}},["config"==t.step?[t.config?e("div",{staticClass:"fc_importer_form"},[e("form-builder",{attrs:{formData:t.config,fields:t.fields}})],1):t._e(),t._v(" "),t.config?e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.validateConfig()}}},[t._v("\n                "+t._s(t.labels.step_2||t.$t("Next"))+"\n            ")])],1):t._e()]:"general_config"==t.step?[e("review-configurator",{attrs:{labels:t.labels,config:t.config,import_info:t.import_info,driver:t.option},on:{fetch:function(e){return t.emitFetch()}}})]:t._e()],2)},[],!1,null,null,null);function Vi(t){return Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vi(t)}function Ui(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Hi(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Vi(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vi(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const Gi=e({name:"ImportSourceConfiguration",components:{Csv:Li,ImportConfiguration:Bi.exports},props:{option:{required:!0},options:Object},computed:{isCsv:function(){return"csv"===this.option}},methods:{success:function(t){var e;e=this.isCsv?function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ui(Object(i),!0).forEach(function(e){Hi(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ui(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({type:"csv"},t):{type:"users",roles:t},this.$emit("success",e)},next:function(){this.$emit("next")},emitFetch:function(){this.$emit("fetch")}}},function(){var t=this,e=t._self._c;return t.isCsv?e("div",[e("csv",{attrs:{options:t.options},on:{success:t.success}})],1):e("div",[e("import-configuration",{attrs:{option:t.option,options:t.options},on:{fetch:function(e){return t.emitFetch()}}})],1)},[],!1,null,null,null).exports;const Wi=e({name:"TagListSelect",props:{label:{required:!0},placeholder:{default:function(){return"Select "+this.label}},option:{required:!0,type:Array},value:{type:Array}},data:function(){return{model:this.value}},watch:{model:function(){return this.$emit("input",this.model)}}},function(){var t=this,e=t._self._c;return e("el-form-item",{attrs:{label:t.label}},[e("el-select",{staticClass:"el-select-multiple",attrs:{multiple:"",clearable:"",placeholder:t.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.option,function(i){return e("el-option",{key:i.id,attrs:{value:i.id,label:i.title}},[t._v("\n            "+t._s(i.title)+"\n        ")])}),1)],1)},[],!1,null,null,null).exports;function Ki(t){return Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ki(t)}function Ji(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Yi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ji(Object(i),!0).forEach(function(e){Qi(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ji(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Qi(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Ki(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Ki(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ki(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const Zi=e({name:"Mapper",components:{TlSelect:Wi},props:["map","headers","columns","options","csv","listId","tagId"],data:function(){return{form:{map:this.map,tags:[],lists:[],update:!1,new_status:"",custom_values:{},delimiter:this.options.delimiter,import_silently:"no"},importing_page:1,total_page:1,importing:!1,import_status:{},skipped:0,invalid_email_counts:0,inserted:0,updated:0,errors:"",skipped_contacts:[],invalid_contacts:[],showing_contacts:""}},computed:{completed_percent:function(){return this.import_status.total?parseInt(this.import_status.completed/this.import_status.total*100):0}},watch:{map:function(){this.form.map=this.map}},beforeMount:function(){if(this.columns.lists="Lists",this.columns.tags="Tags",this.headers.includes("Lists")){var t=this.map.find(function(t){return"Lists"===t.csv});t&&(t.table="lists")}if(this.headers.includes("Tags")){var e=this.map.find(function(t){return"Tags"===t.csv});e&&(e.table="tags")}},methods:{save:function(){var t=this;this.form.map.filter(function(t){return t.table}).length?(this.listId&&this.form.lists.push(this.listId),this.tagId&&this.form.tags.push(this.tagId),this.importing=!0,this.$post("import/csv-import",Yi(Yi({},this.form),{},{file:this.csv,importing_page:this.importing_page})).then(function(e){if(!e||"object"!=Ki(e)||!e.total)return t.errors=e,!1;t.import_status=e,t.skipped+=e.skipped,t.invalid_email_counts+=e.invalid_email_counts,t.inserted+=e.inserted,t.updated+=e.updated,e.invalid_contacts&&e.invalid_contacts.length&&t.invalid_contacts.push(e.invalid_contacts),e.skipped_contacts&&e.skipped_contacts.length&&t.skipped_contacts.push(e.skipped_contacts),e.has_more?(t.importing_page++,t.save()):(t.$notify({title:t.$t("Success"),type:"success",offset:20,message:t.$t("Map_Subscribers_is")}),t.$emit("fetch"))}).catch(function(e){t.errors=e;var i=Object.keys(e.data);t.$notify({title:t.$t("Error"),type:"error",offset:20,message:e.data[i[0]]}),t.importing=!1}).finally(function(){})):this.$notify({title:this.$t("Warning"),type:"warning",offset:20,message:this.$t("No mapping found.")})}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"dc_csv_mapper"},[t.importing?e("div",{staticClass:"importing_stats"},[!t.import_status.total||t.import_status.has_more?e("div",{staticClass:"text-align-center"},[e("h4",[t._v(t._s(t.$t("Map_Importing_CfyCPD")))]),t._v(" "),e("el-progress",{attrs:{"text-inside":!0,"stroke-width":40,percentage:t.completed_percent,status:"success"}}),t._v(" "),e("h3",[t._v(t._s(t.import_status.completed)+" / "+t._s(t.import_status.total))])],1):t._e(),t._v(" "),t.import_status.total&&!t.import_status.has_more?e("div",[e("h2",[t._v(t._s(t.$t("Map_Completed_Ycctmn")))])]):t._e(),t._v(" "),e("div",{staticClass:"wfc_well"},[e("ul",[e("li",[t._v(t._s(t.$t("Total Inserted:"))+" "+t._s(t.inserted))]),t._v(" "),e("li",[t._v(t._s(t.$t("Total Updated:"))+" "+t._s(t.updated))]),t._v(" "),e("li",[t._v(t._s(t.$t("Invalid Emails:"))+" "+t._s(t.invalid_email_counts))]),t._v(" "),e("li",[t._v(t._s(t.$t("Map_Total_S_I"))+" "+t._s(t.skipped))])])]),t._v(" "),t.errors?e("div",[e("h3",[t._v("Errors")]),t._v(" "),e("pre",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(t.errors))])]):t._e(),t._v(" "),t.invalid_contacts.length||t.skipped_contacts.length?e("div",{staticClass:"fc_log_wrapper",staticStyle:{"margin-top":"20px"}},[e("el-button-group",[t.invalid_contacts.length?e("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){t.showing_contacts="invalid_contacts"}}},[t._v("\n                    "+t._s(t.$t("Show Invalid Contacts"))+"\n                ")]):t._e(),t._v(" "),t.skipped_contacts.length?e("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){t.showing_contacts="skipped_contacts"}}},[t._v("\n                    "+t._s(t.$t("Show Skipped Contacts"))+"\n                ")]):t._e(),t._v(" "),t.errors?e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){t.showing_contacts="errors"}}},[t._v("\n                    "+t._s(t.$t("Show Errors"))+"\n                ")]):t._e()],1),t._v(" "),"invalid_contacts"==t.showing_contacts?e("div",[e("h3",[t._v(t._s(t.$t("Contacts that are invalid")))]),t._v(" "),e("pre",[t._v(t._s(t.invalid_contacts))]),t._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.showing_contacts=""}}},[t._v(t._s(t.$t("Close Log")))])],1):"skipped_contacts"==t.showing_contacts?e("div",[e("h3",[t._v(t._s(t.$t("Map_Contacts_tad")))]),t._v(" "),e("pre",[t._v(t._s(t.skipped_contacts))]),t._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.showing_contacts=""}}},[t._v(t._s(t.$t("Close Log")))])],1):"errors"==t.showing_contacts?e("div",{staticClass:"errors"},[e("p",[t._v(t._s(t.$t("Errors")))]),t._v(" "),e("pre",[t._v(t._s(t.errors))]),t._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.showing_contacts=""}}},[t._v(t._s(t.$t("Close Log")))])],1):t._e()],1):t._e()]):e("el-form",{attrs:{"label-width":"100px","label-position":"top"}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                "+t._s(t.$t("Mapper.title"))+"\n                "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",[t._v("\n                            "+t._s(t.$t("Mapper.title_desc"))+"\n                        ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1)],2),t._v(" "),e("el-form-item",[e("table",{staticClass:"fc_horizontal_table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("CSV Headers")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Subscriber Fields")))])])]),t._v(" "),e("tbody",t._l(t.headers,function(i,n){return e("tr",{key:n},[e("td",[e("el-input",{attrs:{value:i,disabled:""}})],1),t._v(" "),e("td",[e("el-select",{attrs:{clearable:""},model:{value:t.form.map[n].table,callback:function(e){t.$set(t.form.map[n],"table",e)},expression:"form.map[index].table"}},[e("el-option-group",{attrs:{label:t.$t("Main Contact Properties")}},t._l(t.columns,function(i,n){return e("el-option",{key:n,attrs:{label:i,value:n}},[t._v("\n                                    "+t._s(i)+"\n                                ")])}),1),t._v(" "),e("el-option-group",{attrs:{label:t.$t("Custom Contact Properties")}},t._l(t.options.custom_fields,function(i){return e("el-option",{key:i.slug,attrs:{label:i.label,value:i.slug}},[t._v("\n                                    "+t._s(i.label)+"\n                                ")])}),1)],1)],1)])}),0)])]),t._v(" "),e("el-row",{attrs:{gutter:20}},[t.listId?t._e():e("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[e("tl-select",{attrs:{label:t.$t("Lists"),option:t.options.lists},model:{value:t.form.lists,callback:function(e){t.$set(t.form,"lists",e)},expression:"form.lists"}})],1),t._v(" "),e("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[e("tl-select",{attrs:{label:t.$t("Tags"),option:t.options.tags},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[e("el-form-item",{staticClass:"no-margin-bottom"},[e("template",{slot:"label"},[t._v("\n                        "+t._s(t.$t("Update Subscribers"))+"\n                        "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("h3",[t._v(t._s(t.$t("Update Subscribers")))]),t._v(" "),e("p",[t._v("\n                                    "+t._s(t.$t("update_subscribers_data_notice"))+"\n                                ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("el-radio-group",{model:{value:t.form.update,callback:function(e){t.$set(t.form,"update",e)},expression:"form.update"}},[e("el-radio",{attrs:{label:!0}},[t._v(t._s(t.$t("Yes")))]),t._v(" "),e("el-radio",{attrs:{label:!1}},[t._v(t._s(t.$t("No")))])],1)],2)],1),t._v(" "),e("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[e("el-form-item",{staticClass:"no-margin-bottom"},[e("template",{slot:"label"},[t._v("\n                        "+t._s(t.$t("New Subscriber Status"))+"\n                        "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n                                "+t._s(t.$t("New Subscriber Status"))+"\n                                "),e("p",[t._v("\n                                    "+t._s(t.$t("Map_Status_ftns"))+"\n                                ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("el-select",{attrs:{placeholder:t.$t("Status")},model:{value:t.form.new_status,callback:function(e){t.$set(t.form,"new_status",e)},expression:"form.new_status"}},t._l(t.options.statuses,function(t){return e("el-option",{key:t.slug,attrs:{label:t.title,value:t.slug}})}),1),t._v(" "),"pending"==t.form.new_status?e("el-checkbox",{attrs:{"true-label":"yes"},model:{value:t.form.double_optin_email,callback:function(e){t.$set(t.form,"double_optin_email",e)},expression:"form.double_optin_email"}},[t._v(t._s(t.$t("Send Double Optin Email for new contacts")))]):t._e()],2)],1)],1),t._v(" "),e("el-checkbox",{staticStyle:{"margin-top":"20px"},attrs:{"true-label":"yes","false-label":"no"},model:{value:t.form.import_silently,callback:function(e){t.$set(t.form,"import_silently",e)},expression:"form.import_silently"}},[t._v("\n            "+t._s(t.$t("Do Not Trigger Automations (Tag & List related Events)"))+"\n        ")]),t._v(" "),t.form.update?e("el-checkbox",{staticStyle:{"margin-top":"20px"},attrs:{"true-label":"yes"},model:{value:t.form.force_update_status,callback:function(e){t.$set(t.form,"force_update_status",e)},expression:"form.force_update_status"}},[t._v("\n            "+t._s(t.$t("force_update_contact_status"))+"\n        ")]):t._e()],1),t._v(" "),t.importing?t._e():e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("\n            "+t._s(t.$t("Confirm Import"))+"\n        ")])],1)],1)},[],!1,null,null,null).exports;function Xi(t){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(t)}function tn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function en(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(i),!0).forEach(function(e){nn(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tn(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function nn(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Xi(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Xi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xi(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var sn=e({name:"UserImportManager",components:{TlSelect:Wi},props:["roles","options","listId","tagId"],data:function(){return{users:[],form:{tags:[],lists:[],update:!1,new_status:"",import_silently:"no"},import_page:1,importing:!1,import_page_total:1,total_count:0}},watch:{roles:function(){this.fetch()}},methods:{fetch:function(){var t=this;this.$get("users",{roles:this.roles}).then(function(e){t.users=e.users,t.total_count=e.total})},save:function(){var t=this;this.importing=!0;for(var e={},i=0,n=this.roles.length;i<n;i++){var s=this.roles[i];e[s]=s}this.listId&&this.form.lists.push(this.listId),this.tagId&&this.form.tags.push(this.tagId),this.$post("import/users",en(en({},this.form),{},{roles:e,page:this.import_page})).then(function(e){e.has_more?(t.import_page=e.next_page,t.import_page_total=e.page_total,t.$nextTick(function(){t.save()})):(t.$notify.success(e.record_total+" users have been successfully imported as CRM contacts"),t.$emit("fetch"),t.$emit("close"),e.reload_page&&setTimeout(function(){window.location.reload(!0)},500))}).catch(function(t){console.log(t)})},listeners:function(){var t=this;this.addAction("import","fluentcrm",function(e){"users"===e&&t.save()})}},mounted:function(){this.fetch(),this.listeners()}},function(){var t=this,e=t._self._c;return e("div",[t.importing?e("div",{staticClass:"text-align-center"},[e("h3",[t._v(t._s(t.$t("Importing now...")))]),t._v(" "),e("h4",[t._v(t._s(t.$t("Use_Please_dnctm")))]),t._v(" "),t.import_page_total?e("h2",[t._v(t._s(t.import_page)+"/"+t._s(t.import_page_total))]):t._e(),t._v(" "),e("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.import_page/t.import_page_total*100),status:"success"}})],1):e("el-form",{staticClass:"manager",attrs:{"label-position":"top"}},[e("el-form-item",{attrs:{label:t.$t("Use_Some_otumyc")}}),t._v(" "),e("el-table",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{border:"",stripe:"",data:t.users}},[e("el-table-column",{attrs:{prop:"display_name",label:t.$t("Name")}}),t._v(" "),e("el-table-column",{attrs:{prop:"user_email",label:t.$t("Email")}})],1),t._v(" "),t.total_count?e("p",[t._v(t._s(t.$t("Total Found Result:"))+" "+t._s(t.total_count))]):t._e(),t._v(" "),e("el-row",{attrs:{gutter:20}},[t.listId?t._e():e("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[e("tl-select",{attrs:{label:t.$t("Lists"),option:t.options.lists},model:{value:t.form.lists,callback:function(e){t.$set(t.form,"lists",e)},expression:"form.lists"}})],1),t._v(" "),e("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[e("tl-select",{attrs:{label:t.$t("Tags"),option:t.options.tags},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[e("el-form-item",{staticClass:"no-margin-bottom"},[e("template",{slot:"label"},[t._v("\n                        "+t._s(t.$t("Update Subscribers"))+"\n                        "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("h3",[t._v(t._s(t.$t("Update Subscribers")))]),t._v(" "),e("p",[t._v("\n                                    "+t._s(t.$t("update_subscribers_data_notice"))+"\n                                ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("el-radio-group",{model:{value:t.form.update,callback:function(e){t.$set(t.form,"update",e)},expression:"form.update"}},[e("el-radio",{attrs:{label:!0}},[t._v(t._s(t.$t("Yes")))]),t._v(" "),e("el-radio",{attrs:{label:!1}},[t._v(t._s(t.$t("No")))])],1)],2)],1),t._v(" "),e("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[e("el-form-item",{staticClass:"no-margin-bottom"},[e("template",{slot:"label"},[t._v("\n                        "+t._s(t.$t("New Subscriber Status"))+"\n                        "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n                                "+t._s(t.$t("New Subscriber Status"))+"\n\n                                "),e("p",[t._v("\n                                    "+t._s(t.$t("Map_Status_ftns"))+"\n                                ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("el-select",{model:{value:t.form.new_status,callback:function(e){t.$set(t.form,"new_status",e)},expression:"form.new_status"}},t._l(t.options.statuses,function(t){return e("el-option",{key:t.slug,attrs:{value:t.slug,label:t.title}})}),1),t._v(" "),"pending"==t.form.new_status?e("el-checkbox",{attrs:{"true-label":"yes"},model:{value:t.form.double_optin_email,callback:function(e){t.$set(t.form,"double_optin_email",e)},expression:"form.double_optin_email"}},[t._v(t._s(t.$t("Send Double Optin Email for new contacts")))]):t._e()],2)],1)],1),t._v(" "),e("el-checkbox",{staticStyle:{"margin-top":"20px"},attrs:{"true-label":"yes","false-label":"no"},model:{value:t.form.import_silently,callback:function(e){t.$set(t.form,"import_silently",e)},expression:"form.import_silently"}},[t._v("\n            "+t._s(t.$t("Do Not Trigger Automations (Tag & List related Events)"))+"\n        ")])],1),t._v(" "),t.importing?t._e():e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("\n            "+t._s(t.$t("Import Users Now"))+"\n        ")])],1)],1)},[],!1,null,null,null);var an=e({name:"ImportReviewer",components:{Mapper:Zi,Manager:sn.exports},props:{csv:{},map:{type:Array},headers:{type:Array},columns:{type:Object},roles:{type:Array},options:Object,option:String,listId:{default:null},tagId:{default:null}},data:function(){return{}},computed:{isCsv:function(){return"csv"===this.option}},methods:{fetch:function(){this.$emit("fetch")},close:function(){this.$emit("close")}}},function(){var t=this,e=t._self._c;return t.isCsv?e("mapper",{attrs:{csv:t.csv,map:t.map,"list-id":t.listId,"tag-id":t.tagId,headers:t.headers,columns:t.columns,options:t.options},on:{fetch:t.fetch,close:t.close}}):e("manager",{attrs:{roles:t.roles,"list-id":t.listId,"tag-id":t.tagId,options:t.options},on:{fetch:t.fetch,close:t.close}})},[],!1,null,null,null);const on=e({name:"Importer",components:{SourceSelector:Di,SourceConfiguration:Gi,ReviewAndImport:an.exports},props:["visible","options","listId","tagId"],data:function(){return{map:[],tags:[],active:0,csv:null,lists:[],roles:[],headers:[],columns:{},statuses:[],option:"csv",countries:[],store:!1,button_loading:!1}},methods:{hide:function(){this.reset(),this.$emit("close"),this.doAction("cancel","importer")},next:function(){this.active++>2&&(this.active=0)},stop:function(){return 1===this.active&&("csv"===this.option?!this.csv:!this.roles.length)},prev:function(){0!==this.active&&this.active--},success:function(t){"csv"===t.type?(this.map=t.map,this.csv=t.file,this.headers=t.headers,this.columns=t.fields,this.next()):this.roles=t.roles},confirm:function(){this.doAction("import",this.option)},fetch:function(){this.$emit("fetch")},close:function(){this.hide(),this.reset()},reset:function(){this.active=0,this.removeAllActions("import")}}},function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"fluentcrm-importer",attrs:{title:t.$t("Import Subscribers"),visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,width:"900px"},on:{close:function(e){return t.hide()}}},[t.visible?e("div",[0===t.active?[e("SourceSelector",{staticClass:"step",on:{fetch:function(e){return t.fetch()},next:function(e){return t.next()}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}})]:1===t.active?[e("source-configuration",{staticClass:"step",attrs:{option:t.option,options:t.options},on:{next:function(e){return t.next()},fetch:function(e){return t.fetch()},success:t.success}})]:2===t.active?[e("review-and-import",{staticClass:"step",attrs:{csv:t.csv,map:t.map,roles:t.roles,option:t.option,headers:t.headers,columns:t.columns,options:t.options,"list-id":t.listId,"tag-id":t.tagId},on:{close:t.close,fetch:t.fetch}})]:t._e()],2):t._e()])},[],!1,null,null,null).exports;function rn(t){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rn(t)}function ln(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function cn(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ln(Object(i),!0).forEach(function(e){un(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ln(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function un(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=rn(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=rn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function dn(t){return function(t){if(Array.isArray(t))return _n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return _n(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}var pn=["first_name","last_name","email"],mn=["id","first_name","last_name","email","prefix","user_id","status","ip"],fn=["total_order_value","total_order_count","first_order_date","last_order_date"];var hn=e({name:"ExportSubscriber",props:["visible","search_query"],components:{GenericPromo:Te},data:function(){return{columns:[].concat(pn),available_columns:Z,custom_fields:[],commerce_columns:[],limit:"",offset:"",exporting:!1,check_all:!1,progressPercentage:0,csvFileDownloading:!1}},methods:{handleAllCheck:function(){this.check_all?(this.selectAllColumns(),this.appVars.contact_custom_fields.length&&this.selectAllCustomFields(),this.appVars.commerce_provider&&(this.commerce_columns=[].concat(fn))):this.resetSelections()},selectAllColumns:function(){this.columns=[].concat(mn,dn(this.available_columns.map(function(t){return t.value})))},selectAllCustomFields:function(){this.custom_fields=this.appVars.contact_custom_fields.map(function(t){return t.slug})},resetSelections:function(){this.columns=[].concat(pn),this.custom_fields=[],this.commerce_columns=[]},hide:function(){this.$emit("close")},exportContacts:function(){var t=cn(cn({action:"fluentcrm_export_contacts"},this.search_query),{},{columns:this.columns,custom_fields:this.custom_fields,commerce_columns:this.commerce_columns,limit:this.limit,offset:this.offset,format:"csv"});this.csvFileDownloading=!0,jQuery.ajax({url:window.ajaxurl,method:"POST",data:t,success:function(t){t.success&&(this.progressPercentage=0,this.pollExportStatus())}.bind(this),error:function(t,e,i){this.csvFileDownloading=!1,this.progressPercentage=0,console.error("Error during export:",e,i)}.bind(this)})},pollExportStatus:function(){jQuery.ajax({url:window.ajaxurl,method:"POST",data:{action:"fluentcrm_contacts_csv_export_status"},success:function(t){var e=this;if(t.success&&"succeed"===t.data.status)this.downloadFile();else if(t.success&&t.data.status.startsWith("preparing")){var i=t.data.progress,n=t.data.total,s=Math.round(i/n*100);isNaN(s)&&(s=0),this.progressPercentage=s,setTimeout(function(){return e.pollExportStatus()},5e3)}else this.csvFileDownloading=!1,this.progressPercentage=0,console.error("Unexpected response:",t)}.bind(this),error:function(t,e,i){this.csvFileDownloading=!1,this.progressPercentage=0,console.error("Error during status check:",e,i)}.bind(this)})},downloadFile:function(){jQuery.ajax({url:window.ajaxurl,method:"POST",data:{action:"fluentcrm_contacts_export_csv_file_download"},success:function(t,e,i){var n=this;if(t.success&&"preparing"===t.data.status)setTimeout(function(){return n.downloadFile()},5e3);else{var s=i.getResponseHeader("Content-Type");if(s&&s.includes("application/csv")){var a=i.getResponseHeader("Content-Disposition"),o=a&&a.match(/filename="([^"]+)"/),r=o?o[1]:"export.csv",l=new Blob([t],{type:"application/csv"}),c=window.URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.setAttribute("download",r),document.body.appendChild(u),u.click(),document.body.removeChild(u),this.csvFileDownloading=!1,this.progressPercentage=0}else this.csvFileDownloading=!1,this.progressPercentage=0,console.error("Unexpected content type:",s)}}.bind(this),error:function(t,e,i){this.csvFileDownloading=!1,this.progressPercentage=0,console.error("Error during file download:",e,i)}})}}},function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"fluentcrm-subscribers-export-dialog",attrs:{title:t.$t("Export Subscriber"),visible:t.visible,width:"50%","append-to-body":!0,"close-on-click-modal":!1},on:{close:function(e){return t.hide()}}},[e("div",{style:{pointerEvents:t.csvFileDownloading?"none":"auto"}},[t.csvFileDownloading?e("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:t.progressPercentage}}):t._e(),t._v(" "),e("div",{staticClass:"fc_form_item"},[e("h3",[t._v(t._s(t.$t("Exp_Please_sctywte")))]),t._v(" "),e("div",{staticStyle:{"margin-bottom":"15px"}},[e("el-checkbox",{staticStyle:{"min-width":"250px"},on:{change:t.handleAllCheck},model:{value:t.check_all,callback:function(e){t.check_all=e},expression:"check_all"}},[t._v("\n                    "+t._s(t.$t("Check All"))+"\n                ")])],1),t._v(" "),e("el-checkbox-group",{staticClass:"fc_2_col_items",model:{value:t.columns,callback:function(e){t.columns=e},expression:"columns"}},[e("el-checkbox",{attrs:{label:"id"}},[t._v(t._s(t.$t("ID")))]),t._v(" "),e("el-checkbox",{attrs:{label:"prefix"}},[t._v(t._s(t.$t("Name Prefix")))]),t._v(" "),e("el-checkbox",{attrs:{label:"user_id"}},[t._v(t._s(t.$t("User ID")))]),t._v(" "),e("el-checkbox",{attrs:{label:"email"}},[t._v(t._s(t.$t("Email")))]),t._v(" "),t._l(t.available_columns,function(i){return e("el-checkbox",{key:i.value,attrs:{label:i.value}},[t._v(t._s(i.label))])}),t._v(" "),e("el-checkbox",{attrs:{label:"ip"}},[t._v(t._s(t.$t("IP Address")))])],2),t._v(" "),t.appVars.contact_custom_fields.length?[e("h3",[t._v(t._s(t.$t("Custom Contact Fields")))]),t._v(" "),e("el-checkbox-group",{staticClass:"fc_2_col_items",model:{value:t.custom_fields,callback:function(e){t.custom_fields=e},expression:"custom_fields"}},t._l(t.appVars.contact_custom_fields,function(i){return e("el-checkbox",{key:i.slug,attrs:{label:i.slug}},[t._v(t._s(i.label))])}),1)]:t._e(),t._v(" "),t.appVars.commerce_provider?[e("h3",[t._v(t._s(t.$t("Commerce Fields"))+" ("+t._s(t._f("ucFirst")(t.appVars.commerce_provider))+")")]),t._v(" "),e("el-checkbox-group",{staticClass:"fc_2_col_items",model:{value:t.commerce_columns,callback:function(e){t.commerce_columns=e},expression:"commerce_columns"}},[e("el-checkbox",{attrs:{label:"total_order_value"}},[t._v(t._s(t.$t("Lifetime Value")))]),t._v(" "),e("el-checkbox",{attrs:{label:"total_order_count"}},[t._v(t._s(t.$t("Total Order Count")))]),t._v(" "),e("el-checkbox",{attrs:{label:"first_order_date"}},[t._v(t._s(t.$t("Customer Since"))+"e")]),t._v(" "),e("el-checkbox",{attrs:{label:"last_order_date"}},[t._v(t._s(t.$t("Last Order Date")))])],1)]:t._e()],2),t._v(" "),e("div",{staticClass:"fc_form_item fc_t_30 wfc_well"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("label",{staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(t.$t("Contact Export Limit")))]),t._v(" "),e("el-input",{attrs:{type:"number"},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("label",{staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(t.$t("Contact Export Offset")))]),t._v(" "),e("el-input",{attrs:{type:"number"},model:{value:t.offset,callback:function(e){t.offset=e},expression:"offset"}})],1)],1),t._v(" "),e("p",[t._v(t._s(t.$t("Exp_Leave_tbfnloo")))])],1),t._v(" "),t.exporting?e("p",[t._v(t._s(t.$t("Exporting... Please wait")))]):t._e()],1),t._v(" "),t.has_campaign_pro?e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{disabled:t.csvFileDownloading,size:"small"},on:{click:t.hide}},[t._v("\n            "+t._s(t.$t("Cancel"))+"\n        ")]),t._v(" "),e("el-button",{attrs:{disabled:t.csvFileDownloading,size:"small",type:"primary"},on:{click:function(e){return t.exportContacts()}}},[t._v("\n            "+t._s(t.$t("Export Contacts"))+"\n        ")])],1):e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("generic-promo")],1)])},[],!1,null,null,null);const gn=e({name:"ActionMenu",components:{Adder:Oi,Importer:on,Exporter:hn.exports},props:["options","listId","tagId","search_query"],data:function(){return{adder:!1,importer:!1,exporter:!1}},methods:{toggle:function(t){this[t]=!this[t]},close:function(t){this[t]=!1},fetch:function(t){this.$emit("fetch",t)}}},function(){var t=this,e=t._self._c;return e("div",{},[e("el-button-group",[t.hasPermission("fcrm_manage_contacts")?e("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"primary"},on:{click:function(e){return t.toggle("adder")}}},[t._v("\n            "+t._s(t.$t("Add Contact"))+"\n        ")]):t._e(),t._v(" "),t.hasPermission("fcrm_manage_contacts")?e("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-upload"},on:{click:function(e){return t.toggle("importer")}}},[t._v("\n            "+t._s(t.$t("Import"))+"\n        ")]):t._e(),t._v(" "),t.hasPermission("fcrm_manage_contacts_export")?e("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-download"},on:{click:function(e){return t.toggle("exporter")}}},[t._v("\n            "+t._s(t.$t("Export"))+"\n        ")]):t._e()],1),t._v(" "),e("adder",{attrs:{visible:t.adder,listId:t.listId,tagId:t.tagId,options:t.options},on:{fetch:t.fetch,close:function(e){return t.close("adder")}}}),t._v(" "),t.importer?e("importer",{attrs:{"list-id":t.listId,"tag-id":t.tagId,visible:t.importer,options:t.options},on:{fetch:t.fetch,close:function(e){return t.close("importer")}}}):t._e(),t._v(" "),e("exporter",{attrs:{search_query:t.search_query,visible:t.exporter},on:{close:function(e){return t.close("exporter")}}})],1)},[],!1,null,null,null).exports;const vn=e({name:"Filterer",props:{placement:{default:"bottom-start"},filter_type:{default:"filterer"}}},function(){var t=this,e=t._self._c;return e("div",[e("el-dropdown",{staticClass:"fluentcrm-filter",attrs:{placement:t.placement,"hide-on-click":!1,trigger:"click"}},[t._t("header",function(){return[e("el-button",{attrs:{plain:"",size:"small"}},[t._t("label",function(){return[t._v("\n                    "+t._s(t.$t("Columns"))+"\n                ")]}),t._v(" "),t._t("icon",function(){return[e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]})],2)]}),t._v(" "),e("el-dropdown-menu",{staticClass:"fc_filter_dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t._t("items"),t._v(" "),t._t("footer")],2)],2),t._v(" "),t._t("dropdown_footer")],2)},[],!1,null,null,null).exports;const bn=e({name:"Editor",components:{Filterer:vn},props:{type:{required:!0},options:{required:!0,type:Array},noMatch:{required:!0,type:Boolean},matched:{required:!0},selectionCount:{required:!0,type:Number},placement:{default:"bottom-start"},creatable:{default:!1}},watch:{matched:function(){this.init()}},data:function(){return{query:null,selection:[],checkList:[],creating:!1}},methods:{init:function(){for(var t in this.selection=[],this.matched)this.selection.includes(t)||this.selection.push(t)},search:function(){this.$emit("search",this.query&&this.query.toLowerCase())},isIndeterminate:function(t){return this.matched[t.slug]&&this.matched[t.slug]!==this.selectionCount},save:function(t){var e=Object.keys(this.matched),i=t.filter(function(t){return!e.includes(t)}),n=e.filter(function(e){return!t.includes(e)});this.$emit("subscribe",{attach:i,detach:n})},createNewItem:function(){var t=this;this.creating=!0,this.$post(this.type,{title:this.query}).then(function(e){t.$notify.success(e.message);var i=e.item;i.status=!0,t.$emit("addedNew",i),t.$nextTick(function(){t.search()})}).catch(function(e){t.handleError(e)}).finally(function(){t.creating=!1})}},mounted:function(){this.init()}},function(){var t=this,e=t._self._c;return e("filterer",{attrs:{placement:t.placement}},[t._t("header",function(){return[e("el-button",{attrs:{plain:"",size:"mini"}},[t._v("\n            "+t._s(t.$t("Add or Remove"))+" "+t._s(t._f("ucFirst")(t.trans(t.type)))+"\n            "),t._t("icon",function(){return[e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]})],2)]},{slot:"header"}),t._v(" "),e("el-dropdown-item",{staticClass:"fluentcrm-filter-option no-hover fc-dropdown-search-item",attrs:{slot:"items"},slot:"items"},[e("el-input",{staticClass:"fc_input",attrs:{size:"mini",placeholder:t.$t("Search...")},nativeOn:{keyup:function(e){return t.search.apply(null,arguments)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1),t._v(" "),e("el-dropdown-item",{staticClass:"fc-dropdown-items-label fluentcrm-filter-option",attrs:{slot:"items"},slot:"items"},[t._v("\n        "+t._s(t.$t("Choose an option:"))+"\n    ")]),t._v(" "),e("el-checkbox-group",{staticClass:"fluentcrm-filter-options fc_checkbox_group",attrs:{slot:"items"},on:{change:t.save},slot:"items",model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}},t._l(t.options,function(i){return e("el-checkbox",{key:i.id,staticClass:"el-dropdown-menu__item fc_checkbox",attrs:{label:i.slug,indeterminate:t.isIndeterminate(i)}},[t._v("\n            "+t._s(t.trans(i.title))+"\n        ")])}),1),t._v(" "),t.noMatch?[e("div",{staticClass:"fc_no_match_search_tagger",attrs:{slot:"footer"},slot:"footer"},[e("p",[t._v(t._s(t.$t("No items found")))]),t._v(" "),t.creatable?e("el-button",{staticClass:"fc_primary_button",attrs:{type:"primary",size:"small"},on:{click:t.createNewItem}},[t._v("\n                "+t._s(t.$t("Add new:"))+" - "+t._s(t.query)+"\n            ")]):t._e()],1)]:t._t("footer",null,{slot:"footer"})],2)},[],!1,null,null,null).exports;const yn={name:"Filters",components:{Filterer:vn},props:{type:{required:!0},options:{required:!0,type:Array},selected:{required:!0},count:{required:!0,type:Number},noMatch:{required:!0,type:Boolean}},data:function(){return{query:null,placement:"bottom-start"}},computed:{selection:{get:function(){return this.selected},set:function(t){this.$emit("filter",t)}},parsedOptions:function(){var t=[];return"statuses"!=this.type?this.each(this.options,function(e){t.push({id:parseInt(e.id),title:e.title,slug:e.slug})}):t=this.options,t}},methods:{search:function(){this.$emit("search",this.query&&this.query.toLowerCase())},deselect:function(t){var e=this.selection.indexOf(t.slug);this.selection.splice(e,1),this.$emit("filter",this.selection)}},mounted:function(){this.appVars.is_rtl&&(this.placement="bottom-end")}};var wn=e(yn,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-filterer"},[e("filterer",{class:{"fluentcrm-filtered":t.selection.length},attrs:{placement:t.placement,filter_type:t.type}},[e("template",{slot:"label"},[(t.selection.length,[t._v("\n                "+t._s(t.$t("Filtered by"))+" "+t._s(t._f("ucFirst")(t.trans(t.type)))+"\n            ")])],2),t._v(" "),e("el-dropdown-item",{staticClass:"fluentcrm-filter-option fc-dropdown-search-item no-hover",attrs:{slot:"items"},slot:"items"},[e("el-input",{staticClass:"fc_input",attrs:{size:"small",placeholder:t.$t("Search...")},nativeOn:{keyup:function(e){return t.search.apply(null,arguments)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1),t._v(" "),e("el-dropdown-item",{staticClass:"fluentcrm-filter-option fc-dropdown-items-label",attrs:{slot:"items"},slot:"items"},[t._v("\n            "+t._s(t.$t("Choose an option:"))+"\n        ")]),t._v(" "),e("el-checkbox-group",{staticClass:"fluentcrm-filter-options fc_checkbox_group",attrs:{slot:"items"},slot:"items",model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}},t._l(t.parsedOptions,function(i){return e("el-checkbox",{key:i.id,staticClass:"el-dropdown-menu__item fc_checkbox",attrs:{label:i.id}},[t._v("\n                "+t._s(i.title)+"\n            ")])}),1),t._v(" "),t.noMatch?e("el-dropdown-item",{staticClass:"fluentcrm-filter-option",attrs:{slot:"items"},slot:"items"},[e("p",[t._v(t._s(t.$t("No items found")))])]):t._e()],2),t._v(" "),t.selection.length?e("div",{staticClass:"fluentcrm-meta"},t._l(t.parsedOptions,function(i){return-1!=t.selected.indexOf(i.id)?e("el-tag",{key:i.id,attrs:{closable:""},on:{close:function(e){return t.deselect(i)}}},[t._v("\n            "+t._s(i.title)+"\n        ")]):t._e()}),1):t._e()],1)},[],!1,null,null,null);const Cn={data:function(){return{noMatch:!1}},computed:{choices:function(){return this.options.filter(function(t){return!1!==t.status})}},methods:{search:function(t){var e=!0,i=this.options.map(function(i){return i.title.toLowerCase().includes(t)?(e=!1,i.status=!0):i.status=t&&!1,i});this.$emit("search",this.type,i),this.noMatch=!(!t||!e)},subscribe:function(t){this.$emit("subscribe",this.payload(t))},payload:function(t){return{type:this.type,payload:t}}}};const $n=e({name:"Manager",props:["type","matched","options","selected","selection","subscribers","selectionCount","total_match"],data:function(){return{placement:"bottom-start",new_payload:!1,filterLabel:this.$t("Filters.instruction")}},components:{Editor:bn,Filters:wn.exports},mixins:[Cn],methods:{filter:function(t){this.$emit("filter",this.payload(t))},updatePayLoad:function(t){this.new_payload=t},pushPayload:function(){var t=this;this.new_payload?(this.subscribe(this.new_payload),setTimeout(function(){t.new_payload=!1},500)):this.$notify.error(this.$t("No changes found"))}},mounted:function(){this.appVars.is_rtl&&(this.placement="bottom-end")}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-filter-manager"},[t.selection?[e("editor",{attrs:{type:t.type,options:t.choices,noMatch:t.noMatch,matched:t.matched,selectionCount:t.selectionCount,placement:t.placement},on:{search:t.search,subscribe:t.updatePayLoad}},[e("div",{staticStyle:{padding:"10px","text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticStyle:{width:"100%"},attrs:{disabled:!t.new_payload,type:"success",size:"mini"},on:{click:function(e){return t.pushPayload()}}},[t._v("\n                    "+t._s(t.$t("Confirm"))+"\n                ")])],1)])]:[e("filters",{attrs:{type:t.type,options:t.choices,noMatch:t.noMatch,selected:t.selected,count:t.total_match,add_label:t.filterLabel},on:{search:t.search,filter:t.filter}})]],2)},[],!1,null,null,null).exports;const kn=e({name:"ColumnToggler",components:{Filterer:vn},data:function(){return{selection:[],subscriberColumns:Z}},computed:{columnGroups:function(){this.has_company_module&&(window.fc_primary_company_pushed||(Z.push({label:this.$t("Primary Company"),value:"primary_company",position:4}),window.fc_primary_company_pushed=!0),window.fc_companies_pushed||(Z.push({label:this.$t("Companies"),value:"companies",position:4}),window.fc_companies_pushed=!0));var t=[{slug:"subscriber",label:this.$t("Primary Fields"),fields:Z}];this.appVars.commerce_provider&&t.push({slug:"commerce",label:this.$t("Commerce Fields"),fields:[{label:this.$t("Lifetime Value"),value:"commerce.total_order_value",position:1},{label:this.$t("Purchase Count"),value:"commerce.total_order_count",position:2},{label:this.$t("Customer Since"),value:"commerce.first_order_date",position:3},{label:this.$t("Last Purchase Date"),value:"commerce.last_order_date",position:3}]});var e=[];return this.each(this.appVars.contact_custom_fields,function(t,i){e.push({label:t.label,value:t.slug,position:i+10})}),e.length&&t.push({slug:"custom_fields",label:this.$t("Custom Fields"),fields:e}),t}},methods:{init:function(){var t=this.storage.get("columns");t?(this.selection=t,this.fire()):(this.selection=["tags","lists","status"],this.save())},save:function(){this.storage.set("columns",this.selection),this.fire()},fire:function(){var t=this;this.$emit("input",this.selection),setTimeout(function(){t.$emit("dataChanged",t.selection)},400)}},mounted:function(){this.init()}},function(){var t=this,e=t._self._c;return e("filterer",{attrs:{name:"column-toggler"}},[e("el-button",{staticClass:"fc_columns_filter",attrs:{slot:"header",icon:"el-icon-setting",plain:"",size:"small"},slot:"header"},[t._v("\n        "+t._s(t.$t("Columns"))+"\n    ")]),t._v(" "),e("el-checkbox-group",{staticClass:"fluentcrm-filter-options fc_checkbox_group fc_column_toggler_checks",attrs:{slot:"items"},slot:"items",model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}},[t._l(t.columnGroups,function(i,n){return[e("el-checkbox",{key:n,attrs:{disabled:!0}},[t._v(t._s(i.label))]),t._v(" "),t._l(i.fields,function(i,s){return e("el-checkbox",{key:n+" "+s,staticClass:"el-dropdown-menu__item fc_checkbox",attrs:{label:i.value}},[t._v("\n                "+t._s(i.label)+"\n            ")])})]})],2),t._v(" "),e("el-dropdown-item",{staticClass:"no-hover",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"fc_primary_button",staticStyle:{width:"100%"},attrs:{type:"success",size:"mini"},on:{click:t.save}},[t._t("btn-label",function(){return[t._v(t._s(t.$t("Save")))]})],2)],1)],1)},[],!1,null,null,null).exports;const xn=e({props:["value","disabled"],name:"Searcher",data:function(){return{model:this.value,timeout:null}},methods:{fire:function(){this.model&&(this.doAction("loading",!0),this.doAction("search-subscribers",this.model))}},watch:{model:function(t,e){t=jQuery.trim(t),(e=jQuery.trim(e))&&!t&&(this.doAction("loading",!0),this.doAction("search-subscribers",this.model))},disabled:function(t){t&&(this.model="")}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-searcher"},[e("el-input",{attrs:{clearable:"",size:"mini",disabled:t.disabled,placeholder:t.$t("Search Type and Enter...")},on:{clear:t.fire},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fire.apply(null,arguments)}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fire},slot:"append"})],1)],1)},[],!1,null,null,null).exports;const Sn=e({name:"BlukActionMenu"},function(){return(0,this._self._c)("div",{staticClass:"fluentcrm-bulk-action-menu"},[this._t("default")],2)},[],!1,null,"04bb8a9e",null).exports;const An=e({name:"PropertyChanger",components:{Filterer:vn},props:["options","label","prop_key","selectedSubscribers"],data:function(){return{selected_item:""}},methods:{save:function(){this.changeSubscribersProperty({type:this.prop_key,value:this.selected_item})},changeSubscribersProperty:function(t){var e=this,i=t.type,n=t.value;n?(this.loading=!0,this.$put("subscribers/subscribers-property",{property:i,value:n,subscribers:this.selectedSubscribers.map(function(t){return t.id})}).then(function(t){e.$notify.success(t.message),e.$emit("fetch")}).catch(function(t){console.log(t)}).finally(function(){e.loading=!1})):this.$notify.error(this.$t("Pro_Please_saof"))}}},function(){var t=this,e=t._self._c;return e("filterer",{attrs:{placement:"bottom-start"}},[t._t("header",function(){return[e("el-button",{attrs:{plain:"",size:"mini"}},[t._v("\n            "+t._s(t.$t("Change"))+" "+t._s(t.label)+"\n            "),t._t("icon",function(){return[e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]})],2)]},{slot:"header"}),t._v(" "),e("el-dropdown-item",{staticClass:"fluentcrm-filter-option no-hover",attrs:{slot:"items"},slot:"items"},[t._v("\n        "+t._s(t.$t("Choose New"))+" "+t._s(t.label)+":\n    ")]),t._v(" "),e("el-radio-group",{staticClass:"fluentcrm_checkable_block",attrs:{slot:"items"},slot:"items",model:{value:t.selected_item,callback:function(e){t.selected_item=e},expression:"selected_item"}},t._l(t.options,function(i){return e("el-radio",{key:i.id,attrs:{label:i.id}},[t._v(t._s(i.title))])}),1),t._v(" "),e("el-dropdown-item",{staticClass:"no-hover",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"mini"},on:{click:t.save}},[t._t("btn-label",function(){return[t._v(t._s(t.$t("Change"))+" "+t._s(t.label))]})],2)],1)],2)},[],!1,null,null,null).exports;var En=i(1013),Tn=i.n(En);function Pn(t){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pn(t)}function On(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],i=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}throw new TypeError(Pn(t)+" is not iterable")}function Dn(){var t,e,i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",s=i.toStringTag||"@@toStringTag";function a(i,n,s,a){var l=n&&n.prototype instanceof r?n:r,c=Object.create(l.prototype);return Fn(c,"_invoke",function(i,n,s){var a,r,l,c=0,u=s||[],d=!1,_={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,i){return a=e,r=0,l=t,_.n=i,o}};function p(i,n){for(r=i,l=n,e=0;!d&&c&&!s&&e<u.length;e++){var s,a=u[e],p=_.p,m=a[2];i>3?(s=m===n)&&(l=a[(r=a[4])?5:(r=3,3)],a[4]=a[5]=t):a[0]<=p&&((s=i<2&&p<a[1])?(r=0,_.v=n,_.n=a[1]):p<m&&(s=i<3||a[0]>n||n>m)&&(a[4]=i,a[5]=n,_.n=m,r=0))}if(s||i>1)return o;throw d=!0,n}return function(s,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,m),r=u,l=m;(e=r<2?t:l)||!d;){a||(r?r<3?(r>1&&(_.n=-1),p(r,l)):_.n=l:_.v=l);try{if(c=2,a){if(r||(s="next"),e=a[s]){if(!(e=e.call(a,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,r<2&&(r=0)}else 1===r&&(e=a.return)&&e.call(a),r<2&&(l=TypeError("The iterator does not provide a '"+s+"' method"),r=1);a=t}else if((e=(d=_.n<0)?l:i.call(n,_))!==o)break}catch(e){a=t,r=1,l=e}finally{c=1}}return{value:e,done:d}}}(i,s,a),!0),c}var o={};function r(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][n]?e(e([][n]())):(Fn(e={},n,function(){return this}),e),d=c.prototype=r.prototype=Object.create(u);function _(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Fn(t,s,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=c,Fn(d,"constructor",c),Fn(c,"constructor",l),l.displayName="GeneratorFunction",Fn(c,s,"GeneratorFunction"),Fn(d),Fn(d,s,"Generator"),Fn(d,n,function(){return this}),Fn(d,"toString",function(){return"[object Generator]"}),(Dn=function(){return{w:a,m:_}})()}function Fn(t,e,i,n){var s=Object.defineProperty;try{s({},"",{})}catch(t){s=0}Fn=function(t,e,i,n){function a(e,i){Fn(t,e,function(t){return this._invoke(e,i,t)})}e?s?s(t,e,{value:i,enumerable:!n,configurable:!n,writable:!n}):t[e]=i:(a("next",0),a("throw",1),a("return",2))},Fn(t,e,i,n)}function jn(t,e,i,n,s,a,o){try{var r=t[a](o),l=r.value}catch(t){return void i(t)}r.done?e(l):Promise.resolve(l).then(n,s)}const In={name:"BulkContactActions",props:["selectedSubscribers","options","pagination"],components:{BulkContactCustomField:e({name:"BulkContactCustomField",props:["options"],data:function(){return{customFieldType:"",formattedCustomFields:{},updating:!1}},methods:{formatFields:function(){var t=this;this.customFieldsList.forEach(function(e){"select-multi"===e.type||"checkbox"==e.type?t.$set(t.formattedCustomFields,e.slug,[]):t.$set(t.formattedCustomFields,e.slug,"")})},handleCustomFieldBulk:function(){var t=this.selectedField,e=this.formattedCustomFields[t.slug];this.updating=!0,this.$emit("updateCustomField",{key:t.slug,type:t.type,value:e})}},computed:{customFieldsList:function(){return this.options.custom_fields||[]},selectedField:function(){var t=this;return this.customFieldsList.find(function(e){return e.slug===t.customFieldType})}},mounted:function(){this.formatFields()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc-bulk-contact-custom-fields"},[e("el-select",{staticClass:"mt-5",attrs:{filterable:"",size:"mini",placeholder:t.$t("Select Field")},model:{value:t.customFieldType,callback:function(e){t.customFieldType=e},expression:"customFieldType"}},t._l(t.customFieldsList,function(t,i){return e("el-option",{key:i,attrs:{value:t.slug,label:t.label}})}),1),t._v(" "),t.selectedField?["select-one"===t.selectedField.type||"select-multi"==t.selectedField.type?[e("el-select",{staticClass:"ml-5 mt-5",attrs:{placeholder:t.$t("Select")+" "+t.selectedField.label,clearable:"",filterable:"",multiple:"select-multi"==t.selectedField.type,size:"mini"},model:{value:t.formattedCustomFields[t.selectedField.slug],callback:function(e){t.$set(t.formattedCustomFields,t.selectedField.slug,e)},expression:"formattedCustomFields[selectedField.slug]"}},t._l(t.selectedField.options,function(t){return e("el-option",{key:t,attrs:{value:t,label:t}})}),1)]:"text"==t.selectedField.type||"number"==t.selectedField.type||"textarea"==t.selectedField.type?[e("el-input",{staticClass:"ml-5 mt-5",attrs:{placeholder:t.selectedField.label,size:"mini",type:t.selectedField.type},model:{value:t.formattedCustomFields[t.selectedField.slug],callback:function(e){t.$set(t.formattedCustomFields,t.selectedField.slug,e)},expression:"formattedCustomFields[selectedField.slug]"}})]:"radio"==t.selectedField.type?[e("el-radio-group",{staticClass:"ml-5 mt-5",attrs:{size:"mini"},model:{value:t.formattedCustomFields[t.selectedField.slug],callback:function(e){t.$set(t.formattedCustomFields,t.selectedField.slug,e)},expression:"formattedCustomFields[selectedField.slug]"}},t._l(t.selectedField.options,function(t){return e("el-radio",{key:t,attrs:{value:t,label:t}})}),1)]:"checkbox"==t.selectedField.type?[e("el-checkbox-group",{staticClass:"fc_checkbox_group ml-5 mr-5",attrs:{size:"mini"},model:{value:t.formattedCustomFields[t.selectedField.slug],callback:function(e){t.$set(t.formattedCustomFields,t.selectedField.slug,e)},expression:"formattedCustomFields[selectedField.slug]"}},t._l(t.selectedField.options,function(t){return e("el-checkbox",{key:t,staticClass:"fc_checkbox",attrs:{value:t,label:t}})}),1)]:"date"==t.selectedField.type?[e("el-date-picker",{staticClass:"ml-5 mt-5",attrs:{"value-format":"yyyy-MM-dd",type:"date",size:"mini",placeholder:t.$t("Pick a date")},model:{value:t.formattedCustomFields[t.selectedField.slug],callback:function(e){t.$set(t.formattedCustomFields,t.selectedField.slug,e)},expression:"formattedCustomFields[selectedField.slug]"}})]:"date_time"==t.selectedField.type?[e("el-date-picker",{staticClass:"ml-5 mt-5",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",size:"mini",placeholder:t.$t("Pick a date and time")},model:{value:t.formattedCustomFields[t.selectedField.slug],callback:function(e){t.$set(t.formattedCustomFields,t.selectedField.slug,e)},expression:"formattedCustomFields[selectedField.slug]"}})]:[t._v("\n            "+t._s(t.selectedField)+"\n        ")]]:t._e(),t._v(" "),t.customFieldType?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],staticClass:"ml-5 mt-5",attrs:{disabled:t.updating,size:"mini",type:"success"},on:{click:t.handleCustomFieldBulk}},[t._v("\n        "+t._s(t.$t("Update Field"))+"\n    ")]):t._e()],2)},[],!1,null,null,null).exports,Confirm:d,OptionSelector:Ft},data:function(){return{delete_confirm_message:"<b>"+this.$t("Are you sure to delete?")+"</b><br />"+this.$t("delete_all_contacts_notice"),double_optin_confirm_message:"<b>"+this.$t("Are you sure to send double optin?")+"</b><br />"+this.$t("send_double_optin_contacts_notice"),actions:{},select_job:{action_name:"",selected_options:[]},doing_action:!1,select_status:"",allSelected:!1,processCount:0,processingAllBulk:!1,currentAllActionLastContactId:0,custom_field:{}}},watch:{"select_job.action_name":{handler:function(){this.select_job.selected_options=[],this.select_status=""},deep:!0}},computed:{currentAction:function(){return!!this.select_job.action_name&&this.actions[this.select_job.action_name]},canSelectAll:function(){return this.pagination&&this.selectedSubscribers.length<this.pagination.total&&this.selectedSubscribers.length==this.pagination.per_page&&window.fcrm_sub_params&&"subscribers"==this.$route.name}},methods:{handleBulkActionRoute:function(){var t=this;if(!this.canSelectAll||!this.allSelected)return this.doBulkAction(),!1;this.$confirm("You are about to apply the selected action to all the contacts ("+this.formatMoney(this.pagination.total)+") of this filter. Please confirm.","Warning",{confirmButtonText:"Yes, let's do it!",cancelButtonText:"Cancel",type:"warning"}).then(function(){t.processingAllBulk=!0,t.processAllBulk(function(){alert("All Contacts has been processed!")})}).catch(function(){t.allSelected=!1})},doBulkAction:function(){var t,e=this;return(t=Dn().m(function t(){var i,n,s,a,o;return Dn().w(function(t){for(;;)switch(t.n){case 0:if(i=[],e.each(e.selectedSubscribers,function(t){i.push(t.id)}),i.length){t.n=1;break}return e.$notify.error(e.$t("Please select subscribers first")),t.a(2,!1);case 1:e.doing_action=!0,n=Tn()(i,100),s={action_name:e.select_job.action_name,action_options:e.select_job.selected_options,new_status:e.select_status,custom_field:e.custom_field},a=Dn().m(function t(i){return Dn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e.repeatBulkAction(n[i],s).then(function(t){i===n.length-1&&(e.$emit("refetch"),e.$notify.success(t.message))}).catch(function(t){e.handleError(t)});case 1:return t.a(2)}},t)}),o=0;case 2:if(!(o<n.length)){t.n=4;break}return t.d(On(a(o)),3);case 3:o++,t.n=2;break;case 4:e.doing_action=!1;case 5:return t.a(2)}},t)}),function(){var e=this,i=arguments;return new Promise(function(n,s){var a=t.apply(e,i);function o(t){jn(a,n,s,o,r,"next",t)}function r(t){jn(a,n,s,o,r,"throw",t)}o(void 0)})})()},repeatBulkAction:function(t,e){return e.subscriber_ids=t,this.processCount+=t.length,this.$post("subscribers/do-bulk-action",e)},processAllBulk:function(t){var e=this,i={is_all:"yes",action_name:this.select_job.action_name,action_options:this.select_job.selected_options,new_status:this.select_status,last_id:this.currentAllActionLastContactId,per_page:400,contact_query:window.fcrm_sub_params};this.$post("subscribers/do-bulk-action",i).then(function(i){e.processCount+=parseInt(i.completed_contacts),i.is_completed?(e.processingAllBulk=!1,e.$emit("refetch"),e.$notify.success(i.message),t&&t()):(e.currentAllActionLastContactId=i.last_contact_id,e.$nextTick(function(){e.processAllBulk(t)}))}).catch(function(t){e.handleError(t)})},updateCustomFieldValue:function(t){this.custom_field=t,this.handleBulkActionRoute()}},mounted:function(){var t=this;this.actions={add_to_tags:{label:this.$t("Add To Tags"),options:this.options.tags},add_to_lists:{label:this.$t("Add To Lists"),options:this.options.lists},remove_from_tags:{label:this.$t("Remove From Tags"),options:this.options.tags},remove_from_lists:{label:this.$t("Remove From Lists"),options:this.options.lists},change_contact_status:{label:this.$t("Change Contact Status"),statuses:this.options.statuses},change_contact_type:{label:this.$t("Change Contact Type"),custom_options:this.appVars.contact_types,btn_text:this.$t("Change Contact Type"),is_multiple:!1},add_to_email_sequence:{label:this.$t("Add To Email Sequence")},add_to_automation:{label:this.$t("Add To Automation Funnel")}},this.appVars.custom_contact_bulk_actions&&this.appVars.custom_contact_bulk_actions.length&&this.each(this.appVars.custom_contact_bulk_actions,function(e){t.actions[e.action_name]||(t.actions[e.action_name]=e)}),this.has_company_module&&(this.actions.add_to_company={label:this.$t("Add To Company")},this.actions.remove_from_company={label:this.$t("Remove From Company")}),this.actions.send_double_optin={label:this.$t("Send Double Optin To Pending Contacts")},this.actions.update_custom_fields={label:this.$t("Update Custom Fields")},this.actions.delete_contacts={label:this.$t("Delete Contacts")}}},Ln=In;var Nn=i(4307),qn={insert:"head",singleton:!1};a()(Nn.A,qn);Nn.A.locals;var Mn=e(Ln,function(){var t=this,e=t._self._c;return e("div",{staticStyle:{flex:"1"}},[e("div",{staticClass:"fc_bulk_wrap"},[e("div",{staticClass:"fc_bulk_item"},[e("label",[t._v(t._s(t.$t("Select Action")))]),t._v(" "),e("el-select",{staticClass:"mt-5",attrs:{clearable:"",filterable:"",size:"mini",placeholder:t.$t("Select Bulk Action")},model:{value:t.select_job.action_name,callback:function(e){t.$set(t.select_job,"action_name",e)},expression:"select_job.action_name"}},t._l(t.actions,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t.label}})}),1)],1),t._v(" "),t.currentAction&&t.currentAction.options?[e("el-select",{staticClass:"ml-5 mt-5",attrs:{filterable:"",multiple:"",size:"mini",placeholder:t.$t("Select")},model:{value:t.select_job.selected_options,callback:function(e){t.$set(t.select_job,"selected_options",e)},expression:"select_job.selected_options"}},t._l(t.currentAction.options,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"ml-5 mt-5",attrs:{disable:t.doing_action,size:"mini",disabled:!t.select_job.selected_options.length,type:"success"},on:{click:function(e){return t.handleBulkActionRoute()}}},[t._v("\n                "+t._s(t.$t("Confirm"))+" ("+t._s(t.currentAction.label)+")\n            ")])]:"change_contact_status"==t.select_job.action_name?[e("el-select",{staticClass:"ml-5 mt-5",attrs:{filterable:"",size:"mini",placeholder:t.$t("Select")},model:{value:t.select_status,callback:function(e){t.select_status=e},expression:"select_status"}},t._l(t.currentAction.statuses,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"ml-5 mt-5",attrs:{disable:t.doing_action,size:"mini",disabled:!t.select_status,type:"success"},on:{click:function(e){return t.handleBulkActionRoute()}}},[t._v("\n                "+t._s(t.$t("Change Status"))+"\n            ")])]:"delete_contacts"==t.select_job.action_name?[e("confirm",{attrs:{placement:"top-start",message:t.delete_confirm_message},on:{yes:function(e){return t.handleBulkActionRoute()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action,size:"mini",type:"danger"},slot:"reference"},[t._v(t._s(t.$t("Delete Contacts"))+"\n                ")])],1)]:"send_double_optin"==t.select_job.action_name?[e("confirm",{attrs:{placement:"top-start",message:t.double_optin_confirm_message},on:{yes:function(e){return t.handleBulkActionRoute()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action,size:"mini",type:"warning"},slot:"reference"},[t._v(t._s(t.$t("Send Double Optin"))+"\n                ")])],1)]:"add_to_email_sequence"==t.select_job.action_name?[t.has_campaign_pro?[e("div",{staticClass:"fc_bulk_item"},[e("label",[t._v(t._s(t.$t("Select Sequence")))]),t._v(" "),e("option-selector",{attrs:{field:{option_key:"email_sequences",clearable:!0,size:"mini"}},model:{value:t.select_status,callback:function(e){t.select_status=e},expression:"select_status"}})],1),t._v(" "),e("confirm",{attrs:{placement:"top-start",width:230,message:t.$t("Add_Contacts_To_Email_Sequence_Confirm_Message")},on:{yes:function(e){return t.handleBulkActionRoute()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action||!t.select_status,size:"mini",type:"primary"},slot:"reference"},[t._v(t._s(t.$t("Add to Sequence"))+"\n                    ")])],1),t._v(" "),e("p",{staticClass:"help_msg"},[t._v(t._s(t.$t("Already_Contact_in_Email_Sequence")))])]:e("span",{staticStyle:{padding:"10px"}},[t._v(t._s(t.$t("Require FluentCRM Pro")))])]:"add_to_company"==t.select_job.action_name?[[e("div",{staticClass:"fc_bulk_item"},[e("label",[t._v(t._s(t.$t("Select Company")))]),t._v(" "),e("option-selector",{attrs:{field:{option_key:"companies",clearable:!0,size:"mini"}},model:{value:t.select_status,callback:function(e){t.select_status=e},expression:"select_status"}})],1),t._v(" "),e("confirm",{attrs:{placement:"top-start",width:230,message:t.$t("Add_Contacts_To_Company_Confirm_Message")},on:{yes:function(e){return t.handleBulkActionRoute()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action||!t.select_status,size:"mini",type:"primary"},slot:"reference"},[t._v(t._s(t.$t("Add to Company"))+"\n                    ")])],1),t._v(" "),e("p",{staticClass:"help_msg"},[t._v(t._s(t.$t("Already_Contact_in_Company")))])]]:"remove_from_company"==t.select_job.action_name?[[e("div",{staticClass:"fc_bulk_item"},[e("label",[t._v(t._s(t.$t("Select Company")))]),t._v(" "),e("option-selector",{attrs:{field:{option_key:"companies",clearable:!0,size:"mini"}},model:{value:t.select_status,callback:function(e){t.select_status=e},expression:"select_status"}})],1),t._v(" "),e("confirm",{attrs:{placement:"top-start",width:230,message:t.$t("Remove_Contacts_From_Company_Confirm_Message")},on:{yes:function(e){return t.handleBulkActionRoute()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action||!t.select_status,size:"mini",type:"primary"},slot:"reference"},[t._v(t._s(t.$t("Remove from Company"))+"\n                    ")])],1),t._v(" "),e("p",{staticClass:"help_msg"},[t._v(t._s(t.$t("Contact_not_in_Company")))])]]:"add_to_automation"==t.select_job.action_name?[t.has_campaign_pro?[e("div",{staticClass:"fc_bulk_item"},[e("label",[t._v(t._s(t.$t("Select Automation Funnel")))]),t._v(" "),e("option-selector",{attrs:{field:{option_key:"automation_funnels",clearable:!0,size:"mini"}},model:{value:t.select_status,callback:function(e){t.select_status=e},expression:"select_status"}})],1),t._v(" "),e("confirm",{attrs:{placement:"top-start",width:230,message:t.$t("Add_Contacts_To_Automation_Confirm_Message")},on:{yes:function(e){return t.handleBulkActionRoute()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action||!t.select_status,size:"mini",type:"primary"},slot:"reference"},[t._v(t._s(t.$t("Add to Automation"))+"\n                    ")])],1),t._v(" "),e("p",{staticClass:"help_msg"},[t._v(t._s(t.$t("Already_Contact_in_Automation")))])]:e("span",{staticStyle:{padding:"10px"}},[t._v("Require FluentCRM Pro")])]:"update_custom_fields"==t.select_job.action_name?[e("BulkContactCustomField",{attrs:{options:t.options},on:{updateCustomField:t.updateCustomFieldValue}})]:t.currentAction&&t.currentAction.custom_options?[e("el-select",{staticClass:"ml-5 mt-5",attrs:{filterable:"",size:"mini",multiple:t.currentAction.is_multiple,placeholder:t.$t("Select")},model:{value:t.select_status,callback:function(e){t.select_status=e},expression:"select_status"}},t._l(t.currentAction.custom_options,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t}})}),1),t._v(" "),t.currentAction.help_message?e("p",{staticClass:"help_msg",domProps:{innerHTML:t._s(t.currentAction.help_message)}}):t._e(),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"ml-5 mt-5",attrs:{disable:t.doing_action,size:"mini",type:"success"},on:{click:function(e){return t.handleBulkActionRoute()}}},[t._v("\n                "+t._s(t.currentAction.btn_text)+"\n            ")])]:t._e()],2),t._v(" "),t.canSelectAll?e("div",{staticClass:"fc_bulk_navs"},[t.allSelected?e("p",[t._v("All "+t._s(t._f("formatMoney")(t.pagination.total))+" contacts selected.\n            "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.allSelected=!1}}},[t._v("Select only this page")])],1):e("p",[t._v(t._s(t._f("formatMoney")(this.selectedSubscribers.length))+" contacts on this page selected.\n            "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.allSelected=!0}}},[t._v("Select all\n                "+t._s(t._f("formatMoney")(t.pagination.total))+" contacts\n            ")])],1)]):t._e(),t._v(" "),e("el-dialog",{attrs:{title:t.$t("Processing...."),visible:t.processingAllBulk,width:"50%","append-to-body":!0,"close-on-click-modal":!1}},[t.processingAllBulk?e("div",{staticStyle:{"text-align":"center"}},[e("h3",[t._v("Action: "+t._s(t.currentAction.label)+" "),e("span",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}]})]),t._v(" "),e("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.processCount/t.pagination.total*100),status:"success"}}),t._v(" "),e("h3",[t._v("Processing "+t._s(t._f("formatMoney")(t.processCount))+" of "+t._s(t._f("formatMoney")(t.pagination.total))+" contacts")]),t._v(" "),e("h4",[t._v("Please do not close this window while processing this bulk action")])],1):t._e()])],1)},[],!1,null,"c22478ac",null);function zn(t){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(t)}const Rn=e({name:"ContactsTable",components:{Toggler:kn,Manager:$n,Searcher:xn,BulkActionMenu:Sn,PropertyChanger:An,Pagination:m,BulkContactActions:Mn.exports},props:["subscribers","always_searchbar","show_skeleton","is_loading","query_data","pagination","options","ui_config","fire_ready_fetch","filter_type"],data:function(){return{selection:!1,selectedSubscribers:[],selectionCount:0,matched_tags:[],matched_lists:[],matched_statuses:[],columns:[],hasCustomFields:!1,hasCommerceFields:!1,initialFired:!1,countries:window.fcAdmin.countries,copiedText:{id:"",title:""}}},computed:{custom_fields:function(){var t=this,e=this.appVars.contact_custom_fields;return e?e.filter(function(e){return-1!==t.columns.indexOf(e.slug)}):[]}},methods:{fetch:function(){this.selection=!1,this.selectedSubscribers=[],this.$emit("fetch")},getRelations:function(t,e){var i=t[e]||[],n="title";return"companies"===e&&(n="name"),i.length>0?i.map(function(t){return t[n]}).join(", "):""},formatCellValue:function(t,e){if(!t)return"";var i=t[e];return i&&"object"==zn(i)?i.join(", "):i},onSelection:function(t){var e=this;this.selection=!!t.length,this.selectedSubscribers=t;var i={},n={};t.forEach(function(t){t.tags.forEach(function(t){return e.match(t,i)}),t.lists.forEach(function(t){return e.match(t,n)})}),this.selectionCount=t.length,this.matched_tags=i,this.matched_lists=n},match:function(t,e){e[t.slug]?e[t.slug]++:e[t.slug]=1},handleSortable:function(t){"descending"===t.order?(this.query_data.sort_by=t.prop,this.query_data.sort_type="DESC"):(this.query_data.sort_by=t.prop,this.query_data.sort_type="ASC"),this.fetch()},subscribe:function(t){var e=this,i=t.type,n=t.payload,s=n.attach,a=n.detach;this.loading=!0;var o={type:i,attach:s,detach:a,subscribers:this.selectedSubscribers.map(function(t){return t.id})};this.$post("subscribers/sync-segments",o).then(function(t){t.subscribers.forEach(function(t){var i=e.subscribers.findIndex(function(e){return e.id===t.id});-1!==i&&e.subscribers.splice(i,1,t),e.$refs.subscribersTable.toggleRowSelection(e.subscribers[i])});var n="selected_".concat(i);if(e[n]&&e[n].length&&a&&a.length){var s=e[n].filter(function(t){return a.includes(t)});s.length&&e.filter({type:i,payload:s})}e.loading=!1,e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19})})},maybeReFetch:function(){var t=!1;!this.hasCommerceFields&&this.appVars.commerce_provider&&(this.columns.filter(function(t){return 0===t.indexOf("commerce.")}).length&&(t=!0,this.hasCommerceFields=!0,this.query_data.has_commerce=!0));-1!==this.columns.indexOf("primary_company")&&(this.query_data.primary_company=!0,t=!0),!this.hasCustomFields&&this.custom_fields.length&&(this.query_data.custom_fields=!0,this.hasCustomFields=!0,this.willRefetch=!0),this.initialFired||(t=!0),t&&(this.fetch(),this.initialFired=!0)},filter:function(t){var e=t.type,i=t.payload;return this.$set(this.query_data,e,i),this.pagination.current_page=1,this.fetch()},search:function(t,e){this.options[t]=e},listeners:function(){var t=this;this.addAction("search-subscribers","fluentcrm",function(e){t.query_data.search=e,t.pagination.current_page=1,t.fetch()}),this.addAction("loading","fluentcrm",function(e){t.loading=e})},countryName:function(t){var e="";return this.countries.map(function(i){i.code==t&&(e=i.title)}),e},copyText:function(t,e){if(this.copiedText.id=e,!t)return this.copiedText.title=this.$t("Nothing to copy"),"";var i=document.createElement("input");i.value=t,document.body.appendChild(i),i.select(),i.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(i),this.copiedText.title=this.$t("Copied")}},mounted:function(){this.listeners()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_contacts_wrap",class:{fc_has_selections:t.selectedSubscribers.length},staticStyle:{position:"relative"}},[e("div",{staticClass:"fluentcrm-header-secondary"},[e("bulk-action-menu",[t.selection?e("div",{staticClass:"fc_filter_boxes"},[e("bulk-contact-actions",{attrs:{pagination:t.pagination,selectedSubscribers:t.selectedSubscribers,options:t.options},on:{refetch:function(e){return t.fetch()}}})],1):e("div",{staticClass:"fc_filter_boxes"},[t.ui_config.disable_filters_without_selection?t._e():[t.ui_config.show_list?e("manager",{attrs:{type:"lists",selection:t.selection,options:t.options.lists,matched:t.matched_lists,subscribers:t.subscribers,total_match:t.pagination.total,selected:t.query_data.lists,selectionCount:t.selectionCount},on:{filter:t.filter,search:t.search,subscribe:t.subscribe}}):t._e(),t._v(" "),t.ui_config.show_tag?e("manager",{attrs:{type:"tags",selection:t.selection,options:t.options.tags,matched:t.matched_tags,selected:t.query_data.tags,subscribers:t.subscribers,total_match:t.pagination.total,selectionCount:t.selectionCount},on:{search:t.search,filter:t.filter,subscribe:t.subscribe}}):t._e(),t._v(" "),t.selection?[e("property-changer",{attrs:{selectedSubscribers:t.selectedSubscribers,label:t.$t("Status"),prop_key:"status",options:t.options.statuses},on:{fetch:t.fetch}})]:[e("manager",{attrs:{type:"statuses",selection:!1,options:t.options.statuses,matched:t.matched_statuses,subscribers:t.subscribers,total_match:t.pagination.total,selected:t.query_data.statuses,selectionCount:t.selectionCount},on:{filter:t.filter,search:t.search,subscribe:t.subscribe}})]]],2),t._v(" "),e("div",{staticClass:"fc_search_box"},[t._t("before_search_box"),t._v(" "),e("searcher",{attrs:{disabled:"advanced"==t.filter_type},model:{value:t.query_data.search,callback:function(e){t.$set(t.query_data,"search",e)},expression:"query_data.search"}}),t._v(" "),e("toggler",{on:{dataChanged:function(e){return t.maybeReFetch()}},model:{value:t.columns,callback:function(e){t.columns=e},expression:"columns"}}),t._v(" "),t._t("after_search_box")],2)])],1),t._v(" "),t._t("before_contacts_table"),t._v(" "),e("div",{staticClass:"fc_contacts_table"},[t._t("in_contacts_table"),t._v(" "),t.show_skeleton?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:10}}):e("el-table",{ref:"subscribersTable",staticStyle:{width:"100%"},attrs:{"default-sort":{prop:t.query_data.sort_by,order:"DESC"==t.query_data.sort_type?"descending":"ascending"},"empty-text":t.$t("No Contacts Found"),data:t.subscribers,border:"",id:"fluentcrm-subscribers-table",stripe:""},on:{"selection-change":t.onSelection,"sort-change":t.handleSortable}},[t.hasPermission("fcrm_manage_contacts")?e("el-table-column",{attrs:{type:"selection",width:"40"}}):t._e(),t._v(" "),e("el-table-column",{attrs:{label:"",property:"id",sortable:"custom",width:"55"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"subscriber",params:{id:i.row.id}}}},[e("img",{staticClass:"fc_contact_photo",attrs:{title:t.$t("Contact ID:")+" "+i.row.id,src:i.row.photo}})])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Email"),property:"email",width:"200",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"subscriber",params:{id:i.row.id}}}},[t._v("\n                        "+t._s(i.row.email)+"\n                    ")]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.copiedText.id==i.row.id?t.copiedText.title:t.$t("Copy Email")))]),t._v(" "),e("i",{staticClass:"copy-text el-icon-copy-document",on:{click:function(e){return t.copyText(i.row.email,i.row.id)}}})])]}}])}),t._v(" "),-1!=t.columns.indexOf("prefix")?e("el-table-column",{attrs:{label:t.$t("Prefix"),"min-width":"70",property:"prefix"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.prefix)+"\n                ")]}}],null,!1,742359085)}):t._e(),t._v(" "),-1!=t.columns.indexOf("first_name")?e("el-table-column",{attrs:{label:t.$t("First Name"),"min-width":"140",property:"first_name",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.first_name)+"\n                ")]}}],null,!1,1789523967)}):t._e(),t._v(" "),-1!=t.columns.indexOf("last_name")?e("el-table-column",{attrs:{label:t.$t("Last Name"),"min-width":"140",property:"last_name",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.last_name)+"\n                ")]}}],null,!1,1990198607)}):t._e(),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Full Name"),"min-width":"180",property:"first_name",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.full_name)+"\n                ")]}}])}),t._v(" "),-1!=t.columns.indexOf("lists")?e("el-table-column",{attrs:{"min-width":"180",label:t.$t("Lists"),property:"lists"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t.getRelations(i.row,"lists")))])]}}],null,!1,2831366199)}):t._e(),t._v(" "),-1!=t.columns.indexOf("tags")?e("el-table-column",{attrs:{"min-width":"230",label:t.$t("Tags"),property:"tags"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t.getRelations(i.row,"tags")))])]}}],null,!1,813029927)}):t._e(),t._v(" "),t.has_company_module&&-1!=t.columns.indexOf("companies")?e("el-table-column",{attrs:{"min-width":"230",label:t.$t("Companies"),property:"companies"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t.getRelations(i.row,"companies")))])]}}],null,!1,1209180935)}):t._e(),t._v(" "),t.has_company_module&&-1!=t.columns.indexOf("primary_company")?e("el-table-column",{attrs:{"min-width":"220",label:t.$t("Primary Company")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.company?e("router-link",{staticClass:"fc_company_cell fc_photo_text",attrs:{to:{name:"view_company",params:{company_id:i.row.company_id}}}},[i.row.company.logo?e("span",{staticClass:"fc_company_photo"},[e("img",{attrs:{src:i.row.company.logo}})]):t._e(),t._v(" "),e("span",{staticStyle:{flex:"1"}},[t._v(t._s(i.row.company.name))])]):e("span",[t._v("--")])]}}],null,!1,3663012839)}):t._e(),t._v(" "),t.hasCommerceFields?[-1!=t.columns.indexOf("commerce.total_order_value")?e("el-table-column",{attrs:{"min-width":"120",label:t.$t("Lifetime Value"),property:"commerce_by_provider.total_order_value"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.commerce_by_provider?e("span",[t._v("\n                             "+t._s(t.appVars.commerce_currency_sign)+t._s(i.row.commerce_by_provider.total_order_value||"-")+"\n                        ")]):e("span",[t._v("-")])]}}],null,!1,4197673742)}):t._e(),t._v(" "),-1!=t.columns.indexOf("commerce.total_order_count")?e("el-table-column",{attrs:{"min-width":"120",label:t.$t("Order Count"),property:"commerce_by_provider.total_order_count"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.commerce_by_provider?e("span",[t._v("\n                                 "+t._s(i.row.commerce_by_provider.total_order_count||"-")+"\n                            ")]):e("span",[t._v("-")])]}}],null,!1,4165792080)}):t._e(),t._v(" "),-1!=t.columns.indexOf("commerce.first_order_date")?e("el-table-column",{attrs:{"min-width":"180",label:t.$t("Customer Since"),property:"commerce_by_provider.first_order_date"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.commerce_by_provider&&i.row.commerce_by_provider.first_order_date?e("span",[t._v("\n                                 "+t._s(t.nsDateFormat(i.row.commerce_by_provider.first_order_date))+"\n                            ")]):e("span",[t._v("-")])]}}],null,!1,3650785532)}):t._e(),t._v(" "),-1!=t.columns.indexOf("commerce.last_order_date")?e("el-table-column",{attrs:{"min-width":"180",label:t.$t("Last order"),property:"commerce_by_provider.last_order_date"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.commerce_by_provider&&i.row.commerce_by_provider.last_order_date?e("span",[t._v("\n                                 "+t._s(t._f("nsHumanDiffTime")(i.row.commerce_by_provider.last_order_date))+"\n                            ")]):e("span",[t._v("-")])]}}],null,!1,1503150072)}):t._e()]:t._e(),t._v(" "),-1!=t.columns.indexOf("phone")?e("el-table-column",{attrs:{"min-width":"120",label:t.$t("Phone"),property:"phone"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v("\n                    "+t._s(i.row.phone)+"\n                    "),i.row.phone?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.copiedText.id==i.row.id?t.copiedText.title:t.$t("Copy Phone Number")))]),t._v(" "),e("i",{staticClass:"copy-text el-icon-copy-document",on:{click:function(e){return t.copyText(i.row.phone,i.row.id)}}})]):t._e()]}}],null,!1,90480703)}):t._e(),t._v(" "),-1!=t.columns.indexOf("date_of_birth")?e("el-table-column",{attrs:{"min-width":"120",label:t.$t("Date of Birth"),property:"date_of_birth"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s("0000-00-00"!==e.row.date_of_birth?e.row.date_of_birth:"-")+"\n                ")]}}],null,!1,2137225108)}):t._e(),t._v(" "),-1!=t.columns.indexOf("address_line_1")?e("el-table-column",{attrs:{"min-width":"160",label:t.$t("Address Line 1"),property:"address_line_1",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.address_line_1)+"\n                ")]}}],null,!1,1678626292)}):t._e(),t._v(" "),-1!=t.columns.indexOf("address_line_2")?e("el-table-column",{attrs:{"min-width":"160",label:t.$t("Address Line 2"),property:"address_line_2",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.address_line_2)+"\n                ")]}}],null,!1,3512588407)}):t._e(),t._v(" "),-1!=t.columns.indexOf("city")?e("el-table-column",{attrs:{"min-width":"120",label:t.$t("City"),property:"city",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.city)+"\n                ")]}}],null,!1,3107051098)}):t._e(),t._v(" "),-1!=t.columns.indexOf("state")?e("el-table-column",{attrs:{"min-width":"120",label:t.$t("State"),property:"state",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.state)+"\n                ")]}}],null,!1,3537162442)}):t._e(),t._v(" "),-1!=t.columns.indexOf("postal_code")?e("el-table-column",{attrs:{"min-width":"120",label:t.$t("Zip Code"),property:"postal_code",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.postal_code)+"\n                ")]}}],null,!1,1412391802)}):t._e(),t._v(" "),-1!=t.columns.indexOf("country")?e("el-table-column",{attrs:{"min-width":"120",label:t.$t("Country"),property:"country",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.countryName(e.row.country))+"\n                ")]}}],null,!1,2347497371)}):t._e(),t._v(" "),-1!=t.columns.indexOf("contact_type")?e("el-table-column",{attrs:{label:t.$t("Type"),width:"150",property:"contact_type",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("ucWords")(t.trans(e.row.contact_type)))+"\n                ")]}}],null,!1,4116792083)}):t._e(),t._v(" "),-1!=t.columns.indexOf("status")?e("el-table-column",{attrs:{label:t.$t("Status"),width:"150",property:"status",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("ucWords")(t.trans(e.row.status)))+"\n                ")]}}],null,!1,3897582912)}):t._e(),t._v(" "),t._l(t.custom_fields,function(i){return e("el-table-column",{key:i.slug,attrs:{width:"200",label:i.label},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.formatCellValue(e.row.custom_fields,i.slug))+"\n                ")]}}],null,!0)})}),t._v(" "),-1!=t.columns.indexOf("source")?e("el-table-column",{attrs:{"min-width":"150",label:t.$t("Source"),property:"source"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.source)+"\n                ")]}}],null,!1,1727937024)}):t._e(),t._v(" "),-1!=t.columns.indexOf("last_activity")?e("el-table-column",{attrs:{prop:"last_activity",label:t.$t("Last Activity"),"min-width":"190",property:"last_activity",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.last_activity?[e("i",{staticClass:"el-icon-time"}),t._v(" "),e("span",[e("span",{attrs:{title:i.row.last_activity}},[t._v(t._s(t._f("nsHumanDiffTime")(i.row.last_activity)))])])]:t._e()]}}],null,!1,2511039582)}):t._e(),t._v(" "),-1!=t.columns.indexOf("created_at")?e("el-table-column",{attrs:{label:t.$t("Date Added"),"min-width":"190",property:"created_at",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.created_at?[e("i",{staticClass:"el-icon-time"}),t._v(" "),e("span",{attrs:{title:i.row.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(i.row.created_at)))])]:t._e()]}}],null,!1,3591174071)}):t._e(),t._v(" "),-1!=t.columns.indexOf("updated_at")?e("el-table-column",{attrs:{label:t.$t("Last Changed"),"min-width":"190",property:"updated_at",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.updated_at?[e("i",{staticClass:"el-icon-time"}),t._v(" "),e("span",{attrs:{title:i.row.updated_at}},[t._v(t._s(t._f("nsHumanDiffTime")(i.row.updated_at)))])]:t._e()]}}],null,!1,380598594)}):t._e()],2)],2),t._v(" "),t.show_skeleton?t._e():e("el-row",{staticClass:"d-flex items-center",attrs:{guter:20}},[e("el-col",{attrs:{xs:24,md:12}},[t.selection?e("div",{staticClass:"fc_filter_boxes mt-5",staticStyle:{"padding-left":"15px"}},[e("bulk-contact-actions",{attrs:{selectedSubscribers:t.selectedSubscribers,options:t.options},on:{refetch:function(e){return t.fetch()}}})],1):e("div",[t._v("")])]),t._v(" "),e("el-col",{attrs:{xs:24,md:12}},[e("pagination",{attrs:{pagination:t.pagination,hide_on_single:!1,extra_sizes:[200,250,300,400,600]},on:{per_page_change:function(e){t.storage.set("contact_perpage",e)},fetch:t.fetch}})],1)],1)],2)},[],!1,null,null,null).exports;const Bn=e({name:"DynamicSegmentSave",props:["advance_filters"],data:function(){return{title:"",saving:!1}},methods:{save:function(){var t=this;if(this.title){var e={segment:JSON.stringify({title:this.title,filters:this.advance_filters}),with_subscribers:!1};this.saving=!0,this.$post("dynamic-segments",e).then(function(e){t.title="",t.$notify.success(e.message),t.$router.push({name:"view_segment",params:{slug:e.segment.slug,id:e.segment.id}})}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1})}else this.$notify.error(this.$t("Cre_Please_pNotS"))}}},function(){var t=this,e=t._self._c;return e("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}]},[e("h4",[t._v(t._s(t.$t("Save as dynamic Segment")))]),t._v(" "),e("el-input",{attrs:{type:"text",placeholder:"Name of the segment"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),e("el-button",{staticStyle:{"margin-top":"20px"},attrs:{disabled:t.saving,size:"small",type:"primary"},on:{click:function(e){return t.save()}}},[t._v(t._s(t.$t("Save")))])],1),t._v(" "),e("i",{staticClass:"el-icon el-icon-more icon-90degree el-icon--right",staticStyle:{"font-size":"18px",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])},[],!1,null,null,null).exports;const Vn=e({name:"ContactHeaderPopNav",props:["head_title"],data:function(){return{routeName:this.$route.name}},methods:{handleCommand:function(t){t!=this.routeName&&this.$router.push({name:t})}}},function(){var t=this,e=t._self._c;return e("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.handleCommand}},[e("span",{staticStyle:{cursor:"pointer","font-size":"18px"}},[e("i",{staticClass:"el-icon-arrow-down fluentcrm_clickable el-icon--right"}),t._v(" "+t._s(t.head_title)+"\n    ")]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{class:{sub_item_active:"subscribers"==t.routeName},attrs:{command:"subscribers"}},[t._v(t._s(t.$t("Contacts")))]),t._v(" "),t.appVars.company_types?e("el-dropdown-item",{class:{sub_item_active:"companies"==t.routeName},attrs:{command:"companies"}},[t._v(t._s(t.$t("Companies")))]):t._e(),t._v(" "),e("el-dropdown-item",{class:{sub_item_active:"lists"==t.routeName},attrs:{command:"lists"}},[t._v(t._s(t.$t("Lists")))]),t._v(" "),e("el-dropdown-item",{class:{sub_item_active:"tags"==t.routeName},attrs:{command:"tags"}},[t._v(t._s(t.$t("Tags")))]),t._v(" "),e("el-dropdown-item",{class:{sub_item_active:"dynamic_segments"==t.routeName},attrs:{command:"dynamic_segments"}},[t._v(t._s(t.$t("Dynamic Segments")))])],1)],1)},[],!1,null,null,null).exports;function Un(t){return Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Un(t)}function Hn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Gn(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Hn(Object(i),!0).forEach(function(e){Wn(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Hn(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Wn(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Un(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Un(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Kn=i(6449);const Jn=e({name:"Subscribers",components:{ActionMenu:gn,ContactsTable:Rn,RichFilter:pe,AdvancedFilterPromo:me,DynamicSegmentSave:Bn,ContactHeaderPopNav:Vn},data:function(){var t;return{app_ready:!1,subscribers:[],loading:!0,pagination:{current_page:1,per_page:10,total:0},advanced_filters:[[]],filter_type:"simple",listId:null,tagId:null,query_data:{tags:[],lists:[],search:"",statuses:[],sort_by:"id",sort_type:"DESC",custom_fields:!1,has_commerce:!1},ui_config:{show_list:!0,show_tag:!0,disable_filters_without_selection:!1},options:{tags:[],lists:[],statuses:[],countries:[],sampleCsv:null,delimiter:"comma"},first_loading:!0,filterLabel:this.$t("Filters.instruction"),fcrmSubParams:null!==(t=window.fcrm_sub_params)&&void 0!==t?t:this.$route.query,isClearFilterVisible:!1}},computed:{isFilterEnabled:function(){var t=this.fcrmSubParams;if(!t)return!1;if("advanced"===t.filter_type){var e=JSON.parse(t.advanced_filters);return this.isClearFilterVisible||e.length>1||e[0].length>0}return!!(t.tags&&t.tags.length||t.lists&&t.lists.length||t.statuses&&t.statuses.length||t.search)}},methods:{setup:function(){var t=this.$route.query;window.fcrm_sub_params&&(t=window.fcrm_sub_params),t.tags&&!Kn(t.tags)&&(t.tags=[t.tags]),t.lists&&!Kn(t.lists)&&(t.lists=[t.lists]),t.statuses&&!Kn(t.statuses)&&(t.statuses=[t.statuses]);var e={tags:t.tags?t.tags.map(function(t){return parseInt(t)}):[],lists:t.lists?t.lists.map(function(t){return parseInt(t)}):[],search:t.search||"",statuses:t.statuses||[],sort_by:t.sort_by||"id",sort_type:t.sort_type||"DESC",custom_fields:!1,filter_type:t.filter_type||"simple"};t.page&&(this.pagination.current_page=parseInt(t.page)),"advanced"==t.filter_type?(this.filter_type="advanced",this.ui_config.disable_filters_without_selection=!0,t.advanced_filters&&"[object Object]"!=t.advanced_filters&&("string"==typeof t.advanced_filters?this.advanced_filters=JSON.parse(t.advanced_filters):this.advanced_filters=t.advanced_filters)):this.ui_config.disable_filters_without_selection=!1,this.query_data=e;var i=!1;return this.$route.params.listId?(i=!0,this.listId=this.$route.params.listId,this.query_data.lists=[parseInt(this.$route.params.listId)],this.ui_config.show_list=!1):this.$route.params.lists&&console.log(this.$route.params.lists),this.$route.params.tagId&&(i=!0,this.tagId=this.$route.params.tagId,this.query_data.tags=[this.$route.params.tagId],this.ui_config.show_tag=!1),this.app_ready=!0,i},fetch:function(){var t=this;this.loading=!0;var e={per_page:this.pagination.per_page,page:this.pagination.current_page,filter_type:this.filter_type,custom_fields:this.query_data.custom_fields,has_commerce:this.query_data.has_commerce,sort_by:this.query_data.sort_by,sort_type:this.query_data.sort_type};this.has_campaign_pro||(e.filter_type="simple"),e="advanced"==this.filter_type&&this.has_campaign_pro?Gn({advanced_filters:JSON.stringify(this.advanced_filters)},e):Gn(Gn({},this.query_data),e);var i={};this.each(e,function(e,n){t.isEmptyValue(e)||(i[n]=e)}),window.fcrm_sub_params=i,i.t=Date.now(),this.$router.replace({name:"subscribers",query:i}),this.fcrmSubParams=i,this.$get("subscribers",e).then(function(e){t.pagination.total=e.subscribers.total,t.subscribers=e.subscribers.data}).catch(function(e){t.handleError(e),t.storage.set("contact_perpage",10)}).finally(function(){t.loading=!1,t.first_loading=!1})},getOptions:function(){this.options={tags:this.appVars.available_tags,lists:this.appVars.available_lists,statuses:this.appVars.available_contact_statuses,contact_types:this.appVars.available_contact_types,sampleCsv:this.appVars.contact_sample_csv,custom_fields:this.appVars.available_custom_fields}},addConditionGroup:function(){this.advanced_filters.push([]),this.isClearFilterVisible=!0},maybeRemoveGroup:function(t){this.advanced_filters.length>1&&this.advanced_filters.splice(t,1)},changedFilterType:function(){"simple"==this.filter_type?this.ui_config.disable_filters_without_selection=!1:this.ui_config.disable_filters_without_selection=!0,this.fetch()},clearAllFilter:function(){this.advanced_filters=[[]],this.query_data={tags:[],lists:[],search:"",statuses:[],sort_by:"id",sort_type:"DESC",custom_fields:!1,has_commerce:!1},this.isClearFilterVisible=!1,this.fetch()},showClearFilterButton:function(){this.isClearFilterVisible=!0}},created:function(){this.pagination.per_page=parseInt(this.storage.get("contact_perpage",10))||10,this.getOptions(),this.setup(),this.changeTitle(this.$t("Contacts"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-subscribers fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[e("contact-header-pop-nav",{attrs:{head_title:t.$t("Contacts")}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.pagination.total,expression:"pagination.total"}],staticClass:"ff_small"},[t._v("("+t._s(t._f("formatMoney")(t.pagination.total))+")")])],1),t._v(" "),t.isFilterEnabled?e("el-button",{attrs:{type:"default",size:"small"},on:{click:t.clearAllFilter}},[t._v("\n                "+t._s(t.$t("Clear Filters"))+"\n            ")]):t._e()],1),t._v(" "),t.hasPermission("fcrm_manage_contacts")?e("div",{staticClass:"fluentcrm-actions"},[e("action-menu",{attrs:{search_query:ti(ti({},t.query_data),{},{advanced_filters:t.advanced_filters,filter_type:t.filter_type}),options:t.options,listId:t.listId,tagId:t.tagId},on:{fetch:t.fetch}})],1):t._e()]),t._v(" "),e("div",{staticClass:"fluentcrm_body fluentcrm_pad_b_15 fluentcrm_subscribers"},[t.app_ready?e("contacts-table",{attrs:{always_searchbar:!1,options:t.options,query_data:t.query_data,is_loading:!1,ui_config:t.ui_config,subscribers:t.subscribers,filter_type:t.filter_type,pagination:t.pagination,show_skeleton:t.first_loading},on:{fetch:t.fetch}},[e("div",{attrs:{slot:"before_search_box"},slot:"before_search_box"},[e("el-switch",{staticClass:"fc_advanced_toggle",attrs:{"active-value":"advanced","inactive-value":"simple","active-text":t.$t("Advanced Filter")},on:{change:function(e){return t.changedFilterType()}},model:{value:t.filter_type,callback:function(e){t.filter_type=e},expression:"filter_type"}})],1),t._v(" "),t.loading?e("div",{staticClass:"fc_loading_bar",attrs:{slot:"before_contacts_table"},slot:"before_contacts_table"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),"advanced"==t.filter_type?e("div",{staticClass:"fc_rich_container",attrs:{slot:"before_contacts_table"},slot:"before_contacts_table"},[e("div",{staticClass:"fc_rich_wrap"},t._l(t.advanced_filters,function(i,n){return e("div",{key:n},[e("div",{staticClass:"fc_rich_filter"},[e("rich-filter",{attrs:{add_label:t.filterLabel,items:i},on:{maybeRemove:function(e){return t.maybeRemoveGroup(n)},showClearFilterButton:t.showClearFilterButton}})],1),t._v(" "),e("div",{staticClass:"fc_cond_or"},[e("em",[t._v(t._s(t.$t("OR")))])])])}),0),t._v(" "),e("div",{staticClass:"fc_cond_or"},[e("em",{staticStyle:{cursor:"pointer",color:"rgb(0, 119, 204)","font-weight":"bold"},on:{click:function(e){return t.addConditionGroup()}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" "+t._s(t.$t("OR")))])]),t._v(" "),t.has_campaign_pro?[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.fetch()}}},[t._v(t._s(t.$t("Filter")))])],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("div",{staticClass:"text-align-right"},[e("dynamic-segment-save",{attrs:{advance_filters:t.advanced_filters}})],1)])],1),t._v(" "),t.appVars.advanced_filter_suggestions.length?e("div",{staticClass:"el-alert el-alert--info is-light",staticStyle:{"margin-top":"20px"}},[e("ul",{staticClass:"fc_list"},t._l(t.appVars.advanced_filter_suggestions,function(i){return e("li",{key:i.provider},[t._v("\n                                "+t._s(i.title)+" "),e("a",{staticStyle:{"font-weight":"bold"},attrs:{href:i.btn_url}},[t._v(t._s(i.btn_text))])])}),0)]):t._e()]:e("div",[e("advanced-filter-promo")],1)],2):t._e()]):t._e()],1)])},[],!1,null,null,null).exports;var Yn=e({name:"Form",components:{Error:oi},props:{item:{required:!0,type:Object},errors:{required:!0,type:Object}},watch:{"item.title":function(t){this.item.id||(this.item.slug=t?this.generateSlug(t):"")}},methods:{generateSlug:function(t){return t.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").replace(/\\-\\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}}},function(){var t=this,e=t._self._c;return e("el-form",{attrs:{"label-position":"top","label-width":"100px"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12}},[e("el-form-item",{staticClass:"is-required",attrs:{label:t.$t("Title")}},[e("el-input",{model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}}),t._v(" "),e("error",{attrs:{error:t.errors.get("title")}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12}},[e("el-form-item",{attrs:{label:t.$t("Slug")}},[e("el-input",{model:{value:t.item.slug,callback:function(e){t.$set(t.item,"slug",e)},expression:"item.slug"}}),t._v(" "),e("error",{attrs:{error:t.errors.get("slug")}})],1)],1)],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("For_Internal_S_")}},[e("el-input",{attrs:{placeholder:t.$t("Internal Subtitle")},model:{value:t.item.description,callback:function(e){t.$set(t.item,"description",e)},expression:"item.description"}})],1)],1)},[],!1,null,null,null);function Qn(t){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qn(t)}function Zn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Xn(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Qn(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Qn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const ts=e({name:"Adder",components:{Forma:Yn.exports},props:{visible:Boolean,type:{type:String,required:!0},api:{type:Object,required:!0}},data:function(){return{item:this.fresh(),errors:new ai,title:this.$t("Add New")+" "+this.ucFirst(this.trans(this.type))}},methods:{fresh:function(){return{title:null,slug:null,description:""}},reset:function(){this.errors.clear(),this.item=this.fresh()},hide:function(){this.reset(),this.$emit("close")},save:function(){var t=this;this.errors.clear();var e=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Zn(Object(i),!0).forEach(function(e){Xn(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Zn(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},this.item);(this.item.id?this.$put(this.api.store+"/"+this.item.id,e):this.$post(this.api.store,e)).then(function(e){t.$notify.success({title:t.$t("Great!"),message:e.message,offset:19}),t.$emit("fetch",t.item),t.$bus.$emit("renew_options",t.type),t.hide()}).catch(function(e){t.errors.record(e)})},listeners:function(){var t=this,e="edit-"+this.type;this.$bus.$on(e,function(e){t.item={id:e.id,slug:e.slug,title:e.title,description:e.description},t.title=t.$t("Edit")+" "+t.ucFirst(t.type)})}},mounted:function(){this.listeners()}},function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"fluentcrm-lists-dialog",attrs:{title:t.title,visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1},on:{close:function(e){return t.hide()}}},[e("forma",{attrs:{errors:t.errors,item:t.item}}),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("div",[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.hide()}}},[t._v("\n                "+t._s(t.$t("Cancel"))+"\n            ")]),t._v(" "),e("el-button",{attrs:{size:"small",type:t.item.id?"success":"primary"},on:{click:function(e){return t.save()}}},[t._v("\n                "+t._s(t.item.id?t.$t("Update"):t.$t("Create"))+"\n            ")])],1)])],1)},[],!1,null,null,null).exports,es={name:"List",components:{Adder:ts,Subscribers:Jn},props:["listId"],data:function(){return{list:null,adder:!1,api:{store:"lists"}}},methods:{fetch:function(){var t=this;this.$get("lists/".concat(this.listId)).then(function(e){t.list=e}).catch(function(){})},edit:function(){this.adder=!0,this.$bus.$emit("edit-list",this.list)},update:function(t){this.list=t},close:function(){this.adder=!1}},mounted:function(){this.fetch()}};var is=i(1376),ns={insert:"head",singleton:!1};a()(is.A,ns);is.A.locals;const ss=e(es,function(){var t=this,e=t._self._c;return e("div",[t.list?e("div",{staticClass:"list-stat"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"lists"}}},[t._v("\n                "+t._s(t.$t("Lists"))+"\n            ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                "+t._s(t.list.title)+"\n                "),e("el-link",{attrs:{icon:"el-icon-edit",underline:!1},on:{click:t.edit}})],1)],1)],1):t._e(),t._v(" "),e("subscribers"),t._v(" "),t.hasPermission("fcrm_manage_contact_cats")?e("adder",{attrs:{api:t.api,type:"list",visible:t.adder},on:{fetch:t.update,close:t.close}}):t._e()],1)},[],!1,null,null,null).exports;const as={name:"List",components:{Adder:ts,Subscribers:Jn},props:["tagId"],data:function(){return{tag:null,adder:!1,api:{store:"tags"}}},methods:{fetch:function(){var t=this;this.$get("tags/".concat(this.tagId)).then(function(e){t.tag=e.tag})},edit:function(){this.adder=!0,this.$bus.$emit("edit-tag",this.tag)},update:function(t){this.tag=t},close:function(){this.adder=!1}},mounted:function(){this.fetch()}};var os=i(7756),rs={insert:"head",singleton:!1};a()(os.A,rs);os.A.locals;const ls=e(as,function(){var t=this,e=t._self._c;return e("div",[t.tag?e("div",{staticClass:"list-stat"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"lists"}}},[t._v("\n                "+t._s(t.$t("Tags"))+"\n            ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                "+t._s(t.tag.title)+"\n\n                "),e("el-link",{attrs:{icon:"el-icon-edit",underline:!1},on:{click:t.edit}})],1)],1)],1):t._e(),t._v(" "),e("subscribers"),t._v(" "),t.hasPermission("fcrm_manage_contact_cats")?e("adder",{attrs:{api:t.api,type:"tag",visible:t.adder},on:{fetch:t.update,close:t.close}}):t._e()],1)},[],!1,null,null,null).exports;var cs=e({name:"Tagger",components:{Editor:bn,Confirm:d},data:function(){return{new_payload:!1,showItem:!0}},props:["type","taggables","options","matched","creatable"],mixins:[Cn],computed:{none:function(){return"tags"==this.type?this.$t("No tags found"):"lists"==this.type?this.$t("No lists found"):"No "+this.type+" found"}},methods:{remove:function(t){this.subscribe({attach:[],detach:[t]})},updatePayLoad:function(t){this.new_payload=t},pushPayload:function(){var t=this;this.new_payload?(this.subscribe(this.new_payload),setTimeout(function(){t.showItem=!1,t.$nextTick(function(){t.showItem=!0})},500)):this.$notify.error(this.$t("No changes found"))},getDescription:function(t){return t.pivot?this.$t("Added @ ")+t.pivot.created_at:""}}},function(){var t=this,e=t._self._c;return t.taggables&&t.showItem?e("div",[e("div",{staticClass:"header"},[e("h2",[t._v(t._s(t._f("ucFirst")(t.trans(t.type))))]),t._v(" "),e("editor",{attrs:{type:t.type,options:t.choices,noMatch:t.noMatch,matched:t.matched,selectionCount:1,placement:"bottom-end",creatable:t.creatable},on:{search:t.search,addedNew:function(e){t.$emit("addedNew",e)},subscribe:t.updatePayLoad}},[e("el-button",{attrs:{slot:"header",plain:"",size:"mini",icon:"el-icon-plus"},slot:"header"}),t._v(" "),e("div",{staticClass:"fc_tagger_footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"fc_primary_button",staticStyle:{width:"100%"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.pushPayload()}}},[t._v(t._s(t.$t("Confirm"))+"\n                ")])],1)],1)],1),t._v(" "),e("div",{staticClass:"items"},[t._l(t.taggables,function(i){return e("el-tag",{key:i.title,staticClass:"el-tag--white",attrs:{title:t.getDescription(i)}},[t._v("\n            "+t._s(i.title)+"\n            "),e("confirm",{attrs:{message:t.$t("Are you sure you want to remove this?"),placement:"top-start"},on:{yes:function(e){return t.remove(i.slug)}}},[e("i",{staticClass:"el-tag__close el-icon-close",attrs:{slot:"reference"},slot:"reference"})])],1)}),t._v(" "),t.taggables.length?t._e():e("el-alert",{attrs:{title:t.none,type:"warning",closable:!1}})],2)]):t._e()},[],!1,null,null,null);const us=e({name:"ProfileListTags",props:["subscriber"],components:{Tagger:cs.exports},data:function(){return{options:{tags:[],lists:[]},matches:{tags:{},lists:{}},subscribing:!1}},methods:{setup:function(t){var e=this;this.matches.tags=[],this.matches.lists=[],this.subscriber.tags=t.tags,this.subscriber.lists=t.lists,t.tags.forEach(function(t){return e.match(t,e.matches.tags)}),t.lists.forEach(function(t){return e.match(t,e.matches.lists)})},getOptions:function(){this.options={tags:this.appVars.available_tags,lists:this.appVars.available_lists}},subscribe:function(t){var e=this,i=t.type,n=t.payload,s={type:i,attach:n.attach,detach:n.detach,subscribers:[this.subscriber.id]};this.subscribing=!0,this.$post("subscribers/sync-segments",s).then(function(t){var i=t.subscribers[0];e.setup(i),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19})}).catch(function(t){e.handleError(t)}).finally(function(){e.subscribing=!1})},search:function(t,e){this.options[t]=e},match:function(t,e){e[t.slug]=1}},mounted:function(){this.getOptions(),this.setup(this.subscriber)}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_profile_tagger"},[e("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.subscribing,expression:"subscribing"}],attrs:{gutter:60}},[e("el-col",{attrs:{lg:24,md:24,sm:24,xs:24}},[e("tagger",{staticClass:"info-item",attrs:{type:"lists",creatable:!0,options:t.options.lists,matched:t.matches.lists,taggables:t.subscriber.lists},on:{search:t.search,subscribe:t.subscribe,addedNew:function(e){t.options.lists.push(e)}}})],1),t._v(" "),e("el-col",{attrs:{lg:24,md:24,sm:24,xs:24}},[e("tagger",{staticClass:"info-item",attrs:{type:"tags",creatable:!0,options:t.options.tags,matched:t.matches.tags,taggables:t.subscriber.tags},on:{search:t.search,subscribe:t.subscribe,addedNew:function(e){t.options.tags.push(e)}}})],1)],1)],1)},[],!1,null,null,null).exports;const ds=e({name:"ProfileStatURL",props:{subscriber:{type:Object,required:!0,default:function(){return null}}},components:{Pagination:m},data:function(){return{urlMetrics:[],loadingMetrics:!1,pagination:{total:0,per_page:10,current_page:1},query_data:{sort_by:"",sort_type:""}}},methods:{handleSortable:function(t){"descending"===t.order?(this.query_data.sort_by=t.prop,this.query_data.sort_type="DESC"):(this.query_data.sort_by=t.prop,this.query_data.sort_type="ASC"),this.getUrlMetrics()},getUrlMetrics:function(){var t=this;this.loadingMetrics=!0,this.$get("subscribers/".concat(this.subscriber.id,"/url-metrics"),{sort_by:this.query_data.sort_by,sort_type:this.query_data.sort_type,per_page:this.pagination.per_page,page:this.pagination.current_page,subscriber_id:this.subscriber.id}).then(function(e){t.urlMetrics=e.urlMetrics.data,t.pagination.total=e.urlMetrics.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loadingMetrics=!1})}}},function(){var t=this,e=t._self._c;return e("el-popover",{attrs:{placement:"bottom",width:560,trigger:"click","popper-class":"fcrm_link_stats_popover",effect:"dark"},scopedSlots:t._u([{key:"reference",fn:function(){return[e("span",{staticClass:"stats_link",attrs:{title:t.$t("Click Rate")},on:{click:t.getUrlMetrics}},[e("i",{staticClass:"el-icon el-icon-position"}),t._v(" "),e("span",[t._v("\n            "+t._s(t.percent(t.subscriber.stats.clicks,t.subscriber.stats.emails)))])])]},proxy:!0}])},[t._v(" "),e("div",{staticClass:"fcrm_link_stats_metrics"},[t.loadingMetrics?e("div",{staticClass:"fcrm_loader_wrap"},[e("el-skeleton",{attrs:{animated:!0,rows:5}})],1):e("el-table",{attrs:{sortable:"",data:t.urlMetrics},on:{"sort-change":t.handleSortable}},[e("el-table-column",{attrs:{label:t.$t("URL")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("a",{attrs:{href:i.row.url,target:"_blank",rel:"noopener"}},[t._v(t._s(i.row.url))])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"100",sortable:"",prop:"counter",label:t.$t("Clicks")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticClass:"counter"},[t._v(t._s(i.row.count))])]}}])})],1),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.getUrlMetrics}})],1)])},[],!1,null,null,null).exports;var _s=e({name:"ProfileInfo",props:{subscriber:{type:Object,default:function(){return null}},photo_holder:{type:String,default:"fc_photo_holder"}},components:{ProfileStatURL:ds,PhotoWidget:vt},data:function(){return{status_visible:!1,lead_visible:!1,subscriber_statuses:window.fcAdmin.available_contact_statuses,contact_types:window.fcAdmin.available_contact_types}},computed:{name:function(){return this.subscriber.first_name||this.subscriber.last_name?this.subscriber.prefix?"".concat(this.subscriber.prefix||""," ").concat(this.subscriber.first_name||""," ").concat(this.subscriber.last_name||""):"".concat(this.subscriber.first_name||""," ").concat(this.subscriber.last_name||""):this.subscriber.email}},methods:{saveStatus:function(){var t=this;this.updateProperty("status",this.subscriber.status,function(){t.status_visible=!1})},saveLead:function(){var t=this;this.updateProperty("contact_type",this.subscriber.contact_type,function(){t.lead_visible=!1})},removeAvatar:function(){this.subscriber.avatar="",this.updateAvatar(""),this.$emit("fetch")},updateAvatar:function(t){this.updateProperty("avatar",t)},updateProperty:function(t,e,i){var n=this;this.$put("subscribers/subscribers-property",{property:t,subscribers:[this.subscriber.id],value:e}).then(function(t){n.$notify.success(t.message),i&&i(t),n.$emit("fetch")}).catch(function(t){n.handleError(t)})},sendDoubleOptinEmail:function(){var t=this;this.$post("subscribers/".concat(this.subscriber.id,"/send-double-optin")).then(function(e){t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){})}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_profile_header"},[e("div",{staticClass:"fluentcrm_profile-photo"},[e("div",{class:t.photo_holder,style:{backgroundImage:"url("+t.subscriber.photo+")"}}),t._v(" "),e("photo-widget",{staticClass:"fc_photo_changed",attrs:{btn_type:"default",btn_text:t.$t("+ Photo"),btn_mode:!0},on:{changed:t.updateAvatar},model:{value:t.subscriber.photo,callback:function(e){t.$set(t.subscriber,"photo",e)},expression:"subscriber.photo"}}),t._v(" "),t.subscriber.avatar?e("el-button",{staticClass:"fc_photo_remove",attrs:{size:"small",type:"danger"},on:{click:t.removeAvatar}},[t._v("\n            "+t._s(t.$t("Remove"))+"\n        ")]):t._e()],1),t._v(" "),e("div",{staticClass:"profile-info"},[e("div",{staticClass:"profile_title"},[t._t("heading"),t._v(" "),e("h3",[t._v(t._s(t.name))]),t._v(" "),e("div",{staticClass:"profile_action"},[e("el-popover",{attrs:{placement:t.appVars.is_rtl?"left":"right",width:"360","popper-class":"fluentcrm_profile_action_popover"},model:{value:t.lead_visible,callback:function(e){t.lead_visible=e},expression:"lead_visible"}},[e("div",{staticClass:"fluentcrm_type_change_wrapper",staticStyle:{padding:"10px"}},[e("el-select",{attrs:{placeholder:t.$t("Select Status"),size:"mini"},model:{value:t.subscriber.contact_type,callback:function(e){t.$set(t.subscriber,"contact_type",e)},expression:"subscriber.contact_type"}},t._l(t.contact_types,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1)],1),t._v(" "),e("div",{staticStyle:{margin:"0"}},[e("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.saveLead()}}},[t._v("\n                            "+t._s(t.$t("Change Contact Type"))+"\n                        ")])],1),t._v(" "),e("el-tag",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v(t._s(t._f("ucFirst")(t.trans(t.subscriber.contact_type)))),e("span",{staticClass:"el-icon el-icon-caret-bottom"})])],1)],1),t._v(" "),e("div",{staticClass:"profile_action"},[e("el-popover",{attrs:{placement:t.appVars.is_rtl?"left":"right",width:"360","popper-class":"fluentcrm_profile_action_popover"},model:{value:t.status_visible,callback:function(e){t.status_visible=e},expression:"status_visible"}},[e("div",{staticClass:"fluentcrm_status_change_wrapper",staticStyle:{padding:"10px"}},[e("el-select",{attrs:{placeholder:t.$t("Select Status"),size:"mini"},model:{value:t.subscriber.status,callback:function(e){t.$set(t.subscriber,"status",e)},expression:"subscriber.status"}},t._l(t.subscriber_statuses,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1)],1),t._v(" "),e("div",{staticStyle:{margin:"0"}},[t.hasPermission("fcrm_manage_contacts")?e("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.saveStatus()}}},[t._v("\n                            "+t._s(t.$t("Pro_Change_SS"))+"\n                        ")]):t._e()],1),t._v(" "),e("el-tag",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v(t._s(t._f("ucFirst")(t.trans(t.subscriber.status)))),e("span",{staticClass:"el-icon el-icon-caret-bottom"})])],1)],1)],2),t._v(" "),e("p",{staticClass:"fc_profile_meta show_on_parent"},[t._v("\n            "+t._s(t.subscriber.email)+"\n            "),t.subscriber.user_id&&t.subscriber.user_edit_url?e("span",{attrs:{title:"WordPress User ID"}},[e("span",{staticClass:"fc_middot"},[t._v("")]),t._v(" "),e("a",{attrs:{target:"_blank",rel:"noopener",href:t.subscriber.user_edit_url}},[t._v(t._s(t.subscriber.user_id)+" "),e("span",{staticClass:"dashicons dashicons-external"})])]):t._e()]),t._v(" "),e("p",[t._v(t._s(t.$t("Added"))+" "+t._s(t._f("nsHumanDiffTime")(t.subscriber.created_at))+" "),t.subscriber.last_activity?e("span",[t._v(" & "+t._s(t.$t("Last Activity"))+" "+t._s(t._f("nsHumanDiffTime")(t.subscriber.last_activity)))]):t._e()]),t._v(" "),e("div",{staticClass:"stats_badges"},[e("span",{attrs:{title:t.$t("Total Emails")}},[e("i",{staticClass:"el-icon el-icon-message"}),t._v(" "),e("span",[t._v(t._s(t.subscriber.stats.emails))])]),t._v(" "),e("span",{attrs:{title:t.$t("Open Rate")}},[e("i",{staticClass:"el-icon el-icon-folder-opened"}),t._v(" "),e("span",[t._v(t._s(t.percent(t.subscriber.stats.opens,t.subscriber.stats.emails)))])]),t._v(" "),e("ProfileStatURL",{attrs:{subscriber:t.subscriber}})],1),t._v(" "),"pending"==t.subscriber.status?e("div",{staticClass:"fc_t_10"},[e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.sendDoubleOptinEmail()}}},[t._v("\n                "+t._s(t.$t("Send Double Optin Email"))+"\n            ")])],1):t._e(),t._v(" "),t.subscriber.unsubscribe_reason?e("div",{staticClass:"fc_t_10"},[e("p",[t._v(t._s(t.ucFirst(t.subscriber.status))+" "+t._s(t.$t("Reason:"))+" "+t._s(t.subscriber.unsubscribe_reason)+" "),t.subscriber.unsubscribe_date?e("span",[t._v(" @ "+t._s(t.subscriber.unsubscribe_date))]):t._e()])]):t._e(),t._v(" "),t.subscriber.user_roles&&t.subscriber.user_roles.length?e("p",{staticStyle:{"margin-top":"7px"}},[t._v("\n            "+t._s(t.$t("User Roles:"))+" "),e("span",{staticClass:"items"},t._l(t.subscriber.user_roles,function(i){return e("span",{key:i,staticClass:"fc_tag_prof_info"},[t._v(t._s(i)+" ")])}),0)]):t._e()])])},[],!1,null,null,null);const ps=e({name:"ProfileHeader",components:{ProfileInfo:_s.exports,ProfileListTags:us},props:["subscriber"],data:function(){return{}},methods:{fetch:function(){this.$emit("fetch")},emitUpdate:function(t){this.$emit("updateSubscriber",t)}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_profile_header_warpper"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("profile-info",{attrs:{subscriber:t.subscriber},on:{fetch:t.fetch}})],1),t._v(" "),e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("profile-list-tags",{attrs:{subscriber:t.subscriber},on:{updateSubscriber:t.emitUpdate}})],1)],1)],1)},[],!1,null,null,null).exports;const ms=e({name:"CompanyCard",props:["company","subscriber"],computed:{domainName:function(){return at(this.company.website)}},data:function(){return{working:!1}},methods:{markAsPrimary:function(){var t=this;this.working=!0,this.$put("subscribers/subscribers-property",{property:"company_id",value:this.company.id,subscribers:[this.subscriber.id]}).then(function(e){t.$notify.success(t.$t("Company marked as primary")),t.subscriber.company_id=t.company.id}).catch(function(e){t.handleError(e)}).finally(function(){t.working=!1})},removeAssociation:function(){var t=this;this.working=!0,this.$post("companies/detach-subscribers",{subscriber_ids:[this.subscriber.id],company_ids:[this.company.id]}).then(function(e){t.$notify.success(t.$t("Company association removed")),t.$emit("removed"),e.last_primary_company_id&&(t.subscriber.company_id=e.last_primary_company_id)}).catch(function(e){t.handleError(e)}).finally(function(){t.working=!1})}}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.working,expression:"working"}],staticClass:"fc_company_card fc_shadow_hover"},[t.subscriber?e("div",{staticClass:"fc_company_actions"},[e("el-dropdown",{attrs:{trigger:"click"}},[e("el-button",{staticClass:"el-dropdown-link",attrs:{size:"mini",type:"info"}},[t._v("\n                "+t._s(t.$t("actions"))+" "),e("span",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.subscriber.company_id!=t.company.id?e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.markAsPrimary()}}},[t._v("\n                        "+t._s(t.$t("Mark as Primary"))+"\n                    ")])]):t._e(),t._v(" "),e("el-dropdown-item",{staticClass:"fc_dropdown_action",on:{click:function(e){return t.removeAssociation()}}},[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.removeAssociation()}}},[t._v("\n                        "+t._s(t.$t("Remove Association"))+"\n                    ")])])],1)],1)],1):t._e(),t._v(" "),e("div",{staticClass:"fc_company_body"},[t.subscriber&&t.subscriber.company_id==t.company.id?e("div",{staticClass:"fc_primary_badge"},[t._v(t._s(t.$t("Primary")))]):t._e(),t._v(" "),e("a",{staticClass:"company_name",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("showDetails",t.company)}}},[t._v(t._s(t.company.name))]),t._v(" "),t.domainName?e("div",{staticClass:"company_domain"},[e("a",{attrs:{target:"_blank",rel:"noopener",href:t.company.website}},[t._v(t._s(t.domainName)+" "),e("span",{staticClass:"fc_dash_extrernal dashicons dashicons-external"})])]):t._e(),t._v(" "),t.company.email||t.company.phone?e("div",{staticClass:"company_email"},[t.company.email?e("span",[t._v(t._s(t.company.email)+" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.company.phone,expression:"company.phone"}],staticClass:"fc_middot"},[t._v("")])]):t._e(),t._v(" "),e("span",[t._v(t._s(t.company.phone))])]):t._e()]),t._v(" "),t.company.logo?e("router-link",{staticClass:"fc_company_logo fc_company_photo",attrs:{to:{name:"view_company",params:{company_id:t.company.id}}}},[e("img",{attrs:{src:t.company.logo,alt:""}})]):t._e()],1)},[],!1,null,null,null).exports;const fs=e({name:"ProfileCustomFields",props:["custom_values"],components:{CustomFields:_i},data:function(){return{app_ready:!1,showingCustomFieldsConfig:!1,custom_fields:this.appVars.company_custom_fields}},computed:{fieldGropups:function(){var t=this,e={};return this.each(this.custom_fields,function(i){li()(t.custom_values,i.slug)&&(i.is_disabled=!0),i.group||(i.group=""),e[i.group]||(e[i.group]={}),e[i.group][i.slug]=i}),e}},methods:{handleUpdateFields:function(t){this.custom_fields=t,this.appVars.company_custom_fields=t}},mounted:function(){var t=this;this.each(this.custom_fields,function(e){var i="";-1!==["select-multi","checkbox"].indexOf(e.type)&&(i=[]),li()(t.custom_values,e.slug)||t.$set(t.custom_values,e.slug,i)}),this.app_ready=!0}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_custom_field_wrapper"},[t.custom_fields.length?e("div",{staticClass:"fluentcrm_custom_fields"},[e("h3",[t._v(" "+t._s(t.$t("Custom Data"))+"\n            "),e("el-button",{attrs:{type:"default",plain:"",size:"mini",icon:"el-icon-s-operation"},on:{click:function(e){t.showingCustomFieldsConfig=!0}}})],1),t._v(" "),t.app_ready?e("el-form",{attrs:{data:t.custom_values,"label-position":"top"}},t._l(t.fieldGropups,function(i,n){return e("div",{key:n,class:n?"fluentcrm_custom_fields":""},[e("div",{class:n?"fc_custom_field_group_box":""},[n?e("div",{staticClass:"fc_item_label"},[t._v(t._s(n))]):t._e(),t._v(" "),t._l(i,function(i,n){return e("el-form-item",{key:n,attrs:{label:i.label}},["text"==i.type||"number"==i.type||"textarea"==i.type?e("el-input",{attrs:{placeholder:i.label,type:i.type},model:{value:t.custom_values[n],callback:function(e){t.$set(t.custom_values,n,e)},expression:"custom_values[fieldKey]"}}):"radio"==i.type?[e("el-radio-group",{model:{value:t.custom_values[n],callback:function(e){t.$set(t.custom_values,n,e)},expression:"custom_values[fieldKey]"}},t._l(i.options,function(t){return e("el-radio",{key:t,attrs:{value:t,label:t}})}),1)]:"select-one"==i.type||"select-multi"==i.type?[e("el-select",{attrs:{placeholder:t.$t("Select")+" "+i.label,clearable:"",filterable:"",multiple:"select-multi"==i.type},model:{value:t.custom_values[n],callback:function(e){t.$set(t.custom_values,n,e)},expression:"custom_values[fieldKey]"}},t._l(i.options,function(t){return e("el-option",{key:t,attrs:{value:t,label:t}})}),1)]:"checkbox"==i.type?[e("el-checkbox-group",{model:{value:t.custom_values[n],callback:function(e){t.$set(t.custom_values,n,e)},expression:"custom_values[fieldKey]"}},t._l(i.options,function(t){return e("el-checkbox",{key:t,attrs:{value:t,label:t}})}),1)]:"date"==i.type?[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:t.$t("Pick a date")},model:{value:t.custom_values[n],callback:function(e){t.$set(t.custom_values,n,e)},expression:"custom_values[fieldKey]"}})]:"date_time"==i.type?[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:t.$t("Pick a date and time")},model:{value:t.custom_values[n],callback:function(e){t.$set(t.custom_values,n,e)},expression:"custom_values[fieldKey]"}})]:[t._v("\n                            "+t._s(i)+"\n                        ")]],2)})],2)])}),0):t._e()],1):e("div",{staticClass:"fc_no_custom_fields_btn",staticStyle:{"margin-bottom":"15px","text-align":"right"}},[e("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-s-operation"},on:{click:function(e){t.showingCustomFieldsConfig=!0}}},[t._v("\n            "+t._s(t.$t("Custom Fields"))+"\n        ")])],1),t._v(" "),e("el-drawer",{attrs:{"append-to-body":!0,title:t.$t("Custom Fields Config"),visible:t.showingCustomFieldsConfig,size:"50%"},on:{"update:visible":function(e){t.showingCustomFieldsConfig=e}}},[t.showingCustomFieldsConfig?e("custom-fields",{attrs:{is_pop:!0,route:"companies/custom-fields",section_title:"Custom Company Fields"},on:{fieldsUpdated:function(e){t.handleUpdateFields(e)}}}):t._e()],1)],1)},[],!1,null,null,null).exports;var hs=i(3805),gs=i.n(hs);const vs=e({name:"CompanyInfoSide",components:{PhotoWidget:vt,ContactSelector:x,CustomFieldsForm:fs},props:{company:{type:Object,default:function(){return null}},photo_holder:{type:String,default:"fc_photo_holder_mini"},is_drawer:{type:Boolean,default:!1},intended_contact_id:{type:Number,default:null}},data:function(){return{model:{},isDirty:!1,appReady:!1,updating:!1,isHeaderEditing:!1,show_address_field:!1,show_social_urls:!1}},watch:{model:{handler:function(t,e){this.appReady&&(this.isDirty=!0)},deep:!0}},computed:{domainName:function(){return at(this.company.website)}},methods:{updateAvatar:function(t){this.company.id?this.updateProperty("logo",t):this.model.logo=t},updateProperty:function(t,e,i){var n=this;this.$put("companies/companies-property",{property:t,companies:[this.company.id],value:e}).then(function(s){n.$notify.success(s.message),n.company[t]=e,i&&i(s)}).catch(function(t){n.handleError(t)}).finally(function(){n.updating=!1})},updateInfo:function(){var t=this;this.updating=!0,this.company.id||(this.company.id=0,this.intended_contact_id&&(this.model.intended_contact_id=this.intended_contact_id)),this.$put("companies/".concat(this.company.id),this.model).then(function(e){t.$notify.success(e.message),t.each(t.model,function(e,i){t.company[i]=e}),e.update_data&&t.each(e.update_data,function(e,i){t.company[i]=e}),t.isHeaderEditing=!1,t.company.id?t.$emit("companyUpdated",e.company):t.$emit("companyCreated",e.company)}).catch(function(e){t.handleError(e)}).finally(function(){t.updating=!1})},enableEdit:function(){this.isHeaderEditing=!0,this.isDirty=!0,this.show_address_field=!0,this.show_social_urls=!0},getFormattedAddress:ot,reFetchLogo:function(){var t=this;this.updating=!0,this.updateProperty("refetch_logo",this.company.website,function(e){e.updated_logo&&(t.company.logo=e.updated_logo,t.model.logo=e.updated_logo)})}},created:function(){var t,e,i=this,n=this.company;this.model={owner_id:n.owner_id,name:n.name,logo:n.logo,email:n.email,phone:n.phone,website:n.website,industry:n.industry,type:n.type,address_line_1:n.address_line_1,address_line_2:n.address_line_2,city:n.city,state:n.state,employees_number:n.employees_number&&"0"!=n.employees_number?n.employees_number:"",postal_code:n.postal_code,country:n.country,description:n.description,linkedin_url:n.linkedin_url,twitter_url:n.twitter_url,facebook_url:n.facebook_url,custom_values:gs()(null===(t=n.meta)||void 0===t?void 0:t.custom_values)&&!se()(null===(e=n.meta)||void 0===e?void 0:e.custom_values)?n.meta.custom_values:{}},setTimeout(function(){i.appReady=!0},500)}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_company_info_wrapper",class:{fc_company_in_drawer:t.is_drawer,fc_company_unsaved:t.isDirty||!t.company.id}},[e("div",{staticClass:"fc_company_header",class:{fc_header_editing:t.isHeaderEditing||!t.company.id}},[e("div",{staticClass:"company_head_logo"},[t.isHeaderEditing||!t.company.id?e("p",[e("b",[t._v(t._s(t.$t("Company Logo")))])]):t._e(),t._v(" "),e("div",{staticClass:"fluentcrm_profile-photo"},[e("div",{class:t.photo_holder,style:{backgroundImage:t.company.logo?"url("+t.company.logo+")":""}}),t._v(" "),e("photo-widget",{staticClass:"fc_photo_changed",attrs:{btn_type:"default",btn_text:"+",btn_mode:!0},on:{changed:t.updateAvatar},scopedSlots:t._u([t.company.id&&t.company.website?{key:"after",fn:function(){return[e("div",{staticClass:"fc_photo_actions"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{size:"mini",type:"default",icon:"el-icon-refresh"},on:{click:function(e){return t.reFetchLogo()}}})],1)]},proxy:!0}:null],null,!0),model:{value:t.company.logo,callback:function(e){t.$set(t.company,"logo",e)},expression:"company.logo"}})],1)]),t._v(" "),e("div",{staticClass:"fc_company_info",staticStyle:{flex:"1"}},[t.isHeaderEditing||!t.company.id?[e("el-form",{staticClass:"fc_compact_form",attrs:{"label-position":"top",model:t.model}},[e("el-form-item",{attrs:{label:t.$t("Company Name (required)")}},[e("el-input",{attrs:{placeholder:t.$t("Company Name")},model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Company Email")}},[e("el-input",{attrs:{type:"email",placeholder:t.$t("Company Email")},model:{value:t.model.email,callback:function(e){t.$set(t.model,"email",e)},expression:"model.email"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Company Phone Number")}},[e("el-input",{attrs:{placeholder:t.$t("Phone Number")},model:{value:t.model.phone,callback:function(e){t.$set(t.model,"phone",e)},expression:"model.phone"}})],1)],1)]:[e("h3",[t._v("\n                    "+t._s(t.company.name)+"\n                    "),e("i",{staticClass:"el-icon el-icon-edit",staticStyle:{cursor:"pointer",color:"gray","margin-left":"10px"},on:{click:function(e){return t.enableEdit()}}})]),t._v(" "),t.domainName?e("div",{staticClass:"company_domain"},[e("a",{attrs:{target:"_blank",rel:"noopener",href:t.company.website}},[t._v(t._s(t.domainName)+" "),e("span",{staticClass:"fc_dash_extrernal dashicons dashicons-external"})])]):t._e(),t._v(" "),t.company.email||t.company.phone?e("div",{staticClass:"company_email"},[t.model.email?e("span",[t._v("\n                    "+t._s(t.company.email)+"\n                    "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.company.phone,expression:"company.phone"}],staticClass:"fc_middot"},[t._v("")])]):t._e(),t._v(" "),e("span",[t._v(t._s(t.model.phone))])]):t._e()]],2)]),t._v(" "),e("hr"),t._v(" "),e("h3",{staticClass:"fc_section_title"},[t._v(t._s(t.$t("About this company")))]),t._v(" "),e("div",{staticClass:"fc_company_about"},[e("el-form",{staticClass:"fc_compact_form",attrs:{"label-position":"top",model:t.model}},[e("el-form-item",{attrs:{label:t.$t("Website")}},[e("el-input",{attrs:{type:"url",placeholder:t.$t("website url")},model:{value:t.model.website,callback:function(e){t.$set(t.model,"website",e)},expression:"model.website"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Industry")}},[e("el-select",{attrs:{"allow-create":"",clearable:"",filterable:"",placeholder:t.$t("Company Industry")},model:{value:t.model.industry,callback:function(e){t.$set(t.model,"industry",e)},expression:"model.industry"}},t._l(t.appVars.company_categories,function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Type")}},[e("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("Relationship Type")},model:{value:t.model.type,callback:function(e){t.$set(t.model,"type",e)},expression:"model.type"}},t._l(t.appVars.company_types,function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Company Owner")}},[e("contact-selector",{attrs:{field:{size:"small",clearable:!0,pre_options:[t.company.owner]}},model:{value:t.model.owner_id,callback:function(e){t.$set(t.model,"owner_id",e)},expression:"model.owner_id"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Description")}},[e("el-input",{attrs:{type:"textarea",rows:3,placeholder:"Description"},model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Number of Employees")}},[e("el-input",{attrs:{min:0,type:"number",autocomplete:"new-password",placeholder:"Employees"},model:{value:t.model.employees_number,callback:function(e){t.$set(t.model,"employees_number",e)},expression:"model.employees_number"}})],1),t._v(" "),t.company.id?e("div",[e("h4",{staticStyle:{"font-size":"16px"}},[t._v("\n                    "+t._s(t.$t("Address"))+"\n                    "),e("i",{staticClass:"el-icon el-icon-edit",staticStyle:{cursor:"pointer",color:"gray","margin-left":"10px"},on:{click:function(e){t.show_address_field=!t.show_address_field}}})])]):e("el-form-item",[e("el-checkbox",{model:{value:t.show_address_field,callback:function(e){t.show_address_field=e},expression:"show_address_field"}},[t._v(t._s(t.$t("Add Address Info")))])],1),t._v(" "),t.show_address_field?[e("el-form-item",{attrs:{label:t.$t("Address Line 1")}},[e("el-input",{attrs:{placeholder:t.$t("Address Line 1"),autocomplete:"new-password"},model:{value:t.model.address_line_1,callback:function(e){t.$set(t.model,"address_line_1",e)},expression:"model.address_line_1"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Address Line 2")}},[e("el-input",{attrs:{placeholder:t.$t("Address Line 2"),autocomplete:"new-password"},model:{value:t.model.address_line_2,callback:function(e){t.$set(t.model,"address_line_2",e)},expression:"model.address_line_2"}})],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("City")}},[e("el-input",{attrs:{placeholder:t.$t("City"),autocomplete:"new-password"},model:{value:t.model.city,callback:function(e){t.$set(t.model,"city",e)},expression:"model.city"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("State")}},[e("el-input",{attrs:{placeholder:t.$t("State"),autocomplete:"new-password"},model:{value:t.model.state,callback:function(e){t.$set(t.model,"state",e)},expression:"model.state"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Postal Code")}},[e("el-input",{attrs:{placeholder:t.$t("Postal Code"),autocomplete:"new-password"},model:{value:t.model.postal_code,callback:function(e){t.$set(t.model,"postal_code",e)},expression:"model.postal_code"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Country")}},[e("el-select",{staticClass:"el-select-multiple",attrs:{clearable:"",filterable:"",autocomplete:"off",placeholder:t.$t("Select country")},model:{value:t.model.country,callback:function(e){t.$set(t.model,"country",e)},expression:"model.country"}},t._l(t.appVars.countries,function(i){return e("el-option",{key:i.code,attrs:{value:i.code,label:i.title}},[t._v("\n                                    "+t._s(i.title)+"\n                                ")])}),1)],1)],1)],1)]:t.company.id?e("p",[t._v("\n                "+t._s(t.getFormattedAddress(t.company)||t.$t("n/a"))+"\n            ")]):t._e(),t._v(" "),t.company.id?e("div",[e("h4",{staticStyle:{"font-size":"16px"}},[t._v("\n                    "+t._s(t.$t("Social Links"))+"\n                    "),e("i",{staticClass:"el-icon el-icon-edit",staticStyle:{cursor:"pointer",color:"gray","margin-left":"10px"},on:{click:function(e){t.show_social_urls=!t.show_social_urls}}})])]):e("el-form-item",[e("el-checkbox",{model:{value:t.show_social_urls,callback:function(e){t.show_social_urls=e},expression:"show_social_urls"}},[t._v(t._s(t.$t("Add Social Media URLs")))])],1),t._v(" "),t.show_social_urls?[e("el-form-item",{attrs:{label:t.$t("Linkedin Url")}},[e("el-input",{attrs:{type:"url",placeholder:t.$t("LinkedIn Company Page URL")},model:{value:t.model.linkedin_url,callback:function(e){t.$set(t.model,"linkedin_url",e)},expression:"model.linkedin_url"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Facebook Page Url")}},[e("el-input",{attrs:{type:"url",placeholder:t.$t("Facebook Company Page URL")},model:{value:t.model.facebook_url,callback:function(e){t.$set(t.model,"facebook_url",e)},expression:"model.facebook_url"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Twitter Url")}},[e("el-input",{attrs:{type:"url",placeholder:t.$t("Twitter Handle URL")},model:{value:t.model.twitter_url,callback:function(e){t.$set(t.model,"twitter_url",e)},expression:"model.twitter_url"}})],1)]:t.company.id?e("div",{staticClass:"fc_social_lists"},[e("el-input",{attrs:{size:"mini",readonly:"",placeholder:"n/a"},model:{value:t.company.linkedin_url,callback:function(e){t.$set(t.company,"linkedin_url",e)},expression:"company.linkedin_url"}},[e("template",{slot:"prepend"},[e("span",{staticClass:"dashicons dashicons-linkedin"})]),t._v(" "),t.company.linkedin_url?e("template",{slot:"append"},[e("a",{attrs:{target:"_blank",rel:"noopener",href:t.company.linkedin_url}},[e("span",{staticClass:"dashicons dashicons-external"})])]):t._e()],2),t._v(" "),e("el-input",{attrs:{size:"mini",readonly:"",placeholder:"n/a"},model:{value:t.company.facebook_url,callback:function(e){t.$set(t.company,"facebook_url",e)},expression:"company.facebook_url"}},[e("template",{slot:"prepend"},[e("span",{staticClass:"dashicons dashicons-facebook-alt"})]),t._v(" "),t.company.facebook_url?e("template",{slot:"append"},[e("a",{attrs:{target:"_blank",rel:"noopener",href:t.company.facebook_url}},[e("span",{staticClass:"dashicons dashicons-external"})])]):t._e()],2),t._v(" "),e("el-input",{attrs:{size:"mini",readonly:"",placeholder:"n/a"},model:{value:t.company.twitter_url,callback:function(e){t.$set(t.company,"twitter_url",e)},expression:"company.twitter_url"}},[e("template",{slot:"prepend"},[e("span",{staticClass:"dashicons dashicons-twitter"})]),t._v(" "),t.company.twitter_url?e("template",{slot:"append"},[e("a",{attrs:{target:"_blank",rel:"noopener",href:t.company.twitter_url}},[e("span",{staticClass:"dashicons dashicons-external"})])]):t._e()],2)],1):t._e(),t._v(" "),e("CustomFieldsForm",{attrs:{custom_values:t.model.custom_values}}),t._v(" "),e("el-form-item",{staticClass:"fc_company_save_wrap"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{disabled:t.updating||!t.isDirty,type:"success"},on:{click:function(e){return t.updateInfo()}}},[t.company.id?e("span",[t._v(t._s(t.$t("Update info")))]):e("span",[t._v(t._s(t.$t("Create Company")))])]),t._v(" "),t.is_drawer&&t.company.id?e("router-link",{attrs:{to:{name:"view_company",params:{company_id:t.company.id}}}},[t._v("\n                    "+t._s(t.$t("Go to company record"))+"\n                ")]):t._e()],1)],2)],1)])},[],!1,null,null,null).exports;var bs=e({name:"CompanyAssignSelector",props:["subscriber"],components:{},data:function(){return{company_search:"",companies:[],searched:!1,loading:!1,selectedIds:[],attaching:!1}},mounted:function(){this.fetchCompanies()},watch:{company_search:{handler:function(t,e){var i=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){i.fetchCompanies()},500)},immediate:!1}},methods:{fetchCompanies:function(){var t=this;this.loading=!0,this.selectedIds=[],this.$get("companies/search",{limit:10,search:this.company_search,subscriber_id:this.subscriber.id}).then(function(e){t.companies=e.results,t.searched=!0}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},attachCompanies:function(){var t=this;this.attaching=!0,this.$post("companies/attach-subscribers",{subscriber_ids:[this.subscriber.id],company_ids:this.selectedIds}).then(function(e){t.$notify.success(e.message),e.companies&&(t.each(e.companies,function(e){t.subscriber.companies.push(e)}),t.$emit("companiesAttached",e.companies))}).catch(function(e){t.handleError(e)}).finally(function(){t.attaching=!1})}},beforeDestroy:function(){this.searchTimeout&&clearTimeout(this.searchTimeout)}},function(){var t=this,e=t._self._c;return e("div",[e("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:t.$t("Search Companies")},model:{value:t.company_search,callback:function(e){t.company_search=e},expression:"company_search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetchCompanies},slot:"append"})],1),t._v(" "),t.loading?e("div",[e("el-skeleton",{attrs:{animated:!0,rows:3}})],1):t.searched&&!t.companies.length?e("div",[e("p",[t._v(t._s(t.$t("No companies found based on your search")))])]):e("div",{staticClass:"fc_companies"},[e("el-checkbox-group",{staticClass:"fc_rich_checkboxes",model:{value:t.selectedIds,callback:function(e){t.selectedIds=e},expression:"selectedIds"}},t._l(t.companies,function(i){return e("el-checkbox",{key:i.id,attrs:{label:i.id}},[e("div",{staticClass:"fc_company_card"},[e("div",{staticClass:"fc_company_body"},[e("div",{staticClass:"company_name"},[t._v("\n                            "+t._s(i.name)+"\n                        ")]),t._v(" "),e("div",{staticClass:"company_domain"},[t._v("\n                            "+t._s(i.website)+"\n                        ")]),t._v(" "),i.email||i.phone?e("div",{staticClass:"company_email"},[i.email?e("span",[t._v(t._s(i.email)+" "),e("span",{directives:[{name:"show",rawName:"v-show",value:i.phone,expression:"company.phone"}],staticClass:"fc_middot"},[t._v("")])]):t._e(),t._v(" "),e("span",[t._v(t._s(i.phone))])]):t._e()]),t._v(" "),e("div",{staticClass:"fc_company_logo fc_company_photo"},[e("img",{attrs:{src:i.logo,alt:""}})])])])}),1),t._v(" "),t.selectedIds.length?e("div",[e("div",{staticStyle:{padding:"10px 10px 20px"}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.attaching,expression:"attaching"}],attrs:{disabled:t.attaching,size:"small",type:"success"},on:{click:function(e){return t.attachCompanies()}}},[t._v(t._s(t.$t("Assign selected companies"))+"\n                    ("+t._s(t.selectedIds.length)+")\n                ")])],1)]):t._e()],1)],1)},[],!1,null,null,null);var ys=e({name:"ContactCompanies",props:["subscriber"],components:{CompanyCard:ms,CompanyInfoSide:vs,CompanyAssignSelector:bs.exports},data:function(){return{showingCompany:null,drawerVisible:!1,new_company:{owner_id:""+this.subscriber.id},newCompanyDrawer:!1,assignState:"existing"}},methods:{showCompanyDetails:function(t){this.showingCompany=t,this.drawerVisible=!0},showAddCompanyDrawer:function(){this.new_company={owner_id:""+this.subscriber.id},this.assignState="existing",this.newCompanyDrawer=!0},newCompanyAssigned:function(t){this.newCompanyDrawer=!1,this.new_company={owner_id:""+this.subscriber.id},this.subscriber.companies.push(t)},companyRemoved:function(t){this.subscriber.companies.splice(t,1)}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_sidebar_card fc_sidebar_card_customer"},[e("div",{staticClass:"fc_card_header"},[e("h3",[t._v("\n            "+t._s(t.$t("Companies"))+" "),t.subscriber.companies?e("span",[t._v("("+t._s(t.subscriber.companies.length)+")")]):t._e()]),t._v(" "),e("div",{staticClass:"fluentcrm-actions"},[e("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.showAddCompanyDrawer()}}},[t._v(t._s(t.$t("+ Add")))])],1)]),t._v(" "),e("div",{staticClass:"fc_sidebar_card_content"},[t.subscriber.companies&&t.subscriber.companies.length?e("div",{staticClass:"fc_companies"},t._l(t.subscriber.companies,function(i,n){return e("company-card",{key:i.id,attrs:{company:i,subscriber:t.subscriber},on:{showDetails:t.showCompanyDetails,removed:function(e){return t.companyRemoved(n)}}})}),1):e("div",{staticClass:"fc_full_box"},[e("div",{staticClass:"text-align-center",staticStyle:{padding:"10px 10px 20px"}},[e("p",[t._v(t._s(t.$t("Contact is not associated with any companies")))]),t._v(" "),e("el-button",{attrs:{size:"small",type:"default"},on:{click:function(e){return t.showAddCompanyDrawer()}}},[t._v(t._s(t.$t("Assign Company")))])],1)])]),t._v(" "),e("el-drawer",{staticClass:"fc_company_info_drawer",attrs:{"with-header":!0,size:t.globalDrawerSize,title:t.showingCompany?t.showingCompany.name:"","append-to-body":!0,visible:t.drawerVisible},on:{"update:visible":function(e){t.drawerVisible=e}}},[e("div",{staticStyle:{padding:"10px 15px"}},[t.drawerVisible?e("company-info-side",{attrs:{company:t.showingCompany,is_drawer:!0}}):t._e()],1)]),t._v(" "),e("el-drawer",{staticClass:"fc_company_info_drawer",attrs:{"with-header":!0,size:t.globalDrawerSize,title:"existing"==t.assignState?t.$t("Add existing company"):t.$t("Create company & Assign"),"append-to-body":!0,visible:t.newCompanyDrawer},on:{"update:visible":function(e){t.newCompanyDrawer=e}}},[t.newCompanyDrawer?e("div",{staticStyle:{padding:"10px 15px"}},[e("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[e("el-radio-group",{model:{value:t.assignState,callback:function(e){t.assignState=e},expression:"assignState"}},[e("el-radio-button",{attrs:{value:"existing",label:"existing"}},[t._v(t._s(t.$t("Add Existing")))]),t._v(" "),e("el-radio-button",{attrs:{value:"new",label:"new"}},[t._v(t._s(t.$t("Create New")))])],1)],1),t._v(" "),"existing"==t.assignState?e("div",[e("company-assign-selector",{attrs:{subscriber:t.subscriber},on:{companiesAttached:function(){t.newCompanyDrawer=!1}}})],1):e("div",[e("company-info-side",{attrs:{intended_contact_id:t.subscriber.id,company:t.new_company,is_drawer:!0},on:{companyCreated:t.newCompanyAssigned}})],1)]):t._e()])],1)},[],!1,null,null,null);var ws=e({name:"ContactOverViewSidebar",props:["subscriber","subscriber_id"],components:{ContactCompanies:ys.exports},watch:{subscriber_id:function(){this.fetchWidgets()}},computed:{hasWidgets:function(){return this.has_company_module||this.widget_count>0}},data:function(){return{loading:!1,top_widgets:[],other_widgets:[],widget_count:0,loading_widget:""}},methods:{fetchWidgets:function(){var t=this;this.loading=!0,this.$get("subscribers/".concat(this.subscriber_id,"/info-widgets")).then(function(e){t.top_widgets=e.widgets.top_widgets,t.other_widgets=e.widgets.other_widgets,t.widget_count=e.widgets.widgets_count,t.$emit("widgetsFetched",e.widgets.widgets_count)}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},fetchWidget:function(t,e){var i=this;this.loading_widget=e,this.$get("subscribers/".concat(this.subscriber_id,"/info-widgets"),{by_widget:e,page:t.current_page}).then(function(e){t.content=e.widget.content}).catch(function(t){i.handleError(t)}).finally(function(){i.loading_widget=!1})}},mounted:function(){this.fetchWidgets()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_contact_side"},[t._l(t.top_widgets,function(i,n){return e("div",{key:"top_widget_"+n,staticClass:"fc_sidebar_card fc_sidebar_card_customer"},[e("div",{staticClass:"fc_card_header"},[e("h3",[t._v(t._s(i.title))])]),t._v(" "),e("div",{staticClass:"fc_sidebar_card_content",domProps:{innerHTML:t._s(i.content)}}),t._v(" "),i.has_pagination?e("div",{staticClass:"fc_info_widget_nav",staticStyle:{"margin-top":"10px","text-align":"right"}},[e("el-pagination",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_widget===n,expression:"loading_widget === widgetKey"}],attrs:{small:"",layout:"total, prev, next","page-size":i.per_page,"current-page":i.current_page,total:i.total},on:{"current-change":function(e){return t.fetchWidget(i,n)},"update:currentPage":function(e){return t.$set(i,"current_page",e)},"update:current-page":function(e){return t.$set(i,"current_page",e)}}})],1):t._e()])}),t._v(" "),t.has_company_module&&t.subscriber?e("contact-companies",{attrs:{subscriber:t.subscriber}}):t._e(),t._v(" "),t._l(t.other_widgets,function(i,n){return e("div",{key:"other_widget_"+n,staticClass:"fc_sidebar_card fc_sidebar_card_customer"},[e("div",{staticClass:"fc_card_header"},[e("h3",[t._v(t._s(i.title))])]),t._v(" "),e("div",{staticClass:"fc_sidebar_card_content",domProps:{innerHTML:t._s(i.content)}}),t._v(" "),i.has_pagination?e("div",{staticClass:"fc_info_widget_nav",staticStyle:{"margin-top":"10px","text-align":"right"}},[e("el-pagination",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_widget===n,expression:"loading_widget === widgetKey"}],attrs:{small:"",layout:"total, prev, next","page-size":i.per_page,"current-page":i.current_page,total:i.total},on:{"current-change":function(e){return t.fetchWidget(i,n)},"update:currentPage":function(e){return t.$set(i,"current_page",e)},"update:current-page":function(e){return t.$set(i,"current_page",e)}}})],1):t._e()])}),t._v(" "),t.loading?t._e():[t.has_campaign_pro?t.hasWidgets?t._e():e("div",[e("div",{staticClass:"fc_sidebar_card text-align-center"},[e("div",{staticClass:"fc_card_header"},[e("h3",[t._v(t._s(t.$t("Additional Info")))])]),t._v(" "),e("div",{staticClass:"fc_sidebar_card_content",staticStyle:{padding:"10px 20px 20px",background:"white"}},[e("p",[t._v(t._s(t.$t("No_Additional_Info_Alert")))])])])]):e("div",[e("div",{staticClass:"fc_sidebar_card text-align-center"},[e("div",{staticClass:"fc_card_header"},[e("h3",[t._v(t._s(t.$t("Get more related contact info with Pro")))])]),t._v(" "),e("div",{staticClass:"fc_sidebar_card_content",staticStyle:{padding:"10px 20px 20px",background:"white"}},[e("p",[t._v(t._s(t.$t("Fluent_CRM_Pro_Alert")))]),t._v(" "),e("a",{staticClass:"button button-primary",attrs:{href:t.appVars.crm_pro_url,target:"_blank"}},[t._v(t._s(t.$t("Get FluentCRM Pro")))])])])])]],2)},[],!1,null,null,null);const Cs=e({name:"Profile",components:{ProfileHeader:ps,Confirm:d,OverViewSidebar:ws.exports},props:["id"],data:function(){return{subscriber:!1,loading:!1,profile_parts:window.fcAdmin.profile_sections,custom_fields:[],subscriber_meta:{},show_profile:!0,doing_action:!1,sidebarOpen:"yes",widgetsCount:0,hasSidebar:!0}},watch:{id:function(){this.fetch()}},computed:{lists:function(){return this.subscriber.lists.map(function(t){return t.title})},name:function(){return this.subscriber.first_name||this.subscriber.last_name?"".concat(this.subscriber.first_name||""," ").concat(this.subscriber.last_name||""):this.subscriber.email},showSidebar:function(){return this.hasSidebar&&"yes"==this.sidebarOpen},widgetTickerCount:function(){return this.has_company_module&&this.subscriber&&this.subscriber.companies&&this.subscriber.companies.length?this.widgetsCount+1:this.widgetsCount}},methods:{setup:function(t){var e=this,i=null==t?void 0:t.custom_values;i&&(Object.keys(i).forEach(function(t){var n=i[t];if(n){var s=e.custom_fields.find(function(e){return e.slug===t});!s||"select-multi"!==s.type&&"checkbox"!==s.type||"string"!=typeof n||(i[t]=n.split(", "))}}),t.custom_values=i),this.subscriber=t,this.show_profile||(this.show_profile=!0);var n=this.applyFilters("fluentcrm_profile_sections",window.fcAdmin.profile_sections,t);Object.keys(n).length!==Object.keys(this.profile_parts).length&&(this.profile_parts=n),this.changeTitle(t.full_name+" - Contact"),this.doAction("fluent_crm_subscriber_loaded",this)},fetch:function(){var t=this;this.loading=!0,this.show_profile=!1,this.$get("subscribers/".concat(this.id),{with:["stats","custom_fields","subscriber.custom_values"]}).then(function(e){t.custom_fields=e.custom_fields,t.setup(e.subscriber)}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},sidebarLoaded:function(t){this.widgetsCount=t},maybeCustomHandler:function(t){var e=this;"fluentcrm_profile_extended"==t.name&&(this.show_profile=!1,setTimeout(function(){e.show_profile=!0},100))},deleteContact:function(){var t=this;this.loading=!0,this.$del("subscribers/".concat(this.id)).then(function(e){t.$notify.success(e.message),t.$router.push({name:"subscribers"})}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},toggleSidebar:function(){this.sidebarOpen="yes"==this.sidebarOpen?"no":"yes",this.storage.set("fc_profile_sidebar",this.sidebarOpen)}},mounted:function(){var t=this;this.fetch(),this.changeTitle(this.$t("Profile")),this.sidebarOpen="no"==this.storage.get("fc_profile_sidebar","yes")?"no":"yes",this.$bus.$on("contact_custom_fields_updated",function(e){t.custom_fields=e})},beforeDestroy:function(){this.doAction("fluent_crm_leaving_profile",this.subscriber)}},function(){var t=this,e=t._self._c;return e("div",{class:{fc_side_closed:t.hasSidebar&&!t.showSidebar,fc_side_opened:t.showSidebar},staticStyle:{position:"relative"}},[e("el-row",{attrs:{gutter:30}},[e("el-col",{staticClass:"fc_contact_main_col",attrs:{xs:24,sm:t.showSidebar?18:24,md:t.showSidebar?18:24}},[e("div",{staticClass:"fluentcrm-contact-view fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"subscribers"}}},[t._v("\n                                "+t._s(t.$t("Contacts"))+"\n                            ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                                "+t._s(t.name)+"\n                            ")])],1)],1),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link"},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{"font-weight":"bold",cursor:"pointer"}})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("confirm",{attrs:{placement:"top-start",message:t.$t("Contact_Delete_Alert")},on:{yes:function(e){return t.deleteContact()}}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.$t("Delete Contact")))])])],1)],1)],1)],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_body fluentcrm-profile",staticStyle:{padding:"20px"}},[t.loading?e("el-skeleton",{attrs:{animated:""}},[e("template",{slot:"template"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:3}},[e("el-skeleton-item",{staticStyle:{width:"145px",height:"145px"},attrs:{variant:"circle"}})],1),t._v(" "),e("el-col",{attrs:{span:20}},[e("el-skeleton")],1)],1)],1)],2):t.subscriber?e("profile-header",{attrs:{subscriber:t.subscriber},on:{updateSubscriber:t.setup,fetch:t.fetch}}):t._e()],1),t._v(" "),e("div",{staticClass:"fluentcrm-profile"},[e("ul",{staticClass:"fluentcrm_profile_nav"},t._l(t.profile_parts,function(i,n){return e("router-link",{key:i.name+n,attrs:{custom:"",to:{name:i.name,hash:"#fluentcrm_sub_info_body",params:{id:t.id},query:i.query}},nativeOn:{click:function(e){return t.maybeCustomHandler(i)}},scopedSlots:t._u([{key:"default",fn:function(n){var s=n.navigate;return[e("li",{class:{item_active:t.$route.name==i.name&&(!i.query||t.$route.query.handler==i.query.handler)},domProps:{innerHTML:t._s(i.title)},on:{click:s}})]}}],null,!0)})}),1),t._v(" "),t.subscriber&&t.show_profile?e("div",{staticClass:"fluentcrm_sub_info_body"},[e("transition",[e("router-view",{key:"user_profile_route",attrs:{custom_fields:t.custom_fields,subscriber:t.subscriber,subscriber_id:t.id},on:{updateSubscriber:t.setup}})],1)],1):e("el-skeleton",{staticClass:"fc_skeleton_loader",staticStyle:{"margin-top":"20px"},attrs:{animated:""}},[e("template",{slot:"template"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:12}},[e("el-skeleton",{attrs:{rows:10}})],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-skeleton",{attrs:{rows:3}})],1)],1)],1)],2)],1)])]),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:t.showSidebar,expression:"showSidebar"}],staticClass:"fc_sidebar_col",attrs:{xs:24,sm:6,md:6}},[e("div",{staticClass:"fc_abs_sidebar_opened"},[e("el-button",{staticClass:"fc_sidebar_open_btn",attrs:{type:"info",size:"small"},on:{click:function(e){return t.toggleSidebar()}}},[e("i",{staticClass:"el-icon-arrow-right"})])],1),t._v(" "),e("over-view-sidebar",{directives:[{name:"show",rawName:"v-show",value:t.show_profile,expression:"show_profile"}],attrs:{subscriber:t.subscriber,subscriber_id:t.id},on:{widgetsFetched:t.sidebarLoaded}}),t._v(" "),t.loading?e("div",[e("el-skeleton",{staticClass:"fc_skeleton_loader",staticStyle:{"margin-bottom":"20px"},attrs:{animated:""}}),t._v(" "),e("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{animated:""}})],1):t._e()],1)],1),t._v(" "),t.hasSidebar&&!t.showSidebar?e("div",{staticClass:"fc_abs_sidebar"},[e("el-badge",{attrs:{value:t.widgetTickerCount}},[e("el-button",{staticClass:"fc_sidebar_open_btn",attrs:{type:"info",size:"small"},on:{click:function(e){return t.toggleSidebar()}}},[e("i",{staticClass:"el-icon-arrow-left"})])],1)],1):t._e()],1)},[],!1,null,null,null).exports;const $s=e({name:"Importer",data:function(){return{activeTab:"Csv",activeCsv:1,activeUser:1,uploadedFile:null,uploadUrl:window.ajaxurl+"?action=fluentcrm-post-csv-upload",tags:[],selectedTags:[],lists:[],selectedLists:[],csvColumns:[],tableColumns:[],csvMapping:[],roles:[],tableData:[],checkAll:!1,isIndeterminate:!1,selectedRoles:[],tableColumn:["date","name","address"],IsDataInDatabase:""}},methods:{tabClicked:function(t,e){this.activeTab=t.name},next:function(){var t="active"+this.activeTab;("Csv"!==this.activeTab||1!==this.active||this.uploadedFile)&&("User"!==this.activeTab||1!==this[t]||this.selectedRoles.length)&&this.active++>2&&(this[t]=0)},prev:function(){var t="active"+this.activeTab;0!==this[t]&&this[t]--},fileUploaded:function(t,e,i){this.csvColumns=t.headers,this.tableColumns=t.columns,this.uploadedFile=t.file;var n=[];for(var s in this.csvColumns)n.push({csv:this.csvColumns[s],table:null});this.csvMapping=n},fileRemoved:function(t,e){this.uploadedFile=null},confirmCsv:function(){var t=this,e=this.csvMapping.filter(function(t){return t.table});e.length?this.$post("import/csv-import",{mappings:e,tags:this.selectedTags,lists:this.selectedLists,file:this.uploadedFile}).then(function(e){t.$notify({title:t.$t("Success"),type:"success",offset:20,message:t.$t("Map_Subscribers_is")})}).catch(function(t){return console.log(t)}):this.$notify({title:this.$t("Warning"),type:"warning",offset:20,message:this.$t("No mapping found.")})},handleCheckAllChange:function(t){this.selectedRoles=t?Object.keys(this.roles):[],this.isIndeterminate=!1},fluentcrmCheckedRolesChange:function(t){var e=Object.keys(this.roles),i=t.length;this.checkAll=i===e.length,this.isIndeterminate=i>0&&i<e.length}},created:function(){var t=this;this.$get("tags").then(function(e){t.tags=e}).catch(function(e){return t.handleError(e)}),this.$get("lists").then(function(e){t.lists=e}).catch(function(e){return t.handleError(e)}),this.$get("reports/roles").then(function(e){t.roles=e.roles}).catch(function(e){return t.handleError(e)})}},function(){var t=this,e=t._self._c;return e("div",[e("el-tabs",{attrs:{type:"border-card",value:t.activeTab},on:{"tab-click":t.tabClicked}},[e("el-tab-pane",{attrs:{label:t.$t("CSV"),name:"Csv"}},[e("el-steps",{attrs:{active:t.activeCsv,"finish-status":"success","align-center":""}},[e("el-step",{attrs:{title:t.$t("Step 1")}}),t._v(" "),e("el-step",{attrs:{title:t.$t("Step 2")}})],1),t._v(" "),1===t.activeCsv?e("div",{staticStyle:{"text-align":"center"}},[e("h3",[t._v(t._s(t.$t("Upload Your CSV file"))+": ")]),t._v(" "),e("el-row",[e("el-col",[e("el-upload",{attrs:{drag:"",accept:".csv",limit:1,action:t.uploadUrl,"on-success":t.fileUploaded,"on-remove":t.fileRemoved}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v(t._s(t.$t("Drop file here or"))+" "),e("em",[t._v(t._s(t.$t("click to upload")))])])])],1)],1)],1):t._e(),t._v(" "),2===t.activeCsv?e("div",[t._l(t.csvMapping,function(i,n){return e("el-row",{key:n,attrs:{gutter:20}},[e("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[e("el-input",{attrs:{readonly:""},model:{value:t.csvMapping[n].csv,callback:function(e){t.$set(t.csvMapping[n],"csv",e)},expression:"csvMapping[key].csv"}})],1),t._v(" "),e("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[e("el-select",{attrs:{placeholder:t.$t("Select")},model:{value:t.csvMapping[n].table,callback:function(e){t.$set(t.csvMapping[n],"table",e)},expression:"csvMapping[key].table"}},t._l(t.tableColumns,function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)],1)}),t._v(" "),e("el-row",{staticStyle:{"margin-top":"10px"}},[e("div",{staticStyle:{color:"#606266"}},[t._v(t._s(t.$t("Select Tags")))]),t._v(" "),e("div",[e("el-select",{attrs:{multiple:"",placeholder:t.$t("Select")},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}},t._l(t.tags,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1)]),t._v(" "),e("el-row",[e("div",{staticStyle:{color:"#606266"}},[t._v(t._s(t.$t("Select Lists")))]),t._v(" "),e("div",[e("el-select",{attrs:{multiple:"",placeholder:t.$t("Select")},model:{value:t.selectedLists,callback:function(e){t.selectedLists=e},expression:"selectedLists"}},t._l(t.lists,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1)])],2):t._e(),t._v(" "),e("div",{staticStyle:{"margin-top":"10px"}},[t.activeCsv>1?e("el-button",{attrs:{size:"small"},on:{click:t.prev}},[t._v(t._s(t.$t("Prev step")))]):t._e(),t._v(" "),t.activeCsv<2?e("el-button",{attrs:{size:"small"},on:{click:t.next}},[t._v(t._s(t.$t("Next step")))]):t._e(),t._v(" "),e("el-button",{staticStyle:{float:"right"},attrs:{disabled:2!==t.activeCsv,size:"small",type:"primary"},on:{click:t.confirmCsv}},[t._v(t._s(t.$t("Confirm"))+"\n                ")])],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:t.$t("WP Users"),name:"User"}},[e("el-steps",{attrs:{active:t.activeUser,"finish-status":"success","align-center":""}},[e("el-step",{attrs:{title:t.$t("Step 1")}}),t._v(" "),e("el-step",{attrs:{title:t.$t("Step 2")}})],1),t._v(" "),1===t.activeUser?e("div",{staticStyle:{"text-align":"center"}},[e("h3",[t._v(t._s(t.$t("Select by Roles"))+": ")]),t._v(" "),e("el-row",[e("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v(t._s(t.$t("All"))+"\n                    ")]),t._v(" "),e("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),e("el-checkbox-group",{staticClass:"fluentcrm-subscribers-import-check",on:{change:t.fluentcrmCheckedRolesChange},model:{value:t.selectedRoles,callback:function(e){t.selectedRoles=e},expression:"selectedRoles"}},t._l(t.roles,function(i,n){return e("el-checkbox",{key:n,attrs:{label:n}},[t._v(t._s(i.name)+"\n                        ")])}),1)],1)],1):t._e(),t._v(" "),2===t.activeUser?e("div",[e("el-row",[e("h4",[t._v(t._s(t.$t("User data from database")))]),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Available"),data:t.tableData}},t._l(t.tableColumn,function(t,i){return e("el-table-column",{key:i,attrs:{prop:t,label:t,sortable:"",width:"auto"}})}),1),t._v(" "),e("el-form",[e("el-form-item",{attrs:{label:t.$t("Tags")}},[e("el-select",{attrs:{multiple:"",placeholder:t.$t("Select")},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}},t._l(t.tags,function(t){return e("el-option",{key:t.slug,attrs:{label:t.title,value:t.slug}})}),1)],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Lists")}},[e("el-select",{attrs:{multiple:"",placeholder:t.$t("Select")},model:{value:t.selectedLists,callback:function(e){t.selectedLists=e},expression:"selectedLists"}},t._l(t.lists,function(t){return e("el-option",{key:t.slug,attrs:{label:t.title,value:t.slug}})}),1)],1)],1),t._v(" "),e("el-radio-group",{staticClass:"fluentcrm-subscribers-import-radio",model:{value:t.IsDataInDatabase,callback:function(e){t.IsDataInDatabase=e},expression:"IsDataInDatabase"}},[e("ul",[e("li",[e("el-radio",{attrs:{label:"skip"}},[t._v(t._s(t.$t("Skip if already in DB")))])],1),t._v(" "),e("li",[e("el-radio",{attrs:{label:"update"}},[t._v(t._s(t.$t("Update if already in DB")))])],1)])])],1)],1):t._e(),t._v(" "),e("div",{staticStyle:{"margin-top":"10px"}},[t.activeUser>1?e("el-button",{attrs:{size:"small"},on:{click:t.prev}},[t._v(t._s(t.$t("Prev step")))]):t._e(),t._v(" "),t.activeUser<2?e("el-button",{attrs:{size:"small"},on:{click:t.next}},[t._v(t._s(t.$t("Next step")))]):t._e(),t._v(" "),e("el-button",{staticStyle:{float:"right"},attrs:{disabled:2!==t.activeUser,size:"small",type:"primary"},on:{click:t.confirmCsv}},[t._v("\n                    "+t._s(t.$t("Confirm"))+"\n                ")])],1)],1)],1)],1)},[],!1,null,null,null).exports;const ks=e({name:"ContactGroups",data:function(){return{router_name:this.$route.name,menu_items:[{title:this.$t("Contacts"),route:"subscribers",icon:"el-icon-user"},{title:this.$t("Companies"),route:"companies",icon:"el-icon-office-building",item_class:this.appVars.addons.company_module?"":"fc_item_hidden"},{title:this.$t("Lists"),route:"lists",icon:"el-icon-files"},{title:this.$t("Tags"),route:"tags",icon:"el-icon-price-tag"},{title:this.$t("Dynamic Segments"),route:"dynamic_segments",icon:"el-icon-cpu"}]}},watch:{"$route.name":function(){this.router_name=this.$route.name}},methods:{changeMenu:function(t){jQuery(".fc_segment_menu li").removeClass("is-active"),jQuery(".fc_segment_menu li.fc_item_"+t).addClass("is-active")}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_settings_wrapper"},[e("el-menu",{staticClass:"fc_segment_menu",staticStyle:{"margin-bottom":"10px"},attrs:{mode:"horizontal",router:!0,"default-active":t.router_name}},t._l(t.menu_items,function(i){return e("el-menu-item",{key:i.route,class:"fc_item_"+i.route+" "+(i.item_class||""),attrs:{route:{name:i.route},index:i.route}},[e("i",{class:i.icon}),t._v(" "),e("span",[t._v(t._s(i.title))])])}),1),t._v(" "),e("div",{staticClass:"fc_setting_wrap"},[e("router-view",{on:{changeMenu:t.changeMenu}})],1)],1)},[],!1,null,null,null).exports;const xs=e({name:"ActionMenu",props:{type:{type:String,required:!0},api:{type:Object,required:!0}},components:{Adder:ts},data:function(){return{adder:!1}},methods:{toggle:function(t){this[t]=!this[t]},close:function(t){this[t]=!1},fetch:function(t){this.$emit("fetch",t)},listeners:function(){var t=this,e="edit-"+this.type;this.$bus.$on(e,function(){t.adder=!0})}},mounted:function(){this.listeners()}},function(){var t=this,e=t._self._c;return e("div",{},[e("el-button-group",[e("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"primary"},on:{click:function(e){return t.toggle("adder")}}},[t._v("\n            "+t._s(t.$t("Create"))+" "+t._s(t._f("ucFirst")(t.trans(t.type)))+"\n        ")])],1),t._v(" "),e("adder",{attrs:{api:t.api,type:t.type,visible:t.adder},on:{fetch:t.fetch,close:function(e){return t.close("adder")}}})],1)},[],!1,null,null,null).exports;function Ss(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,s,a,o,r=[],l=!0,c=!1;try{if(a=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=a.call(i)).done)&&(r.push(n.value),r.length!==e);l=!0);}catch(t){c=!0,s=t}finally{try{if(!l&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(c)throw s}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return As(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?As(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function As(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}const Es={name:"DoubleOptionIn",props:{listId:{type:Number,default:null},listName:{type:String,default:""},drawerKey:{type:Number,default:0}},components:{FormBuilder:Gt},watch:{drawerKey:function(t){this.listId&&(this.fetchSettings(),this.changeTitle(this.$t("Double Opt-in Settings")))}},data:function(){return{btnFromLoading:!1,loading:!1,settings:{},settings_loaded:!1,fields:{},global_double_optin:"yes"}},methods:{save:function(){var t=this,e={settings:this.settings,list_id:this.listId};this.listId&&(e.global_double_optin=this.global_double_optin),this.btnFromLoading=!0,this.$put("setting/double-optin",e).then(function(e){t.$notify.success({title:t.$t("Great!"),message:e.message,offset:19})}).catch(function(e){t.handleError(e)}).finally(function(){t.btnFromLoading=!1,t.settings_loaded=!0})},fetchSettings:function(){var t=this;this.loading=!0,this.settings={},this.fields={},this.$get("setting/double-optin",{with:["settings_fields"],list_id:this.listId}).then(function(e){if(t.settings=e.settings,t.fields=e.settings_fields,t.global_double_optin=e.global_double_optin?e.global_double_optin:"yes",t.listId){var i=["tag_based_redirect"];t.fields=Object.entries(t.fields).reduce(function(t,e){var n=Ss(e,2),s=n[0],a=n[1];return i.includes(s)||(t[s]=a),t},{})}}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1,t.settings_loaded=!0})}},mounted:function(){this.fetchSettings(),this.changeTitle(this.$t("Double Opt-in Settings"))}};var Ts=i(5797),Ps={insert:"head",singleton:!1};a()(Ts.A,Ps);Ts.A.locals;const Os=e(Es,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[t.listName?e("h3",[t._v(t._s(t.$t("Double Opt-in Email Settings"))+" "),e("br"),e("span",[t._v("("+t._s(t.listName)+")")])]):e("h3",[t._v(t._s(t.$t("Double Opt-in Email Settings Details")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{attrs:{type:"success",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.save}},[t._v("\n                "+t._s(t.$t("Save Settings"))+"\n            ")])],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around"},[e("div",{staticClass:"settings-section"},[t.listId?[e("el-radio-group",{staticClass:"mb-10",staticStyle:{"margin-bottom":"10px"},model:{value:t.global_double_optin,callback:function(e){t.global_double_optin=e},expression:"global_double_optin"}},[e("el-radio",{attrs:{label:"yes"}},[t._v("\n                    "+t._s(t.$t("Use Global Double Opt-in Settings"))+"\n                ")]),t._v(" "),e("el-radio",{attrs:{label:"no"}},[t._v(t._s(t.$t("Use List Specific Double Opt-in Settings")))])],1),t._v(" "),e("div",{staticStyle:{"margin-bottom":"20px"}},[e("p",[e("strong",[t._v(t._s(t.$t("Global Double Opt-in Settings"))+":")]),t._v(" "+t._s(t.$t("When selected, this list will adhere to the global double opt-in configuration.")))]),t._v(" "),e("p",[e("strong",[t._v(t._s(t.$t("List-Specific Double Opt-in Settings"))+":")]),t._v(" "+t._s(t.$t("When selected, subscribers added to this list will follow the list-specific double opt-in configuration. If no list-specific settings are configured, the global double opt-in settings will apply.")))])]),t._v(" "),e("hr",{staticStyle:{"margin-bottom":"25px"}}),t._v(" "),"no"==t.global_double_optin?[t.settings_loaded?e("form-builder",{attrs:{fields:t.fields,formData:t.settings}}):t._e()]:t._e()]:[t.settings_loaded?e("form-builder",{attrs:{fields:t.fields,formData:t.settings}}):t._e()]],2),t._v(" "),e("el-button",{attrs:{type:"success",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.save}},[t._v("\n            "+t._s(t.$t("Save Settings"))+"\n        ")])],1)])},[],!1,null,null,null).exports;const Ds=e({name:"Lists",components:{Confirm:d,ActionMenu:xs,ContactHeaderPopNav:Vn,DoubleOptInSettings:Os,Pagination:m},data:function(){return{loading:!1,exportLoading:!1,lists:[],api:{store:"lists"},sortBy:"id",sortType:"DESC",search:"",selectedLists:[],selection:!1,selectionCount:0,drawer:!1,drawerKey:0,selectedListId:null,selectedListName:"",pagination:{total:0,per_page:10,current_page:1},showImportDrawer:!1,importStep:1,listsToImport:[]}},methods:{openDoubleOptInDrawer:function(t){this.selectedListId=t,this.selectedListName=this.lists.find(function(e){return e.id===t}).title,this.drawerKey++,this.drawer=!0},fetch:function(){this.loading=!0,this.fetchLists()},fetchLists:function(){var t=this;this.pagination.per_page=parseInt(this.storage.get("list_perpage",10))||10,this.$get("lists",{with:["subscribersCount"],sort_by:this.sortBy,sort_order:this.sortType,search:this.search,per_page:this.pagination.per_page,page:this.pagination.current_page}).then(function(e){t.lists=e.lists,t.pagination.total=e.pagination.total}).finally(function(){t.loading=!1,t.selection=!1})},edit:function(t){this.$bus.$emit("edit-list",t),this.$bus.$emit("renew_options","list")},handleExport:function(){"all"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"selected")?this.fetchAllListsForExport():this.exportListsToCsv(this.selectedLists)},fetchAllListsForExport:function(){var t=this;this.exportLoading=!0,this.$notify.info({title:this.$t("Preparing Export"),message:this.$t("Fetching all lists for export..."),offset:19}),this.$get("lists",{all_lists:1,search:this.search}).then(function(e){t.exportListsToCsv(e.all_lists)}).catch(function(e){t.handleError(e),t.$notify.error({title:t.$t("Export Failed"),message:t.$t("Failed to fetch lists for export"),offset:19})}).finally(function(){t.exportLoading=!1})},exportListsToCsv:function(t){var e=this,i=["id","title","slug","description"].join(",")+"\n";t.forEach(function(t){var n=[t.id,e.escapeCsvValue(t.title),e.escapeCsvValue(t.slug||""),e.escapeCsvValue(t.description||"")].join(",");i+=n+"\n"});var n=new Blob([i],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(n),a=document.createElement("a");a.setAttribute("href",s),a.setAttribute("download","fluent-crm-lists-export-"+(new Date).toISOString().slice(0,19).replace(/[T:.]/g,"-")+".csv"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(function(){e.$notify.closeAll()},2e3),this.$notify.success({title:this.$t("Export Successful"),message:this.$t("Lists exported successfully"),offset:19})},handleElUploadChange:function(t){var e=this,i=t.raw||t.file&&t.file.raw||t.file;if(i){var n=new FileReader;n.onload=function(t){var i=t.target.result.split(/\r?\n/).filter(function(t){return t.trim()});if(i.length<2)e.$notify.info({title:e.$t("Info"),message:e.$t("CSV file is empty or invalid"),offset:19});else{var n=i[0].split(",").map(function(t){return t.trim().toLowerCase()}),s=n.findIndex(function(t){return"title"===t}),a=n.findIndex(function(t){return"description"===t||"internal notes"===t});if(-1!==s){var o=i.slice(1).map(function(t){var e=t.split(",");return{title:e[s]?e[s].trim():"",description:-1!==a&&e[a]?e[a].trim():"",slug:e[s]?e[s].trim().toLowerCase().replace(/\s+/g,"-"):""}}).filter(function(t){return t.title});e.listsToImport=o,e.importStep=2,e.$notify.success({title:e.$t("Success"),message:e.$t("Ready to import ")+o.length+" "+e.$t("lists"),offset:19})}else e.$notify.info({title:e.$t("Info"),message:e.$t('CSV must have a "title" column'),offset:19})}},n.readAsText(i)}},resetImportStage:function(){this.importStep=1,this.listsToImport=[]},handleImport:function(){this.showImportDrawer=!0},submitToBackend:function(){var t=this;this.listsToImport.length>0?this.$post("lists/bulk",{lists:this.listsToImport}).then(function(e){t.$notify.success({title:t.$t("Success"),message:t.$t("Lists imported successfully"),offset:19}),t.fetch(),t.showImportDrawer=!1,t.listsToImport=[]}).catch(function(e){t.handleError(e),t.$notify.error({title:t.$t("Error"),message:t.$t("Failed to import lists"),offset:19})}):this.$notify.info({title:this.$t("Info"),message:this.$t("No lists to import"),offset:19})},handleImportDrawerClose:function(t){this.importStep=1,this.listsToImport=[],this.showImportDrawer=!1,"function"==typeof t&&t()},downloadSampleCsv:function(){var t=new Blob(["title,description\nVIP,Very Important Person\ntest,Test List\ndemo,Demo List\n"],{type:"text/csv"}),e=window.URL.createObjectURL(t),i=document.createElement("a");i.style.display="none",i.href=e,i.download="sample-lists.csv",document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(e)},100)},escapeCsvValue:function(t){return null==t?"":(((t=String(t)).includes(",")||t.includes('"')||t.includes("\n"))&&(t=t.replace(/"/g,'""'),t='"'.concat(t,'"')),t)},remove:function(t){var e=this;this.$del("lists/".concat(t)).then(function(t){e.fetch(),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19}),e.$bus.$emit("renew_options","list")})},doBulkAction:function(){var t=this,e=[];this.each(this.selectedLists,function(t){e.push(t.id)}),this.$post("lists/do-bulk-action",{listIds:e}).then(function(e){t.$notify.success(e.message),t.fetch(),t.$bus.$emit("renew_options","list")}).catch(function(e){t.handleError(e)}).finally(function(){})},handleSortable:function(t){"descending"===t.order?(this.sortBy=t.prop,this.sortType="DESC"):(this.sortBy=t.prop,this.sortType="ASC"),this.fetch()},onSelection:function(t){this.selection=!!t.length,this.selectedLists=t,this.selectionCount=t.length}},mounted:function(){this.fetch(),this.changeTitle(this.$t("Lists")),this.$emit("changeMenu","lists")}},function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"fluentcrm-lists fluentcrm_min_bg fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[e("contact-header-pop-nav",{attrs:{head_title:t.$t("Lists")}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.pagination.total,expression:"pagination.total"}],staticClass:"ff_small"},[t._v("("+t._s(t.pagination.total)+")")])],1),t._v(" "),e("p",[t._v(t._s(t.$t("Lis_List_acoycYcalaa")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("div",{staticClass:"fc_right_search"},[e("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),t.hasPermission("fcrm_manage_contact_cats")?e("action-menu",{attrs:{type:"list",api:t.api},on:{fetch:t.fetch}}):t._e(),t._v(" "),e("el-popover",{attrs:{trigger:"click",width:240,placement:"bottom","popper-class":""},scopedSlots:t._u([{key:"reference",fn:function(){return[e("el-button",{staticStyle:{padding:"8px 0px",border:"none"},attrs:{title:t.$t("More")}},[e("i",{staticClass:"el-icon-more",staticStyle:{rotate:"90deg"}})])]},proxy:!0}])},[t._v(" "),e("div",[t.hasPermission("fcrm_manage_contact_cats")?e("el-button",{attrs:{type:"default",size:"mini",icon:"el-icon-download",loading:t.exportLoading},on:{click:function(e){return t.handleExport("all")}}},[t._v("\n                            "+t._s(t.$t("Export All Lists"))+"\n                        ")]):t._e(),t._v(" "),t.hasPermission("fcrm_manage_contact_cats")?e("el-button",{attrs:{type:"default",size:"mini",icon:"el-icon-upload",loading:t.exportLoading},on:{click:function(e){return t.handleImport()}}},[t._v("\n                            "+t._s(t.$t("Import"))+"\n                        ")]):t._e()],1)])],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_body",staticStyle:{position:"relative"}},[t.loading?e("div",{staticClass:"fc_loading_bar",attrs:{slot:"before_contacts_table"},slot:"before_contacts_table"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):e("div",{staticClass:"lists-table"},[t.hasPermission("fcrm_manage_contact_cats_delete")?e("el-row",[e("el-col",{attrs:{md:12,sm:24}},[t.selectedLists.length&&t.selection?e("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.doBulkAction()}}},[e("el-button",{staticStyle:{margin:"12px 5px 10px 16px"},attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[t._v("\n                                "+t._s(t.$t("Delete Selected"))+"\n                            ")])],1):t._e(),t._v("\n                        \n                    ")],1)],1):t._e(),t._v(" "),e("el-table",{attrs:{"empty-text":t.$t("No Data Found"),border:"","default-sort":{prop:t.sortBy,order:"DESC"==t.sortType?"descending":"ascending"},data:t.lists},on:{"selection-change":t.onSelection,"sort-change":t.handleSortable}},[t.hasPermission("fcrm_manage_contact_cats_delete")?e("el-table-column",{attrs:{type:"selection"}}):t._e(),t._v(" "),e("el-table-column",{attrs:{property:"id",sortable:"custom",label:t.$t("ID"),width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s(e.row.id)+"\n                        ")]}}])}),t._v(" "),e("el-table-column",{attrs:{"min-width":200,property:"title",sortable:"custom",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"list",params:{listId:i.row.id}}}},[e("h3",{staticClass:"no-margin url"},[t._v("\n                                    "+t._s(i.row.title)+"\n                                ")])]),t._v(" "),e("span",{staticClass:"list-created"},[t._v("\n                            "+t._s(i.row.description)+"\n                        ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:200,label:t.$t("Subscribers")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("h4",{staticClass:"no-margin"},[t._v("\n                                "+t._s(i.row.subscribersCount)+" of "+t._s(i.row.totalCount)+"\n                            ")]),t._v("\n                            "+t._s(t.$t("Subscribed"))+"\n                        ")]}}])}),t._v(" "),e("el-table-column",{attrs:{width:200,label:t.$t("Created")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(i.row.created_at)))])]}}])}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"text-align-right d-flex"},[t.hasPermission("fcrm_manage_contact_cats")?e("el-button",{staticClass:"mr-5",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.edit(i.row)}}}):t._e(),t._v(" "),t.hasPermission("fcrm_manage_contact_cats")?e("el-button",{staticClass:"mr-5 ml-0",attrs:{title:t.$t("Double Optin Settings"),type:"primary",size:"mini",icon:"el-icon-s-tools"},on:{click:function(e){return t.openDoubleOptInDrawer(i.row.id)}}}):t._e(),t._v(" "),t.hasPermission("fcrm_manage_contact_cats_delete")?e("confirm",{on:{yes:function(e){return t.remove(i.row.id)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1):t._e()],1)]}}])})],1),t._v(" "),e("el-row",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[t.hasPermission("fcrm_manage_contact_cats_delete")?e("el-col",{attrs:{md:12,sm:24}},[t.selectedLists.length&&t.selection?e("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.doBulkAction()}}},[e("el-button",{staticStyle:{margin:"12px 5px 10px 18px"},attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[t._v("\n                                "+t._s(t.$t("Delete Selected"))+"\n                            ")])],1):t._e(),t._v("\n                        \n                    ")],1):t._e(),t._v(" "),e("el-col",[e("pagination",{staticStyle:{"margin-bottom":"15px"},attrs:{pagination:t.pagination,hide_on_single:!1,extra_sizes:[200,250,300,400,600]},on:{per_page_change:function(e){t.storage.set("list_perpage",e)},fetch:t.fetchLists}})],1)],1)],1)],1)]),t._v(" "),e("el-drawer",{attrs:{"append-to-body":!0,size:"60%",title:"Double OptIn Settings",visible:t.drawer,"with-header":!1},on:{"update:visible":function(e){t.drawer=e}}},[e("double-opt-in-settings",{attrs:{drawerKey:t.drawerKey,listId:t.selectedListId,listName:t.selectedListName},on:{close:function(e){t.drawer=!1}}})],1),t._v(" "),t.hasPermission("fcrm_manage_contact_cats")?e("el-drawer",{attrs:{title:t.$t("Import Lists"),"append-to-body":"",visible:t.showImportDrawer,size:"40%",direction:"rtl"},on:{"update:visible":function(e){t.showImportDrawer=e},close:t.handleImportDrawerClose}},[1==t.importStep?e("div",[0===t.listsToImport.length?e("div",[e("div",{staticStyle:{margin:"20px"}},[e("el-upload",{attrs:{"show-file-list":!1,"auto-upload":!1,accept:".csv","on-change":t.handleElUploadChange,drag:"",action:"/mock-upload"}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v(t._s(t.$t("Upload a CSV file to import lists")))]),t._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n                            "+t._s(t.$t("Only CSV files are allowed"))),e("br"),t._v("\n                            "+t._s(t.$t("You can download a sample CSV file"))+"\n                            "),e("el-button",{attrs:{type:"text"},on:{click:t.downloadSampleCsv}},[t._v(t._s(t.$t("Download Sample CSV")))])],1)])],1)]):t._e()]):t._e(),t._v(" "),2==t.importStep&&t.listsToImport.length>0?e("div",[e("div",{staticClass:"tags-preview"},[e("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"10px","margin-left":"10px"}},[e("h4",{staticStyle:{margin:"0"}},[t._v(t._s(t.$t("Lists to Import"))+" ("+t._s(t.listsToImport.length)+")")])]),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listsToImport}},[e("el-table-column",{attrs:{prop:"title",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-input",{attrs:{size:"small"},model:{value:i.row.title,callback:function(e){t.$set(i.row,"title",e)},expression:"scope.row.title"}})]}}],null,!1,3829172505)}),t._v(" "),e("el-table-column",{attrs:{prop:"slug",label:t.$t("Slug")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-input",{attrs:{size:"small"},model:{value:i.row.slug,callback:function(e){t.$set(i.row,"slug",e)},expression:"scope.row.slug"}})]}}],null,!1,2525143668)}),t._v(" "),e("el-table-column",{attrs:{prop:"description",label:t.$t("Internal Subtitle")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-input",{attrs:{size:"small"},model:{value:i.row.description,callback:function(e){t.$set(i.row,"description",e)},expression:"scope.row.description"}})]}}],null,!1,1775882111)})],1)],1),t._v(" "),e("div",{staticStyle:{"margin-top":"20px","margin-left":"10px","margin-bottom":"20px"}},[e("el-button",{attrs:{type:"default",size:"small"},on:{click:function(e){return t.resetImportStage()}}},[t._v("\n                    "+t._s(t.$t("Back"))+"\n                ")]),t._v(" "),e("el-button",{attrs:{type:"primary",size:"small",disabled:0===t.listsToImport.length},on:{click:function(e){return t.submitToBackend()}}},[t._v("\n                    "+t._s(t.$t("Create Lists"))+"\n                ")])],1)]):t._e()]):t._e()],1)},[],!1,null,null,null).exports;const Fs=e({name:"Tags",components:{Confirm:d,ActionMenu:xs,Pagination:m,ContactHeaderPopNav:Vn},data:function(){return{loading:!1,exportLoading:!1,api:{store:"tags"},tags:[],sortBy:"id",search:"",sortType:"DESC",pagination:{total:0,per_page:10,current_page:1},selectedTags:[],selectionCount:0,importStep:1,showImportDrawer:!1,processedFiles:[],tagsToImport:[]}},methods:{handleImport:function(){this.showImportDrawer=!0},submitToBackend:function(){var t=this;this.tagsToImport.length>0?this.$post("tags/bulk",{tags:this.tagsToImport}).then(function(e){t.$notify.success({title:t.$t("Success"),message:t.$t("Tags imported successfully"),offset:19}),t.fetch(),t.showImportDrawer=!1,t.tagsToImport=[]}).catch(function(e){t.$notify.error({title:t.$t("Error"),message:t.$t("Failed to import tags"),offset:19}),console.error("Error importing tags:",e)}):this.$notify.info({title:this.$t("Info"),message:this.$t("No tags to import"),offset:19})},fetch:function(){var t=this;this.loading=!0,this.$get("tags",{sort_by:this.sortBy,sort_order:this.sortType,per_page:this.pagination.per_page,page:this.pagination.current_page,search:this.search}).then(function(e){t.tags=e.tags.data,t.pagination.total=e.tags.total,t.storage.get("_tags_per_page")||t.storage.set("_tags_per_page",t.pagination.per_page)}).catch(function(e){t.handleError(e),t.storage.set("_tags_per_page",10)}).finally(function(){t.loading=!1,t.selection=!1})},edit:function(t){this.$bus.$emit("edit-tag",t)},handleExport:function(){"all"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"selected")?this.fetchAllTagsForExport():this.exportTagsToCsv(this.selectedTags)},fetchAllTagsForExport:function(){var t=this;this.exportLoading=!0,this.$notify.info({title:this.$t("Preparing Export"),message:this.$t("Fetching all tags for export..."),offset:19}),this.$get("tags",{all_tags:1,search:this.search}).then(function(e){t.exportTagsToCsv(e.all_tags)}).catch(function(e){t.handleError(e),t.$notify.error({title:t.$t("Export Failed"),message:t.$t("Failed to fetch tags for export"),offset:19})}).finally(function(){t.exportLoading=!1})},exportTagsToCsv:function(t){var e=this,i=["id","title","slug","description"].join(",")+"\n";t.forEach(function(t){var n=[t.id,e.escapeCsvValue(t.title),e.escapeCsvValue(t.slug||""),e.escapeCsvValue(t.description||"")].join(",");i+=n+"\n"});var n=new Blob([i],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(n),a=document.createElement("a");a.setAttribute("href",s),a.setAttribute("download","fluent-crm-tags-export-"+(new Date).toISOString().slice(0,19).replace(/[T:.]/g,"-")+".csv"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(function(){e.$notify.closeAll()},2e3),this.$notify.success({title:this.$t("Export Successful"),message:this.$t("Tags exported successfully"),offset:19})},escapeCsvValue:function(t){return null==t?"":(((t=String(t)).includes(",")||t.includes('"')||t.includes("\n"))&&(t=t.replace(/"/g,'""'),t='"'.concat(t,'"')),t)},remove:function(t){var e=this;this.$del("tags/".concat(t)).then(function(t){e.fetch(),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19}),e.$bus.$emit("renew_options","tag")})},doBulkAction:function(){var t=this,e=[];this.each(this.selectedTags,function(t){e.push(t.id)}),this.$post("tags/do-bulk-action",{tagIds:e}).then(function(e){t.$notify.success(e.message),t.fetch(),t.$bus.$emit("renew_options","tag")}).catch(function(e){t.handleError(e)}).finally(function(){})},handleSortable:function(t){"descending"===t.order?(this.sortBy=t.prop,this.sortType="DESC"):(this.sortBy=t.prop,this.sortType="ASC"),this.fetch()},onSelection:function(t){this.selection=!!t.length,this.selectedTags=t,this.selectionCount=t.length},handleElUploadChange:function(t){var e=this,i=t.raw||t.file&&t.file.raw||t.file;if(i){var n=new FileReader;n.onload=function(t){var i=t.target.result.split(/\r?\n/).filter(function(t){return t.trim()});if(i.length<2)e.$notify.info({title:e.$t("Info"),message:e.$t("CSV file is empty or invalid"),offset:19});else{var n=i[0].split(",").map(function(t){return t.trim().toLowerCase()}),s=n.findIndex(function(t){return"title"===t}),a=n.findIndex(function(t){return"description"===t||"internal notes"===t});if(-1!==s){var o=i.slice(1).map(function(t){var e=t.split(",");return{title:e[s]?e[s].trim():"",description:-1!==a&&e[a]?e[a].trim():"",slug:e[s]?e[s].trim().toLowerCase().replace(/\s+/g,"-"):""}}).filter(function(t){return t.title});e.tagsToImport=o,e.importStep=2,e.$notify.success({title:e.$t("Success"),message:e.$t("Ready to import ")+o.length+" "+e.$t("tags"),offset:19})}else e.$notify.info({title:e.$t("Info"),message:e.$t('CSV must have a "title" column'),offset:19})}},n.readAsText(i)}},resetImportStage:function(){this.importStep=1,this.tagsToImport=[]},handleDrawerClose:function(t){this.importStep=1,this.tagsToImport=[],this.showImportDrawer=!1,"function"==typeof t&&t()},downloadSampleCsv:function(){var t=new Blob(["title,description\nVIP,Very Important Person\ntest,Test Tag\ndemo,Demo Tag\n"],{type:"text/csv"}),e=window.URL.createObjectURL(t),i=document.createElement("a");i.style.display="none",i.href=e,i.download="sample-tags.csv",document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(e)},100)}},mounted:function(){this.pagination.per_page=parseInt(this.storage.get("_tags_per_page",10)),this.fetch(),this.changeTitle(this.$t("Tags")),this.$emit("changeMenu","tags")}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-lists fluentcrm_min_bg fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[e("contact-header-pop-nav",{attrs:{head_title:t.$t("Tags")}})],1),t._v(" "),e("p",[t._v(t._s(t.$t("Tag_Tags_alLbmwtfyci")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("div",{staticClass:"fc_right_search"},[e("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),t.hasPermission("fcrm_manage_contact_cats")?e("action-menu",{attrs:{type:"tag",api:t.api},on:{fetch:t.fetch}}):t._e(),t._v(" "),e("el-popover",{attrs:{trigger:"click",width:240,placement:"bottom","popper-class":""},scopedSlots:t._u([{key:"reference",fn:function(){return[e("el-button",{staticStyle:{padding:"8px 0px",border:"none"},attrs:{title:t.$t("More")}},[e("i",{staticClass:"el-icon-more",staticStyle:{rotate:"90deg"}})])]},proxy:!0}])},[t._v(" "),e("div",[t.hasPermission("fcrm_manage_contact_cats")?e("el-button",{attrs:{type:"default",size:"mini",icon:"el-icon-download",loading:t.exportLoading},on:{click:function(e){return t.handleExport("all")}}},[t._v(" \n                    "+t._s(t.$t("Export All tags"))+"\n                    ")]):t._e(),t._v(" "),t.hasPermission("fcrm_manage_contact_cats")?e("el-button",{attrs:{type:"default",size:"mini",icon:"el-icon-upload",loading:t.exportLoading},on:{click:function(e){return t.handleImport()}}},[t._v(" \n                    "+t._s(t.$t("Import"))+"\n                    ")]):t._e()],1)])],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_body pad-b-20",staticStyle:{position:"relative"}},[t.loading?e("div",{staticClass:"fc_loading_bar",attrs:{slot:"before_contacts_table"},slot:"before_contacts_table"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):e("div",{staticClass:"lists-table"},[t.hasPermission("fcrm_manage_contact_cats_delete")?e("el-row",[e("el-col",{attrs:{md:12,sm:24}},[t.selectedTags.length&&t.selection?e("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.doBulkAction()}}},[e("el-button",{staticStyle:{margin:"12px 5px 10px 16px"},attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[t._v("\n                            "+t._s(t.$t("Delete Selected"))+"\n                        ")])],1):t._e(),t._v(" "),t.selectedTags.length&&t.selection?e("el-button",{attrs:{size:"mini",type:"info",loading:t.exportLoading,icon:"el-icon-download"},on:{click:function(e){return t.handleExport("selected")}}},[t._v("\n                            "+t._s(t.$t("Export"))+"\n                        ")]):t._e(),t._v("\n                    \n                ")],1)],1):t._e(),t._v(" "),e("el-table",{attrs:{border:"","default-sort":{prop:t.sortBy,order:"DESC"==t.sortType?"descending":"ascending"},"empty-text":t.$t("No Data Found"),data:t.tags},on:{"selection-change":t.onSelection,"sort-change":t.handleSortable}},[t.hasPermission("fcrm_manage_contact_cats_delete")?e("el-table-column",{attrs:{type:"selection"}}):t._e(),t._v(" "),e("el-table-column",{attrs:{property:"id",sortable:"custom",label:t.$t("ID"),width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.id)+"\n                    ")]}}])}),t._v(" "),e("el-table-column",{attrs:{"min-width":200,property:"title",sortable:"custom",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"tag",params:{tagId:i.row.id}}}},[e("h3",{staticClass:"no-margin url"},[t._v("\n                                "+t._s(i.row.title)+"\n                            ")])]),t._v(" "),e("span",{staticClass:"list-created"},[t._v(t._s(i.row.description))])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:200,label:t.$t("Contacts")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("h4",{staticClass:"no-margin"},[t._v("\n                            "+t._s(i.row.subscribersCount)+"\n                        ")]),t._v("\n                        "+t._s(t.$t("Subscribed"))+"\n                    ")]}}])}),t._v(" "),e("el-table-column",{attrs:{width:200,label:t.$t("Created")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(i.row.created_at)))])]}}])}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"text-align-right d-flex"},[t.hasPermission("fcrm_manage_contact_cats")?e("el-button",{staticClass:"mr-5",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.edit(i.row)}}}):t._e(),t._v(" "),t.hasPermission("fcrm_manage_contact_cats_delete")?e("confirm",{on:{yes:function(e){return t.remove(i.row.id)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1):t._e()],1)]}}])})],1),t._v(" "),t.hasPermission("fcrm_manage_contact_cats_delete")?e("el-row",[e("el-col",{attrs:{md:12,sm:24}},[t.selectedTags.length&&t.selection?e("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.doBulkAction()}}},[e("el-button",{staticStyle:{margin:"12px 5px 10px 18px"},attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[t._v("\n                            "+t._s(t.$t("Delete Selected"))+"\n                        ")])],1):t._e(),t._v("\n                    \n                ")],1),t._v(" "),e("el-col",{attrs:{md:12,sm:24}},[e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)],1):t._e()],1)],1),t._v(" "),t.hasPermission("fcrm_manage_contact_cats")?e("el-drawer",{attrs:{title:t.$t("Import Tags"),"append-to-body":"",visible:t.showImportDrawer,size:"40%",direction:"rtl"},on:{"update:visible":function(e){t.showImportDrawer=e},close:t.handleDrawerClose}},[1==t.importStep?e("div",[0===t.tagsToImport.length?e("div",[e("div",{staticStyle:{margin:"20px"}},[e("el-upload",{attrs:{"show-file-list":!1,"auto-upload":!1,accept:".csv","on-change":t.handleElUploadChange,drag:"",action:"/mock-upload"}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v(t._s(t.$t("Upload a CSV file to import tags")))]),t._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n                        "+t._s(t.$t("Only CSV files are allowed"))),e("br"),t._v("\n                        "+t._s(t.$t("You can download a sample CSV file"))+"\n                        "),e("el-button",{attrs:{type:"text"},on:{click:t.downloadSampleCsv}},[t._v(t._s(t.$t("Download Sample CSV")))])],1)])],1)]):t._e()]):t._e(),t._v(" "),2==t.importStep&&t.tagsToImport.length>0?e("div",[e("div",{staticClass:"tags-preview"},[e("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"10px","margin-left":"10px"}},[e("h4",{staticStyle:{margin:"0"}},[t._v(t._s(t.$t("Tags to Import"))+" ("+t._s(t.tagsToImport.length)+")")])]),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tagsToImport}},[e("el-table-column",{attrs:{prop:"title",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-input",{attrs:{size:"small"},model:{value:i.row.title,callback:function(e){t.$set(i.row,"title",e)},expression:"scope.row.title"}})]}}],null,!1,3829172505)}),t._v(" "),e("el-table-column",{attrs:{prop:"slug",label:t.$t("Slug")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-input",{attrs:{size:"small"},model:{value:i.row.slug,callback:function(e){t.$set(i.row,"slug",e)},expression:"scope.row.slug"}})]}}],null,!1,2525143668)}),t._v(" "),e("el-table-column",{attrs:{prop:"description",label:t.$t("Internal Subtitle")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-input",{attrs:{size:"small"},model:{value:i.row.description,callback:function(e){t.$set(i.row,"description",e)},expression:"scope.row.description"}})]}}],null,!1,1775882111)})],1)],1),t._v(" "),e("div",{staticStyle:{"margin-top":"20px","margin-left":"10px","margin-bottom":"20px"}},[e("el-button",{attrs:{type:"default",size:"small"},on:{click:function(e){return t.resetImportStage()}}},[t._v("\n                "+t._s(t.$t("Back"))+"\n            ")]),t._v(" "),e("el-button",{attrs:{type:"primary",size:"small",disabled:0===t.tagsToImport.length},on:{click:function(e){return t.submitToBackend()}}},[t._v("\n                "+t._s(t.$t("Create Tags"))+"\n            ")])],1)]):t._e()]):t._e()],1)},[],!1,null,null,null).exports;var js=e({name:"DynamicSegmentPromo"},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_promo_wrapper"},[e("div",{staticClass:"text-align-center fluentcrm_header fc_promo_heading"},[e("h1",{},[t._v(t._s(t.$t("Dynamic Segments")))]),t._v(" "),e("p",[t._v(t._s(t.$t("create_dynamic_segments_of_contacts_introduction")))]),t._v(" "),e("a",{staticClass:"el-button el-button--success",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n            "+t._s(t.$t("Get FluentCRM Email Pro"))+"\n        ")])]),t._v(" "),e("div",{staticClass:"fc_promo_body fluentcrm_body fluentcrm_pad_around"},[e("div",{staticClass:"promo_block"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{sm:24,md:12}},[e("div",{staticClass:"promo_content"},[e("img",{staticClass:"promo_image",attrs:{src:t.appVars.images_url+"/promo/segment_create.png"}})])]),t._v(" "),e("el-col",{attrs:{sm:24,md:12}},[e("h2",[t._v(t._s(t.$t("Filter By Property and find appropriate Contacts")))]),t._v(" "),e("p",[t._v(t._s(t.$t("simple_enough_promo_dynamic_segment")))]),t._v(" "),e("div",{},[e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                            "+t._s(t.$t("Get FluentCRM Pro"))+"\n                        ")])])])],1)],1),t._v(" "),e("div",{staticClass:"promo_block"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{sm:24,md:12}},[e("h2",[t._v(t._s(t.$t("Use your dynamic segment to broadcast Email Campaigns")))]),t._v(" "),e("p",[t._v("\n                        "+t._s(t.$t("create_as_many_dynamic_segment_introduction"))+"\n                    ")]),t._v(" "),e("div",{},[e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                            "+t._s(t.$t("Get FluentCRM Pro"))+"\n                        ")])])]),t._v(" "),e("el-col",{attrs:{sm:24,md:12}},[e("div",{staticClass:"promo_content"},[e("img",{staticClass:"promo_image",attrs:{src:t.appVars.images_url+"/promo/segment_campaign.png"}})])])],1)],1),t._v(" "),e("div",{staticClass:"promo_block"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{sm:24,md:12}},[e("div",{staticClass:"promo_content"},[e("img",{staticClass:"promo_image",attrs:{src:t.appVars.images_url+"/promo/dynamic_segment_all.png"}})])]),t._v(" "),e("el-col",{attrs:{sm:24,md:12}},[e("h2",[t._v(t._s(t.$t("Get Pre-Defined Contact Lists")))]),t._v(" "),e("p",[t._v("\n                        "+t._s(t.$t("use_the_predefined_dynamic_segment_introduction"))+"\n                    ")]),t._v(" "),e("div",{},[e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                            "+t._s(t.$t("Get FluentCRM Pro"))+"\n                        ")])])])],1)],1)])])},[],!1,null,null,null);const Is=e({name:"AllDynamicSegments",components:{Confirm:d,DynamicSegmentPromo:js.exports,ContactHeaderPopNav:Vn},data:function(){return{segments:[],loading:!1,fetchingStats:!0,segmentStats:{}}},methods:{fetchSegments:function(){var t=this;this.loading=!0,setTimeout(function(){t.$get("dynamic-segments").then(function(e){t.segments=e.dynamic_segments}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},500)},ferchStats:function(){var t=this;this.fetchingStats=!0,this.$get("dynamic-segments/stats").then(function(e){t.segmentStats=e.stats}).catch(function(e){t.handleError(e)}).finally(function(){t.fetchingStats=!1})},edit:function(t){this.$router.push({name:"view_segment",params:{slug:t.slug,id:t.id}})},remove:function(t){var e=this;this.loading=!0,this.$del("dynamic-segments/".concat(t.id)).then(function(t){e.fetchSegments(),e.$notify.success(t.message)}).catch(function(t){e.handleError(t)}).finally(function(){e.loading=!1})},exportSegment:function(t){location.href=window.ajaxurl+"?"+jQuery.param({action:"fluent_crm_export_dynamic_segment",segment_id:t.id})},duplicate:function(t){var e=this;this.loading=!0,this.$post("dynamic-segments/duplicate/".concat(t.id)).then(function(t){e.$notify.success(t.message),e.fetchSegments(),e.$router.push({name:"view_segment",params:{slug:"custom_segment",id:t.segment_id}})}).catch(function(t){e.handleError(t)}).finally(function(){e.loading=!1})}},mounted:function(){this.has_campaign_pro&&(this.fetchSegments(),this.ferchStats()),this.changeTitle(this.$t("Dynamic Segments")),this.$emit("changeMenu","dynamic_segments")}},function(){var t=this,e=t._self._c;return t.has_campaign_pro?e("div",{staticClass:"fluentcrm-lists fluentcrm_min_bg fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[e("contact-header-pop-nav",{attrs:{head_title:t.$t("Dynamic Segments")}})],1),t._v(" "),e("p",[t._v(t._s(t.$t("AllSegments.desc")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[t.hasPermission("fcrm_manage_contact_cats")?e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.$router.push({name:"create_custom_segment"})}}},[t._v("\n                "+t._s(t.$t("Create Custom Segment"))+"\n            ")]):t._e(),t._v(" "),e("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-upload"},on:{click:function(e){return t.$router.push({name:"import_segment"})}}},[t._v("\n                "+t._s(t.$t("Import"))+"\n            ")])],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_body",staticStyle:{position:"relative"}},[t.loading?e("div",{staticClass:"fc_loading_bar",attrs:{slot:"before_contacts_table"},slot:"before_contacts_table"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):e("div",{staticClass:"lists-table"},[e("el-table",{attrs:{border:"","empty-text":t.$t("No Data Available"),data:t.segments}},[e("el-table-column",{attrs:{"min-width":"300px",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"view_segment",params:{slug:i.row.slug,id:i.row.id}}}},[e("h3",{staticClass:"no-margin url"},[t._v("\n                                "+t._s(i.row.title)+"\n                            ")])]),t._v(" "),e("span",{staticClass:"list-description"},[t._v("\n                            "+t._s(i.row.subtitle)+"\n                        ")])]}}],null,!1,1840119999)}),t._v(" "),e("el-table-column",{attrs:{width:"150",label:t.$t("Contacts")},scopedSlots:t._u([{key:"default",fn:function(i){return[t.fetchingStats?e("el-skeleton",{attrs:{rows:1,animated:!0}}):t.segmentStats?e("span",[t._v(t._s(t.segmentStats[i.row.slug+"_"+i.row.id]?t.formatMoney(t.segmentStats[i.row.slug+"_"+i.row.id],0):"n/a"))]):e("span",[t._v("n/a")])]}}],null,!1,2656240290)}),t._v(" "),e("el-table-column",{attrs:{width:"150",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.is_system?e("p",[t._v(t._s(t.$t("System Defined")))]):e("div",{staticClass:"text-align-left"},[t.hasPermission("fcrm_manage_contact_cats")?e("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.edit(i.row)}}},[t._v("Edit\n                            ")]):t._e(),t._v(" "),e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link"},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{"font-weight":"bold",cursor:"pointer"}})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.duplicate(i.row)}}},[e("span",{staticClass:"el-icon el-icon-copy-document"}),t._v(" "+t._s(t.$t("Duplicate"))+"\n                                        ")])]),t._v(" "),e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.exportSegment(i.row)}}},[e("span",{staticClass:"el-icon el-icon-download"}),t._v(" "+t._s(t.$t("Export"))+"\n                                        ")])]),t._v(" "),e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[t.hasPermission("fcrm_manage_contact_cats_delete")?e("confirm",{on:{yes:function(e){return t.remove(i.row)}}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"el-icon el-icon-delete"}),t._v("\n                                                "+t._s(t.$t("Delete"))+"\n                                            ")])]):t._e()],1)],1)],1)],1)]}}],null,!1,1785499906)})],1)],1)],1)]):e("dynamic-segment-promo")},[],!1,null,null,null).exports;const Ls=e({name:"customSegmentEditor",props:["value","segment_id"],components:{RichFilter:pe},data:function(){return{fields:{},loading:!1,filters:this.value,estimated_count:"",estimating:!1,require_estimating:!1,FilterLabel:this.$t("Filters.instruction")}},watch:{filters:{deep:!0,handler:function(){this.$emit("input",this.filters),this.require_estimating=!0,this.estimating?this.changed_in_time||(this.changed_in_time=!0):this.getEstimatedCount()}}},methods:{fetchFields:function(){var t=this;this.loading=!0,this.$get("dynamic-segments/custom-fields").then(function(e){t.fields=e.fields,t.segment_id||t.$set(t,"settings",e.settings_defaults),t.$emit("loaded")}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},getEstimatedCount:function(){var t=this;this.estimating=!0,this.$post("dynamic-segments/estimated-contacts",{filters:this.filters}).then(function(e){t.estimated_count=e.count,t.changed_in_time&&(t.changed_in_time=!1,t.getEstimatedCount())}).catch(function(e){t.handleError(e)}).finally(function(){t.estimating=!1})},addConditionGroup:function(){this.filters.push([])},maybeRemoveGroup:function(t){this.filters.length>1&&this.filters.splice(t,1)},fetch:function(){this.$emit("updateSegment"),this.getEstimatedCount()}},mounted:function(){this.fetchFields()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fc_segment_fields"},[e("div",{staticClass:"fc_rich_container"},[e("div",{staticClass:"fc_rich_wrap"},t._l(t.filters,function(i,n){return e("div",{key:n},[e("div",{staticClass:"fc_rich_filter"},[e("rich-filter",{attrs:{add_label:t.FilterLabel,items:i},on:{maybeRemove:function(e){return t.maybeRemoveGroup(n)}}})],1),t._v(" "),e("div",{staticClass:"fc_cond_or"},[e("em",[t._v(t._s(t.$t("OR")))])])])}),0),t._v(" "),e("div",{staticClass:"fc_cond_or"},[e("em",{staticStyle:{cursor:"pointer",color:"rgb(0, 119, 204)","font-weight":"bold"},on:{click:function(e){return t.addConditionGroup()}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" "+t._s(t.$t("OR")))])]),t._v(" "),t.segment_id?e("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.fetch()}}},[t._v(t._s(t.$t("Update Segment")))]):e("el-button",{attrs:{type:"info",size:"small"},on:{click:function(e){return t.fetch()}}},[t._v(t._s(t.$t("Filter contacts")))])],1),t._v(" "),""!==t.estimated_count?e("h3",{directives:[{name:"loading",rawName:"v-loading",value:t.estimating,expression:"estimating"}],staticClass:"fc_counting_heading text-align-center"},[t._v("\n        "+t._s(t.$t("_Cu_Estimated_Cboys"))+" "),e("span",[t._v(t._s(t.estimated_count))])]):t._e()])},[],!1,null,null,null).exports;function Ns(t){return Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(t)}function qs(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Ms(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Ns(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Ns(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ns(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const zs=e({name:"DynamicSegmentViewer",props:["slug","id"],components:{CustomSegmentSettings:Ls,ContactsTable:Rn},data:function(){return{segment:{},loading:!0,saving:!1,subscribers:[],columns:[],pagination:{current_page:1,per_page:10,total:0},is_editing:!1,field_loading:!0,query_data:{tags:[],lists:[],search:"",statuses:[],sort_by:"id",sort_type:"DESC",custom_fields:!1},ui_config:{show_list:!0,show_tag:!0,disable_filters_without_selection:!0},options:{tags:[],lists:[],statuses:[],countries:[],sampleCsv:null,delimiter:"comma"}}},methods:{fetchSegment:function(){var t=this;this.loading=!0,this.$get("dynamic-segments/".concat(this.slug,"/subscribers/").concat(this.id),function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?qs(Object(i),!0).forEach(function(e){Ms(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qs(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({per_page:this.pagination.per_page,page:this.pagination.current_page},this.query_data)).then(function(e){t.segment=e.segment,t.subscribers=e.subscribers.data,t.pagination.total=e.subscribers.total,t.changeTitle(t.segment.title+" - Dynamic Segments")}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},updateSegment:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.segment.title?(this.saving=!0,this.$put("dynamic-segments/".concat(this.segment.id),{segment:JSON.stringify({title:this.segment.title,filters:this.segment.filters}),with_subscribers:!1}).then(function(i){t.$notify.success(i.message),t.pagination.current_page=1,t.fetchSegment(),e&&(t.is_editing=!1)}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1})):this.$notify.error(this.$t("Cre_Please_pNotS"))},getOptions:function(){var t=this;this.$get("reports/options",{fields:"tags,lists,statuses,contact_types,sampleCsv,custom_fields"}).then(function(e){t.options=e.options})}},mounted:function(){this.getOptions()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm-lists fluentcrm_min_bg fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"dynamic_segments"}}},[t._v("\n                    "+t._s(t.$t("Dynamic Segments"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.segment.title)+"\n                ")])],1),t._v(" "),e("p",[t._v(t._s(t.segment.subtitle))])],1),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.push({name:"dynamic_segments"})}}},[t._v("\n                "+t._s(t.$t("Back"))+"\n            ")])],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_pad_around"},[e("div",{staticClass:"fc_segment_desc_block"},[e("h3",[t._v(t._s(t.segment.description))]),t._v(" "),t.segment.is_system?t._e():e("div",[e("el-button",{attrs:{type:t.is_editing?"danger":"info"},on:{click:function(e){t.is_editing=!t.is_editing}}},[t.is_editing?e("span",[t._v(t._s(t.$t("Cancel Editing")))]):e("span",[t._v(t._s(t.$t("Edit Configuration")))])])],1),t._v(" "),t.is_editing?e("div",{staticClass:"text-align-left fc_segment_editor"},[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.field_loading,expression:"field_loading"}],staticClass:"fc_segment_form",attrs:{"label-position":"top",data:t.segment}},[e("div",{staticClass:"fc_section_heading"},[e("h3",[t._v(t._s(t.$t("Name this Custom Segment")))]),t._v(" "),e("p",[t._v(t._s(t.$t("custom_segment.name_desc")))]),t._v(" "),e("el-input",{attrs:{placeholder:t.$t("eg: Active Contacts"),type:"text"},model:{value:t.segment.title,callback:function(e){t.$set(t.segment,"title",e)},expression:"segment.title"}})],1),t._v(" "),e("custom-segment-settings",{attrs:{segment_id:t.segment.id},on:{loaded:function(){t.field_loading=!1},updateSegment:function(e){return t.updateSegment(!1)}},model:{value:t.segment.filters,callback:function(e){t.$set(t.segment,"filters",e)},expression:"segment.filters"}})],1)],1):t._e()]),t._v(" "),e("div",{staticClass:"lists-table fcrm_segment_contacts"},[e("contacts-table",{attrs:{always_searchbar:!0,options:t.options,query_data:t.query_data,is_loading:t.loading,ui_config:t.ui_config,subscribers:t.subscribers,pagination:t.pagination},on:{fetch:t.fetchSegment}})],1)])])},[],!1,null,null,null).exports;const Rs=e({name:"CreateCustomSegment",components:{CustomSegmentSettings:Ls},data:function(){return{loading:!1,saving:!1,field_loading:!0,segment:{title:"",filters:[[]]}}},methods:{createSegment:function(){var t=this;this.segment.title?(this.saving=!0,this.$post("dynamic-segments",{segment:JSON.stringify(this.segment),with_subscribers:!1}).then(function(e){t.$notify.success(e.message),t.$router.push({name:"view_segment",params:{slug:e.segment.slug,id:e.segment.id}})}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1})):this.$notify.error(this.$t("Cre_Please_pNotS"))}},mounted:function(){this.changeTitle(this.$t("New Dynamic Segment"))}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.field_loading,expression:"field_loading"}],staticClass:"fluentcrm-lists fluentcrm_min_bg fluentcrm-view-wrapper fluentcrm_view",staticStyle:{background:"#f1f1f1",border:"1px solid #e3e8ee"}},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"dynamic_segments"}}},[t._v("\n                    "+t._s(t.$t("Dynamic Segments"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.$t("Create Custom Segment"))+"\n                ")])],1)],1),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.push({name:"dynamic_segments"})}}},[t._v(t._s(t.$t("Back")))])],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_pad_around"},[e("el-form",{staticClass:"fc_segment_form",attrs:{"label-position":"top",data:t.segment}},[e("div",{staticClass:"fc_section_heading"},[e("h3",[t._v(t._s(t.$t("Name this Custom Segment")))]),t._v(" "),e("p",[t._v(t._s(t.$t("custom_segment.name_desc")))]),t._v(" "),e("el-input",{attrs:{placeholder:t.$t("eg: Active Contacts"),type:"text"},model:{value:t.segment.title,callback:function(e){t.$set(t.segment,"title",e)},expression:"segment.title"}})],1),t._v(" "),e("custom-segment-settings",{attrs:{segment_id:!1},on:{loaded:function(){t.field_loading=!1}},model:{value:t.segment.filters,callback:function(e){t.$set(t.segment,"filters",e)},expression:"segment.filters"}}),t._v(" "),e("el-form-item",{staticClass:"text-align-right"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{type:"primary"},on:{click:function(e){return t.createSegment()}}},[t._v(t._s(t.$t("Create Custom Segment")))])],1)],1)],1)])},[],!1,null,null,null).exports;const Bs=e({name:"ImportDynamicSegment",components:{GenericPromo:Te},data:function(){return{step:"upload",importing:!1,inline_errors:!1}},computed:{url:function(){var t=window.ajaxurl;return t+=(t.match(/\?/)?"&":"?")+jQuery.param({action:"fluent_crm_import_dynamic_segment"}),t}},methods:{success:function(t){this.$notify.success(t.message),this.$router.push({name:"view_segment",params:{slug:"custom_segment",id:t.segment.id}})},error:function(t){var e=JSON.parse(t.message);this.$notify.error(e.message),e.requires&&(this.inline_errors=e.requires)}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_settings_wrapper fc_sequence_import"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"dynamic_segments"}}},[t._v("\n                    "+t._s(t.$t("Dynamic Segments"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.$t("Import"))+"\n                ")])],1)],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.importing,expression:"importing"}],staticClass:"fluentcrm_body fluentcrm_title_cards fc_narrow_box fc_white_inverse",staticStyle:{"margin-top":"30px","max-width":"1160px"}},[t.has_campaign_pro?[e("div",{staticClass:"fc_funnel_upload text-align-center"},[e("h3",[t._v(t._s(t.$t("Import_Dynamic_Segment")))]),t._v(" "),e("el-upload",{ref:"uploader",attrs:{drag:"",limit:1,action:t.url,multiple:!1,"on-error":t.error,"on-success":t.success}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n                        "+t._s(t.$t("Drop JSON file here or"))+" "),e("em",[t._v(t._s(t.$t("click to upload")))])])]),t._v(" "),e("h4",[t._v(t._s(t.$t("Not_Import_Dynamic_Segments_Alert")))]),t._v(" "),t.inline_errors?e("pre",[t._v(t._s(t.inline_errors))]):t._e()],1)]:e("div",[e("generic-promo")],1)],2)])},[],!1,null,null,null).exports;const Vs=e({name:"ProfileOverview",props:["subscriber","custom_fields"],components:{CustomFields:hi,DateDropDownPicker:ki},data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>=Date.now()}},errors:null,updating:!1,countries:window.fcAdmin.countries,name_prefixes:window.fcAdmin.contact_prefixes}},methods:{updateSubscriber:function(){var t=this;this.errors=null,this.updating=!0,this.$put("subscribers/".concat(this.subscriber.id),{subscriber:JSON.stringify(this.subscriber)}).then(function(e){t.$notify.success(e.message)}).catch(function(e){t.errors=e,t.handleError(e),e.email&&e.email.required&&t.$notify.error(e.email.required)}).finally(function(){t.updating=!1})}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_databox"},[e("el-form",{ref:"basic_form",attrs:{"label-position":"top",model:t.subscriber,"label-width":"120px"}},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("h3",[t._v(t._s(t.$t("Basic Information")))]),t._v(" "),e("div",{staticClass:"fluentcrm_edit_basic"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{lg:4,md:4,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Prefix")}},[e("el-select",{attrs:{placeholder:t.$t("Select"),size:"small"},model:{value:t.subscriber.prefix,callback:function(e){t.$set(t.subscriber,"prefix",e)},expression:"subscriber.prefix"}},t._l(t.name_prefixes,function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)],1),t._v(" "),e("el-col",{attrs:{lg:10,md:10,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("First Name")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.first_name,callback:function(e){t.$set(t.subscriber,"first_name",e)},expression:"subscriber.first_name"}})],1)],1),t._v(" "),e("el-col",{attrs:{lg:10,md:10,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Last Name")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.last_name,callback:function(e){t.$set(t.subscriber,"last_name",e)},expression:"subscriber.last_name"}})],1)],1)],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Email Address")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.email,callback:function(e){t.$set(t.subscriber,"email",e)},expression:"subscriber.email"}}),t._v(" "),t.errors?e("span",{staticClass:"error"},[t._v(t._s(t.errors.email.required))]):t._e()],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Phone/Mobile")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.phone,callback:function(e){t.$set(t.subscriber,"phone",e)},expression:"subscriber.phone"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Date of Birth")}},[e("date-drop-down-picker",{model:{value:t.subscriber.date_of_birth,callback:function(e){t.$set(t.subscriber,"date_of_birth",e)},expression:"subscriber.date_of_birth"}})],1)],1)]),t._v(" "),e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("h3",[t._v(t._s(t.$t("Address Information")))]),t._v(" "),e("div",{staticClass:"fluentcrm_edit_basic"},[e("el-form-item",{attrs:{label:t.$t("Address Line 1")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.address_line_1,callback:function(e){t.$set(t.subscriber,"address_line_1",e)},expression:"subscriber.address_line_1"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Address Line 2")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.address_line_2,callback:function(e){t.$set(t.subscriber,"address_line_2",e)},expression:"subscriber.address_line_2"}})],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("City")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.city,callback:function(e){t.$set(t.subscriber,"city",e)},expression:"subscriber.city"}})],1)],1),t._v(" "),e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("State")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.state,callback:function(e){t.$set(t.subscriber,"state",e)},expression:"subscriber.state"}})],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("ZIP Code")}},[e("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.postal_code,callback:function(e){t.$set(t.subscriber,"postal_code",e)},expression:"subscriber.postal_code"}})],1)],1),t._v(" "),e("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Country")}},[e("el-select",{staticClass:"el-select-multiple",attrs:{clearable:"",filterable:"",autocomplete:"new-password",placeholder:t.$t("Select country")},model:{value:t.subscriber.country,callback:function(e){t.$set(t.subscriber,"country",e)},expression:"subscriber.country"}},t._l(t.countries,function(i){return e("el-option",{key:i.code,attrs:{value:i.code,label:i.title}},[t._v("\n                                        "+t._s(i.title)+"\n                                    ")])}),1)],1)],1)],1)],1)])],1),t._v(" "),e("custom-fields",{attrs:{subscriber:t.subscriber,custom_fields:t.custom_fields}}),t._v(" "),t.hasPermission("fcrm_manage_contacts")?e("el-form-item",{staticClass:"text-align-right"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{size:"small",type:"success"},on:{click:function(e){return t.updateSubscriber()}}},[t._v("\n                "+t._s(t.$t("Update Contact"))+"\n            ")])],1):t._e()],1)],1)},[],!1,null,null,null).exports;const Us=e({name:"ProfileEmailSequence",components:{Confirm:d,Pagination:m,OptionSelector:Ft},props:["subscriber_id"],data:function(){return{sequences:[],loading:!1,removing:!1,pagination:{total:0,per_page:10,current_page:1},selected_sequence:"",doing_action:!1}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("sequences/subscriber/".concat(this.subscriber_id,"/sequences"),{per_page:this.pagination.per_page,page:this.pagination.current_page}).then(function(e){t.sequences=e.sequence_trackers.data,t.pagination.total=e.sequence_trackers.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},removeFromSequence:function(t,e){var i=this;this.removing=!0,this.$del("sequences/".concat(t,"/subscribers"),{tracker_ids:[e]}).then(function(t){i.$notify.success(t.message),i.fetch()}).catch(function(t){i.handleError(t)}).finally(function(){i.removing=!1})},addToSequence:function(){var t=this;this.doing_action=!0,this.$post("subscribers/do-bulk-action",{action_name:"add_to_email_sequence",new_status:this.selected_sequence,subscriber_ids:[this.subscriber_id]}).then(function(e){t.visiblePop=!1,t.$notify.success(e.message),t.fetch()}).catch(function(e){t.handleError(e)}).finally(function(){t.doing_action=!1})}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_profile_sub"},[e("div",{staticClass:"fc_profile_sub_header d-flex items-center justify-between",staticStyle:{"margin-bottom":"10px","margin-top":"10px"}},[e("h3",[t._v(t._s(t.$t("Email Sequences")))]),t._v(" "),e("div",{staticClass:"fc_profile_sequences_bulk_action d-flex items-end"},[[e("el-popover",{ref:"popover",attrs:{placement:"left",width:"350",trigger:"click"}},[e("el-button",{attrs:{slot:"reference",size:"small"},slot:"reference"},[t._v(t._s(t.$t("Add Sequence")))]),t._v(" "),e("label",[t._v(t._s(t.$t("Select Sequence")))]),t._v(" "),e("option-selector",{attrs:{field:{option_key:"email_sequences",clearable:!0,size:"mini"}},model:{value:t.selected_sequence,callback:function(e){t.selected_sequence=e},expression:"selected_sequence"}}),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{"margin-top":"20px"},attrs:{disabled:t.doing_action||!t.selected_sequence,size:"mini",type:"primary"},on:{click:t.addToSequence}},[t._v("\n                        "+t._s(t.$t("Add To Sequence"))+"\n                    ")])],1)]],2)]),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Available"),stripe:"",border:"",data:t.sequences}},[e("el-table-column",{attrs:{label:t.$t("Sequence")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.sequence?e("span",[t._v(t._s(i.row.sequence.title))]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Started At")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.created_at}},[t._v("\n                    "+t._s(t._f("nsHumanDiffTime")(i.row.created_at))+"\n                ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Next Email")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.next_sequence?e("span",[t._v(t._s(i.row.next_sequence.title))]):t._e(),t._v(" "),"active"==i.row.status?e("span",{attrs:{title:i.row.next_execution_time}},[t._v("\n                    - ("+t._s(t._f("nsHumanDiffTime")(i.row.next_execution_time))+")\n                ")]):e("span",[t._v("\n                    --\n                ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"160",label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.status)+"\n            ")]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"160",label:t.$t("Action")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("confirm",{directives:[{name:"loading",rawName:"v-loading",value:t.removing,expression:"removing"}],on:{yes:function(e){return t.removeFromSequence(i.row.campaign_id,i.row.id)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)]}}])})],1),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)},[],!1,null,null,null).exports;var Hs=i(8970),Gs=i.n(Hs);const Ws=e({name:"LazyIndividualProgress",props:["subscriber_id","funnel"],data:function(){return{funnel_subscriber:{},sequences:[],loading:!0,isLoaded:!1}},computed:{keyedMetrics:function(){return this.isLoaded?Gs()(this.funnel_subscriber.metrics,"sequence_id"):{}},timelines:function(){var t=this;if(!this.isLoaded)return[];var e="Entrance ("+this.funnel.title+")";"pending"===this.funnel_subscriber.status?e+=this.$t("_In_Wfdoc"):"waiting"===this.funnel_subscriber.status&&(e+=this.$t("_In_Wfna"));var i=[{content:e,timestamp:this.nsHumanDiffTime(this.funnel_subscriber.created_at),size:"large",type:"primary",icon:"el-icon-more"}],n=!1;return this.each(this.sequences,function(e,s){var a=t.keyedMetrics[e.id]||{},o=e.title;"pending"===o?o+=t.$t("_In_Wfdc"):"waiting"===o&&(o+=t.$t("_In_Wfna")),"conditional"==e.type&&(n=e);var r="";if(e.condition_type){r="fc_path_"+e.condition_type,n&&(r="fc_"+n.action_name+" "+r);var l=t.$t("Condition:")+" "+e.condition_type;if("funnel_ab_testing"==n.action_name){var c="yes"==e.condition_type?t.$t("B"):t.$t("A");l=t.$t("Path: ")+c,r+="_"+c}o+=" ( "+l+" )"}a.status||(r+=" fc_timeline_empty"),i.push({content:o,status:a.status,notes:a.notes,timestamp:t.nsHumanDiffTime(a.created_at),color:t.getTimelineColor(a),wrapper_class:r})}),i}},methods:{getTimelineColor:function(t){return t.status&&"completed"===t.status?"#0bbd87":""},fetchData:function(){var t=this;this.loading=!0,this.$get("funnels/".concat(this.funnel.id,"/subscribers/").concat(this.subscriber_id)).then(function(e){t.funnel_subscriber=e.funnel_subscriber,t.sequences=e.sequences}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1,t.isLoaded=!0})},maybeFetchData:function(){this.isLoaded||this.fetchData()}}},function(){var t=this,e=t._self._c;return e("div",[e("el-popover",{attrs:{placement:"right",width:"400","popper-class":"fc_individual_progress_popover",trigger:"click"},on:{show:function(e){return t.maybeFetchData()}}},[e("div",[t.loading?e("div",{staticClass:"fc_loading"},[e("el-skeleton",{attrs:{loading:!0,rows:3}})],1):t.isLoaded?e("div",{staticClass:"fc_individual_progress",staticStyle:{padding:"10px 15px"}},[e("div",{staticStyle:{"margin-bottom":"15px"}},[t._v("Current Status: "+t._s(t.funnel_subscriber.status))]),t._v(" "),e("el-timeline",t._l(t.timelines,function(i,n){return e("el-timeline-item",{key:n,class:i.wrapper_class,attrs:{icon:i.icon,type:i.type,color:i.color,size:i.size,timestamp:i.timestamp}},[t._v("\n                        "+t._s(i.content)+"\n                        "),[i.notes?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:i.notes,placement:"top-start"}},[e("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(t._s(i.status))])],1):i.status?e("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(t._s(i.status)+"\n                            ")]):t._e()]],2)}),1),t._v(" "),e("router-link",{attrs:{to:{name:"edit_funnel",params:{funnel_id:this.funnel.id}}}},[t._v("\n                    "+t._s(t.$t("View Automation Steps"))+"\n                ")])],1):t._e()]),t._v(" "),e("span",{staticClass:"fluentcrm_clickable",staticStyle:{color:"#2271b1"},attrs:{slot:"reference"},slot:"reference"},[t._v("\n            "+t._s(t.funnel.title)+"\n        ")])])],1)},[],!1,null,null,null).exports;const Ks=e({name:"ProfileAutomations",props:["subscriber_id"],components:{Confirm:d,Pagination:m,OptionSelector:Ft,LazyIndividualProgress:Ws},data:function(){return{automations:[],loading:!1,deleting:!1,pagination:{total:0,per_page:10,current_page:1},updating:!1,select_job:{action_name:"add_to_automation",selected_options:[]},selected_sequence:"",doing_action:!1}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("funnels/subscriber/".concat(this.subscriber_id,"/automations"),{per_page:this.pagination.per_page,page:this.pagination.current_page}).then(function(e){t.automations=e.automations.data,t.pagination.total=e.automations.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},removeFromFunnel:function(t,e){var i=this;this.deleting=!0,this.$del("funnels/".concat(t,"/subscribers"),{subscriber_ids:[e]}).then(function(t){i.$notify.success(t.message),i.fetch()}).catch(function(t){i.handleError(t)}).finally(function(){i.deleting=!1})},changeFunnelSubscriptionStatus:function(t,e,i){var n=this;this.updating=!0,this.$put("funnels/".concat(t,"/subscribers/").concat(e,"/status"),{status:i}).then(function(t){n.$notify.success(t.message),n.fetch()}).catch(function(t){n.handleError(t)}).finally(function(){n.updating=!1})},addToAutomation:function(){var t=this;this.doing_action=!0,this.$post("subscribers/do-bulk-action",{action_name:"add_to_automation",new_status:this.selected_sequence,subscriber_ids:[this.subscriber_id]}).then(function(e){t.visiblePop=!1,t.$notify.success(e.message),t.fetch()}).catch(function(e){t.handleError(e)}).finally(function(){t.doing_action=!1})}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_profile_sub"},[e("div",{staticClass:"fc_profile_sub_header d-flex items-center justify-between",staticStyle:{"margin-bottom":"10px","margin-top":"20px"}},[e("h3",[t._v(t._s(t.$t("Automations")))]),t._v(" "),e("div",{staticClass:"fc_profile_sequences_bulk_action d-flex items-end"},[[e("el-popover",{ref:"popover",attrs:{placement:"left",width:"350",trigger:"click"}},[e("el-button",{attrs:{slot:"reference",size:"small"},slot:"reference"},[t._v(t._s(t.$t("Add Automation")))]),t._v(" "),e("label",[t._v(t._s(t.$t("Select Automation")))]),t._v(" "),e("option-selector",{attrs:{field:{option_key:"automation_funnels",clearable:!0,size:"mini"}},model:{value:t.selected_sequence,callback:function(e){t.selected_sequence=e},expression:"selected_sequence"}}),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{"margin-top":"20px"},attrs:{disabled:t.doing_action||!t.selected_sequence,size:"mini",type:"primary"},on:{click:t.addToAutomation}},[t._v("\n                        "+t._s(t.$t("Add To Automation"))+"\n                    ")])],1)]],2)]),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Available"),stripe:"",border:"",data:t.automations}},[e("el-table-column",{attrs:{label:t.$t("Sequence")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("lazy-individual-progress",{attrs:{funnel:i.row.funnel,subscriber_id:t.subscriber_id}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Started At")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.created_at}},[t._v("\n                    "+t._s(t._f("nsHumanDiffTime")(i.row.created_at))+"\n                ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Next Step")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.next_sequence_item&&"completed"!=i.row.status?e("span",[t._v(t._s(i.row.next_sequence_item.title))]):e("span",[e("i",{staticClass:"el-icon el-icon-success",staticStyle:{"font-size":"22px"},attrs:{title:t.$t("Completed")}})]),t._v(" "),"active"==i.row.status?e("span",{attrs:{title:i.row.next_execution_time}},[t._v("\n                    - ("+t._s(t._f("nsHumanDiffTime")(i.row.next_execution_time))+")\n                ")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"160",label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.status)+"\n            ")]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"160",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("confirm",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],on:{yes:function(e){return t.removeFromFunnel(i.row.funnel_id,i.row.subscriber_id)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1),t._v(" "),"cancelled"==i.row.status?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"info",size:"mini"},on:{click:function(e){return t.changeFunnelSubscriptionStatus(i.row.funnel_id,i.row.subscriber_id,"active")}}},[t._v("\n                    "+t._s(t.$t("Resume"))+"\n                ")]):t._e(),t._v(" "),"active"==i.row.status?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"info",size:"mini"},on:{click:function(e){return t.changeFunnelSubscriptionStatus(i.row.funnel_id,i.row.subscriber_id,"cancelled")}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                ")]):t._e(),t._v(" "),"fcrm_manual_attach"==i.row.source_trigger_name?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("ProfileAutomations.Contact_Added_manually_to_Automation"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})]):t._e()]}}])})],1),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)},[],!1,null,null,null).exports;function Js(t){return function(t){if(Array.isArray(t))return Ys(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ys(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ys(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ys(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}const Qs=e({name:"EmailComposer",props:["campaign","label_align","disable_subject","disable_templates","disable_fixed","enable_test","show_merge","extra_tags","show_audit"],components:{EmailBlockComposer:te,InputPopover:F,SendTestEmail:M},data:function(){return{smartcodes:window.fcAdmin.globalSmartCodes,email_subject_status:!0}},methods:{triggerSave:function(){this.$emit("save")},resetSubject:function(){var t=this;this.email_subject_status=!1,this.$nextTick(function(){t.email_subject_status=!0})}},mounted:function(){this.extra_tags&&(this.smartcodes=[].concat(Js(this.smartcodes),Js(this.extra_tags))),window.fcAdmin.extendedSmartCodes&&(this.smartcodes=[].concat(Js(this.smartcodes),Js(window.fcAdmin.extendedSmartCodes)))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"email_composer_wrapper"},[t.disable_subject?t._e():e("el-form",{attrs:{"label-position":t.label_align,model:t.campaign}},[e("el-row",{staticClass:"mb-10",attrs:{gutter:20}},[e("el-col",{attrs:{sm:24,md:12}},[e("el-form-item",{attrs:{label:t.$t("Email Subject")}},[t.email_subject_status?e("input-popover",{attrs:{doc_url:"https://fluentcrm.com/docs/merge-codes-smart-codes-usage/",popper_extra:"fc_with_c_fields",placeholder:t.$t("Email Subject"),data:t.smartcodes},model:{value:t.campaign.email_subject,callback:function(e){t.$set(t.campaign,"email_subject",e)},expression:"campaign.email_subject"}}):t._e()],1)],1),t._v(" "),e("el-col",{attrs:{sm:24,md:12}},[e("el-form-item",{attrs:{label:t.$t("Email Pre-Header")}},[e("el-input",{attrs:{type:"textarea",placeholder:t.$t("Email Pre-Header"),rows:2},model:{value:t.campaign.email_pre_header,callback:function(e){t.$set(t.campaign,"email_pre_header",e)},expression:"campaign.email_pre_header"}})],1)],1)],1)],1),t._v(" "),e("email-block-composer",{attrs:{show_audit:t.show_audit,extra_tags:t.extra_tags,show_merge:!0,enable_template_save:!0,disable_fixed:t.disable_fixed,enable_templates:!t.disable_templates,campaign:t.campaign},on:{save:function(e){return t.triggerSave()},template_inserted:function(e){return t.resetSubject()}}},[e("template",{slot:"fc_editor_actions"},[t._t("actions")],2)],2),t._v(" "),t._t("after_block_composer"),t._v(" "),t.enable_test?e("div",[e("send-test-email",{attrs:{btn_type:"danger",campaign:t.campaign}})],1):t._e()],2)},[],!1,null,null,null).exports;var Zs=e({name:"SMTPEmailbodyContainer",props:["content"],data:function(){return{}},methods:{setBody:function(t){var e=this;t||(t=" "),this.$nextTick(function(){var i=e.$refs.ifr;(i.contentDocument||i.contentWindow.document).body.innerHTML=t})},fullScreen:function(){var t=document,e=this.$refs.ifr;(t.fullscreenEnabled||t.webkitFullscreenEnabled||t.mozFullScreenEnabled||t.msFullscreenEnabled)&&(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen())}},watch:{content:{immediate:!0,handler:"setBody"}}},function(){var t=this,e=t._self._c;return e("div",[e("iframe",{ref:"ifr",staticStyle:{width:"100%",height:"400px"},attrs:{frameborder:"0",allowFullScreen:"",mozallowfullscreen:"",webkitallowfullscreen:""}}),t._v(" "),e("el-button",{ref:"fullscreen",attrs:{size:"small",type:"primary",icon:"el-icon-full-screen"},on:{click:t.fullScreen}},[t._v("\n        "+t._s(t.$t("Enter Full Screen"))+"\n    ")])],1)},[],!1,null,null,null);function Xs(t){return Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xs(t)}function ta(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function ea(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Xs(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Xs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xs(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ia=e({name:"LogViewer",components:{SMTPEmailbodyContainer:Zs.exports},props:["logViewerProps"],data:function(){return{activeName:"email_body",loading:!1,next:!1,prev:!1,retrying:!1}},computed:{log:{get:function(){var t;return this.logViewerProps.log&&(t=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ta(Object(i),!0).forEach(function(e){ea(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ta(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},this.logViewerProps.log),t.headers||(t.headers={}),t.response||(t.response={}),t.extra||(t.extra={})),t},set:function(t){this.logViewerProps.log=t}}},methods:{getAttachments:function(t){if(!t)return[];if(!t.attachments)return[];if(!Array.isArray(t.attachments))return[t.attachments];var e=[];return t.attachments.forEach(function(t,i){e[i]=t}),e},getAttachmentName:function(t){if(t&&t[0])return(t=t[0].replace(/\\/g,"/")).split("/").pop()},sanitize:function(t){return window.DOMPurify.sanitize(t)},handleCloseLogViewer:function(){this.$emit("closeLogViewer")}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_smtp_log_viewer"},[t.log?e("el-dialog",{staticClass:"fc_smtp_email_dialog",attrs:{"append-to-body":!0,title:t.$t("Email Log"),visible:t.logViewerProps.dialogVisible},on:{"update:visible":function(e){return t.$set(t.logViewerProps,"dialogVisible",e)},close:t.handleCloseLogViewer}},[e("div",{staticClass:"fc_smtp_email_dialog_view"},[e("ul",{staticClass:"fc_smtp_email_log_items"},[e("li",[e("div",{staticClass:"item_header"},[t._v(t._s(t.$t("Status"))+":")]),t._v(" "),e("div",{staticClass:"item_content"},[e("span",{class:{success:"sent"==t.log.status,resent:"resent"==t.log.status,fail:"failed"==t.log.status}},[e("span",{staticStyle:{"text-transform":"capitalize","margin-right":"10px"}},[t._v(t._s(t.log.status))])])])]),t._v(" "),e("li",[e("div",{staticClass:"item_header"},[t._v(t._s(t.$t("Date-Time"))+":")]),t._v(" "),e("div",{staticClass:"item_content"},[t._v(t._s(t.log.created_at))])]),t._v(" "),e("li",[e("div",{staticClass:"item_header"},[t._v(t._s(t.$t("From"))+":")]),t._v(" "),e("div",{staticClass:"item_content"},[e("span",{domProps:{innerHTML:t._s(t.log.from)}})])]),t._v(" "),e("li",[e("div",{staticClass:"item_header"},[t._v(t._s(t.$t("To"))+":")]),t._v(" "),e("div",{staticClass:"item_content"},[e("span",{domProps:{innerHTML:t._s(t.log.to)}})])]),t._v(" "),t.log.resent_count>0?e("li",[e("div",{staticClass:"item_header"},[t._v(t._s(t.$t("Resent Count"))+":")]),t._v(" "),e("div",{staticClass:"item_content"},[e("span",{domProps:{innerHTML:t._s(t.log.resent_count)}})])]):t._e(),t._v(" "),e("li",[e("div",{staticClass:"item_header"},[t._v(t._s(t.$t("Subject"))+":")]),t._v(" "),e("div",{staticClass:"item_content"},[e("span",[t._v(t._s(t.log.subject))])])]),t._v(" "),t.log.extra&&t.log.extra.provider?e("li",[e("div",{staticClass:"item_header"},[t._v(t._s(t.$t("Mailer"))+":")]),t._v(" "),e("div",{staticClass:"item_content"},[e("span",[t._v(t._s(t.log.extra.provider))])])]):t._e()]),t._v(" "),e("el-collapse",{staticStyle:{"margin-top":"10px"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-collapse-item",{attrs:{name:"email_body"}},[e("template",{slot:"title"},[e("strong",{staticStyle:{color:"#606266"}},[t._v(t._s(t.$t("Email Body"))+" (sanitized)")])]),t._v(" "),e("hr",{staticClass:"log-border"}),t._v(" "),e("SMTPEmailbodyContainer",{attrs:{content:t.sanitize(t.log.body)}})],2),t._v(" "),e("p",[e("strong",[t._v(t._s(t.$t("Server Response")))])]),t._v(" "),e("el-row",[e("el-col",[e("pre",{staticStyle:{"white-space":"break-spaces","overflow-wrap":"anywhere"}},[t._v(t._s(t.log.response))])])],1),t._v(" "),e("hr"),t._v(" "),e("el-collapse-item",{attrs:{name:"tech_info"}},[e("template",{slot:"title"},[e("strong",{staticStyle:{color:"#606266"}},[t._v(t._s(t.$t("Email Headers")))])]),t._v(" "),e("div",[e("pre",[t._v(t._s(t.log.headers))]),t._v(" "),t.log.extra.custom_headers?e("pre",[t._v(t._s(t.log.extra.custom_headers))]):t._e()])],2),t._v(" "),e("el-collapse-item",{attrs:{name:"attachments"}},[e("template",{slot:"title"},[e("strong",{staticStyle:{color:"#606266"}},[t._v("\n                            "+t._s(t.$t("Attachments"))+" ("+t._s(t.getAttachments(t.log).length)+")\n                        ")])]),t._v(" "),e("hr",{staticClass:"log-border"}),t._v(" "),t._l(t.getAttachments(t.log),function(i,n){return e("div",{key:n,staticStyle:{margin:"5px 0 10px 0"}},[t._v("\n                        ("+t._s(n+1)+") "+t._s(t.getAttachmentName(i))+"\n                    ")])})],2)],1)],1)]):t._e()],1)},[],!1,null,"0911cb39",null);const na={name:"ProfileEmails",props:["subscriber_id","subscriber"],components:{SMTPEmailLogs:e({name:"SMTPEmailLogs",components:{LogViewer:ia.exports},props:["emails"],data:function(){return{loading:!1,logViewerProps:{log:null,dialogVisible:!1}}},methods:{tableRowClassName:function(t){return"row_type_"+t.row.status},handleView:function(t){this.logViewerProps.log=t,this.logViewerProps.dialogVisible=!0},closeLogViewer:function(){this.logViewerProps.log=null,this.logViewerProps.dialogVisible=!1}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_smtp_email_logs_table"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:t.emails,"row-class-name":t.tableRowClassName}},[e("el-table-column",{attrs:{label:t.$t("Subject")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.handleView(i.row)}}},[t._v(t._s(i.row.subject))]),t._v(" "),i.row.extra&&"Simulator"==i.row.extra.provider?e("span",{staticStyle:{color:"#ff0000"}},[t._v(" - Simulated")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Status"),width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.status)+"\n            ")]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"created_at",label:t.$t("Date-Time"),width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("nsHumanDiffTime")(e.row.created_at))+"\n            ")]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Actions"),width:"190px",align:"right"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-view"},on:{click:function(e){return t.handleView(i.row)}}})]}}])})],1),t._v(" "),e("log-viewer",{attrs:{logViewerProps:t.logViewerProps},on:{closeLogViewer:t.closeLogViewer}})],1)},[],!1,null,"4ebfdaa8",null).exports,Pagination:m,EmailPreview:Ee,EmailSequences:Us,ProfileAutomations:Ks,EmailComposer:Qs,Confirm:d,MailerConfig:L},data:function(){return{emailTab:"crm",loading:!1,emails:[],smtpEmailLogs:[],pagination:{total:0,per_page:10,current_page:1},preview:{id:null,isVisible:!1},sendEmailModal:!1,custom_email:{},resending:!1,selections:[],deleting:!1,loadingCustomEmailSettings:!1,sending_custom_email:!1,emailFilter:"all",is_transactional:"no"}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("subscribers/".concat(this.subscriber_id,"/emails"),{per_page:this.pagination.per_page,page:this.pagination.current_page,filter:this.emailFilter,tab:this.emailTab}).then(function(e){var i;(t.emails=e.emails.data,"fluentsmtp"===t.emailTab)&&(t.smtpEmailLogs=t.formatLogs(null==e||null===(i=e.emails)||void 0===i?void 0:i.data));t.pagination.total=e.emails.total}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1})},resendEmail:function(t){var e=this;if(!this.has_campaign_pro)return this.$notify.error(this.$t("_Ca_Please_utptutf")),!1;this.resending=!0,this.$post("campaigns-pro/".concat(t.campaign_id,"/resend-emails"),{email_ids:[t.id]}).then(function(t){e.$notify.success(t.message),e.fetch()}).catch(function(t){e.handleError(t)}).finally(function(){e.resending=!1})},previewEmail:function(t){this.preview.id=t,this.preview.isVisible=!0},sendCustomEmail:function(){var t=this;this.sending_custom_email=!0,this.custom_email.settings.is_transactional=this.is_transactional,this.$post("subscribers/".concat(this.subscriber_id,"/emails/send"),{campaign:this.custom_email}).then(function(e){t.$notify.success(e.message),t.fireCloseEmailComposer(),t.sendEmailModal=!1,t.custom_email={},t.fetch()}).catch(function(t){console.log(t)}).finally(function(){t.sending_custom_email=!1})},handleSelectionChange:function(t){this.selections=t},deleteSelected:function(){var t=this;this.deleting=!0;var e=this.selections.map(function(t){return t.id});this.$del("subscribers/".concat(this.subscriber_id,"/emails"),{email_ids:e}).then(function(e){t.selections=[],t.$notify.success(e.message),t.fetch()}).catch(function(e){t.handleError(e)}).finally(function(){t.deleting=!1})},openCustomEmailModal:function(){var t=this;if(this.loadingCustomEmailSettings=!0,this.custom_email.email_body="",this.sendEmailModal=!0,window.fc_subscriber_email_mock)return this.custom_email=JSON.parse(JSON.stringify(window.fc_subscriber_email_mock)),this.custom_email.settings.mailer_settings?this.custom_email.settings.mailer_settings.is_custom="no":this.custom_email.settings.mailer_settings={from_name:"",from_email:"",reply_to_name:"",reply_to_email:"",is_custom:"no"},void(this.loadingCustomEmailSettings=!1);this.$get("subscribers/".concat(this.subscriber_id,"/emails/template-mock")).then(function(e){var i=e.email_mock;i.settings.mailer_settings||(i.settings.mailer_settings={from_name:"",from_email:"",reply_to_name:"",reply_to_email:"",is_custom:"no"}),window.fc_subscriber_email_mock=i,t.custom_email=i}).catch(function(t){console.log(t)}).finally(function(){t.loadingCustomEmailSettings=!1})},fireCloseEmailComposer:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.unmountBlockEditor(),t&&t()},formatLogs:function(t){var e=this;return jQuery.each(t,function(i,n){t[i]=e.formatLog(n)}),t},formatLog:function(t){return t.to=this.formatAddresses(t.to),t},formatAddresses:function(t){var e=this;if(!t)return"";if(this.isEmptyValue(t))return"";if("string"==typeof t)return t;var i=[];return jQuery.each(t,function(t,n){n.name?i[t]=e.escapeHtml("".concat(n.name," <").concat(n.email,">")):i[t]=e.escapeHtml(n.email)}),i.join(", ")},escapeHtml:function(t){if(!t)return t;var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,function(t){return e[t]})}},mounted:function(){this.fetch(),this.doAction("fluent_crm_profile_emails_mounted",this)}},sa=na;var aa=i(2240),oa={insert:"head",singleton:!1};a()(aa.A,oa);aa.A.locals;const ra=e(sa,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_databox"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("h3",{staticStyle:{"margin-top":"6px"}},[t._v("\n                "+t._s(t.$t("Pro_Emails_fdcaa"))+"\n            ")])]),t._v(" "),e("el-col",{staticClass:"text-align-right",attrs:{id:"fc_sub_email_actions",span:12}},[t.hasPermission("fcrm_manage_contacts")&&"crm"===t.emailTab?e("el-popover",{attrs:{title:t.$t("Filter"),width:240,placement:"bottom","popper-class":"fcrm_sort_popover",trigger:"click"},scopedSlots:t._u([{key:"reference",fn:function(){return[e("el-button",{staticClass:"fcrm-sort-btn",attrs:{title:t.$t("Sort"),size:"mini"}},[e("i",{staticClass:"el-icon-sort"})])]},proxy:!0}],null,!1,3590872926)},[t._v(" "),e("div",{staticClass:"fcrm_sorting_action_wrap"},[e("el-radio-group",{staticClass:"fc_filter_emails",attrs:{size:"small"},on:{change:t.fetch},model:{value:t.emailFilter,callback:function(e){t.emailFilter=e},expression:"emailFilter"}},[e("el-radio",{attrs:{label:"all"}},[t._v(t._s(t.$t("All")))]),t._v(" "),e("el-radio",{attrs:{label:"open"}},[t._v(t._s(t.$t("Opened")))]),t._v(" "),e("el-radio",{attrs:{label:"click"}},[t._v(t._s(t.$t("Clicked")))]),t._v(" "),e("el-radio",{attrs:{label:"unopened"}},[t._v(t._s(t.$t("Unopened")))])],1)],1)]):t._e(),t._v(" "),t.has_campaign_pro&&t.hasPermission("fcrm_manage_contacts")&&"crm"==t.emailTab?e("el-button",{attrs:{disabled:!("subscribed"==t.subscriber.status||"transactional"==t.subscriber.status),size:"mini",type:"primary"},on:{click:function(e){return t.openCustomEmailModal()}}},[t._v("\n                "+t._s(t.$t("Send Email"))+"\n            ")]):t._e(),t._v(" "),t.appVars.has_fluentsmtp?e("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"active-text":"FluentSMTP Logs","active-value":"fluentsmtp","inactive-value":"crm"},on:{change:t.fetch},model:{value:t.emailTab,callback:function(e){t.emailTab=e},expression:"emailTab"}}):t._e()],1)],1),t._v(" "),"crm"===t.emailTab?e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading||t.resending,expression:"loading || resending"}],staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Available"),stripe:"",border:"",data:t.emails},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Subject")},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v("\n                "+t._s(i.row.email_subject)+"\n                "),e("span",{staticClass:"ns_counter",attrs:{title:t.$t("Total Clicks")}},[e("i",{staticClass:"el-icon el-icon-position"}),t._v(" "+t._s(i.row.click_counter||0))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:i.row.click_counter||1==i.row.is_open,expression:"scope.row.click_counter || scope.row.is_open == 1"}],staticClass:"ns_counter",attrs:{title:t.$t("Email opened")}},[e("i",{staticClass:"el-icon el-icon-folder-opened"})])]}}],null,!1,2286892137)}),t._v(" "),e("el-table-column",{attrs:{width:"190",label:t.$t("Date")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.scheduled_at)+"\n            ")]}}],null,!1,506153238)}),t._v(" "),e("el-table-column",{attrs:{width:"120",label:t.$t("Status"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{class:"status-"+i.row.status},[t._v("\n                                    "+t._s(t._f("ucFirst")(t.trans(i.row.status)))+"\n                                ")])]}}],null,!1,364919876)}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Preview"),width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-view"},on:{click:function(e){return t.previewEmail(i.row.id)}}}),t._v(" "),"sent"!=i.row.status&&"failed"!=i.row.status||!i.row.campaign_id?t._e():e("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-refresh-right"},on:{click:function(e){return t.resendEmail(i.row)}}},[t._v(t._s(t.$t("Resend"))+"\n                ")])]}}],null,!1,3861910684)})],1):"fluentsmtp"===t.emailTab?e("SMTPEmailLogs",{directives:[{name:"loading",rawName:"v-loading",value:t.loading||t.resending,expression:"loading || resending"}],attrs:{emails:t.smtpEmailLogs}}):t._e(),t._v(" "),e("el-row",[e("el-col",{attrs:{md:4,sm:24}},[t.selections.length?e("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.deleteSelected()}}},[t.selections.length?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],staticStyle:{"margin-top":"10px"},attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[t._v("\n                    "+t._s(t.$t("Delete Selected"))+"\n                ")]):t._e()],1):t._e(),t._v("\n            \n        ")],1),t._v(" "),e("el-col",{attrs:{md:20,sm:24}},[e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)],1),t._v(" "),t.has_campaign_pro?[e("hr",{staticStyle:{margin:"40px -20px 30px","border-color":"#eaeef5"}}),t._v(" "),e("email-sequences",{attrs:{subscriber_id:t.subscriber_id}}),t._v(" "),e("hr",{staticStyle:{margin:"40px -20px 30px","border-color":"#eaeef5"}}),t._v(" "),e("profile-automations",{attrs:{subscriber_id:t.subscriber_id}})]:t._e(),t._v(" "),e("email-preview",{attrs:{preview:t.preview}}),t._v(" "),e("el-dialog",{staticClass:"fc_funnel_block_modal",attrs:{visible:t.sendEmailModal,width:"60%","append-to-body":!0,"destroy-on-close":!0,"close-on-click-modal":!1,"before-close":t.fireCloseEmailComposer,title:t.$t("Send Custom Email")},on:{"update:visible":function(e){t.sendEmailModal=e}}},[t.loadingCustomEmailSettings?e("div",[e("h3",[t._v(t._s(t.$t("Loading Settings...")))])]):e("div",[t.sendEmailModal?e("div",{staticClass:"fc_block_white"},[e("email-composer",{staticClass:"fc_into_modal",attrs:{enable_test:!0,disable_fixed:!0,campaign:t.custom_email,label_align:"top"}},[e("template",{slot:"after_block_composer"},[t.loadingCustomEmailSettings?t._e():e("el-form",{staticStyle:{"margin-bottom":"20px"},model:{value:t.custom_email.settings.mailer_settings,callback:function(e){t.$set(t.custom_email.settings,"mailer_settings",e)},expression:"custom_email.settings.mailer_settings"}},[e("mailer-config",{attrs:{mailer_settings:t.custom_email.settings.mailer_settings}}),t._v(" "),e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.is_transactional,callback:function(e){t.is_transactional=e},expression:"is_transactional"}},[t._v("\n                                "+t._s(t.$t("Mark_Transactional"))+"\n                                "),e("span",{staticClass:"fc_checkbox_note"},[t._v("("+t._s(t.$t("transaction_checkbox_note"))+")")])])],1)],1)],2)],1):t._e(),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.fireCloseEmailComposer(),t.sendEmailModal=!1}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                ")]),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.sending_custom_email,expression:"sending_custom_email"}],attrs:{size:"small",type:"primary"},on:{click:function(e){return t.sendCustomEmail()}}},[t._v("\n                    "+t._s(t.$t("Send Email"))+"\n                ")])],1)])])],2)},[],!1,null,null,null).exports;var la=e({name:"FormSubmissionsBlock",props:["provider","subscriber_id"],components:{Pagination:m},data:function(){return{loading:!1,submissions:[],pagination:{per_page:10,current_page:1,total:0},columnsConfig:{}}},computed:{table_columns:function(){var t=[];return this.submissions.length&&(t=this.submissions[0]),t}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("subscribers/".concat(this.subscriber_id,"/form-submissions"),{provider:this.provider.provider_key,page:this.pagination.current_page,per_page:this.pagination.per_page}).then(function(e){t.submissions=e.submissions.data,t.pagination.total=parseInt(e.submissions.total),e.submissions.columns_config&&(t.columnsConfig=e.submissions.columns_config)}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1})}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"purchase_history_block"},[e("h3",{staticClass:"history_title"},[t._v(t._s(t.provider.title))]),t._v(" "),e("div",{staticClass:"provider_data"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",data:t.submissions}},[t._l(t.table_columns,function(i,n){return e("el-table-column",{key:n,attrs:{width:t.columnsConfig[n]?t.columnsConfig[n].width:"",label:t.columnsConfig[n]&&t.columnsConfig[n].label?t.columnsConfig[n].label:t.ucFirst(n)},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{domProps:{innerHTML:t._s(i.row[n])}})]}}],null,!0)},[t._v("\n            >\n                ")])}),t._v(" "),e("template",{slot:"empty"},[e("p",[t._v(t._s(t.$t("Form Submissions from"))+" "),e("b",[t._v(t._s(t.provider.name))]),t._v(" "+t._s(t.$t("no_form_submissions_found_for_this_subscriber")))])])],2),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)])},[],!1,null,null,null);const ca=e({name:"ProfileFormSubmissions",props:["subscriber_id"],components:{FormSubmissionBlock:la.exports},data:function(){return{providersData:{},app_ready:!1}},computed:{is_empty_item:function(){return this.isEmptyValue(this.providersData)}},mounted:function(){var t=this;this.each(window.fcAdmin.form_submission_providers,function(e,i){var n={title:e.title,name:e.name,provider_key:i};t.providersData[i]=n}),this.app_ready=!0}},function(){var t=this,e=t._self._c;return t.app_ready?e("div",{staticClass:"fluentcrm_databox"},[t.is_empty_item?e("div",[e("h3",{staticClass:"text-align-center"},[t._v("\n            "+t._s(t.$t("Pro_Form_SfFFwbshCFF"))+"\n        ")])]):t._l(t.providersData,function(i,n){return e("form-submission-block",{key:n,attrs:{provider:i,subscriber_id:t.subscriber_id}})})],2):t._e()},[],!1,null,null,null).exports;const ua=e({name:"ObjectNoteTemplate",props:["subscriber_id","route_prefix","section_title"],components:{Pagination:m,Confirm:d,FormBuilder:Gt},data:function(){return{loading:!1,notes:[],types:window.fcAdmin.activity_types,pagination:{total:0,per_page:10,current_page:1},editing_note:{title:"",description:"",type:"note",created_at:""},is_editing_note:!1,search:"",updating:!1,is_changed:!1,note_syncing_fields:{}}},watch:{"editing_note.type":function(t,e){this.handleValueUpdate(t,e)},"editing_note.title":function(t,e){this.handleValueUpdate(t,e)},"editing_note.description":function(t,e){this.handleValueUpdate(t,e)},"editing_note.created_at":function(t,e){this.handleValueUpdate(t,e)}},methods:{handleValueUpdate:function(t,e){t!==e&&(this.is_changed=!0)},handleClose:function(t){var e=this;this.is_changed?this.$confirm(this.$t("You have unsaved data, proceed?")).then(function(i){e.is_changed=!1,e.is_editing_note=!1,e.resetNoteData(),t()}).catch(function(t){console.log(t)}):t()},fetch:function(){var t=this;this.loading=!0,this.$get("".concat(this.route_prefix,"/").concat(this.subscriber_id,"/notes"),{per_page:this.pagination.per_page,page:this.pagination.current_page,search:this.search}).then(function(e){t.notes=e.notes.data,t.pagination.total=e.notes.total,t.note_syncing_fields=e.fields,t.resetNoteData(),t.is_editing_note=!1}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},initAddNote:function(){this.resetNoteData(),this.is_editing_note=!0},resetNoteData:function(){this.editing_note={title:"",description:"",type:"note",created_at:""}},saveNote:function(){var t=this;this.$post("".concat(this.route_prefix,"/").concat(this.subscriber_id,"/notes"),{note:this.editing_note}).then(function(e){t.$notify.success(e.message),t.fetch(),t.$emit("added",e.note),t.resetNoteData(),t.is_editing_note=!1}).catch(function(e){e.title&&t.$notify.error({title:t.$t("Error"),message:e.title.required}),e.description&&t.$notify.error({title:t.$t("Error"),message:e.description.required})}).finally(function(){t.loading=!1})},remove:function(t){var e=this;this.$del("".concat(this.route_prefix,"/").concat(this.subscriber_id,"/notes/").concat(t)).then(function(i){e.fetch(),e.$notify.success({title:e.$t("Great!"),message:i.message,offset:19}),e.$emit("deleted",t)}).catch(function(t){e.handleError(t)})},editNote:function(t){this.editing_note=t,this.is_editing_note=!0},updateNote:function(){var t=this;this.updating=!0,this.$put("".concat(this.route_prefix,"/").concat(this.subscriber_id,"/notes/").concat(this.editing_note.id),{note:this.editing_note}).then(function(e){t.$notify.success(e.message),t.is_editing_note=!1,t.resetNoteData(),t.$emit("updated",e.note)}).catch(function(e){t.handleError(e)}).finally(function(){t.updating=!1})},exportNotes:function(){if(!this.has_campaign_pro)return this.$notify.error(this.$t("Notes export feature is only available on pro version")),!1;location.href=window.ajaxurl+"?"+jQuery.param({action:"fluentcrm_export_notes",route_prefix:this.route_prefix,subscriber_id:this.subscriber_id})}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_databox"},[e("div",{staticClass:"fluentcrm_contact_header fc_notes_header"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:12}},[e("h3",{staticStyle:{margin:"5px 0"}},[t._v(t._s(t.section_title))])]),t._v(" "),t.hasPermission("fcrm_manage_contacts")?e("el-col",{staticClass:"text-align-right d-flex justify-end items-center",attrs:{span:12}},[e("el-input",{staticClass:"input-search-notes",staticStyle:{width:"220px","margin-right":"10px"},attrs:{clearable:"",size:"mini",placeholder:t.$t("Search")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.fetch()}},slot:"append"})],1),t._v(" "),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.initAddNote()}}},[t._v("\n                    "+t._s(t.$t("Add New"))+"\n                ")]),t._v(" "),e("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-download"},on:{click:function(e){return t.exportNotes()}}})],1):t._e()],1)],1),t._v(" "),t.pagination.total?[e("div",{staticClass:"fluentcrm_notes"},t._l(t.notes,function(i){return e("div",{key:i.id,staticClass:"fluentcrm_note"},[e("div",{staticClass:"note_header"},[e("div",{staticClass:"note_title"},[t._v(t._s(t.types[i.type]||i.type)+" : "+t._s(i.title))]),t._v(" "),e("div",{staticClass:"note_meta"},[i.added_by&&i.added_by.display_name?e("span",[t._v(t._s(t.$t("By"))+"\n                            "+t._s(i.added_by.display_name)+"\n                        ")]):t._e(),t._v("\n                        "+t._s(t.$t("at"))+" "),e("span",{attrs:{title:i.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(i.created_at)))])]),t._v(" "),t.hasPermission("fcrm_manage_contacts")?e("div",{staticClass:"note_delete"},[e("confirm",{on:{yes:function(e){return t.remove(i.id)}}},[e("i",{staticClass:"el-icon el-icon-delete"})]),t._v(" "),e("i",{staticClass:"el-icon el-icon-edit",staticStyle:{"margin-left":"5px"},on:{click:function(e){return t.editNote(i)}}})],1):t._e()]),t._v(" "),e("div",{staticClass:"note_body",domProps:{innerHTML:t._s(i.description)}})])}),0),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})]:e("div",[e("h4",{staticClass:"text-align-center"},[t._v(t._s(t.$t("Pro_No_NfPatfn")))])]),t._v(" "),e("el-drawer",{staticClass:"fc_company_info_drawer",attrs:{"with-header":!0,size:t.globalDrawerSize,title:t.is_editing_note&&t.editing_note.id?t.$t("Edit Note"):t.$t("Create a note"),"append-to-body":!0,"before-close":t.handleClose,visible:t.is_editing_note},on:{"update:visible":function(e){t.is_editing_note=e}}},[t.is_editing_note?e("div",{staticClass:"fc_company_unsaved fc_company_info_wrapper",class:"fc_note_type_"+t.editing_note.type,staticStyle:{padding:"10px 15px"}},[e("form-builder",{staticClass:"mt-20",attrs:{formData:t.editing_note,fields:t.note_syncing_fields.fields}}),t._v(" "),e("div",{staticClass:"fc_company_save_wrap"},[t.editing_note.id?e("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.updateNote()}}},[t._v("\n                    "+t._s(t.$t("Update Note"))+"\n                ")]):e("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.saveNote()}}},[t._v("\n                    "+t._s(t.$t("Create"))+"\n                ")])],1)],1):t._e()])],2)},[],!1,null,null,null).exports;const da=e({name:"ProfileNotes",props:["subscriber_id"],components:{ObjectNotesTemplate:ua},mounted:function(){this.changeTitle(this.$t("Notes"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_notes_wrapper"},[e("object-notes-template",{attrs:{subscriber_id:t.subscriber_id,route_prefix:"subscribers",section_title:t.$t("Pro_Contact_N_A")}})],1)},[],!1,null,null,null).exports;var _a=e({name:"PurchaseHistoryBlock",props:["provider","subscriber_id"],components:{Pagination:m},data:function(){return{loading:!1,orders:[],pagination:{per_page:10,current_page:1,total:0},sidebar_html:"",after_html:"",has_recount:!1,columnsConfig:{},query_data:{sort_by:"",sort_type:""},sortState:{currentProp:"",direction:""}}},computed:{table_columns:function(){var t=[];return this.orders&&this.orders.length&&(t=this.orders[0]),t}},methods:{handleSortable:function(t){t.prop?(this.query_data.sort_by=t.prop,this.sortState.currentProp!==t.prop?(this.sortState.currentProp=t.prop,this.sortState.direction="ASC"):this.sortState.direction="ASC"===this.sortState.direction?"DESC":"ASC",this.query_data.sort_type=this.sortState.direction,this.fetch()):(this.query_data.sort_by="",this.query_data.sort_type="",this.sortState.currentProp="",this.sortState.direction="")},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,this.$get("subscribers/".concat(this.subscriber_id,"/purchase-history"),{provider:this.provider.provider_key,page:this.pagination.current_page,per_page:this.pagination.per_page,sort_by:this.query_data.sort_by,sort_type:this.query_data.sort_type,will_recount:e}).then(function(e){t.orders=e.orders.data,t.pagination.total=parseInt(e.orders.total),e.orders.sidebar_html&&(t.sidebar_html=e.orders.sidebar_html),e.orders.after_html&&(t.after_html=e.orders.after_html),t.has_recount=e.orders.has_recount,e.orders.columns_config&&(t.columnsConfig=e.orders.columns_config)}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"purchase_history_block"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:t.sidebar_html?16:24,sm:24}},[e("h3",{staticClass:"history_title"},[t._v("\n                "+t._s(t.provider.title)+"\n                "),t.has_recount?e("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(e){return t.fetch("yes")}}},[t._v(t._s(t.$t("Re-Sync")))]):t._e()],1),t._v(" "),e("div",{staticClass:"provider_data"},[t.loading?e("el-skeleton",{attrs:{animated:"",rows:10}}):e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",data:t.orders},on:{"sort-change":t.handleSortable}},[t._l(t.table_columns,function(i,n){var s,a;return e("el-table-column",{key:n,attrs:{width:t.columnsConfig[n]?t.columnsConfig[n].width:"",label:t.columnsConfig[n]&&t.columnsConfig[n].label?t.columnsConfig[n].label:t.ucWords(t.$t(n)),prop:null!==(s=t.columnsConfig[n])&&void 0!==s&&s.sortable?t.columnsConfig[n].key:"",sortable:!(null===(a=t.columnsConfig[n])||void 0===a||!a.sortable)},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{domProps:{innerHTML:t._s(i.row[n])}})]}}],null,!0)})}),t._v(" "),e("template",{slot:"empty"},[e("p",[t._v(t._s(t.$t("Purchase History from"))+" "),e("b",[t._v(t._s(t.provider.name))]),t._v(" "+t._s(t.$t("PurchaseHistoryBlock.empty_desc")))])])],2),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1),t._v(" "),t.after_html?e("div",{staticClass:"fc_history_before",domProps:{innerHTML:t._s(t.after_html)}}):t._e()]),t._v(" "),t.sidebar_html?e("el-col",{attrs:{md:8,sm:24}},[e("div",{staticClass:"fc_history_sidebar",domProps:{innerHTML:t._s(t.sidebar_html)}})]):t._e()],1)],1)},[],!1,null,null,null);const pa=e({name:"ProfilePurchaseHistory",props:["subscriber_id"],components:{PurchaseHistoryBlock:_a.exports},data:function(){return{providersData:{},app_ready:!1}},computed:{is_empty_item:function(){return this.isEmptyValue(this.providersData)}},mounted:function(){var t=this;this.each(window.fcAdmin.purchase_providers,function(e,i){var n={title:e.title,name:e.name,provider_key:i};t.providersData[i]=n}),this.app_ready=!0}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_databox"},[t.app_ready?e("div",{staticClass:"fluentcrm_purchase_history_wrapper"},[t.is_empty_item?e("div",[e("h3",{staticClass:"text-align-center"},[t._v("\n                "+t._s(t.$t("Pro_Purchase_hfEwbsh"))+"\n            ")])]):t._l(t.providersData,function(i,n){return e("purchase-history-block",{key:n,attrs:{provider:i,subscriber_id:t.subscriber_id}})})],2):t._e()])},[],!1,null,null,null).exports;var ma=e({name:"SupportTicketsBlock",props:["provider","subscriber_id"],components:{Pagination:m},data:function(){return{loading:!1,tickets:[],pagination:{per_page:10,current_page:1,total:0},columnsConfig:{}}},computed:{table_columns:function(){var t=[];return this.tickets&&this.tickets.length&&(t=this.tickets[0]),t}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("subscribers/".concat(this.subscriber_id,"/support-tickets"),{provider:this.provider.provider_key,page:this.pagination.current_page,per_page:this.pagination.per_page}).then(function(e){t.tickets=e.tickets.data,t.pagination.total=parseInt(e.tickets.total),e.tickets.columns_config&&(t.columnsConfig=e.tickets.columns_config)}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"purchase_history_block"},[e("h3",{staticClass:"history_title"},[t._v(t._s(t.provider.title))]),t._v(" "),e("div",{staticClass:"provider_data"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",data:t.tickets}},[t._l(t.table_columns,function(i,n){return e("el-table-column",{key:n,attrs:{width:t.columnsConfig[n]?t.columnsConfig[n].width:"",label:t.columnsConfig[n]&&t.columnsConfig[n].label?t.columnsConfig[n].label:t.ucFirst(n)},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{domProps:{innerHTML:t._s(i.row[n])}})]}}],null,!0)},[t._v("\n            >\n                ")])}),t._v(" "),e("template",{slot:"empty"},[e("p",[t._v(t._s(t.$t("Support Tickets from"))+" "),e("b",[t._v(t._s(t.provider.name))]),t._v(" "+t._s(t.$t("no_tickets_found_for_this_subscriber")))])])],2),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)])},[],!1,null,null,null);const fa=e({name:"ProfileSuportTickets",props:["subscriber_id"],components:{SupportTicketsBlock:ma.exports},data:function(){return{providersData:{},app_ready:!1}},computed:{},mounted:function(){var t=this;this.each(window.fcAdmin.support_tickets_providers,function(e,i){var n={title:e.title,name:e.name,provider_key:i};t.providersData[i]=n}),this.app_ready=!0}},function(){var t=this,e=t._self._c;return t.app_ready?e("div",{staticClass:"fluentcrm_databox"},t._l(t.providersData,function(i,n){return e("support-tickets-block",{key:n,attrs:{provider:i,subscriber_id:t.subscriber_id}})}),1):t._e()},[],!1,null,null,null).exports;const ha=e({name:"ProfileFiles",props:["subscriber_id"],data:function(){return{adding_file:!1,files:[],loading:!1,pagination:{total:0,per_page:10,current_page:1},new_note:{title:"",description:"",type:"note"}}},methods:{fetchAttachments:function(){}},mounted:function(){this.fetchAttachments()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_databox"},[e("div",{staticClass:"fluentcrm_contact_header"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:12}},[e("h3",[t._v(t._s(t.$t("Pro_Contact_F_A")))])]),t._v(" "),e("el-col",{staticClass:"text-align-right",attrs:{span:12}},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.adding_file=!t.adding_file}}},[t._v(t._s(t.$t("Add New")))])],1)],1)],1),t._v(" "),e("div",{staticClass:"fc_uploader_drawer"},[e("el-uploader")],1),t._v(" "),e("div")])},[],!1,null,null,null).exports;const ga=e({name:"SubscriberProfileExternalView",props:["subscriber","subscriber_id"],components:{FormBuilder:Gt},data:function(){return{profile_section:this.$route.query.handler,heading:"",content_html:"",loading:!0,crud:null,showForm:!1,crudConfig:{},saving:!1}},methods:{fetchData:function(){var t=this;this.loading=!0,this.$get("subscribers/".concat(this.subscriber_id,"/external_view"),{section_provider:this.profile_section}).then(function(e){t.heading=e.heading,t.content_html=e.content_html,e.crud&&(t.crud=e.crud)}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},initCrudForm:function(){if(this.crud.fields){var t={};this.each(this.crud.fields,function(e,i){t[i]=e.default_value||""}),this.crudConfig.model=t,this.showForm=!0}},saveData:function(){var t=this;this.saving=!0,this.$post("subscribers/".concat(this.subscriber_id,"/external_view"),{section_provider:this.profile_section,data:this.crudConfig.model}).then(function(e){t.$notify.success(e.message||"Saved successfully"),t.showForm=!1,e.content_html?(t.content_html=e.content_html,e.heading&&(t.heading=e.heading)):t.fetchData()}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1})}},mounted:function(){this.fetchData()}},function(){var t=this,e=t._self._c;return t.loading?e("el-skeleton",{staticClass:"fc_skeleton_loader",staticStyle:{"margin-top":"20px"},attrs:{animated:""}},[e("template",{slot:"template"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:12}},[e("el-skeleton",{attrs:{rows:10}})],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-skeleton",{attrs:{rows:3}})],1)],1)],1)],2):e("div",{staticClass:"fluentcrm_databox"},[e("div",{staticClass:"fc_card_header"},[e("h3",{staticStyle:{"margin-top":"0"}},[t._v(t._s(t.heading))]),t._v(" "),t.crud&&t.crud.btn_label?e("div",{staticClass:"fluentcrm-actions"},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.initCrudForm()}}},[t._v("\n                "+t._s(t.crud.btn_label)+"\n            ")])],1):t._e()]),t._v(" "),e("div",{staticClass:"fc_external_profile_data",class:"fc_section_"+t.profile_section,domProps:{innerHTML:t._s(t.content_html)}}),t._v(" "),t.crud&&t.crud.btn_label?e("div",[e("el-drawer",{staticClass:"fc_company_info_drawer",attrs:{"with-header":!0,size:t.globalDrawerSize,title:t.crud.form_heading,"append-to-body":!0,visible:t.showForm},on:{"update:visible":function(e){t.showForm=e}}},[t.showForm?e("div",{staticStyle:{padding:"10px 15px"}},[e("form-builder",{attrs:{formData:t.crudConfig.model,fields:t.crud.fields}}),t._v(" "),e("div",{staticClass:"fc_drawer_footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveData()}}},[t._v("\n                        "+t._s(t.crud.save_btn_text||"Save")+"\n                    ")])],1)],1):t._e()])],1):t._e()])},[],!1,null,null,null).exports;const va=e({name:"GlobalSettings",data:function(){return{router_name:this.$route.name,menuItems:[{icon:"el-icon-document",title:this.$t("Business Settings"),route:"business_settings"},{route:"email_settings",icon:"el-icon-message",title:this.$t("Email Settings")},{icon:"el-icon-set-up",route:"other_settings",title:this.$t("General Settings")},{route:"custom_contact_fields",icon:"el-icon-s-custom",title:this.$t("Custom Contact Fields")},{route:"smart_links",icon:"el-icon-connection",title:this.$t("Smart Links")},{icon:"el-icon-s-check",route:"double-optin-settings",title:this.$t("Double Opt-in Settings")},{route:"integration_settings",icon:"el-icon-setting",title:this.$t("Integration Settings")},{route:"abandon_cart_settings",icon:"el-icon-shopping-cart-2",title:this.$t("Abandoned Cart Settings")},{icon:"el-icon-connection",route:"webhook-settings",title:this.$t("Incoming Webhooks")},{icon:"el-icon-connection",route:"managers",title:this.$t("Managers")},{icon:"el-icon-attract",route:"rest-api",title:this.$t("REST API")},{icon:"el-icon-bangzhu",route:"settings_tools",title:this.$t("Tools")},{icon:"el-icon-s-claim",route:"settings_compliance",title:this.$t("Compliance")},{icon:"el-icon-guide",route:"smtp_settings",title:this.$t("Set_SMTP_Email_SS")},{icon:"el-icon-ship",route:"experimental_features",title:this.$t("Advanced Features Config")}]}},mounted:function(){this.changeTitle("Settings"),"yes"==this.appVars.experimentals.system_logs&&this.menuItems.push({icon:"el-icon-info",route:"system_logs",title:this.$t("System Logs")}),"yes"==this.appVars.experimentals.activity_log&&this.menuItems.push({icon:"el-icon-s-order",route:"activity_logs",title:this.$t("Activity Logs")}),this.has_campaign_pro&&this.menuItems.push({icon:"el-icon-lock",route:"license_settings",title:this.$t("License Management")})}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_settings_wrapper"},[e("el-row",[e("el-col",{attrs:{span:5}},[e("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:!0,"default-active":t.router_name}},t._l(t.menuItems,function(i){return e("el-menu-item",{key:i.route,attrs:{route:{name:i.route},index:i.route}},[e("i",{class:i.icon}),t._v(" "),e("span",[t._v(t._s(i.title))])])}),1)],1),t._v(" "),e("el-col",{staticClass:"fc_settings_wrapper",attrs:{span:19}},[e("router-view")],1)],1)],1)},[],!1,null,null,null).exports;const ba={name:"PrefShortCodeSettings",components:{ItemCopier:Ue,FormBuilder:Gt},props:["settings"],data:function(){return{formFields:{pref_general:{type:"checkbox-group",label:this.$t("Primary Fields that can be editable"),help:this.$t("Select the fields that user can manage"),options:[{id:"prefix",label:this.$t("Name Prefix")},{id:"first_name",label:this.$t("First Name")},{id:"last_name",label:this.$t("Last Name")},{id:"phone",label:this.$t("Phone")},{id:"date_of_birth",label:this.$t("Date of Birth")},{id:"address_fields",label:this.$t("Address Fields")}]},pref_custom:{type:"checkbox-group",label:this.$t("Custom Fields that can be editable"),help:"Select the fields that user can manage",options:window.fcAdmin.contact_custom_fields.map(function(t){return{id:t.slug,label:t.label}})}},isShortcodeCopied:!1}},methods:{}};var ya=i(855),wa={insert:"head",singleton:!1};a()(ya.A,wa);ya.A.locals;const Ca={name:"EmailSettings",components:{FormBuilder:Gt,PrefShortCode:e(ba,function(){var t=this,e=t._self._c;return e("div",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.pref_form,callback:function(e){t.$set(t.settings,"pref_form",e)},expression:"settings.pref_form"}},[t._v(t._s(t.$t("Enable Preference Form Shortcode")))]),t._v(" "),"yes"==t.settings.pref_form?e("div",{staticStyle:{"margin-top":"20px",padding:"20px 20px 10px",background:"#ebf0f4"}},[e("form-builder",{attrs:{formData:t.settings,fields:t.formFields}}),t._v(" "),e("div",[e("h4",{staticClass:"shortcode-header"},[t._v(t._s(t.$t("Preference Form Shortcode")))]),t._v(" "),e("div",{staticStyle:{cursor:"pointer",width:"160px"}},[e("item-copier",{attrs:{text:"[fluentcrm_pref]",showViewButton:!1}})],1),t._v(" "),e("span",{staticClass:"helper-text"},[t._v("\n                "+t._s(t.$t("Preference_Form_Shortcode_Desc"))+"\n            ")])])],1):t._e()],1)},[],!1,null,"6e8aa23c",null).exports},data:function(){return{btnFromLoading:!1,loading:!1,settings:{},settings_loaded:!1,fields_email:{from_name:{wrapper_class:"fc_item_half",type:"input-text",placeholder:this.$t("Email From Name"),label:this.$t("From Name"),help:this.$t("Name that will be used to send emails")},from_email:{wrapper_class:"fc_item_half",type:"verified-email-input",placeholder:"name@domain.com",data_type:"email",label:this.$t("From Email Address"),help:this.$t("Provide Valid Email Address that will be used to send emails"),inline_help:this.$t("verified_email_help"),show_warning:!0},reply_to_name:{wrapper_class:"fc_item_half",type:"input-text",placeholder:this.$t("Reply to Name (Optional)"),label:this.$t("Reply to Name"),help:this.$t("Default Reply to Name (Optional)")},reply_to_email:{wrapper_class:"fc_item_half",type:"input-text",placeholder:"name@domain.com",data_type:"email",label:this.$t("Reply to Email (Optional)"),help:this.$t("EmailSettings.replyToEmail.help")},emails_per_second:{wrapper_class:"fc_item_half_no_float",type:"input-number",placeholder:this.$t("Maximum Email Limit Per Second"),data_type:"number",inline_help:"Minimum Value is: 4",label:this.$t("Maximum Email Limit Per Second"),help:this.$t("set_maximum_emails_will_be_sent_per_second"),min:4,max:100}},fields_footer:{email_footer:{type:"wp-editor",placeholder:this.$t("Email Footer Text"),label:this.$t("Email Footer Text"),help:this.$t("This email footer text will be used to all your email"),inline_help:"Business Name, Business Address, and Unsubscribe URL are mandatory to comply with the CAN-SPAM Act Guidelines. Without these, your emails may end up in the spam folder. It is also ideal to have the Manage Email Subscriptions URL in the email footer. These are added here by default.<ul><li>Use smartcodes: <b>{{crm.business_name}}</b> to fetch Your Business Name and <b>{{crm.business_address}}</b> to fetch Your Business Address anywhere inside your email.</li><li>Use <b>##crm.manage_subscription_url##, ##crm.unsubscribe_url##</b> shortcode to fetch the Unsubscribe URL and Manage Email Subscriptions URL.</li></ul> It is recommended to keep the texts as default aligned. Your provided email design template will align the texts."},unsubscribe_redirect:{type:"input-text",placeholder:this.$t("URL after redirect"),data_type:"url",label:this.$t("EmailSettings.unsub_redirect_label"),help:this.$t("EmailSettings.unsub_redirect_help")}},email_list_pref_fields:{pref_list_type:{type:"input-radio",wrapper_class:"fluentcrm_line_items",label:this.$t("Can a subscriber manage list subscriptions?"),options:[{id:"no",label:this.$t("No, Contact can not manage list subscriptions")},{id:"filtered_only",label:this.$t("Contact only see and manage the following list subscriptions")},{id:"all",label:this.$t("Contact can see all lists and manage subscriptions")}]},pref_list_items:{type:"option-selector",label:this.$t("Select Lists that you want to show for contacts"),option_key:"lists",is_multiple:!0,dependency:{depends_on:"pref_list_type",operator:"=",value:"filtered_only"}}}}},methods:{save:function(){var t=this;this.btnFromLoading=!0,this.$put("setting",{settings:{email_settings:this.settings}}).then(function(e){t.$notify.success({title:t.$t("Great!"),message:t.$t("Settings Updated."),offset:19})}).catch(function(e){t.handleError(e)}).finally(function(){t.btnFromLoading=!1})},fetchSettings:function(){var t=this;this.loading=!0,this.$get("setting",{settings_keys:["email_settings"]}).then(function(e){e.email_settings&&(t.settings=e.email_settings)}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1,t.settings_loaded=!0})}},mounted:function(){this.fetchSettings(),this.changeTitle(this.$t("Email Settings"))}};var $a=i(1964),ka={insert:"head",singleton:!1};a()($a.A,ka);$a.A.locals;const xa=e(Ca,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Global Email Settings")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{attrs:{type:"success",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.save}},[t._v("\n                "+t._s(t.$t("Save Settings"))+"\n            ")])],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around"},[e("div",{staticClass:"settings-section fluentcrm_databox"},[e("strong",{staticStyle:{"font-size":"15px"}},[t._v(t._s(t.$t("Default From Settings")))]),e("br"),t._v("\n            "+t._s(t.$t("email_settings_subheading"))+"\n            "),e("hr",{staticStyle:{"margin-bottom":"20px","margin-top":"15px"}}),t._v(" "),t.settings_loaded?e("form-builder",{attrs:{formData:t.settings,fields:t.fields_email}}):t._e()],1),t._v(" "),e("div",{staticClass:"settings-section fluentcrm_databox fc-global-email-fields"},[e("strong",{staticStyle:{"font-size":"15px"}},[t._v(t._s(t.$t("Email Footer Settings")))]),e("br"),t._v(" "),e("hr",{staticStyle:{"margin-bottom":"20px","margin-top":"15px"}}),t._v(" "),t.settings_loaded?e("form-builder",{attrs:{formData:t.settings,fields:t.fields_footer}}):t._e()],1),t._v(" "),e("div",{staticClass:"settings-section fluentcrm_databox"},[e("strong",{staticStyle:{"font-size":"15px"}},[t._v(t._s(t.$t("Email Preference Settings")))]),e("br"),t._v("\n            "+t._s(t.$t("EmailSettings.Preference.desc"))+"\n            "),e("hr",{staticStyle:{"margin-bottom":"20px","margin-top":"15px"}}),t._v(" "),t.settings_loaded?[e("form-builder",{attrs:{formData:t.settings,fields:t.email_list_pref_fields}}),t._v(" "),e("pref-short-code",{attrs:{settings:t.settings}})]:t._e()],2),t._v(" "),e("div",{staticClass:"text-align-right"},[e("el-button",{attrs:{type:"success",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.save}},[t._v("\n                "+t._s(t.$t("Save Settings"))+"\n            ")])],1)])])},[],!1,null,null,null).exports;const Sa={name:"BusinessSettings",components:{FormBuilder:Gt},data:function(){return{btnFromLoading:!1,loading:!1,settings:{},settings_loaded:!1,fields:{business_name:{type:"input-text",placeholder:this.$t("MyAwesomeBusiness Inc."),label:this.$t("Business Name"),help:this.$t("business_settings.name_help")},business_address:{type:"input-text",placeholder:this.$t("street, state, zip, country"),label:this.$t("Business Full Address"),help:this.$t("business_settings.address_help")},logo:{type:"photo-widget",label:this.$t("Logo"),help:this.$t("business_settings.logo_help"),btn_text:this.$t("Upload")},admin_email:{type:"input-text",placeholder:this.$t("Admin Email Address"),label:this.$t("Admin Email Addresses (Internal Use only)"),help:this.$t("Admin_Email_Help"),inline_help:this.$t("Admin_Email_Inline_Help")}}}},methods:{save:function(){var t=this;this.btnFromLoading=!0,this.$put("setting",{settings:{business_settings:this.settings}}).then(function(e){t.$notify.success({title:t.$t("Great!"),message:t.$t("Settings Updated."),offset:19})}).catch(function(e){t.$notify.error(t.$t(e.message))}).finally(function(){t.btnFromLoading=!1})},fetchSettings:function(){var t=this;this.loading=!0,this.$get("setting",{settings_keys:["business_settings"]}).then(function(e){e.business_settings&&(t.settings=e.business_settings)}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1,t.settings_loaded=!0})}},mounted:function(){this.fetchSettings(),this.changeTitle(this.$t("Business Settings"))}};var Aa=i(1091),Ea={insert:"head",singleton:!1};a()(Aa.A,Ea);Aa.A.locals;const Ta=e(Sa,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Business Settings")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{attrs:{type:"success",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.save}},[t._v(t._s(t.$t("Save Settings"))+"\n            ")])],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around"},[e("div",{staticClass:"settings-section"},[t.settings_loaded?e("form-builder",{attrs:{formData:t.settings,fields:t.fields}}):t._e()],1)])])},[],!1,null,null,null).exports;var Pa=i(9859),Oa=i.n(Pa);const Da=e({name:"listTagItems",props:["items","item_type"],computed:{text_lists:function(){var t=this,e=this.appVars["available_"+this.item_type];if(!e)return"";var i=[];return this.each(e,function(e){(Oa()(t.items,e.title)||Oa()(t.items,e.id))&&i.push(e.title)}),i.join(", ")},item_class:function(){return"lists"==this.item_type?"el-icon-files":"el-icon-price-tag"}}},function(){var t=this,e=t._self._c;return e("span",{staticClass:"fc_tag_items fc_list"},[e("i",{class:t.item_class}),t._v(" "+t._s(t.text_lists||t.$t("n/a")))])},[],!1,null,null,null).exports;function Fa(t){return Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fa(t)}function ja(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Ia(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ja(Object(i),!0).forEach(function(e){La(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ja(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function La(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Fa(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Fa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fa(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const Na={name:"WebHookSettings",components:{Confirm:d,Error:oi,WebhookPromo:e({name:"IncomingWebhookPromo"},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_narrow_box fluentcrm_databox text-align-center"},[e("h2",{},[t._v(t._s(t.$t("Incoming Webhooks")))]),t._v(" "),e("p",{staticClass:"text-align-center"},[t._v(t._s(t.$t("Create or Update contacts from Incoming Webhooks")))]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v(t._s(t.$t("Upgrade_To_Pro")))]),t._v(" "),e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Get FluentCRM Pro")))])])},[],!1,null,null,null).exports,ItemCopier:Ue,ListTagItems:Da},data:function(){return{statuses:[{value:"pending",label:this.$t("Pending")},{value:"subscribed",label:this.$t("Subscribed")},{value:"unsubscribed",label:this.$t("Unsubscribed")}],dialogTitle:this.$t("Create New Incoming Webhook"),addWebhookVisible:!1,btnFromLoading:!1,labelPosition:"left",errors:new ai,loading:!1,editing:!1,lists:[],tags:[],companies:[],webhooks:[],webhook:{},fields:[],customFields:[],schema:{},id:null,search:""}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("webhooks",{search:this.search}).then(function(e){t.webhooks=e.webhooks,t.fields=e.fields,t.customFields=e.custom_fields,t.schema=e.schema,t.lists=e.lists,t.tags=e.tags,t.has_company_module&&(t.companies=e.companies)}).catch(function(){}).finally(function(){t.loading=!1})},create:function(){this.editing=!1,this.addWebhookVisible=!0,this.webhook=Ia({},this.schema),this.dialogTitle=this.$t("Create New Incoming Webhook")},store:function(){var t=this;this.errors.clear(),this.btnFromLoading=!0,this.$post("webhooks",this.webhook).then(function(e){t.webhooks=e.webhooks,t.edit(e.webhook,e.id),t.$notify.success(e.message)}).catch(function(e){t.errors.record(e)}).finally(function(){t.btnFromLoading=!1})},edit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.id=e,this.editing=!0,this.webhook=Ia({},t),this.addWebhookVisible=!0,this.dialogTitle=this.webhook.name},update:function(){var t=this;this.errors.clear(),this.btnFromLoading=!0,this.$put("webhooks/".concat(this.id),this.webhook).then(function(e){t.webhooks=e.webhooks,t.$notify.success(e.message)}).catch(function(e){t.errors.record(e)}).finally(function(){t.btnFromLoading=!1,t.addWebhookVisible=!1})},remove:function(t){var e=this;this.$del("webhooks/".concat(t)).then(function(t){e.webhooks=t.webhooks,e.$notify.success(t.message)}).catch(function(t){e.errors.record(t)})},getListTitles:function(t){var e=[];for(var i in t)this.lists[i]&&e.push(this.lists[i].title);return e.join(", ")},getTagTitle:function(t){var e=this.tags.find(function(e){return e.id===t});return e?e.title:""}},mounted:function(){this.has_campaign_pro&&this.fetch(),this.changeTitle(this.$t("Webhook Settings"))}};var qa=i(7805),Ma={insert:"head",singleton:!1};a()(qa.A,Ma);qa.A.locals;const za=e(Na,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Incoming Webhook Settings")))])]),t._v(" "),t.has_campaign_pro?e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("div",{staticClass:"fc-search-box"},[e("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),e("el-button",{staticStyle:{height:"32px","line-height":"10px"},attrs:{type:"primary",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.create}},[t._v("\n                "+t._s(t.$t("Create Webhook"))+"\n            ")])],1):t._e()]),t._v(" "),e("div",{staticClass:"fluentcrm_pad_around fluentcrm_smart_links_wrap",staticStyle:{position:"relative"}},[t.loading?e("div",{staticClass:"fc_loading_bar",attrs:{slot:"before_contacts_table"},slot:"before_contacts_table"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):t._e(),t._v(" "),t.has_campaign_pro&&!t.loading?e("el-table",{attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",data:t.webhooks}},[e("el-table-column",{staticClass:"hello",attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticStyle:{"padding-left":"47px"}},[e("h4",{staticStyle:{margin:"8px 0 8px 0"}},[t._v(t._s(t.$t("Attached Tags and Lists")))]),t._v(" "),e("p",[i.row.value.lists&&i.row.value.lists.length?e("list-tag-items",{attrs:{item_type:"lists",items:i.row.value.lists}}):t._e(),t._v(" "),e("list-tag-items",{attrs:{item_type:"tags",items:i.row.value.tags}})],1)])]}}],null,!1,2436373407)}),t._v(" "),e("el-table-column",{attrs:{"min-width":100,label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.value.name)+"\n                ")]}}],null,!1,2113086399)}),t._v(" "),e("el-table-column",{attrs:{"min-width":250,label:t.$t("Smart URL")},scopedSlots:t._u([{key:"default",fn:function(t){return[e("item-copier",{attrs:{text:t.row.value.url}})]}}],null,!1,97710912)}),t._v(" "),e("el-table-column",{attrs:{width:"120",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.edit(i.row.value,i.row.id)}}}),t._v(" "),e("confirm",{on:{yes:function(e){return t.remove(i.row.id)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)]}}],null,!1,1264350880)})],1):e("div",[t.loading?t._e():e("webhook-promo")],1)],1),t._v(" "),e("el-dialog",{attrs:{width:"60%",title:t.dialogTitle,"close-on-click-modal":!1,"append-to-body":!0,visible:t.addWebhookVisible},on:{"update:visible":function(e){t.addWebhookVisible=e}}},[e("el-form",{attrs:{"label-position":t.labelPosition,"label-width":"150px",model:t.webhook}},[[e("el-form-item",{attrs:{label:t.$t("Name")}},[e("el-input",{model:{value:t.webhook.name,callback:function(e){t.$set(t.webhook,"name",e)},expression:"webhook.name"}}),t._v(" "),e("error",{attrs:{error:t.errors.get("name")}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Default List")}},[e("el-select",{attrs:{multiple:"",placeholder:t.$t("Select lists")},model:{value:t.webhook.lists,callback:function(e){t.$set(t.webhook,"lists",e)},expression:"webhook.lists"}},t._l(t.lists,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:String(t.id)}})}),1)],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Default Tags")}},[e("el-select",{attrs:{multiple:"",placeholder:t.$t("Select tags")},model:{value:t.webhook.tags,callback:function(e){t.$set(t.webhook,"tags",e)},expression:"webhook.tags"}},t._l(t.tags,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:String(t.id)}})}),1)],1),t._v(" "),t.has_company_module?e("el-form-item",{attrs:{label:t.$t("Default Companies")}},[e("el-select",{attrs:{multiple:"",placeholder:t.$t("Select Companies")},model:{value:t.webhook.companies,callback:function(e){t.$set(t.webhook,"companies",e)},expression:"webhook.companies"}},t._l(t.companies,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:String(t.id)}})}),1)],1):t._e(),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Status")}},[e("el-select",{attrs:{placeholder:t.$t("Select status")},model:{value:t.webhook.status,callback:function(e){t.$set(t.webhook,"status",e)},expression:"webhook.status"}},t._l(t.statuses,function(t){return e("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})}),1),t._v(" "),e("error",{attrs:{error:t.errors.get("status")}}),t._v(" "),"pending"==t.webhook.status?e("p",[t._v(t._s(t.$t("A double opt-in email will be sent if the contact is new")))]):t._e()],1)],t._v(" "),t.editing?[e("el-alert",{attrs:{type:"info",closable:!1,title:t.$t("WebHookSettings.Copy_Webhook_url")}}),t._v(" "),e("item-copier",{staticStyle:{margin:"20px 0"},attrs:{text:t.webhook.url}}),t._v(" "),e("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"info",closable:!1}},[t._v("\n                    "+t._s(t.$t("copy_webhook_keys_intro"))+"\n                    "),e("span",{staticStyle:{color:"#E6A23C"}},[t._v(t._s(t.$t("The email address is required!")))]),t._v(" "),e("a",{attrs:{target:"_blank",rel:"noopener",href:"https://fluentcrm.com/docs/webhook-integration/"}},[t._v(t._s(t.$t("Read the documentation")))])]),t._v(" "),e("el-table",{attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",height:"250",data:t.fields}},[e("el-table-column",{attrs:{label:t.$t("Contact Field"),prop:"field",width:"300"}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Key"),prop:"key"}})],1),t._v(" "),t.customFields?e("div",[e("el-alert",{staticStyle:{margin:"20px 0"},attrs:{title:t.$t("Custom Contact Fields"),type:"info",closable:!1}},[t._v("\n                        "+t._s(t.$t("custom_contact_fields"))+"\n                    ")]),t._v(" "),e("el-table",{attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",height:"250",data:t.customFields}},[e("el-table-column",{attrs:{label:t.$t("Custom Contact Field"),prop:"field",width:"300"}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Key"),prop:"key"}})],1)],1):t._e()]:t._e()],2),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.editing?e("el-button",{attrs:{type:"success",size:"small"},on:{click:t.update}},[t._v(t._s(t.$t("Update")))]):e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.store}},[t._v(t._s(t.$t("Create")))])],1)],1)],1)},[],!1,null,null,null).exports;function Ra(t){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ra(t)}function Ba(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Va(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ba(Object(i),!0).forEach(function(e){Ua(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ba(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Ua(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Ra(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Ra(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ra(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ha=e({name:"DataCleanup",components:{Confirm:d},data:function(){return{loading:!1,cleanup:{selected_logs:[],days_before:30},log_options:{emails:this.$t("Email History Logs"),email_clicks:this.$t("Email Click Logs"),email_open:this.$t("Email Open Logs"),system_logs:this.$t("System Logs"),activity_logs:this.$t("Activity Logs")},log_counters:[],showing_log:!1,reset_message:""}},methods:{deleteOldLogs:function(){var t=this;this.loading=!0,this.$del("setting/old_logs",Va({},this.cleanup)).then(function(e){e.has_more?t.deleteOldLogs():(t.$notify.success(e.message),t.resetData(),t.reset_message=e.message,t.loading=!1)}).catch(function(e){t.handleError(e),t.loading=!1})},getOldLogs:function(){var t=this;this.loading=!0,this.$get("setting/old_logs",Va({},this.cleanup)).then(function(e){t.showing_log=!0,t.log_counters=e.log_counts}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},resetData:function(){this.cleanup={selected_logs:[],days_before:30},this.showing_log=!1,this.log_counters=[]}}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"settings-section fluentcrm_databox",staticStyle:{border:"2px solid #deb373"}},[e("div",{staticClass:"fluentcrm_header",staticStyle:{"background-color":"white",padding:"0 0 10px 0","margin-bottom":"20px"}},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Data Cleanup")))]),t._v(" "),e("p",[t._v(t._s(t.$t("cleanup_old_data_like_email_log")))])])]),t._v(" "),e("div",{staticClass:"fc_global_form_builder"},[t.reset_message?e("div",{staticClass:"text-align-center"},[e("h3",[t._v(t._s(t.reset_message))])]):t.showing_log?e("div",[e("h3",[t._v(t._s(t.$t("Please review before you delete your old logs")))]),t._v(" "),e("el-table",{attrs:{"empty-text":t.$t("No Data Found"),data:t.log_counters,stripe:"",border:""}},[e("el-table-column",{attrs:{label:t.$t("Type"),prop:"title"}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Counts"),prop:"count"}})],1),t._v(" "),e("p"),t._v(" "),e("confirm",{attrs:{placement:"top-start",message:t.$t("delete_old_log_data_permanently_notice")},on:{yes:function(e){return t.deleteOldLogs()}}},[e("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("\n                    "+t._s(t.$t("Yes, I want to delete Old Logs"))+"\n                ")])],1),t._v(" "),e("el-button",{on:{click:function(e){return t.resetData()}}},[t._v(t._s(t.$t("Never-mind, I changed my mind")))]),t._v(" "),e("p",{staticStyle:{color:"#f56c6b","margin-top":"30px"}},[t._v(t._s(t.$t("All the selected logs that are"))+" "),e("b",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("older than"))+" "+t._s(t.cleanup.days_before)+" "+t._s(t.$t("days")))]),t._v("\n                "+t._s(t.$t("will be deleted"))+" "+t._s(t.$t("permanently"))+".\n                "),e("b",[t._v(t._s(t.$t("You can not reverse this action.")))])])],1):e("el-form",{attrs:{data:t.cleanup,"label-position":"top"}},[e("el-form-item",{attrs:{label:t.$t("Select Logs you want to delete")}},[e("el-checkbox-group",{model:{value:t.cleanup.selected_logs,callback:function(e){t.$set(t.cleanup,"selected_logs",e)},expression:"cleanup.selected_logs"}},t._l(t.log_options,function(i,n){return e("el-checkbox",{key:n,attrs:{label:n}},[t._v("\n                        "+t._s(i)+"\n                    ")])}),1),t._v(" "),e("p",[t._v(t._s(t.$t("Your Selected logs will be deleted permanently")))])],1),t._v(" "),e("el-form-item",{staticClass:"mb-10",attrs:{label:t.$t("Delete older data more than?")}},[e("el-input",{attrs:{type:"number",min:7},model:{value:t.cleanup.days_before,callback:function(e){t.$set(t.cleanup,"days_before",e)},expression:"cleanup.days_before"}}),t._v(" "),e("p",{staticStyle:{"margin-top":"20px"}},[t._v(t._s(t.$t("All the selected logs that are"))+" "),e("b",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("older than"))+" "+t._s(t.cleanup.days_before)+" "+t._s(t.$t("days")))]),t._v("\n                    "+t._s(t.$t("will be deleted")))])],1),t._v(" "),t.cleanup.selected_logs.length?[e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.getOldLogs()}}},[t._v(t._s(t.$t("Preview Log Summary"))+"\n                ")])]:t._e()],2)],1)])},[],!1,null,null,null);const Ga=e({name:"SettingsTools",components:{Confirm:d,DataCleanup:Ha.exports},data:function(){return{rest_statuses:{get_request_status:"checking",post_request_status:"checking",put_request_status:"checking",delete_request_status:"checking"},fetching_cron:!1,loading:!1,cron_events:[],server_info:!1}},methods:{checkRestRequest:function(t,e,i){var n=this;this[e]("setting/test").then(function(e){e.message?n.rest_statuses[t]=n.$t("OK"):n.rest_statuses[t]=n.$t("SettingsTools.checkRestRequest_message")}).catch(function(e){n.rest_statuses[t]=n.$t("SettingsTools.checkRestRequest_message")}).finally(function(){i&&i()})},resetDatabase:function(){var t=this;this.loading=!0,this.$post("setting/reset_db").then(function(e){t.$notify.success(e.message),t.loading=!1}).catch(function(e){t.handleError(e),t.loading=!1}).finally(function(){t.loading=!1})},fetchCronEvents:function(){var t=this;this.fetching_cron=!0,this.$get("setting/cron_status").then(function(e){t.cron_events=e.cron_events,t.server_info=e.server}).catch(function(e){t.handleError(e)}).finally(function(){t.fetching_cron=!1})},runCron:function(t){var e=this;this.fetching_cron=!0,this.$post("setting/run_cron",{hook:t}).then(function(t){e.$notify.success(t.message)}).catch(function(t){e.handleError(t)}).finally(function(){e.fetching_cron=!1})}},mounted:function(){var t=this;this.fetchCronEvents(),this.checkRestRequest("put_request_status","$put",function(){t.checkRestRequest("delete_request_status","$del",function(){t.checkRestRequest("get_request_status","$get",function(){t.checkRestRequest("post_request_status","$post")})})}),this.changeTitle(this.$t("Tools"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Tools")))])])]),t._v(" "),e("div",{staticClass:"fluentcrm_pad_around"},[e("div",{staticClass:"settings-section fluentcrm_databox"},[e("div",{staticClass:"fluentcrm_header",staticStyle:{"background-color":"white",padding:"0 0 10px 0","margin-bottom":"20px"}},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Rest API Status")))])])]),t._v(" "),e("div",{staticClass:"fc_global_form_builder"},[e("ul",t._l(t.rest_statuses,function(i,n){return e("li",{key:n},[e("b",[t._v(t._s(n))]),t._v(": "+t._s(i)+"\n                    ")])}),0)])]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching_cron,expression:"fetching_cron"}],staticClass:"settings-section fluentcrm_databox"},[e("div",{staticClass:"fluentcrm_header",staticStyle:{"background-color":"white",padding:"0 0 10px 0","margin-bottom":"20px"}},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("CRON Job Status")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:t.fetchCronEvents}})],1)]),t._v(" "),e("div",{staticClass:"fc_global_form_builder"},[e("el-table",{attrs:{"empty-text":t.$t("No Data Found"),data:t.cron_events,border:"",stripe:""}},[e("el-table-column",{attrs:{label:t.$t("Event Name"),prop:"human_name"}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Next Run"),prop:"next_run"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.is_overdue?e("span",{staticStyle:{color:"red"}},[t._v("Overdue: ")]):e("span",[t._v(t._s(t.$t("In")))]),t._v("\n                            "+t._s(i.row.next_run)+"\n                        ")]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Action")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.runCron(i.row.hook)}}},[t._v("\n                                "+t._s(t.$t("Run Manually"))+"\n                            ")])]}}])})],1),t._v(" "),t.server_info?[e("p",{staticStyle:{"margin-top":"20px"}},[t._v("\n                        Server Memory Limit: "),e("code",[t._v(t._s(t.server_info.memory_limit))]),t._v(". Current usage: "),e("code",[t._v(t._s(t.server_info.usage_percent)+"%")]),t._v(". Max Execution Time: "),e("code",[t._v(t._s(t.server_info.max_execution_time))])]),t._v(" "),t.server_info.has_server_cron?t._e():e("p",{staticStyle:{color:"red"}},[t._v("\n                        Server Side Cron is not enabled. Please consider enabling server side cron. "),e("a",{attrs:{target:"_blank",rel:"noopener",href:"https://fluentcrm.com/docs/fluentcrm-cron-job-basics-and-checklist/"}},[t._v("Read more about server side cron here.")])])]:t._e()],2)]),t._v(" "),e("div",{staticClass:"settings-section fluentcrm_databox",staticStyle:{border:"2px solid red"}},[e("h3",{staticStyle:{"margin-top":"0"}},[t._v(t._s(t.$t("Danger Zone")))]),t._v(" "),e("p",[t._v(t._s(t.$t("delete_all_crm_specific_data")))]),t._v(" "),e("p",[t._v(t._s(t.$t("You have to add"))+" "),e("code",[t._v("define('FLUENTCRM_IS_DEV_FEATURES', true);")]),t._v(" "+t._s(t.$t("in your"))+" wp-config.php "+t._s(t.$t("to make this feature work")))]),t._v(" "),e("hr"),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fc_global_form_builder text-align-center"},[e("h3",[t._v(t._s(t.$t("Reset FluentCRM Database tables")))]),t._v(" "),e("p",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("reset_db_warning")))]),t._v(" "),e("confirm",{attrs:{placement:"top-start",message:t.$t("reset_db_conf_warning")},on:{yes:function(e){return t.resetDatabase()}}},[e("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("\n                        "+t._s(t.$t("Yes, Delete and Reset All CRM Data"))+"\n                    ")])],1)],1)]),t._v(" "),e("data-cleanup")],1)])},[],!1,null,null,null).exports;const Wa=e({name:"Managers",components:{Confirm:d,Pagination:m},data:function(){return{managers:[],pagination:{total:0,current_page:1,per_page:10},loading:!1,permissions:{},editing_manager:{},check_all:!1,show_modal:!1,saving:!1,showSearchResults:!1,wordpressUser:[],wpUsersLoading:!1}},computed:{group_permissions:function(){var t={};return this.each(this.permissions,function(e,i){t[e.group]||(t[e.group]={title:e.group,permissions:{}}),t[e.group].permissions[i]=e}),t}},watch:{"editing_manager.email":function(t,e){t.length>2?this.editing_manager.id||(this.showSearchResults=!0,this.getWordpressUser(t)):(this.wordpressUser=[],this.showSearchResults=!1,this.wpUsersLoading=!1)},"editing_manager.permissions":function(t){t.length===Object.keys(this.permissions).length?this.check_all=!0:this.check_all=!1}},methods:{onFocusSearch:function(){this.editing_manager.email.length>2&&(this.showSearchResults=!0,this.getWordpressUser(this.editing_manager.email))},onBlurSearch:function(t){var e=this;"results"!=t&&setTimeout(function(){e.showSearchResults=!1},200)},onClickEachResults:function(t){this.editing_manager.email=t.user_email},getWordpressUser:function(t){var e=this;this.editing_manager.email.length<4&&(this.wpUsersLoading=!0),this.$get("reports/ajax-options",{option_key:"users",search:t}).then(function(t){e.wordpressUser=t.options}).catch(function(t){e.$handleError(t)}).finally(function(){e.wpUsersLoading=!1})},handleAllPermission:function(){if(this.check_all){var t=[];this.each(this.permissions,function(e,i){t.push(i)}),this.editing_manager.permissions=t}else this.editing_manager.permissions=[]},handleChangePermission:function(t,e){var i=this;this.editing_manager.permissions.includes(e)?t.depends.forEach(function(t){i.editing_manager.permissions.includes(t)||i.editing_manager.permissions.push(t)}):Object.keys(this.permissions).forEach(function(t){i.permissions[t].depends.includes(e)&&(i.editing_manager.permissions=i.editing_manager.permissions.filter(function(e){return e!=t}))})},doNothing:function(){},fetch:function(){var t=this;this.loading=!0,this.$get("campaign-pro-settings/managers",{per_page:this.pagination.per_page,page:this.pagination.current_page}).then(function(e){t.permissions=e.permissions,t.managers=e.managers.data,t.pagination.total=e.managers.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},readable:function(t){return this.permissions[t]?this.permissions[t].title:t},addManager:function(){this.editing_manager={email:"",permissions:[]},this.show_modal=!0,this.check_all=!1},removeManager:function(t){var e=this;this.$del("campaign-pro-settings/managers/".concat(t.id)).then(function(t){e.$notify.success(t.message),e.fetch()}).catch(function(t){e.handleError(t)})},initEdit:function(t){this.editing_manager=t,this.show_modal=!0,this.check_all=!1},save:function(){var t=this;this.saving=!0;var e=this.$post("campaign-pro-settings/managers",{manager:this.editing_manager});this.editing_manager.id&&(e=this.$put("campaign-pro-settings/managers/".concat(this.editing_manager.id),{manager:this.editing_manager})),e.then(function(e){t.$notify.success(e.message),t.fetch(),t.show_modal=!1}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1,t.check_all=!1})}},mounted:function(){this.has_campaign_pro&&this.fetch()}},function(){var t,e=this,i=e._self._c;return e.has_campaign_pro?i("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[i("div",{staticClass:"fluentcrm_header d-flex items-center justify-between"},[i("div",{staticClass:"fluentcrm_header_title"},[i("h3",[e._v(e._s(e.$t("CRM Managers")))]),e._v(" "),i("p",[e._v(e._s(e.$t("all_admin_managers_vue")))])]),e._v(" "),e.has_campaign_pro?i("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.addManager()}}},[e._v("\n                "+e._s(e.$t("Add New Manager"))+"\n            ")])],1):e._e()]),e._v(" "),e.has_campaign_pro?i("div",{staticClass:"fluentcrm_pad_b_20",staticStyle:{position:"relative"}},[e.loading?i("div",{staticClass:"fc_loading_bar",attrs:{slot:"before_contacts_table"},slot:"before_contacts_table"},[i("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):e._e(),e._v(" "),e.loading?i("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):i("el-table",{staticStyle:{width:"100%"},attrs:{border:"","empty-text":e.$t("No Data Found"),stripe:"",data:e.managers}},[i("el-table-column",{attrs:{label:e.$t("ID"),prop:"id",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("Name"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.first_name)+" "+e._s(t.row.last_name)+"\n                ")]}}],null,!1,3785257120)}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("Email"),width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.email)+"\n                ")]}}],null,!1,3087387761)}),e._v(" "),i("el-table-column",{attrs:{"min-width":300,label:e.$t("Permissions")},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.permissions,function(t){return i("el-tag",{key:t,attrs:{type:"info",size:"mini"}},[e._v("\n                        "+e._s(e.readable(t))+"\n                    ")])})}}],null,!1,2463043339)}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:e.$t("Actions"),"min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.initEdit(t.row)}}}),e._v(" "),i("confirm",{on:{yes:function(i){return e.removeManager(t.row)}}},[i("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)]}}],null,!1,2933693006)})],1),e._v(" "),i("pagination",{attrs:{pagination:e.pagination},on:{fetch:e.fetch}})],1):e._e(),e._v(" "),i("el-dialog",{attrs:{title:e.editing_manager.id?e.$t("Edit Manager"):e.$t("Add new Manager"),visible:e.show_modal,"append-to-body":!0,"close-on-click-modal":!1,"destroy-on-close":!0,width:"60%"},on:{"update:visible":function(t){e.show_modal=t}},nativeOn:{submit:function(t){return t.preventDefault(),e.doNothing.apply(null,arguments)}}},[i("el-form",{attrs:{data:e.editing_manager,"label-position":"top"}},[i("el-form-item",{attrs:{label:e.$t("User Email")}},[i("el-popover",{attrs:{trigger:"manual",placement:"bottom",width:"400","popper-class":"fc-user-search-popover"},model:{value:e.showSearchResults,callback:function(t){e.showSearchResults=t},expression:"showSearchResults"}},[i("div",{staticClass:"fc_board_member_add",attrs:{slot:"reference"},slot:"reference"},[i("el-input",{attrs:{type:"email",disabled:!!e.editing_manager.id,placeholder:e.$t("Type User Email Address")},on:{focus:e.onFocusSearch,blur:function(t){return e.onBlurSearch("input")}},model:{value:e.editing_manager.email,callback:function(t){e.$set(e.editing_manager,"email",t)},expression:"editing_manager.email"}}),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:!e.editing_manager.id,expression:"!editing_manager.id"}]},[e._v(e._s(e.$t("Managers.user_email.info")))])],1),e._v(" "),i("div",{ref:"searchResultsDiv",on:{mouseout:function(t){return e.onBlurSearch("results")}}},[e.wpUsersLoading?i("el-skeleton",{attrs:{animated:"",rows:3,throttle:300}}):e.wordpressUser.length>0?i("ul",{staticClass:"fc-user-search-list-group"},e._l(e.wordpressUser,function(t){return i("li",{key:t.id,staticClass:"fc-search-user-list",on:{click:function(i){return e.onClickEachResults(t)}}},[t.user_email?i("span",[e._v(" "+e._s(t.title)+" ")]):e._e()])}),0):!e.wpUsersLoading&&(null===(t=e.editing_manager)||void 0===t||null===(t=t.email)||void 0===t?void 0:t.length)>2?i("div",{staticClass:"fc-user-not-found"},[i("span",[i("span",[e._v(e._s(e.$t("No user found with your query.")))])])]):e._e()],1)])],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("Permissions")}},[i("hr"),e._v(" "),i("div",[i("el-checkbox",{staticStyle:{"min-width":"250px"},on:{change:e.handleAllPermission},model:{value:e.check_all,callback:function(t){e.check_all=t},expression:"check_all"}},[e._v("\n                        "+e._s(e.$t("Check All"))+"\n                    ")])],1),e._v(" "),e._l(e.group_permissions,function(t){return i("div",{key:t.title},[i("p",{staticStyle:{margin:"15px 0 10px","font-size":"16px","line-height":"100%",color:"#828282"}},[e._v(e._s(e._f("ucFirst")(t.title))+" Permissions")]),e._v(" "),i("el-checkbox-group",{model:{value:e.editing_manager.permissions,callback:function(t){e.$set(e.editing_manager,"permissions",t)},expression:"editing_manager.permissions"}},e._l(t.permissions,function(t,n){return i("el-checkbox",{key:n,staticStyle:{"min-width":"250px"},attrs:{label:n},on:{change:function(i){return e.handleChangePermission(t,n)}}},[e._v("\n                            "+e._s(t.title)+"\n                        ")])}),1)],1)})],2)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:e.editing_manager.id?"success":"primary"},on:{click:function(t){return e.save()}}},[e._v("\n                "+e._s(e.editing_manager.id?e.$t("Update"):e.$t("Create"))+"\n            ")])],1)],1)],1):i("div",[i("div",{staticClass:"fc_narrow_box fluentcrm_databox text-align-center"},[i("h2",{},[e._v(e._s(e.$t("CRM Managers - Roles and Permissions")))]),e._v(" "),i("p",{staticClass:"text-align-center"},[e._v(e._s(e.$t("crm_managers_roles_and_permissions")))]),e._v(" "),i("hr"),e._v(" "),i("p",[e._v(e._s(e.$t("Upgrade_To_Pro")))]),e._v(" "),i("a",{staticClass:"el-button el-button--danger",attrs:{href:e.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[e._v(e._s(e.$t("Get FluentCRM Pro")))])])])},[],!1,null,null,null).exports;function Ka(t){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(t)}function Ja(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Ya(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Ka(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Ka(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ka(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const Qa=e({name:"RestKeys",components:{ItemCopier:Ue},data:function(){return{rest_keys:[],managers:[],loading:!1,adding_key:{},show_modal:!1,saving:!1,created_key:!1,dialogDeleteApiKeyVisible:!1,apiKeyToDelete:{userId:null,uuid:null}}},methods:{deleteKeyConfirm:function(t,e){this.dialogDeleteApiKeyVisible=!0,this.apiKeyToDelete.userId=t,this.apiKeyToDelete.uuid=e},cancelDeleteApiKey:function(){this.apiKeyToDelete.userId=null,this.apiKeyToDelete.uuid=null,this.dialogDeleteApiKeyVisible=!1},deleteApiKey:function(){var t=this;this.loading=!0,this.$del("setting/rest-keys",{user_id:this.apiKeyToDelete.userId,uuid:this.apiKeyToDelete.uuid}).then(function(e){t.$notify.success(e.message),t.fetch()}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1,t.cancelDeleteApiKey()})},fetch:function(){var t=this;this.loading=!0,this.$get("setting/rest-keys").then(function(e){t.rest_keys=e.rest_keys,t.managers=e.managers}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},addKey:function(){this.adding_key={api_user_id:"",api_name:""},this.created_key=!1,this.show_modal=!0},save:function(){var t=this;this.saving=!0,this.$post("setting/rest-keys",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ja(Object(i),!0).forEach(function(e){Ya(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ja(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},this.adding_key)).then(function(e){t.$notify.success(e.message),t.created_key=e.item,t.fetch()}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1})}},mounted:function(){this.has_campaign_pro&&this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("REST API Access Management")))]),t._v(" "),e("p",[t._v(t._s(t.$t("rest_api_sub_heading")))])]),t._v(" "),t.has_campaign_pro?e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.addKey()}}},[t._v(t._s(t.$t("Add New Key"))+"\n            ")]),t._v(" "),e("a",{staticClass:"el-button el-button--info el-button--medium",attrs:{target:"_blank",rel:"noopener",href:"https://rest-api.fluentcrm.com/"}},[t._v("\n                "+t._s(t.$t("Documentation"))+"\n            ")])],1):t._e()]),t._v(" "),e("div",{staticStyle:{position:"relative"}},[t.loading?e("div",{staticClass:"fc_loading_bar",attrs:{slot:"before_contacts_table"},slot:"before_contacts_table"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):e("el-table",{staticStyle:{width:"100%"},attrs:{border:"","empty-text":t.$t("No Data Found"),stripe:"",data:t.rest_keys}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticStyle:{"padding-left":"60px","padding-bottom":"6px"}},[e("h2",{staticStyle:{margin:"8px 0 8px 0"}},[t._v(t._s(t.$t("APIs")))]),t._v(" "),t._l(i.row.api_keys,function(n){return e("el-tag",{key:n.name,attrs:{type:"info",size:"mini",closable:""},on:{close:function(e){return t.deleteKeyConfirm(i.row.id,n.uuid)}}},[t._v(t._s(n.name)+"\n                        ")])})],2)]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("ID"),prop:"id",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Name")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.first_name)+" "+t._s(e.row.last_name)+"\n                ")]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Email")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.email)+"\n                ")]}}])}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:t.$t("Actions"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("a",{staticClass:"el-button el-button--info el-button--mini",attrs:{href:i.row.manage_url}},[t._v(t._s(t.$t("Manage APIs")))])]}}])})],1)],1),t._v(" "),e("el-dialog",{attrs:{title:t.$t("Delete API Key"),visible:t.dialogDeleteApiKeyVisible,"close-on-click-modal":!1,"append-to-body":!0,width:"30%"},on:{"update:visible":function(e){t.dialogDeleteApiKeyVisible=e}}},[e("strong",[e("span",[t._v(t._s(t.$t("Api key delete confirmation")))])]),t._v(" "),e("br"),e("span",{staticClass:"warning"},[t._v(t._s(t.$t("Api key delete warning")))]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelDeleteApiKey}},[t._v("Cancel")]),t._v(" "),e("el-button",{attrs:{type:"danger"},on:{click:t.deleteApiKey}},[t._v("Confirm")])],1)]),t._v(" "),e("el-dialog",{attrs:{title:t.$t("Add New REST API Key"),visible:t.show_modal,"close-on-click-modal":!1,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.show_modal=e}}},[t.managers.length?t.created_key?e("div",{staticClass:"fc_api_created_response"},[e("h3",[t._v(t._s(t.$t("REST API key has been created to selected user")))]),t._v(" "),e("p",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("Please save the details as you can not retrieve again")))]),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[t._v("\n                    "+t._s(t.$t("API Username:"))+"\n                    "),e("item-copier",{attrs:{text:t.created_key.info.api_username}})],1),t._v(" "),e("el-col",{attrs:{span:12}},[t._v("\n                    "+t._s(t.$t("API Password:"))+"\n                    "),e("item-copier",{attrs:{text:t.created_key.info.api_password}})],1),t._v(" "),e("el-col",{attrs:{span:24}},[e("p",{staticStyle:{"margin-bottom":"50px"}},[t._v(t._s(t.$t("RestApi.Use_Basic_Auth_Info")))])])],1)],1):e("el-form",{attrs:{data:t.adding_key,"label-position":"top"}},[e("el-form-item",{attrs:{label:t.$t("Name of this key")}},[e("el-input",{attrs:{type:"text",placeholder:t.$t("Friendly Name for identification")},model:{value:t.adding_key.api_name,callback:function(e){t.$set(t.adding_key,"api_name",e)},expression:"adding_key.api_name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Associate FluentCRM Manager (Non-Admin Only)")}},[e("el-select",{model:{value:t.adding_key.api_user_id,callback:function(e){t.$set(t.adding_key,"api_user_id",e)},expression:"adding_key.api_user_id"}},t._l(t.managers,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.full_name+" "+t.email}})}),1)],1)],1):[e("h3",[t._v(t._s(t.$t("RestApi.Please_Create_A_Manager")))])],t._v(" "),t.created_key?t._e():e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v(t._s(t.$t("Create")))])],1)],2)],1)},[],!1,null,null,null).exports;function Za(t){return Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Za(t)}function Xa(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function to(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Za(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Za(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Za(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const eo=e({name:"BusinessSettings",components:{FormBuilder:Gt},data:function(){return{btnFromLoading:!1,loading:!1,settings:{},settings_loaded:!1,fields:{anonymize_ip:{type:"inline-checkbox",checkbox_label:this.$t("Anonymize ip Address for associate contact data"),true_label:"yes",false_label:"no",wrapper_class:"fc_mb_0"},delete_contact_on_user:{type:"inline-checkbox",checkbox_label:this.$t("Delete connected contact when a user get deleted"),true_label:"yes",false_label:"no",wrapper_class:"fc_mb_0"},personal_data_export:{type:"inline-checkbox",checkbox_label:this.$t("Include Contact Info in Personal Data export by WP"),true_label:"yes",false_label:"no",wrapper_class:"fc_mb_0"},one_click_unsubscribe:{type:"inline-checkbox",checkbox_label:this.$t("Enable one-click unsubscribe (if enabled then no feedback will be asked)"),true_label:"yes",false_label:"no",wrapper_class:"fc_mb_0"},enable_gravatar:{type:"inline-checkbox",checkbox_label:this.$t("Enable Gravatar Photo Service for Contact Photo"),true_label:"yes",false_label:"no",wrapper_class:"fc_mb_0"},gravatar_fallback:{type:"inline-checkbox",checkbox_label:this.$t("Gravatar Fallback (ui-avatars.com)"),true_label:"yes",false_label:"no",wrapper_class:"fc_mb_0 pl-24",dependency:{depends_on:"enable_gravatar",value:"yes",operator:"="}}}}},watch:{},methods:{save:function(){var t=this;this.btnFromLoading=!0,this.$post("setting/compliance",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Xa(Object(i),!0).forEach(function(e){to(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Xa(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},this.settings)).then(function(e){t.$notify.success({title:t.$t("Great!"),message:t.$t("Settings Updated."),offset:19})}).finally(function(){t.btnFromLoading=!1})},fetchSettings:function(){var t=this;this.loading=!0,this.$get("setting/compliance").then(function(e){t.settings=e.settings}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1,t.settings_loaded=!0})}},mounted:function(){this.fetchSettings(),this.changeTitle(this.$t("Compliance Settings"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Compliance Settings")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{attrs:{type:"success",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.save}},[t._v(t._s(t.$t("Save Settings"))+"\n            ")])],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around"},[e("div",{staticClass:"settings-section"},[t.settings_loaded?e("form-builder",{attrs:{formData:t.settings,fields:t.fields}}):t._e()],1)])])},[],!1,null,null,null).exports;const io=e({name:"BusinessSettings",components:{GenericPromo:Te,OptionSelector:Ft},data:function(){return{btnFromLoading:!1,loading:!1,settings:{},settings_loaded:!1,isAvailable:!1,wooOptions:null}},methods:{save:function(){var t=this;this.btnFromLoading=!0,this.$post("campaign-pro-settings/abandon-cart",{settings:this.settings}).then(function(e){t.$notify.success(e.message),e.reload&&location.reload()}).catch(function(e){t.$handleError(e)}).finally(function(){t.btnFromLoading=!1})},fetchSettings:function(){var t=this;this.loading=!0,this.$get("campaign-pro-settings/abandon-cart").then(function(e){t.settings=e.settings,t.wooOptions=e.wooOptions,t.settings_loaded=!0}).catch(function(e){t.$handleError(e)}).finally(function(){t.loading=!1})},checkWooPaidStatuses:function(){var t=this;this.each(this.wooOptions.paid_statuses,function(e){t.settings.wc_recovered_statuses.includes(e)||(t.settings.wc_recovered_statuses.push(e),t.$notify.warning("You must select woo defined paid statuses to mark the cart as recovered"))})}},mounted:function(){this.has_campaign_pro&&this.fetchSettings(),this.isAvailable=this.has_campaign_pro&&this.appVars.has_woo,this.changeTitle(this.$t("Abandon Cart Settings"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Abandoned Cart Settings")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"})]),t._v(" "),e("div",{staticClass:"fluentcrm_pad_around"},[t.has_campaign_pro?t.isAvailable?[t.settings_loaded?e("div",{staticClass:"settings-section"},[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.enabled,callback:function(e){t.$set(t.settings,"enabled",e)},expression:"settings.enabled"}},[t._v("\n                    "+t._s(t.$t("Enable Abandoned Cart Tracking for WooCommerce"))+"\n                ")]),t._v(" "),"yes"==t.settings.enabled?[e("el-form",{staticStyle:{"margin-top":"20px"},attrs:{"label-position":"top"},model:{value:t.settings,callback:function(e){t.settings=e},expression:"settings"}},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Cart Abandoned Cut-off Time")}},[e("el-input",{attrs:{type:"number",min:10,placeholder:"e.g. 30"},model:{value:t.settings.capture_after_minutes,callback:function(e){t.$set(t.settings,"capture_after_minutes",e)},expression:"settings.capture_after_minutes"}},[e("template",{slot:"append"},[t._v(t._s(t.$t("Minutes")))])],2),t._v(" "),e("p",{staticClass:"fc_inline_help"},[t._v(t._s(t.$t("Minutes_before_cart_is_marked_recoverable")))])],1)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Mark as Lost after")}},[e("el-input",{attrs:{type:"number",min:1,placeholder:"e.g. 20"},model:{value:t.settings.lost_cart_days,callback:function(e){t.$set(t.settings,"lost_cart_days",e)},expression:"settings.lost_cart_days"}},[e("template",{slot:"append"},[t._v(t._s(t.$t("Days")))])],2),t._v(" "),e("p",{staticClass:"fc_inline_help"},[t._v(t._s(t.$t("AB_Cart_Mark_cart_as_lost_after_days")))])],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Cool-Off Period")}},[e("el-input",{attrs:{type:"number",min:0,placeholder:"e.g. 10"},model:{value:t.settings.cool_off_period_days,callback:function(e){t.$set(t.settings,"cool_off_period_days",e)},expression:"settings.cool_off_period_days"}},[e("template",{slot:"append"},[t._v(t._s(t.$t("Days")))])],2),t._v(" "),e("p",{staticClass:"fc_inline_help"},[t._v(t._s(t.$t("AB_Cart_Exclude_customers_from_tracking_for_days_after_order")))])],1)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Status for New Contacts")}},[e("el-select",{attrs:{placeholder:t.$t("Select Status")},model:{value:t.settings.new_contact_status,callback:function(e){t.$set(t.settings,"new_contact_status",e)},expression:"settings.new_contact_status"}},[e("el-option",{attrs:{label:"Subscribed",value:"subscribed"}}),t._v(" "),e("el-option",{attrs:{label:"Transactional",value:"transactional"}})],1),t._v(" "),e("p",{staticClass:"fc_inline_help"},[t._v(t._s(t.$t("Status for your new contacts who are not exist in FluentCRM Database")))])],1)],1)],1),t._v(" "),t.wooOptions?e("div",{staticStyle:{"margin-bottom":"30px"}},[e("el-form-item",{attrs:{label:t.$t("Mark Cart as Recovered when WooCommerce Order Status Changes to:")}},[e("el-checkbox-group",{on:{change:t.checkWooPaidStatuses},model:{value:t.settings.wc_recovered_statuses,callback:function(e){t.$set(t.settings,"wc_recovered_statuses",e)},expression:"settings.wc_recovered_statuses"}},t._l(t.wooOptions.all_statuses,function(i,n){return e("el-checkbox",{key:n,attrs:{label:n}},[t._v("\n                                        "+t._s(t._f("ucFirst")(i))+"\n                                    ")])}),1)],1)],1):t._e(),t._v(" "),e("h3",[t._v(t._s(t.$t("GDPR Consent")))]),t._v(" "),e("el-form-item",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.gdpr_consent,callback:function(e){t.$set(t.settings,"gdpr_consent",e)},expression:"settings.gdpr_consent"}},[t._v("\n                                "+t._s(t.$t("Inform customers that their email and cart data are saved to send abandonment reminders"))+"\n                            ")])],1),t._v(" "),"yes"==t.settings.gdpr_consent?e("el-form-item",{attrs:{label:t.$t("GDPR Message")}},[e("el-input",{attrs:{type:"textarea",placeholder:t.$t("GDPR Message")},model:{value:t.settings.gdpr_consent_text,callback:function(e){t.$set(t.settings,"gdpr_consent_text",e)},expression:"settings.gdpr_consent_text"}}),t._v(" "),e("p",{staticClass:"fc_inline_help"},[t._v("Use smartcode "),e("span",{domProps:{innerHTML:t._s("{{opt_out label='No Thanks'}}")}}),t._v(" to let users opt out of cart\n                                tracking.")])],1):t._e(),t._v(" "),e("h3",[t._v(t._s(t.$t("User")))]),t._v(" "),e("el-row",{attrs:{gutter:30}},[t._e(),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Disable Tracking For the User Roles")}},[e("option-selector",{attrs:{field:{option_key:"user_roles_options",size:"small",is_multiple:!0,placeholder:t.$t("Select Roles")}},model:{value:t.settings.disabled_user_roles,callback:function(e){t.$set(t.settings,"disabled_user_roles",e)},expression:"settings.disabled_user_roles"}}),t._v(" "),e("p",{staticClass:"fc_inline_help"},[t._v(t._s(t.$t("Disable cart tracking for selected user roles")))])],1)],1)],1),t._v(" "),e("h3",[t._v(t._s(t.$t("Contact Tagging - Cart Abandoned")))]),t._v(" "),e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Add Lists on Cart Abandoned")}},[e("option-selector",{attrs:{field:{option_key:"lists",creatable:!0,is_multiple:!0,placeholder:t.$t("Select Lists (Optional)")}},model:{value:t.settings.lists_on_cart_abandoned,callback:function(e){t.$set(t.settings,"lists_on_cart_abandoned",e)},expression:"settings.lists_on_cart_abandoned"}}),t._v(" "),e("p",{staticClass:"fc_inline_help"},[t._v(t._s(t.$t("Selected list(s) added when cart is abandoned. Removed on successful order.")))])],1)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Add Tags on Cart Abandoned")}},[e("option-selector",{attrs:{field:{option_key:"tags",creatable:!0,is_multiple:!0,placeholder:t.$t("Select Tags (Optional)")}},model:{value:t.settings.tags_on_cart_abandoned,callback:function(e){t.$set(t.settings,"tags_on_cart_abandoned",e)},expression:"settings.tags_on_cart_abandoned"}}),t._v(" "),e("p",{staticClass:"fc_inline_help"},[t._v(t._s(t.$t("Selected tag(s) added when cart is abandoned. Removed on successful order.")))])],1)],1)],1),t._v(" "),e("h3",[t._v(t._s(t.$t("Contact Tagging - Cart Lost")))]),t._v(" "),e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Add Lists on Cart Lost")}},[e("option-selector",{attrs:{field:{option_key:"lists",creatable:!0,is_multiple:!0,placeholder:t.$t("Select Lists (Optional)")}},model:{value:t.settings.lists_on_cart_lost,callback:function(e){t.$set(t.settings,"lists_on_cart_lost",e)},expression:"settings.lists_on_cart_lost"}}),t._v(" "),e("p",{staticClass:"fc_inline_help"},[t._v(t._s(t.$t("Selected list(s) added when cart is lost. Removed on successful order.")))])],1)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Add Tags on Cart Lost")}},[e("option-selector",{attrs:{field:{option_key:"tags",creatable:!0,is_multiple:!0,placeholder:t.$t("Select Tags (Optional)")}},model:{value:t.settings.tags_on_cart_lost,callback:function(e){t.$set(t.settings,"tags_on_cart_lost",e)},expression:"settings.tags_on_cart_lost"}}),t._v(" "),e("p",{staticClass:"fc_inline_help"},[t._v(t._s(t.$t("Selected tag(s) added when cart is lost. Removed on successful order.")))])],1)],1)],1)],1)]:t._e(),t._v(" "),e("div",{staticStyle:{"margin-top":"20px"}},[e("el-button",{attrs:{loading:t.btnFromLoading,type:"success"},on:{click:t.save}},[t._v(t._s(t.$t("Save Settings"))+"\n                    ")])],1)],2):e("el-skeleton",{attrs:{rows:8,animated:!0}})]:[e("h3",[t._v(t._s(t.$t("Abandoned_Cart_requires_WooCommerce")))])]:[e("div",{staticClass:"fluentcrm_no_campaign_pro"},[e("generic-promo",{attrs:{heading:t.$t("Recover Carts & Pending Orders")}})],1)]],2)])},[],!1,null,null,null).exports;const no=e({name:"FunnelRoute",data:function(){return{app_ready:!1,options:{}}},methods:{getOptions:function(){var t=this;this.app_ready=!1;var e={fields:"campaigns,email_sequences"};this.has_company_module&&(e.fields="".concat(e.fields,",companies")),this.$get("reports/options",e).then(function(e){t.options=e.options,t.options.tags=t.appVars.available_tags,t.options.lists=t.appVars.available_lists,t.options.editable_statuses=t.appVars.available_contact_editable_statuses}).catch(function(e){t.handleError(e)}).finally(function(){t.app_ready=!0})}},mounted:function(){this.getOptions(),this.changeTitle(this.$t("Automations"))}},function(){var t=this._self._c;return t("div",{staticClass:"fc_funnel_root"},[t("router-view",{attrs:{options:this.options}})],1)},[],!1,null,null,null).exports;const so=e({name:"CreateFunnelModal",props:["visible","triggers"],data:function(){return{saving:!1,funnel:{title:"",trigger_name:""},templates:[],templatesLoading:!1,showCreateNewAutomations:!1,dialogVisible:this.visible,selected_category:this.$t("CRM"),allowed_categories:[]}},watch:{dialogVisible:function(){this.$emit("close")}},computed:{funnel_categories:function(){var t=[];return this.each(this.triggers,function(e){-1===t.indexOf(e.category)&&t.push(e.category)}),t.sort()},funnelTriggers:function(){var t=this;if(!this.selected_category)return[];var e={};return this.each(this.triggers,function(i,n){i.category===t.selected_category&&(e[n]=i)}),e}},methods:{funnelActiveHandle:function(t){this.funnel.trigger_name&&this.funnel.trigger_name==t?this.funnel.trigger_name="":this.funnel.trigger_name=t},saveFunnel:function(){var t=this;this.saving=!0,this.$post("funnels",{funnel:this.funnel}).then(function(e){t.$notify.success(e.message),t.$router.push({name:"edit_funnel",params:{funnel_id:e.funnel.id},query:{is_new:"yes"}})}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1})},getCatIcon:function(t){t=t.replaceAll(" ","").toLowerCase();var e=this.appVars.funnel_cat_icons[t];return e&&"voxel"==t||e&&"fluentcart"==t?e:e?'<i class="'+e+'"></i>':' <i class="el-icon el-icon-finished"></i>'},getFunnelIcon:function(t){return this.appVars.funnel_cat_icons[t]},createFromTemplate:function(t){var e=this;this.checkImportable(t)&&this.$post("funnels/create-from-template",{template:t}).then(function(t){e.$notify.success(t.message),e.$router.push({name:"edit_funnel",params:{funnel_id:t.funnel.id},query:{is_template:"yes"}})}).catch(function(t){e.handleError(t)})},checkImportable:function(t){var e=this;if(this.visibleProRibon(t))return this.$notify.error(this.$t("This template requires FluentCRM Pro version. Please upgrade to Pro.")),!1;if(t.dependencies&&t.dependencies.length>0){var i=t.dependencies.filter(function(t){return"fluentcrm_pro"!==t&&!e.allowed_categories.includes(t)});if(i.length>0){var n=i.map(function(t){return e.getDependencyLabel(t)});return this.$notify.error({title:this.$t("Missing Dependencies"),message:this.$t("This template requires the following dependencies to be activated: ")+n.join(", "),duration:6e3}),!1}}return!0},getTemplates:function(){var t=this;this.templatesLoading=!0,this.$get("funnels/templates").then(function(e){t.templates=e.all,t.allowed_categories=e.cats}).catch(function(e){t.handleError(e)}).finally(function(){t.templatesLoading=!1})},getTriggerIcon:function(t){return{woocommerce_order_status_completed:"fc-icon-woo_order_complete",woocommerce_order_status_processing:"fc-icon-woo_new_order",woocommerce_order_status_refunded:"fc-icon-woo_refund",woocommerce_order_status_changed:"fc-icon-woo",woocommerce_subscription_status_active:"fc-icon-woo_order_complete",woocommerce_subscription_renewal_payment_complete:"fc-icon-woo_order_complete",woocommerce_subscription_renewal_payment_failed:"fc-icon-woo_refund",wishlistmember_add_user_levels:"fc-icon-wishlist",tutor_after_enrolled:"fc-icon-tutor_lms_enrollment_course",tutor_course_complete_after:"fc-icon-tutor_lms_complete_course",tutor_lesson_completed_after:"fc-icon-tutor_lms_complete_course",rcp_membership_post_activate:"fc-icon-rcp_membership_level",rcp_transition_membership_status_expired:"fc-icon-rcp_membership_cancle",rcp_membership_post_cancel:"fc-icon-rcp_membership_cancle",pmpro_after_change_membership_level:"fc-icon-paid_membership_pro_user_level",pmpro_membership_post_membership_expiry:"fc-icon-membership_level_ex_pmp","mepr-account-is-active":"fc-icon-memberpress_membership","mepr-event-transaction-expired":"el-icon-circle-close",llms_user_enrolled_in_course:"fc-icon-lifter_lms_course_enrollment",lifterlms_course_completed:"fc-icon-lifter_lms_complete_course",llms_user_added_to_membership_level:"fc-icon-lifter_lms_membership",lifterlms_lesson_completed:"fc-icon-lifter_lms_complete_lession-t2",learndash_update_course_access:"fc-icon-learndash_enroll_course",learndash_lesson_completed:"fc-icon-learndash_complete_lesson",learndash_topic_completed:"fc-icon-learndash_complete_topic",learndash_course_completed:"fc-icon-learndash_complete_course",ld_added_group_access:"fc-icon-learndash_course_group",simulated_learndash_update_course_removed:"fc-icon-learndash_enroll_course",fc_ab_cart_simulation_woo:"fc-icon-woo",fluentcrm_contact_birthday:"el-icon-present",user_register:"fc-icon-wp_new_user_signup",fluentform_submission_inserted:"fc-icon-fluentforms",fluentcrm_contact_added_to_lists:"fc-icon-list_applied_2",edd_update_payment_status:"fc-icon-edd_new_order_success",edd_recurring_add_subscription_payment:"fc-icon-edd_new_order_success",edd_subscription_status_change:"el-icon-circle-close",affwp_set_affiliate_status:"fc-icon-trigger",fluent_surecart_purchase_created_wrap:"el-icon-shopping-cart-full",fluent_surecart_purchase_refund_wrap:"el-icon-sold-out"}[t]||"fc-icon-trigger"},visibleProRibon:function(t){var e=window.fcAdmin.addons.fluentcampaign,i=t.dependencies&&t.dependencies.includes("fluentcrm_pro");return!e&&i},getDependencyLabel:function(t){return{fluentforms:"Fluent Forms",memberpress:"MemberPress","fluent-boards":"Fluent Boards","fluent-support":"Fluent Support","fluent-booking":"Fluent Booking",woocommerce:"WooCommerce",wcs:"WooCommerce Subscriptions",edd:"Easy Digital Downloads",lifterlms:"LifterLMS",tutor:"Tutor LMS",learndash:"LearnDash",surecart:"SureCart",woo_abandon_carts:"WooCommerce Abandoned Cart",fluentcrm_pro:"FluentCRM Pro"}[t]||t.replace(/[-_]/g," ").replace(/\b\w/g,function(t){return t.toUpperCase()})}},mounted:function(){this.getTemplates()}},function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"fc_trigger_dialog_wrap",attrs:{title:t.$t("_Cr_Create_aAF"),visible:t.dialogVisible,"close-on-click-modal":!1,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.showCreateNewAutomations?e("div",[e("div",[e("div",{staticClass:"fcrm_back_to_template"},[e("h3",{on:{click:function(e){t.showCreateNewAutomations=!1}}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"el-icon-back"}),t._v(" "),e("i",{staticClass:"el-icon-back"})]),t._v("\n                    "+t._s(t.$t("Back To Templates"))+"\n                ")])]),t._v(" "),e("el-form",{attrs:{data:t.funnel,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.saveFunnel.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:t.$t("Internal Label")}},[e("el-input",{attrs:{placeholder:t.$t("Internal Label")},model:{value:t.funnel.title,callback:function(e){t.$set(t.funnel,"title",e)},expression:"funnel.title"}})],1),t._v(" "),e("div",{staticClass:"fc_a_cat_selection_wrapper"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"fc_trigger_left_col",attrs:{md:6,xs:12}},[e("el-menu",{staticClass:"fc_trigger_selectors",attrs:{"background-color":"#f2f2f2","text-color":"#1e1f21","active-text-color":"#ffd04b","default-active":t.selected_category},on:{select:function(e){t.selected_category=e,t.funnel.trigger_name=""}}},t._l(t.funnel_categories,function(i){return e("el-menu-item",{key:i,attrs:{index:i}},[e("span",{staticClass:"fc_trigger_icon",domProps:{innerHTML:t._s(t.getCatIcon(i))}}),t._v(" "),e("span",[t._v(t._s(i))])])}),1)],1),t._v(" "),e("el-col",{staticClass:"fc_trigger_right_col",attrs:{md:18,xs:12}},[e("div",{staticClass:"fc_choice_header"},[e("h2",{staticClass:"fc_choice_title"},[t._v("\n                                    "+t._s(t.$t("Select the trigger for this automation")))])]),t._v(" "),t.selected_category?e("el-row",{staticClass:"fc_choice_row",attrs:{gutter:20}},t._l(t.funnelTriggers,function(i,n){return e("el-col",{key:n,staticClass:"fc_choice_block",attrs:{md:8,sm:24,xs:24}},[e("div",{staticClass:"fc_choice_card",class:{fc_trigger_selected:t.funnel.trigger_name==n},on:{click:function(e){return t.funnelActiveHandle(n)}}},[i.disabled?e("div",{staticClass:"fc_pro_ribbon"},[t._v(t._s(t.$t("Pro")))]):i.ribbon?e("div",{staticClass:"fc_pro_ribbon"},[t._v(t._s(i.ribbon)+"\n                                        ")]):t._e(),t._v(" "),e("h3",[i.custom_icon?e("span",{domProps:{innerHTML:t._s(t.getFunnelIcon(i.custom_icon))}}):e("i",{class:i.icon?i.icon:"fc-icon-trigger"}),t._v("\n                                            "+t._s(i.label)+"\n\n                                        ")]),t._v(" "),e("p",{domProps:{innerHTML:t._s(i.description)}})])])}),1):t._e(),t._v(" "),t.funnel.trigger_name&&t.triggers[t.funnel.trigger_name].disabled?e("div",{staticClass:"promo_block",staticStyle:{background:"whitesmoke",padding:"20px 10px",margin:"0","text-align":"center",display:"block",overflow:"hidden"}},[e("p",[t._v(t._s(t.$t("install_fluentcrm_pro")))]),t._v(" "),e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                                    "+t._s(t.$t("Get FluentCRM Pro"))+"\n                                ")])]):t._e()],1)],1)],1)],1)],1),t._v(" "),t.funnel.trigger_name&&!t.triggers[t.funnel.trigger_name].disabled?e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveFunnel()}}},[t._v("\n            "+t._s(t.$t("Continue"))+"\n        ")])],1):t._e()]):e("div",[e("div",{staticClass:"fc_a_cat_selection_wrapper"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"fc_trigger_right_col",attrs:{md:24,xs:12}},[e("div",{staticClass:"fc_choice_header"},[e("h2",{staticClass:"fc_choice_title"},[t._v("\n                            "+t._s(t.$t("Popular pre-built funnel templates")))])]),t._v(" "),t.selected_category?e("el-row",{staticClass:"fc_choice_row",attrs:{gutter:20}},[e("el-col",{staticClass:"fc_choice_block",attrs:{md:6,sm:24,xs:24}},[e("div",{staticClass:"fc_choice_card_create_from_scratch fc_choice_card",on:{click:function(e){t.showCreateNewAutomations=!0}}},[e("h3",[e("i",{staticClass:"el-icon-plus"}),t._v(t._s(t.$t("Create from Scratch")))])])]),t._v(" "),t.templatesLoading?t._l(3,function(t){return e("el-col",{key:t,staticClass:"fc_choice_block",attrs:{md:6,sm:24,xs:24}},[e("el-skeleton",{attrs:{animated:"",rows:3}})],1)}):t._l(t.templates,function(i,n){var s;return e("el-col",{key:n,staticClass:"fc_choice_block",attrs:{md:6,sm:24,xs:24}},[e("div",{staticClass:"fc_choice_card"},[e("h3",[e("i",{class:t.getTriggerIcon(null==i||null===(s=i.funnel_data)||void 0===s?void 0:s.trigger_name)}),t._v("\n                                    "+t._s(i.title)+"\n                                ")]),t._v(" "),e("p",{domProps:{innerHTML:t._s(i.short_description)}}),t._v(" "),e("div",{staticClass:"fc_choice_card_overlay"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.createFromTemplate(i)}}},[t._v(t._s(t.$t("Import")))]),t._v(" "),e("a",{staticClass:"preview-btn",attrs:{size:"small",href:i.link,target:"_blank"}},[t._v(t._s(t.$t("Preview")))])],1),t._v(" "),t.visibleProRibon(i)?e("div",{staticClass:"fc_pro_ribbon"},[t._v(t._s(t.$t("Pro")))]):t._e()])])})],2):t._e(),t._v(" "),t.funnel.trigger_name&&t.triggers[t.funnel.trigger_name].disabled?e("div",{staticClass:"promo_block",staticStyle:{background:"whitesmoke",padding:"20px 10px",margin:"0","text-align":"center",display:"block",overflow:"hidden"}},[e("p",[t._v(t._s(t.$t("install_fluentcrm_pro")))]),t._v(" "),e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                            "+t._s(t.$t("Get FluentCRM Pro"))+"\n                        ")])]):t._e()],1)],1)],1)])])},[],!1,null,null,null).exports;const ao=e({name:"BulkFunnelActions",props:["selectedFunnels","options"],components:{Confirm:d},data:function(){return{delete_confirm_message:"<b>"+this.$t("Are you sure to delete?")+"</b><br />"+this.$t("delete_all_funnels_notice"),actions:{},select_job:{action_name:"",selected_options:[]},doing_action:!1,select_status:"",selectedLabels:[]}},watch:{"select_job.action_name":{handler:function(){this.select_job.selected_options=[],this.select_status=""},deep:!0}},methods:{doBulkAction:function(){var t=this,e=[];this.each(this.selectedFunnels,function(t){e.push(t.id)}),this.doing_action=!0,this.$post("funnels/do-bulk-action",{action_name:this.select_job.action_name,status:this.select_status,labels:this.selectedLabels,funnel_ids:e}).then(function(e){t.$notify.success(e.message),t.$emit("refetch"),t.selectedLabels=[]}).catch(function(e){t.handleError(e)}).finally(function(){t.doing_action=!1})}},mounted:function(){this.actions={change_funnel_status:{label:this.$t("Change Funnel Status"),options:this.options.statuses},apply_labels:{label:this.$t("Apply Labels"),options:this.options.labels},delete_funnels:{label:this.$t("Delete Funnels")}}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_bulk_wrap"},[e("div",{staticClass:"fc_bulk_item"},[e("label",[t._v(t._s(t.$t("Select Action")))]),t._v(" "),e("el-select",{staticClass:"mt-5",attrs:{clearable:"",filterable:"",size:"mini",placeholder:t.$t("Select Bulk Action")},model:{value:t.select_job.action_name,callback:function(e){t.$set(t.select_job,"action_name",e)},expression:"select_job.action_name"}},t._l(t.actions,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t.label}})}),1)],1),t._v(" "),"change_funnel_status"==t.select_job.action_name?[e("el-select",{staticClass:"ml-5 mt-5",attrs:{filterable:"",size:"mini",placeholder:t.$t("Select")},model:{value:t.select_status,callback:function(e){t.select_status=e},expression:"select_status"}},t._l(t.options.statuses,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"ml-5 mt-5",attrs:{disable:t.doing_action,size:"mini",disabled:!t.select_status,type:"success"},on:{click:function(e){return t.doBulkAction()}}},[t._v("\n            "+t._s(t.$t("Change Status"))+"\n        ")])]:t._e(),t._v(" "),"apply_labels"===t.select_job.action_name?[e("el-select",{attrs:{filterable:"",size:"mini",placeholder:t.$t("Select Labels"),multiple:""},model:{value:t.selectedLabels,callback:function(e){t.selectedLabels=e},expression:"selectedLabels"}},t._l(t.options.labels,function(i){return e("el-option",{key:i.id,attrs:{value:i.id}},[e("span",{style:"background:"+i.settings.color+";padding: 2px 5px 4px 5px;border-radius: 4px;"},[t._v("\n                    "+t._s(i.title)+"\n                ")])])}),1),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"ml-5",attrs:{disable:t.doing_action,size:"mini",disabled:!t.selectedLabels.length,type:"success"},on:{click:function(e){return t.doBulkAction()}}},[t._v("\n            "+t._s(t.$t("Apply Label"))+"\n        ")])]:"delete_funnels"==t.select_job.action_name?[e("confirm",{attrs:{placement:"top-start",message:t.delete_confirm_message},on:{yes:function(e){return t.doBulkAction()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action,size:"mini",type:"danger"},slot:"reference"},[t._v(t._s(t.$t("Delete Funnels"))+"\n            ")])],1)]:t._e()],2)},[],!1,null,"6547a0df",null).exports;var oo=e({name:"ColumnToggler",components:{Filterer:vn},data:function(){return{selection:[],automationFunnelColumns:tt}},computed:{columnGroups:function(){return[{slug:"automation",label:this.$t("Primary Fields"),fields:tt}]}},methods:{init:function(){var t=this.storage.get("automationFunnelColumns");t?(this.selection=t,this.fire()):(this.selection=["trigger","action","status","pause/run"],this.save())},save:function(){this.storage.set("automationFunnelColumns",this.selection),this.fire()},fire:function(){var t=this;this.$emit("input",this.selection),setTimeout(function(){t.$emit("dataChanged",t.selection)},400)}},mounted:function(){this.init()}},function(){var t=this,e=t._self._c;return e("filterer",{attrs:{name:"column-toggler"}},[e("el-button",{staticClass:"fc_columns_filter",attrs:{slot:"header",icon:"el-icon-setting",plain:"",size:"small"},slot:"header"},[t._v("\n        "+t._s(t.$t("Columns"))+"\n    ")]),t._v(" "),e("el-checkbox-group",{staticClass:"fluentcrm-filter-options fc_column_toggler_checks fc_checkbox_group",attrs:{slot:"items"},slot:"items",model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}},[t._l(t.columnGroups,function(i,n){return[e("el-checkbox",{key:n,attrs:{disabled:!0}},[t._v(t._s(i.label))]),t._v(" "),t._l(i.fields,function(i,s){return e("el-checkbox",{key:n+" "+s,staticClass:"el-dropdown-menu__item fc_checkbox",attrs:{label:i.value}},[t._v("\n                "+t._s(i.label)+"\n            ")])})]})],2),t._v(" "),e("el-dropdown-item",{staticClass:"no-hover",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"fc_primary_button",staticStyle:{width:"100%","margin-top":"10px"},attrs:{type:"success",size:"mini"},on:{click:t.save}},[t._t("btn-label",function(){return[t._v(t._s(t.$t("Save")))]})],2)],1)],1)},[],!1,null,null,null);const ro=e({name:"AutomationFunnels",components:{Labels:w,CreateFunnelModal:so,Confirm:d,Pagination:m,BulkFunnelActions:ao,InlineDoc:b,Toggler:oo.exports},data:function(){return{pagination:{total:0,per_page:10,current_page:1},funnels:[],search:"",create_modal:!1,triggers:{},loading:!1,duplicating:!1,sortBy:"id",sortType:"DESC",selection:!1,selectedFunnels:[],options:{labels:[],statuses:[{id:"published",title:this.$t("Publish")},{id:"draft",title:this.$t("Draft")}],delimiter:"comma"},working:!1,visibleLabelsForm:!1,selectedLabels:[],labelFilter:[],showingLabelsConfig:!1,isOpenFunnelAction:!1,showActionButtons:!1,showApplyLabelSetting:!1,columns:[],initialFired:!1}},methods:{maybeReFetch:function(){var t=!1;this.initialFired||(t=!0),t&&(this.getFunnels(),this.initialFired=!0)},getFunnels:function(){var t=this;this.loading=!0,this.$get("funnels",{per_page:this.pagination.per_page,page:this.pagination.current_page,labels:this.labelFilter,with:["triggers"],search:this.search,sort_by:this.sortBy,sort_type:this.sortType}).then(function(e){t.funnels=e.funnels.data,t.pagination.total=e.funnels.total,t.triggers=e.triggers,t.selection=!1,t.storage.get("funnel_per_page")!=t.pagination.per_page&&t.storage.set("funnel_per_page",t.pagination.per_page)}).catch(function(e){t.storage.set("funnel_per_page",10),t.handleError(e)}).finally(function(){t.loading=!1})},onSelection:function(t){this.selection=!!t.length,this.selectedFunnels=t},handleSortable:function(t){"descending"===t.order?(this.sortBy=t.prop,this.sortType="DESC"):(this.sortBy=t.prop,this.sortType="ASC"),this.getFunnels()},getTriggerTitle:function(t){return this.triggers[t]?this.triggers[t].label:'<strong style="color: red;">'+t+" ("+this.$t("INACTIVE")+")</strong>"},edit:function(t){this.$router.push({name:"edit_funnel",params:{funnel_id:t.id}})},subscribers:function(t){this.$router.push({name:"funnel_subscribers",params:{funnel_id:t.id}})},remove:function(t){var e=this;this.$del("funnels/".concat(t.id)).then(function(t){e.$notify.success(t.message),e.getFunnels()}).catch(function(t){e.handleError(t)})},duplicate:function(t){var e=this;this.duplicating=!0,this.$post("funnels/".concat(t.id,"/clone")).then(function(t){e.$notify.success(t.message),e.$router.push({name:"edit_funnel",params:{funnel_id:t.funnel.id},query:{is_new:"yes"}})}).catch(function(t){e.handleError(t)}).finally(function(){e.duplicating=!1})},exportFunnel:function(t){location.href=window.ajaxurl+"?"+jQuery.param({action:"fluentcrm_export_funnel",funnel_id:t.id})},updateStatus:function(t){var e=this;this.working=!0;var i=t.status;this.$put("funnels/"+t.id,{status:i}).then(function(n){e.$notify.success(n.message),t.status=i}).catch(function(t){e.handleError(t)}).finally(function(){e.working=!1})},showLabelDialog:function(){this.showingLabelsConfig=!0},fetchLabels:function(){var t=this;this.$get("labels").then(function(e){t.options.labels=e.labels}).catch(function(e){t.handleError(e)}).finally(function(){})},toggleComponent:function(){var t=this;this.isOpenFunnelAction=!this.isOpenFunnelAction,this.isOpenFunnelAction?(this.showActionButtons=!0,setTimeout(function(){document.addEventListener("click",t.handleClickOutside)},0)):document.removeEventListener("click",this.handleClickOutside)},handleClickOutside:function(t){var e;null!==(e=this.$refs.fcFunnelActions)&&void 0!==e&&e.contains(t.target)||this.closePopOver()},closePopOver:function(){this.isOpenFunnelAction=!1,this.showApplyLabelSetting=!1,this.showActionButtons=!0},applyLabelSetting:function(t){this.showApplyLabelSetting=!0,this.showActionButtons=!1,this.selectedLabels=t.labels.map(function(t){return t.id})},applyLabels:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"attach";this.$put("funnels/"+t.id+"/update-labels",{action:n,label_ids:"attach"==n?this.selectedLabels:e}).then(function(t){i.$notify.success(t.message),i.getFunnels()}).catch(function(t){i.handleError(t)}).finally(function(){i.showApplyLabelSetting=!1,i.showActionButtons=!0})},handleBackAction:function(){this.showActionButtons=!0,this.showApplyLabelSetting=!1},closeDrawer:function(){this.showingLabelsConfig=!1}},watch:{labelFilter:function(){this.getFunnels()}},mounted:function(){this.pagination.per_page=parseInt(this.storage.get("funnel_per_page",10)),this.getFunnels(),this.changeTitle(this.$t("Automation Funnels")),this.fetchLabels()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_settings_wrapper"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Automation Funnels")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-input",{staticClass:"input-with-select mr-5",attrs:{size:"mini",placeholder:t.$t("Search")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFunnels.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.getFunnels()}},slot:"append"})],1),t._v(" "),e("el-select",{staticClass:"mr-5",staticStyle:{"max-width":"194px"},attrs:{size:"mini",multiple:"",clearable:"",placeholder:t.$t("Filter by Labels"),filterable:""},model:{value:t.labelFilter,callback:function(e){t.labelFilter=e},expression:"labelFilter"}},t._l(t.options.labels,function(i){return e("el-option",{key:i.id,attrs:{value:i.id,label:i.title}},[e("span",{style:"background:"+i.settings.color+";padding: 2px 5px 4px 5px;border-radius: 4px;"},[t._v("\n                        "+t._s(i.title)+"\n                    ")])])}),1),t._v(" "),t.hasPermission("fcrm_write_funnels")?e("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(e){t.create_modal=!0}}},[t._v("\n                "+t._s(t.$t("New Automation"))+"\n            ")]):t._e(),t._v(" "),e("toggler",{on:{dataChanged:function(e){return t.maybeReFetch()}},model:{value:t.columns,callback:function(e){t.columns=e},expression:"columns"}}),t._v(" "),e("inline-doc",{attrs:{doc_id:2362}}),t._v(" "),e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link"},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{cursor:"pointer"}})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.$router.push({name:"import_funnel"})}}},[t._v("\n                            "+t._s(t.$t("Import"))+"\n                        ")])]),t._v(" "),e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:t.showLabelDialog}},[t._v("\n                            "+t._s(t.$t("Manage Labels"))+"\n                        ")])]),t._v(" "),e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.$router.push({name:"funnel_activities"})}}},[t._v("\n                            "+t._s(t.$t("Activities"))+"\n                        ")])])],1)],1)],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_body fluentcrm_pad_b_20",staticStyle:{position:"relative"}},[t.selection?e("div",{staticClass:"fluentcrm-header-secondary"},[e("bulk-funnel-actions",{attrs:{selectedFunnels:t.selectedFunnels,options:t.options},on:{refetch:t.getFunnels}})],1):t._e(),t._v(" "),t.loading?e("div",{staticClass:"fc_loading_bar"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):t._e(),t._v(" "),t.loading?t._e():e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.duplicating,expression:"duplicating"}],staticStyle:{width:"100%"},attrs:{border:"","default-sort":{prop:t.sortBy,order:"DESC"==t.sortType?"descending":"ascending"},"empty-text":t.$t("No Data Found"),stripe:"",data:t.funnels},on:{"sort-change":t.handleSortable,"selection-change":t.onSelection}},[e("el-table-column",{attrs:{type:"selection",width:"45",fixed:""}}),t._v(" "),e("el-table-column",{attrs:{sortable:"custom",property:"id",width:"60",label:t.$t("ID")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.id)+"\n                ")]}}],null,!1,1651518352)}),t._v(" "),e("el-table-column",{attrs:{"min-width":"250",sortable:"custom",property:"title",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"edit_funnel",params:{funnel_id:i.row.id}}}},[e("h4",{staticClass:"no-margin"},[t._v("\n                            "+t._s(i.row.title)+"\n                        ")])]),t._v(" "),i.row.description?e("span",{staticClass:"funnel_description"},[t._v(t._s(i.row.description))]):t._e()]}}],null,!1,1682096121)}),t._v(" "),-1!=t.columns.indexOf("trigger")?e("el-table-column",{attrs:{"min-width":"250",sortable:"custom",property:"trigger_name",label:t.$t("Trigger")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{domProps:{innerHTML:t._s(t.getTriggerTitle(i.row.trigger_name))}})]}}],null,!1,2520202412)}):t._e(),t._v(" "),-1!=t.columns.indexOf("labels")?e("el-table-column",{attrs:{width:"250",label:t.$t("Labels")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.labels?e("div",{staticClass:"fc_funnel_labels"},t._l(i.row.labels,function(n,s){return e("el-tag",{key:s,style:"background:"+n.color,attrs:{size:"mini"}},[t._v("\n                            "+t._s(n.title)+"\n                            "),e("Confirm",{attrs:{message:t.$t("Remove_Label_From_funnel_Message")},on:{yes:function(e){return t.applyLabels(i.row,n.id,"detach")}}},[e("i",{staticClass:"el-tag__close el-icon-close",attrs:{slot:"reference"},slot:"reference"})])],1)}),1):t._e()]}}],null,!1,1604918371)}):t._e(),t._v(" "),e("el-table-column",{attrs:{sortable:"custom",property:"status",width:"100",label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tag",{directives:[{name:"loading",rawName:"v-loading",value:t.working,expression:"working"}],attrs:{type:"published"==i.row.status?"success":"info",size:"mini"}},[t._v(t._s(t._f("ucFirst")(t.$t(i.row.status))))])]}}],null,!1,342217780)}),t._v(" "),-1!=t.columns.indexOf("stats")?e("el-table-column",{attrs:{width:"100",label:t.$t("Stats")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticClass:"stats_badge_inline"},[e("span",[e("i",{staticClass:"el-icon el-icon-user"}),t._v(" "+t._s(i.row.subscribers_count))])])]}}],null,!1,2831264362)}):t._e(),t._v(" "),-1!=t.columns.indexOf("pause/run")?e("el-table-column",{attrs:{width:"100",label:t.$t("Pause/Run")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-switch",{attrs:{"inactive-value":"draft","active-value":"published"},on:{change:function(e){return t.updateStatus(i.row)}},model:{value:i.row.status,callback:function(e){t.$set(i.row,"status",e)},expression:"scope.row.status"}})]}}],null,!1,3431624191)}):t._e(),t._v(" "),-1!=t.columns.indexOf("action")?e("el-table-column",{attrs:{fixed:"right","min-width":"150",label:t.$t("Action")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-data-line"},on:{click:function(e){return t.subscribers(i.row)}}},[t._v("\n                        "+t._s(t.$t("Reports"))+"\n                    ")]),t._v(" "),t.hasPermission("fcrm_write_funnels")?[e("el-popover",{attrs:{visible:t.isOpenFunnelAction,placement:"bottom","popper-class":"fc-funnel-actions-popover",width:200},scopedSlots:t._u([{key:"reference",fn:function(){return[e("span",{ref:"buttonRefMoreFiled",staticClass:"fbs_show_board_show_section_actions",on:{click:t.toggleComponent}},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{"font-weight":"bold",cursor:"pointer"}})])]},proxy:!0}],null,!0)},[e("div",{ref:"fcFunnelActions"},[t.showActionButtons?t._e():e("div",{staticClass:"fc_funnel_action_header",on:{click:t.handleBackAction}},[e("i",{staticClass:"el-icon-back"}),t._v(" "+t._s(t.$t("Back")))]),t._v(" "),t.showActionButtons?e("div",{staticClass:"fc_funnel_acton_field"},[e("el-button",{staticClass:"fc_funnel_action_btn",attrs:{link:"",icon:"el-icon-copy-document"},on:{click:function(e){return t.duplicate(i.row)}}},[t._v("\n                                        "+t._s(t.$t("Duplicate"))+"\n                                    ")]),t._v(" "),e("el-button",{staticClass:"fc_funnel_action_btn",attrs:{link:"",icon:"el-icon-price-tag"},on:{click:function(e){return t.applyLabelSetting(i.row)}}},[t._v("\n                                        "+t._s(t.$t("Apply Labels"))+"\n                                    ")]),t._v(" "),e("el-button",{staticClass:"fc_funnel_action_btn",attrs:{link:"",icon:"el-icon-download"},on:{click:function(e){return t.exportFunnel(i.row)}}},[t._v("\n                                        "+t._s(t.$t("Export"))+"\n                                    ")]),t._v(" "),e("confirm",{attrs:{placement:"top-start",message:t.$t("Automation_Delete_Alert")},on:{yes:function(e){return t.remove(i.row)}}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("el-button",{staticClass:"fc_funnel_action_btn",attrs:{icon:"el-icon-delete"}},[t._v("\n                                                "+t._s(t.$t("Delete Automation"))+"\n                                            ")])],1)])],1):t._e(),t._v(" "),t.showApplyLabelSetting?e("el-form",{staticClass:"fc_label_form"},[e("el-form-item",{attrs:{label:t.$t("Labels")}},[e("el-select",{attrs:{multiple:"",placeholder:"Select Labels"},model:{value:t.selectedLabels,callback:function(e){t.selectedLabels=e},expression:"selectedLabels"}},t._l(t.options.labels,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1),t._v(" "),e("el-form-item",[e("el-button",{staticClass:"fc_primary_button",attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return t.applyLabels(i.row,[],"attach")}}},[t._v("\n                                            "+t._s(t.$t("Apply"))+"\n                                        ")])],1)],1):t._e()],1)])]:t._e()]}}],null,!1,4096985177)}):t._e()],1),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.getFunnels}})],1),t._v(" "),t.create_modal?e("create-funnel-modal",{attrs:{triggers:t.triggers,visible:t.create_modal},on:{close:function(){t.create_modal=!1}}}):t._e(),t._v(" "),t.showingLabelsConfig?e("labels",{attrs:{open:t.showingLabelsConfig},on:{close:t.closeDrawer,callFetchLabels:t.fetchLabels}}):t._e()],1)},[],!1,null,null,null).exports;const lo=e({name:"MultiTextOptions",props:{value:{type:Array,default:function(){return[""]}},field:{type:Object}},data:function(){return{options:[]}},watch:{options:{deep:!0,handler:function(){var t=[];this.options.forEach(function(e){e.value&&t.push(e.value)}),this.$emit("input",t)}}},methods:{addMoreUrl:function(){this.options.push({value:""})},deleteUrl:function(t){this.options.splice(t,1)}},mounted:function(){var t=this,e=JSON.parse(JSON.stringify(this.value));e&&e.length?(this.options=[],e.forEach(function(e){t.options.push({value:e})})):this.options=[{value:""}]}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_url_boxes"},[t._l(t.options,function(i,n){return e("div",{key:n,staticClass:"fc_each_text_option"},[e("el-input",{attrs:{type:t.field.input_type,placeholder:t.field.placeholder},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"option.value"}},[e("el-button",{attrs:{slot:"append",disabled:1==t.options.length,icon:"el-icon-delete"},on:{click:function(e){return t.deleteUrl(n)}},slot:"append"})],1)],1)}),t._v(" "),e("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){return t.addMoreUrl()}}},[t._v(t._s(t.$t("Add More")))])],2)},[],!1,null,null,null).exports;const co=e({name:"FormFieldsGroupMapper",props:["field","model"]},function(){var t=this,e=t._self._c;return e("table",{staticClass:"fc_horizontal_table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.field.local_label))]),t._v(" "),e("th",[t._v(t._s(t.field.remote_label))])])]),t._v(" "),e("tbody",t._l(t.field.fields,function(i,n){return e("tr",{key:n},[e("td",[t._v(t._s(i.label))]),t._v(" "),e("td",[e("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("Select Value")},model:{value:t.model[n],callback:function(e){t.$set(t.model,n,e)},expression:"model[fieldKey]"}},t._l(t.field.value_options,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1)],1)])}),0)])},[],!1,null,null,null).exports;const uo=e({name:"WPUrlSelector",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},function(){var t=this;return(0,t._self._c)("el-input",{attrs:{type:"url",placeholder:t.field.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})},[],!1,null,null,null).exports;function _o(t){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_o(t)}function po(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function mo(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?po(Object(i),!0).forEach(function(e){fo(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):po(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function fo(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=_o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=_o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const ho={name:"ConditionGroup",props:["field","value"],components:{OptionSelector:Ft,AjaxSelector:jt},data:function(){return{model:this.value}},computed:{flat_properties:function(){var t={};return this.each(this.field.condition_properties,function(e){t=mo(mo({},t),e.options)}),t}},watch:{model:function(t){this.$emit("input",t)}},methods:{addCondition:function(t){this.model[t].conditions.push({data_key:"",operator:"=",data_value:""})},deleteProp:function(t,e){this.model[t].conditions.splice(e,1)},removeGroup:function(t){this.model.splice(t,1)},addConditionalGroup:function(){this.model.push({conditions:[{data_key:"",operator:"=",data_value:""}],match_type:"match_all"})}}};var go=i(5171),vo={insert:"head",singleton:!1};a()(go.A,vo);go.A.locals;const bo=e(ho,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_condition_groups"},[t._l(t.model,function(i,n){return e("div",{key:n,staticClass:"fc_condition_wrapper"},[0!=n?e("div",{staticClass:"fc_cond_and"},[t._v("OR")]):t._e(),t._v(" "),e("div",{staticClass:"fc_condition_group"},[e("table",{staticClass:"wp-list-table widefat fixed striped table-view-list posts"},[e("thead",[e("tr",[e("th",{staticStyle:{width:"180px"}},[t._v(t._s(t.field.labels.data_key_label))]),t._v(" "),e("th",{staticStyle:{width:"180px"}},[t._v(t._s(t.field.labels.condition_label))]),t._v(" "),e("th",[t._v(t._s(t.field.labels.data_value_label))]),t._v(" "),e("th",{staticStyle:{width:"90px"}})])]),t._v(" "),e("tbody",t._l(i.conditions,function(s,a){return e("tr",{key:a},[e("td",[e("el-select",{attrs:{clearable:"",placeholder:t.$t("Select"),size:"small"},on:{change:function(t){s.operator="=",s.data_value=""}},model:{value:s.data_key,callback:function(e){t.$set(s,"data_key",e)},expression:"condition.data_key"}},t._l(t.field.condition_properties,function(i,n){return e("el-option-group",{key:n,attrs:{label:i.label}},t._l(i.options,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t.label}})}),1)}),1)],1),t._v(" "),e("td",[s.data_key?e("el-select",{attrs:{clearable:"",placeholder:t.$t("Select Condition"),size:"small"},model:{value:s.operator,callback:function(e){t.$set(s,"operator",e)},expression:"condition.operator"}},[t.flat_properties[s.data_key].multiple?[e("el-option",{attrs:{value:"=",label:t.$t("Match any Of")}}),t._v(" "),e("el-option",{attrs:{value:"match_all",label:t.$t("Match all of")}}),t._v(" "),e("el-option",{attrs:{value:"match_none_of",label:t.$t("Match none of")}})]:[e("el-option",{attrs:{value:"=",label:t.$t("Equal")}}),t._v(" "),e("el-option",{attrs:{value:"!=",label:t.$t("Not Equal")}}),t._v(" "),"text"==t.flat_properties[s.data_key].type?[e("el-option",{attrs:{value:"contains",label:t.$t("Contains")}}),t._v(" "),e("el-option",{attrs:{value:"doNotContains",label:t.$t("Not Contains")}}),t._v(" "),e("el-option",{attrs:{value:"startsWith",label:t.$t("Starts With")}}),t._v(" "),e("el-option",{attrs:{value:"endsWith",label:t.$t("Ends With")}})]:"number"==t.flat_properties[s.data_key].type?[e("el-option",{attrs:{value:">",label:t.$t("Greater Than")}}),t._v(" "),e("el-option",{attrs:{value:"<",label:t.$t("Less Than")}})]:t._e()]],2):t._e()],1),t._v(" "),e("td",[s.data_key&&s.operator?e("div",["text"==t.flat_properties[s.data_key].type?e("el-input",{attrs:{size:"small",type:"text"},model:{value:s.data_value,callback:function(e){t.$set(s,"data_value",e)},expression:"condition.data_value"}}):"number"==t.flat_properties[s.data_key].type?e("el-input",{attrs:{size:"small",type:"number"},model:{value:s.data_value,callback:function(e){t.$set(s,"data_value",e)},expression:"condition.data_value"}}):"select"==t.flat_properties[s.data_key].type?e("el-select",{attrs:{size:"small",clearable:""},model:{value:s.data_value,callback:function(e){t.$set(s,"data_value",e)},expression:"condition.data_value"}},t._l(t.flat_properties[s.data_key].options,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1):"option_selector"==t.flat_properties[s.data_key].type?[e("option-selector",{attrs:{field:{placeholder:"Select",is_multiple:t.flat_properties[s.data_key].multiple,option_key:t.flat_properties[s.data_key].option_key}},model:{value:s.data_value,callback:function(e){t.$set(s,"data_value",e)},expression:"condition.data_value"}})]:"rest_selector"==t.flat_properties[s.data_key].type?[e("ajax-selector",{attrs:{field:{placeholder:"Select",is_multiple:t.flat_properties[s.data_key].multiple,option_key:t.flat_properties[s.data_key].option_key}},model:{value:s.data_value,callback:function(e){t.$set(s,"data_value",e)},expression:"condition.data_value"}})]:t._e()],2):e("div",[t._v(t._s(t.$t("Select data source and operator first")))])]),t._v(" "),e("td",{staticStyle:{"text-align":"right"}},[e("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.addCondition(n)}}}),t._v(" "),e("el-button",{attrs:{disabled:1==i.conditions.length,size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.deleteProp(n,a)}}})],1)])}),0)]),t._v(" "),t.field.hide_match_type?e("p",{staticStyle:{margin:"0",padding:"0"}},[t._v("Inside group conditions are "),e("b",[t._v("match all")])]):e("div",[e("p",[e("b",[t._v(t._s(t.$t("Match Type")))])]),t._v(" "),e("el-radio-group",{model:{value:i.match_type,callback:function(e){t.$set(i,"match_type",e)},expression:"group.match_type"}},[e("el-radio",{attrs:{label:"match_all"}},[t._v(t._s(t.field.labels.match_type_all_label))]),t._v(" "),e("el-radio",{attrs:{label:"match_any"}},[t._v(t._s(t.field.labels.match_type_any_label))])],1)],1),t._v(" "),t.model.length>1?e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.removeGroup(n)}}},[t._v("\n                "+t._s(t.$t("Delete this group"))+"\n            ")]):t._e()],1)])}),t._v(" "),t.field.is_multiple_grouping?e("div",{staticClass:"text-align-right"},[e("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.addConditionalGroup()}}},[t._v("\n            "+t._s(t.$t("Add Another Conditional Group"))+"\n        ")])],1):t._e()],2)},[],!1,null,null,null).exports;const yo=e({name:"ConditionGroup",props:["field","value"],components:{OptionSelector:Ft},data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}},methods:{addProperty:function(){this.model.push({data_key:"",data_value:""})},deleteProp:function(t){this.model.splice(t,1)}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_value_property_group"},[e("table",{staticClass:"wp-list-table widefat fixed striped table-view-list posts"},[e("thead",[e("tr",[e("th",{staticStyle:{width:"180px"}},[t._v(t._s(t.field.data_key_label))]),t._v(" "),e("th",[t._v(t._s(t.field.data_value_label))]),t._v(" "),e("th",{staticStyle:{width:"50px"}})])]),t._v(" "),e("tbody",t._l(t.model,function(i,n){return e("tr",{key:n},[e("td",[e("el-select",{attrs:{clearable:"",placeholder:t.$t("Select"),size:"small",filterable:""},on:{change:function(t){i.data_value,delete i.data_operation}},model:{value:i.data_key,callback:function(e){t.$set(i,"data_key",e)},expression:"condition.data_key"}},t._l(t.field.property_options,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t.label}})}),1)],1),t._v(" "),e("td",[i.data_key?e("div",["text"==t.field.property_options[i.data_key].type?e("el-input",{attrs:{size:"small",type:"text"},model:{value:i.data_value,callback:function(e){t.$set(i,"data_value",e)},expression:"condition.data_value"}}):t._e(),t._v(" "),"textarea"==t.field.property_options[i.data_key].type?e("el-input",{attrs:{size:"small",type:"textarea"},model:{value:i.data_value,callback:function(e){t.$set(i,"data_value",e)},expression:"condition.data_value"}}):t._e(),t._v(" "),"date"==t.field.property_options[i.data_key].type?e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"small",type:"date",placeholder:t.$t("Pick a date")},model:{value:i.data_value,callback:function(e){t.$set(i,"data_value",e)},expression:"condition.data_value"}}):t._e(),t._v(" "),"date_time"==t.field.property_options[i.data_key].type?e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",size:"small",placeholder:t.$t("Pick a date and time")},model:{value:i.data_value,callback:function(e){t.$set(i,"data_value",e)},expression:"condition.data_value"}}):t._e(),t._v(" "),"date"==t.field.property_options[i.data_key].type||"date_time"==t.field.property_options[i.data_key].type&&t.field.property_options[i.data_key].info?e("p",{staticClass:"info",staticStyle:{margin:"2px 0 0 0","line-height":"1","font-size":"12px"}},[t._v(t._s(t.field.property_options[i.data_key].info))]):"number"==t.field.property_options[i.data_key].type?["yes"==t.field.support_operations?[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:18}},[e("el-input",{staticClass:"input-with-select",attrs:{size:"small",type:"number"},model:{value:i.data_value,callback:function(e){t.$set(i,"data_value",e)},expression:"condition.data_value"}})],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-select",{attrs:{size:"mini",placeholder:t.$t("Replace Value")},model:{value:i.data_operation,callback:function(e){t.$set(i,"data_operation",e)},expression:"condition.data_operation"}},[e("el-option",{attrs:{value:"",label:t.$t("Replace Value")}}),t._v(" "),e("el-option",{attrs:{value:"subtract",label:t.$t("Subtract Value")}}),t._v(" "),e("el-option",{attrs:{value:"add",label:t.$t("Add Value")}})],1)],1)],1)]:e("el-input",{staticClass:"input-with-select",attrs:{size:"small",type:"number"},model:{value:i.data_value,callback:function(e){t.$set(i,"data_value",e)},expression:"condition.data_value"}})]:"select"==t.field.property_options[i.data_key].type?["yes"==t.field.support_operations&&t.field.property_options[i.data_key].multiple?[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:18}},[e("el-select",{attrs:{size:"small",clearable:"",multiple:t.field.property_options[i.data_key].multiple,filterable:""},model:{value:i.data_value,callback:function(e){t.$set(i,"data_value",e)},expression:"condition.data_value"}},t._l(t.field.property_options[i.data_key].options,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-select",{attrs:{size:"mini",placeholder:t.$t("Replace Value")},model:{value:i.data_operation,callback:function(e){t.$set(i,"data_operation",e)},expression:"condition.data_operation"}},[e("el-option",{attrs:{value:"",label:t.$t("Replace Options")}}),t._v(" "),e("el-option",{attrs:{value:"subtract",label:t.$t("Subtract Options")}}),t._v(" "),e("el-option",{attrs:{value:"add",label:t.$t("Add Options")}})],1)],1)],1)]:e("el-select",{attrs:{size:"small",clearable:"",multiple:t.field.property_options[i.data_key].multiple,filterable:""},model:{value:i.data_value,callback:function(e){t.$set(i,"data_value",e)},expression:"condition.data_value"}},t._l(t.field.property_options[i.data_key].options,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)]:"option_selector"==t.field.property_options[i.data_key].type?[e("option-selector",{attrs:{field:{placeholder:"Select",is_multiple:t.field.property_options[i.data_key].multiple,option_key:t.field.property_options[i.data_key].option_key}},model:{value:i.data_value,callback:function(e){t.$set(i,"data_value",e)},expression:"condition.data_value"}})]:t._e()],2):t._e()]),t._v(" "),e("td",{staticStyle:{"text-align":"right"}},[e("el-button",{attrs:{disabled:1==t.model.length,size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.deleteProp(n)}}})],1)])}),0)]),t._v(" "),e("div",{staticClass:"text-align-right"},[e("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.addProperty()}}},[t._v("\n            "+t._s(t.$t("Add More"))+"\n        ")])],1)])},[],!1,null,null,null).exports;const wo=e({name:"TextValueMultiProperties",props:["field","value"],components:{InputTextPopper:Ct},data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}},methods:{addProperty:function(){this.model.push({data_key:"",data_value:""})},deleteProp:function(t){this.model.splice(t,1)}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_value_property_group"},[e("table",{staticClass:"wp-list-table widefat fixed striped table-view-list posts"},[e("thead",[e("tr",[e("th",{staticStyle:{width:"180px"}},[t._v(t._s(t.field.data_key_label))]),t._v(" "),e("th",[t._v(t._s(t.field.data_value_label))]),t._v(" "),e("th",{staticStyle:{width:"50px"}})])]),t._v(" "),e("tbody",t._l(t.model,function(i,n){return e("tr",{key:n},[e("td",[e("el-input",{attrs:{placeholder:t.field.data_key_placeholder,type:"text"},model:{value:i.data_key,callback:function(e){t.$set(i,"data_key",e)},expression:"condition.data_key"}})],1),t._v(" "),e("td",["text-popper"==t.field.value_input_type?[e("input-text-popper",{attrs:{field:{placeholder:t.field.data_value_placeholder,popper_class:"fc_limit_height"}},model:{value:i.data_value,callback:function(e){t.$set(i,"data_value",e)},expression:"condition.data_value"}})]:e("el-input",{attrs:{type:"text",placeholder:t.field.data_value_placeholder},model:{value:i.data_value,callback:function(e){t.$set(i,"data_value",e)},expression:"condition.data_value"}})],2),t._v(" "),e("td",{staticStyle:{"text-align":"right"}},[e("el-button",{attrs:{disabled:1==t.model.length,size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.deleteProp(n)}}})],1)])}),0)]),t._v(" "),e("div",{staticClass:"text-align-right"},[e("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.addProperty()}}},[t._v("\n            "+t._s(t.$t("Add More"))+"\n        ")])],1)])},[],!1,null,null,null).exports;const Co=e({name:"RichFilterContainer",components:{RichFilter:pe},props:{advanced_filters:{type:Array,default:function(){return[[]]}},add_label:{type:String,default:function(){return this.$t("Filters.instruction")}},filterOptions:{type:Array,default:function(){return[]}}},methods:{maybeRemoveGroup:function(t){this.advanced_filters.length>1&&this.advanced_filters.splice(t,1)},addConditionGroup:function(){this.advanced_filters.push([])}},mounted:function(){this.advanced_filters&&se()(this.advanced_filters)&&0!=this.advanced_filters.length||(this.advanced_filters=[[]])}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_rich_container"},[e("div",{staticClass:"fc_rich_wrap"},t._l(t.advanced_filters,function(i,n){return e("div",{key:n},[e("div",{staticClass:"fc_rich_filter"},[e("rich-filter",{attrs:{filterOptions:t.filterOptions,add_label:t.add_label,items:i},on:{maybeRemove:function(e){return t.maybeRemoveGroup(n)}}})],1),t._v(" "),e("div",{staticClass:"fc_cond_or"},[e("em",[t._v(t._s(t.$t("OR")))])])])}),0),t._v(" "),e("div",{staticClass:"fc_cond_or"},[e("em",{staticStyle:{cursor:"pointer",color:"rgb(0, 119, 204)","font-weight":"bold"},on:{click:function(e){return t.addConditionGroup()}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" "+t._s(t.$t("OR")))])])])},[],!1,null,null,null).exports;var $o=e({name:"AdvancedCouponSettings",props:["settings"],components:{AjaxSelector:jt,ItemCopier:Ue},data:function(){return{saving:!1}},methods:{save:function(){this.saving=!0,this.$emit("saveAndReload")}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_coupon_settings"},[e("div",[t.settings.smart_code?e("p",{staticStyle:{"font-size":"16px","margin-bottom":"20px",padding:"20px",background:"#f5f7fa","border-radius":"10px","text-align":"center"}},[t._v("\n            "+t._s(t.$t("Dynamic_Coupon_Usage"))+"\n            "),e("item-copier",{staticStyle:{"max-width":"220px"},attrs:{text:t.settings.smart_code}})],1):t._e(),t._v(" "),e("el-form-item",{attrs:{label:"Coupon Code Configuration Type"}},[e("el-radio-group",{model:{value:t.settings.template_type,callback:function(e){t.$set(t.settings,"template_type",e)},expression:"settings.template_type"}},[e("el-radio",{attrs:{label:"new"}},[t._v(t._s(t.$t("Configure from scratch")))]),t._v(" "),e("el-radio",{attrs:{label:"templated"}},[t._v(t._s(t.$t("Use Existing Coupon as Template")))])],1)],1),t._v(" "),"templated"==t.settings.template_type?e("el-form-item",{attrs:{label:t.$t("Select your existing Coupon Code")}},[e("ajax-selector",{attrs:{field:{option_key:"woo_coupons",sub_option_key:"main_only",is_multiple:!1}},model:{value:t.settings.base_coupon_id,callback:function(e){t.$set(t.settings,"base_coupon_id",e)},expression:"settings.base_coupon_id"}}),t._v(" "),e("p",[t._v(t._s(t.$t("Dynamic_Coupon_Configuration")))])],1):t._e(),t._v(" "),t.settings.smart_code?t._e():e("el-form-item",[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{disabled:t.saving,type:"primary"},on:{click:t.save}},[t._v(t._s(t.$t("Continue")))])],1)],1),t._v(" "),t.settings.smart_code?e("el-tabs",{attrs:{type:"border-card"}},[e("el-tab-pane",{attrs:{label:"General"}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                    "+t._s(t.$t("Coupon Code Prefix"))+"\n                    "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Coupon_Code_Prefix_help"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("el-input",{attrs:{placeholder:"eg: WELCOME_{{contact.first_name}}"},model:{value:t.settings.code_prefix,callback:function(e){t.$set(t.settings,"code_prefix",e)},expression:"settings.code_prefix"}},[e("template",{slot:"append"},[t._v("\n                        -RANDOM_SUFFIX\n                    ")])],2)],2),t._v(" "),"new"==t.settings.template_type?[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Discount Type")}},[e("el-select",{attrs:{placeholder:t.$t("Discount Type")},model:{value:t.settings.discount_type,callback:function(e){t.$set(t.settings,"discount_type",e)},expression:"settings.discount_type"}},[e("el-option",{attrs:{label:t.$t("Percentage Discount"),value:"percent"}}),t._v(" "),e("el-option",{attrs:{label:t.$t("Fixed Cart Discount"),value:"fixed_cart"}}),t._v(" "),e("el-option",{attrs:{label:t.$t("Fixed Product Discount"),value:"fixed_product"}})],1)],1)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Amount")}},[e("el-input",{attrs:{type:"number",placeholder:t.$t("Amount")},model:{value:t.settings.amount,callback:function(e){t.$set(t.settings,"amount",e)},expression:"settings.amount"}},["percent"==t.settings.discount_type?e("template",{slot:"append"},[t._v("%")]):e("template",{slot:"prepend"},[e("span",[t._v(t._s(t.appVars.woo_currency_sign))])])],2)],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:18,xs:24}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                                "+t._s(t.$t("Coupon Expiry"))+"\n                                "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Choose when the coupon will expire"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("el-radio-group",{model:{value:t.settings.expiry_type,callback:function(e){t.$set(t.settings,"expiry_type",e)},expression:"settings.expiry_type"}},[e("el-radio",{attrs:{label:"never"}},[t._v(t._s(t.$t("Never Expires")))]),t._v(" "),e("el-radio",{attrs:{label:"fixed"}},[t._v(t._s(t.$t("Fixed Date")))]),t._v(" "),e("el-radio",{attrs:{label:"relative_days"}},[t._v(t._s(t.$t("Expire after x days of creation")))])],1)],2)],1),t._v(" "),e("el-col",{attrs:{md:6,xs:24}},["fixed"==t.settings.expiry_type?e("el-form-item",{attrs:{":label":t.$t("Expiry Date")}},[e("el-date-picker",{attrs:{type:"date","date-format":"yyyy-MM-dd",placeholder:t.$t("Pick a date")},model:{value:t.settings.date_expires,callback:function(e){t.$set(t.settings,"date_expires",e)},expression:"settings.date_expires"}})],1):t._e(),t._v(" "),"relative_days"==t.settings.expiry_type?e("el-form-item",{attrs:{label:t.$t("Days")}},[e("el-input",{attrs:{type:"number",min:1,placeholder:t.$t("Expire after x days")},model:{value:t.settings.expiry_days,callback:function(e){t.$set(t.settings,"expiry_days",e)},expression:"settings.expiry_days"}},[e("template",{slot:"append"},[t._v(t._s(t.$t("days")))])],2)],1):t._e()],1)],1),t._v(" "),e("el-form-item",[e("template",{slot:"label"},[t._v("\n                        "+t._s(t.$t("Allow Free Shipping"))+"\n                        "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Free_Shipping_Info"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("el-radio-group",{model:{value:t.settings.free_shipping,callback:function(e){t.$set(t.settings,"free_shipping",e)},expression:"settings.free_shipping"}},[e("el-radio",{attrs:{label:"yes"}},[t._v(t._s(t.$t("Yes")))]),t._v(" "),e("el-radio",{attrs:{label:"no"}},[t._v(t._s(t.$t("No")))])],1)],2)]:e("div",{staticClass:"fc_info"},[e("p",[t._v(t._s(t.$t("Coupon settings will be inherited from the selected base coupon")))])]),t._v(" "),e("el-form-item",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.contact_email_only,callback:function(e){t.$set(t.settings,"contact_email_only",e)},expression:"settings.contact_email_only"}},[t._v("\n                    "+t._s(t.$t("Restrict the generated coupon to Contact Email Only"))+"\n                ")])],1)],2),t._v(" "),e("el-tab-pane",{attrs:{label:t.$t("Restrictions & Limits")}},["new"==t.settings.template_type?[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                                "+t._s(t.$t("Minimum Spend"))+"\n                                "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Minimum_Spend_Requirement"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("el-input",{attrs:{type:"number",placeholder:t.$t("Minimum Spend")},model:{value:t.settings.minimum_amount,callback:function(e){t.$set(t.settings,"minimum_amount",e)},expression:"settings.minimum_amount"}},[e("template",{slot:"prepend"},[e("span",[t._v(t._s(t.appVars.woo_currency_sign))])])],2)],2)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                                "+t._s(t.$t("Maximum Spend"))+"\n                                "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Maximum_Spend_Limit"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("el-input",{attrs:{type:"number",placeholder:t.$t("Maximum Spend")},model:{value:t.settings.maximum_amount,callback:function(e){t.$set(t.settings,"maximum_amount",e)},expression:"settings.maximum_amount"}},[e("template",{slot:"prepend"},[e("span",[t._v(t._s(t.appVars.woo_currency_sign))])])],2)],2)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                                "+t._s(t.$t("Products"))+"\n                                "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Eligible_Products_For_Discount"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("ajax-selector",{attrs:{field:{option_key:"woo_products",is_multiple:!0}},model:{value:t.settings.product_ids,callback:function(e){t.$set(t.settings,"product_ids",e)},expression:"settings.product_ids"}})],2)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                                "+t._s(t.$t("Exclude Products"))+"\n                                "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Excluded_Products_For_Discount"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("ajax-selector",{attrs:{field:{option_key:"woo_products",is_multiple:!0}},model:{value:t.settings.exclude_product_ids,callback:function(e){t.$set(t.settings,"exclude_product_ids",e)},expression:"settings.exclude_product_ids"}})],2)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                                "+t._s(t.$t("Product categories"))+"\n                                "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Eligible_Product_Categories_For_Discount"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("ajax-selector",{attrs:{field:{option_key:"woo_categories",is_multiple:!0}},model:{value:t.settings.product_categories,callback:function(e){t.$set(t.settings,"product_categories",e)},expression:"settings.product_categories"}})],2)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                                "+t._s(t.$t("Exclude Product categories"))+"\n                                "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Excluded_Product_Categories_For_Discount"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("ajax-selector",{attrs:{field:{option_key:"woo_categories",is_multiple:!0}},model:{value:t.settings.exclude_product_categories,callback:function(e){t.$set(t.settings,"exclude_product_categories",e)},expression:"settings.exclude_product_categories"}})],2)],1)],1),t._v(" "),e("hr"),t._v(" "),e("el-form-item",[e("el-checkbox",{staticStyle:{"margin-bottom":"10px"},attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.individual_use,callback:function(e){t.$set(t.settings,"individual_use",e)},expression:"settings.individual_use"}},[t._v("\n                        "+t._s(t.$t("Individual_Coupon_Use_info"))+"\n                    ")]),t._v(" "),e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.exclude_sale_items,callback:function(e){t.$set(t.settings,"exclude_sale_items",e)},expression:"settings.exclude_sale_items"}},[t._v("\n                        "+t._s(t.$t("Exclude_Sale_Items"))+"\n                    ")])],1),t._v(" "),e("hr"),t._v(" "),e("h4",[t._v(t._s(t.$t("Limits")))]),t._v(" "),e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                                "+t._s(t.$t("Usage limit per coupon"))+"\n                                "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("How many times this coupon can be used before it is void."),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("el-input",{attrs:{type:"number",placeholder:t.$t("Unlimited Usage")},model:{value:t.settings.usage_limit,callback:function(e){t.$set(t.settings,"usage_limit",e)},expression:"settings.usage_limit"}})],2)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                                "+t._s(t.$t("Limit usage to X items"))+"\n                                "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Coupon_Max_items_For_Discount"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("el-input",{attrs:{type:"number",placeholder:t.$t("Apply to all qualifying items in cart")},model:{value:t.settings.limit_usage_to_x_items,callback:function(e){t.$set(t.settings,"limit_usage_to_x_items",e)},expression:"settings.limit_usage_to_x_items"}})],2)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                                "+t._s(t.$t("Usage limit per user"))+"\n                                "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Coupon_Usage_Limit_Per_User"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("el-input",{attrs:{type:"number",placeholder:t.$t("Unlimited Usage")},model:{value:t.settings.usage_limit_per_user,callback:function(e){t.$set(t.settings,"usage_limit_per_user",e)},expression:"settings.usage_limit_per_user"}})],2)],1),t._v(" "),e("el-col",{attrs:{md:12,xs:24}})],1)]:e("div",{staticClass:"fc_info"},[e("p",[t._v(t._s(t.$t("Coupon_Inherited_Restrictions_And_Limits")))])])],2)],1):t._e()],1)},[],!1,null,null,null);function ko(t){return function(t){if(Array.isArray(t))return xo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return xo(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?xo(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xo(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}const So=e({name:"FormField",props:["value","field","options"],components:{MultiTextOptions:lo,EmailComposer:Qs,FormGroupMapper:co,FormManyDropDownMapper:Ht,WpUrlSelector:uo,OptionSelector:Ft,ConditionGroups:bo,InputValueProperties:yo,WpBaseEditor:ut,TextValueMultiProperties:wo,InputTextPopper:Ct,AjaxSelector:jt,RichFilterContainer:Co,MailerConfig:L,TaxonomyTermsSelector:ae,AdvancedCouponSettings:$o.exports},data:function(){return{model:this.value,context_codes:!1,editorCodes:[]}},watch:{model:{deep:!0,handler:function(t){this.$emit("input",t)}}},methods:{saveAndReload:function(){var t=this;this.$nextTick(function(){t.$emit("save_reload")})},saveInline:function(){this.$emit("save_inline")}},created:function(){var t;this.field.smart_codes&&(this.editorCodes=window.fcAdmin.globalSmartCodes,this.field.context_codes&&window.fcrm_funnel_context_codes&&(this.editorCodes=[].concat(ko(this.editorCodes),ko(window.fcrm_funnel_context_codes))),window.fcAdmin.extendedSmartCodes&&(t=this.editorCodes).push.apply(t,ko(window.fcAdmin.extendedSmartCodes)));"email_campaign_composer"===this.field.type&&(this.context_codes=window.fcrm_funnel_context_codes)}},function(){var t=this,e=t._self._c;return e("el-form-item",[t.field.label?e("template",{slot:"label"},[t._v("\n        "+t._s(t.field.label)+"\n        "),t.field.help?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.field.help,placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})]):t._e()],1):t._e(),t._v(" "),"option_selectors"==t.field.type?[e("option-selector",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"multi-select"==t.field.type||"select"==t.field.type?[e("el-select",{attrs:{multiple:"multi-select"==t.field.type,placeholder:t.field.placeholder,clearable:"",filterable:""},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1)]:"radio"==t.field.type?[e("el-radio-group",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,function(i){return e("el-radio",{key:i.id,attrs:{label:i.id}},[t._v(t._s(i.title)+"\n            ")])}),1)]:"input-number"==t.field.type?[e("el-input-number",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"input-text"==t.field.type?[e("el-input",{attrs:{readonly:t.field.readonly,placeholder:t.field.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"input-text-area"==t.field.type?[e("el-input",{attrs:{type:"textarea",rows:t.field.rows,placeholder:t.field.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"input-text-popper"==t.field.type?[e("input-text-popper",{attrs:{field:t.field,placeholder:t.field.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"yes_no_check"==t.field.type?[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[t._v(t._s(t.field.check_label))])]:"grouped-select"==t.field.type?[e("el-select",{attrs:{multiple:t.field.is_multiple,placeholder:t.field.placeholder,clearable:"",filterable:""},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,function(i){return e("el-option-group",{key:i.slug,attrs:{label:i.title}},t._l(i.options,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1)}),1)]:"multi_text_options"==t.field.type?[e("multi-text-options",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"email_campaign_composer"==t.field.type?[e("email-composer",{staticClass:"fc_into_modal",attrs:{extra_tags:t.context_codes,show_audit:!0,show_merge:!0,enable_test:!0,disable_fixed:!0,campaign:t.model,label_align:"top"},on:{save:function(e){return t.saveInline()}}})]:"reload_field_selection"==t.field.type?[e("el-select",{attrs:{multiple:"multi-select"==t.field.type,placeholder:t.field.placeholder,clearable:"",filterable:""},on:{change:function(e){return t.saveAndReload()}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1)]:"form-group-mapper"==t.field.type?[e("form-group-mapper",{attrs:{field:t.field,model:t.model}})]:"form-many-drop-down-mapper"==t.field.type?[e("form-many-drop-down-mapper",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"html"==t.field.type?[e("div",{staticClass:"fc_html_content",domProps:{innerHTML:t._s(t.field.info)}})]:"url_selector"==t.field.type?[e("wp-url-selector",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"date_time"==t.field.type?[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:t.field.placeholder,type:"datetime"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"condition_groups"==t.field.type?[e("condition-groups",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"input_value_pair_properties"==t.field.type?[e("input-value-properties",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"text-value-multi-properties"==t.field.type?[e("text-value-multi-properties",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"html_editor"==t.field.type?[e("wp-base-editor",{attrs:{editorShortcodes:t.editorCodes},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"rest_selector"==t.field.type?[e("ajax-selector",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"reload_rest_selector"==t.field.type?[e("ajax-selector",{attrs:{field:t.field},on:{change:function(e){t.saveAndReload()&&t.logConsole}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"condition_block_groups"==t.field.type?[e("rich-filter-container",{attrs:{add_label:t.field.add_label,advanced_filters:t.model,filterOptions:t.field.groups}})]:"custom_sender_config"==t.field.type?[e("mailer-config",{attrs:{mailer_settings:t.model}})]:"radio_buttons"==t.field.type?[e("el-radio-group",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,function(i){return e("el-radio-button",{key:i.id,attrs:{label:i.id}},[t._v("\n                "+t._s(i.title)+"\n            ")])}),1)]:"checkboxes"==t.field.type?[e("el-checkbox-group",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,function(i){return e("el-checkbox",{key:i.id,attrs:{label:i.id}},[t._v("\n                "+t._s(i.title)+"\n            ")])}),1)]:"time_selector"==t.field.type?[e("el-time-select",{attrs:{"picker-options":t.field.picker_options,placeholder:t.field.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"tax_selector"==t.field.type?[e("taxonomy-terms-selector",{attrs:{field:{is_multiple:t.field.is_multiple,size:"mini",taxonomy:t.field.taxonomy}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"advanced_coupon_settings"==t.field.type?[e("AdvancedCouponSettings",{attrs:{settings:t.model,field:t.field},on:{saveAndReload:t.saveAndReload}})]:[e("pre",[t._v(t._s(t.field))])],t._v(" "),t.field.inline_help?e("p",{domProps:{innerHTML:t._s(t.field.inline_help)}}):t._e()],2)},[],!1,null,null,null).exports;const Ao=e({name:"FieldEditor",components:{FormField:So,MergeCodes:Yt},props:["data","settings","options","show_controls","title_badge","action_name","is_editable","block_type"],data:function(){return{is_settings_missing:!1,is_internal_loading:!1,funnel_id:this.$route.params.funnel_id,sendingTestWebhook:!1}},methods:{saveFunnelSequences:function(){"send_custom_email"===this.action_name?this.saveEmailAction():(this.is_internal_loading=!0,this.$emit("save",1))},saveEmailAction:function(){var t=this;if(!this.data.campaign.email_subject)return this.$notify.error("Please provide email subject"),!1;this.is_internal_loading=!0,this.$post("funnels/funnel/save-email-action-fallback",{action_data:JSON.stringify(this.data),funnel_id:this.funnel_id}).then(function(e){t.data.campaign=e.campaign,t.data.reference_campaign=e.reference_campaign,t.$emit("save",1),t.is_internal_loading=!1}).catch(function(e){t.handleError(e)}).finally(function(){})},saveEmailActionInline:function(){this.$post("funnels/funnel/save-email-action-fallback",{action_data:JSON.stringify(this.data),funnel_id:this.funnel_id})},deleteFunnelSequences:function(){this.$emit("deleteSequence",1)},movePosition:function(t){this.$emit("movePosition",t)},compare:function(t,e,i){switch(e){case"=":return t===i;case"!=":return t!==i}},dependancyPass:function(t){if(t.dependency){var e=t.dependency.depends_on.split("/").reduce(function(t,e){return t[e]},this.data);return!!this.compare(t.dependency.value,t.dependency.operator,e)}return!0},saveAndReload:function(){this.$emit("save_reload")},doNothing:function(){},closeDrawer:function(){this.$emit("closeDrawer")},sendTestWebhook:function(){var t=this;if(!this.data.remote_url)return this.$notify.error(this.$t("Please provide Remote URL")),!1;this.sendingTestWebhook=!0,this.$post("funnels/send-test-webhook",{data:this.data}).then(function(e){t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.sendingTestWebhook=!1})}},mounted:function(){this.is_internal_loading=!1,this.settings?this.is_settings_missing=!1:(this.is_settings_missing=!0,this.settings={})}},function(){var t=this,e=t._self._c;return e("el-form",{attrs:{data:t.data,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.doNothing.apply(null,arguments)}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.settings.title,expression:"settings.title"}],staticClass:"fluentcrm_funnel_header"},[e("div",{staticClass:"fc_funnel_head"},[e("div",{staticClass:"fc_funel_head_title"},[e("h3",[t._v("\n                    "+t._s(t.settings.title)+"\n                    "),t.title_badge?e("span",{staticClass:"ff_funnel_badge",class:"ff_funnel_badge-"+t.title_badge},[t._v("\n                        "+t._s(t.title_badge)+"\n                    ")]):t._e()]),t._v(" "),e("p",{domProps:{innerHTML:t._s(t.settings.sub_title)}})]),t._v(" "),e("div",{staticClass:"fc_funnel_head_action"},["trigger"!=t.title_badge?e("merge-codes",{staticClass:"fc_header_merge_codes"}):t._e(),t._v(" "),t.is_editable?t._e():e("el-button",{staticStyle:{"font-size":"22px",color:"black"},attrs:{type:"text",icon:"el-icon-close"},on:{click:t.closeDrawer}})],1)])]),t._v(" "),[t._t("after_header")],t._v(" "),t.settings.fields?e("div",{staticClass:"fc_funnerl_editor fc_block_white"},t._l(t.settings.fields,function(i,n){return e("div",{key:n,class:i.wrapper_class},[t.dependancyPass(i)?[e("form-field",{attrs:{options:t.options,field:i},on:{save_inline:function(e){return t.saveEmailActionInline()},save_reload:function(e){return t.saveAndReload()}},model:{value:t.data[n],callback:function(e){t.$set(t.data,n,e)},expression:"data[fieldKey]"}})]:t._e()],2)}),0):t._e(),t._v(" "),t.is_settings_missing?[e("h3",[t._v(t._s(t.$t("block_does_not_exist")))])]:t._e(),t._v(" "),t.show_controls?e("div",{staticClass:"fluentcrm-sequence_control"},[e("div",{staticClass:"fluentcrm_pull_left"},[e("el-button",{attrs:{loading:t.is_internal_loading,disabled:t.is_internal_loading,size:"small",type:"success"},on:{click:function(e){return t.saveFunnelSequences(!1)}}},[t._v("\n                "+t._s(t.$t("Save Settings"))+"\n            ")]),t._v(" "),"http_send_data"===t.action_name?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.sendingTestWebhook,expression:"sendingTestWebhook"}],attrs:{disabled:t.sendingTestWebhook,type:"danger",size:"small"},on:{click:t.sendTestWebhook}},[t._v("\n                "+t._s(t.$t("Send Test Webhook"))+"\n            ")]):t._e()],1),t._v(" "),e("div",{staticClass:"fluentcrm_pull_right"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(e){return t.deleteFunnelSequences(!1)}}})],1)]):t._e()],2)},[],!1,null,null,null).exports;function Eo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,s,a,o,r=[],l=!0,c=!1;try{if(a=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=a.call(i)).done)&&(r.push(n.value),r.length!==e);l=!0);}catch(t){c=!0,s=t}finally{try{if(!l&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(c)throw s}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return To(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?To(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}const Po={name:"blockChoice",props:["blocks","condition_type","choice_context","show_close"],data:function(){return{selectType:"action",searchBlock:""}},watch:{condition_type:function(){this.selectType="action"},searchBlock:function(t){t&&(this.selectType="all")}},computed:{current_items:function(){var t=this;if("all"==this.selectType){var e={action:{title:this.$t("Actions"),categories:{}},benchmark:{title:this.$t("Goals"),categories:{}},conditional:{title:this.$t("Conditionals"),categories:{}}};if(this.each(this.blocks,function(t,i){var n=t.type;if("conditional"==n&&"funnel_ab_testing"==i&&(n="action"),e[n]){var s=t.category||"Other";e[n].categories[s]||(e[n].categories[s]={title:s,items:{}}),e[n].categories[s].items[i]=t}}),this.searchBlock){var i=this.searchBlock.toLowerCase();Object.keys(e).forEach(function(t){e[t].categories=Object.entries(e[t].categories).reduce(function(t,e){var n=Eo(e,2),s=n[0],a=n[1],o=Object.entries(a.items).reduce(function(t,e){var n=Eo(e,2),s=n[0],a=n[1];return a.title.toLowerCase().includes(i)&&(t[s]=a),t},{});return Object.keys(o).length>0&&(t[s]={title:a.title,items:o}),t},{})})}return e}var n={title:"",categories:{}};return this.each(this.blocks,function(e,i){var s=e.type;if("conditional"==s&&"funnel_ab_testing"==i&&"child"!=t.choice_context&&(s="action"),s===t.selectType){var a=e.category||"Other";n.categories[a]||(n.categories[a]={title:a,items:{}}),n.categories[a].items[i]=e}}),{items:n}}},methods:{insert:function(t,e){if(e)return this.$alert('<p><strong>This block require pro version of FluentCRM</strong></p><p style="line-height: 22px; margin-bottom: 15px !important;">Please download and install FluentCRM Pro to activate this block</p><p><a class="el-button el-button--danger" :href="'+this.appVars.crm_pro_url+'" target="_blank" rel="noopener">Get FluentCRM Pro</a></p>',"Require FluentCRM Pro",{dangerouslyUseHTMLString:!0,showConfirmButton:!1}),!1;this.$emit("insert",t)}}};const Oo=e(Po,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_block_choice_wrapper"},[e("el-row",{attrs:{gutter:0}},["child"!=t.choice_context?e("el-col",{attrs:{span:24}},[e("el-menu",{attrs:{mode:"horizontal","default-active":t.selectType},on:{select:function(e){t.selectType=e}}},[e("el-menu-item",{attrs:{index:"action"}},[e("i",{staticClass:"fc-icon-action"}),t._v(" "),e("span",[t._v(t._s(t.$t("Actions")))])]),t._v(" "),t.condition_type?t._e():[e("el-menu-item",{attrs:{index:"benchmark"}},[e("i",{staticClass:"fc-icon-benchmark"}),t._v(" "),e("span",[t._v(t._s(t.$t("Goals")))])]),t._v(" "),e("el-menu-item",{attrs:{index:"conditional"}},[e("i",{staticClass:"fc-icon-conditions"}),t._v(" "),e("span",[t._v(t._s(t.$t("Condition")))])]),t._v(" "),e("el-menu-item",{attrs:{index:"all"}},[e("i",{staticClass:"el-icon el-icon-menu"}),t._v(" "),e("span",[t._v(t._s(t.$t("View All")))])])]],2),t._v(" "),t.show_close?e("i",{staticClass:"el-dialog__close el-icon el-icon-close",on:{click:function(){t.$emit("close")}}}):t._e()],1):t._e(),t._v(" "),e("el-col",{attrs:{span:24}},[e("div",{staticClass:"fc_funnel_block_search_wrap"},[e("el-input",{attrs:{placeholder:t.$t("Search blocks, e.g., email, apply tags, etc."),clearable:""},model:{value:t.searchBlock,callback:function(e){t.searchBlock=e},expression:"searchBlock"}})],1)]),t._v(" "),e("el-col",{attrs:{span:24}},[e("div",{staticClass:"fc_choice_blocks"},["action"!=t.selectType||t.searchBlock?"benchmark"!=t.selectType||t.searchBlock?"conditional"!=t.selectType||t.searchBlock?t._e():e("div",{staticClass:"fc_choice_header"},[e("h2",{staticClass:"fc_choice_title"},[t._v(t._s(t.$t("Condition Blocks")))]),t._v(" "),e("p",[t._v(t._s(t.$t("_Bl_Use_tbtcspfysc")))])]):e("div",{staticClass:"fc_choice_header"},[e("h2",{staticClass:"fc_choice_title"},[t._v(t._s(t.$t("Goals")))]),t._v(" "),e("p",[t._v(t._s(t.$t("_Bl_These_aygityuwda")))])]):e("div",{staticClass:"fc_choice_header"},[e("h2",{staticClass:"fc_choice_title"},[t._v(t._s(t.$t("Action Blocks")))]),t._v(" "),e("p",[t._v(t._s(t.$t("_Bl_Actions_battywtf")))])]),t._v(" "),t._l(t.current_items,function(i,n){return Object.keys(i.categories).length?e("div",{key:n,class:["fc_choice_wrap_"+n,"fc_choice_selected_"+t.selectType]},[i.title?e("h2",{staticClass:"fc_choice_title"},[t._v(t._s(i.title))]):t._e(),t._v(" "),t._l(i.categories,function(i,n){return e("div",{key:n,staticClass:"fc_choice_category"},[!i.title||"action"!=t.selectType&&"all"!=t.selectType?t._e():e("h3",[t._v(t._s(i.title))]),t._v(" "),e("el-row",{staticClass:"fc_choice_row",class:"fc_items_"+t.selectType,attrs:{gutter:20}},t._l(i.items,function(i,n){return e("el-col",{key:n,staticClass:"fc_choice_block",attrs:{sm:24,xs:24,md:8,lg:8}},[e("div",{staticClass:"fc_choice_card",on:{click:function(e){return t.insert(n,i.is_pro)}}},[i.is_pro?e("div",{staticClass:"fc_pro_ribbon"},[t._v(t._s(t.$t("Pro")))]):t._e(),t._v(" "),e("h3",[e("i",{class:i.icon?i.icon:"fc-icon-trigger"}),t._v(" "+t._s(i.title))]),t._v(" "),e("p",{domProps:{innerHTML:t._s(i.description)}})])])}),1)],1)})],2):t._e()}),t._v(" "),"all"!=t.selectType||Object.keys(t.current_items.action.categories).length||Object.keys(t.current_items.benchmark.categories).length||Object.keys(t.current_items.conditional.categories).length?t._e():e("div",{staticClass:"fc_empty_block_wrap"},[e("el-empty",{attrs:{description:t.$t("No Blocks Found")}})],1)],2)])],1)],1)},[],!1,null,null,null).exports;const Do=e({name:"reportWidget",props:["stat"]},function(){var t=this,e=t._self._c;return t.stat?e("div",{staticClass:"fluentcrm_block_stats mt-5"},[e("el-tag",{attrs:{size:"mini",effect:"plain"}},[e("i",{staticClass:"el-icon el-icon-user"}),t._v("\n        "+t._s(t.stat.count)+"\n    ")]),t._v(" "),e("el-tag",{attrs:{size:"mini",effect:"plain"}},[t._v("\n        "+t._s(t.stat.percent)+"%\n    ")]),t._v(" "),t.stat.drop_percent?e("el-tag",{attrs:{size:"mini",type:"danger",effect:"plain"}},[e("i",{staticClass:"el-icon el-icon-bottom"}),t._v("\n        "+t._s(t.stat.drop_percent)+"%\n    ")]):t._e(),t._v(" "),t.stat.revenues?e("el-tag",{attrs:{size:"mini",effect:"plain"}},[e("i",{staticClass:"el-icon el-icon-money"}),t._v(" "),e("span",{domProps:{innerHTML:t._s(t.stat.revenues.join(" | "))}})]):t._e(),t._v(" "),t.stat.email_opens?e("el-tag",{attrs:{title:"Email Open (estimated)",size:"mini",effect:"plain"}},[e("i",{staticClass:"el-icon el-icon-folder-opened"}),t._v("\n        "+t._s(t.stat.email_opens)+"\n    ")]):t._e(),t._v(" "),t.stat.link_clicks?e("el-tag",{attrs:{title:"Clicks Count",size:"mini",effect:"plain"}},[e("i",{staticClass:"el-icon el-icon-position"}),t._v("\n        "+t._s(t.stat.link_clicks)+"\n    ")]):t._e()],1):t._e()},[],!1,null,null,null).exports;const Fo=e({name:"DomPath",props:["from","to","label","side"],data:function(){return{css:{}}},methods:{generateCss:function(){var t=jQuery(this.$el).closest(".block_item_holder_conditional"),e=t.offset(),i=t.find("."+this.from).offset(),n=t.find("."+this.to).offset().top-i.top,s={position:"absolute",border:"2px solid #2f2925",width:"81px",left:("left"==this.side?i.left-e.left-72:i.left-e.left)+"px",top:"50px",height:n+"px",borderBottom:"0",padding:"8px 20px 0 0",fontWeight:"600",marginLeft:"0"};"left"==this.side?(s.borderRight="0",s.borderTopLeftRadius="20px"):(s.borderLeft="0",s.borderTopRightRadius="20px",s.padding="8px 0 0 20px",s.marginLeft="-2px"),this.css=s}},mounted:function(){var t=this;this.generateCss(),jQuery(window).on("resize",function(){t.generateCss()})}},function(){var t=this;return(0,t._self._c)("div",{staticClass:"fc_dom_path",class:"fc_dom_path_"+t.side,style:t.css},[t._t("default")],2)},[],!1,null,null,null).exports;const jo=e({name:"ChildBlocks",components:{ReportWidget:Do,BlockChoice:Oo,FieldEditor:Ao,Confirm:d},props:["blocks","block_fields","all_blocks","show_inline_report","getBlockDescription","getBlockIcon","stats","options"],data:function(){return{show_choice_modal:!1,editing_block:!1,editing_modal:!1,editing_index:0}},computed:{current_block_fields:function(){if(!this.editing_block)return{};var t=this.editing_block.action_name;return this.block_fields[t]}},methods:{addBlock:function(t){var e=this,i=JSON.parse(JSON.stringify(this.all_blocks[t]));i.action_name=t,this.blocks.push(i),this.$refs.choice_action_drawer.closeDrawer(),this.show_choice_modal=!1;var n=this.blocks.length-1;this.editing_index=n,this.editing_block=JSON.parse(JSON.stringify(this.blocks[n])),setTimeout(function(){e.editing_modal=!0},300)},save:function(){this.$set(this.blocks,this.editing_index,this.editing_block),this.editing_modal=!1,this.editing_block=!1,this.$emit("save")},deleteBlock:function(){this.blocks.splice(this.editing_index,1),this.editing_modal=!1,this.editing_block=!1,this.$emit("save")},deleteChild:function(t,e){this.blocks.splice(e,1),this.$emit("save")},cloneBlock:function(t,e){delete(t=JSON.parse(JSON.stringify(t))).id,this.removeBlockCampaign(t),this.blocks.splice(e,0,t),this.$emit("save")},removeBlockCampaign:function(t){t.settings&&t.settings.campaign&&delete t.settings.campaign.id},setCurrentBlock:function(t,e){var i=this;this.editing_block=JSON.parse(JSON.stringify(t)),this.editing_index=e,this.$nextTick(function(){i.editing_modal=!0})},moveToPosition:function(t,e){var i=e-1;"down"===t&&(i=e+1);var n=this.blocks,s=n[e];n.splice(e,1),n.splice(i,0,s),this.$set(this,"blocks",n),this.$emit("save")}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_child_blocks"},[t._l(t.blocks,function(i,n){return e("div",{key:n,staticClass:"fluentcrm_block",class:"fluentcrm_block_"+i.action_name},[e("div",{staticClass:"fluentcrm_blockin",style:{backgroundImage:t.getBlockIcon(i)},on:{click:function(e){return t.setCurrentBlock(i,n)}}},[e("div",{staticClass:"fc_action_abs_right"},[e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link",on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{"font-weight":"bold",cursor:"pointer"}})]),t._v(" "),e("el-dropdown-menu",{staticClass:"fc_clickable_pop",attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("confirm",{attrs:{placement:"top-start",message:t.$t("Delete_Block_Alert")},on:{yes:function(e){return t.deleteChild(i,n)}}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.$t("Delete")))])])],1),t._v(" "),e("el-dropdown-item",[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.cloneBlock(i,n)}}},[t._v(t._s(t.$t("Clone")))])])],1)],1)],1),t._v(" "),e("div",{staticClass:"fluentcrm_block_title"},[e("i",{class:t.getBlockIcon(i)}),t._v(" "+t._s(i.title)+"\n            ")]),t._v(" "),e("div",{staticClass:"fluentcrm_block_desc",domProps:{innerHTML:t._s(t.getBlockDescription(i))}}),t._v(" "),t.show_inline_report?e("report-widget",{attrs:{stat:t.stats[i.id]}}):t._e()],1),t._v(" "),e("el-button-group",{staticClass:"fc_block_controls"},[e("el-button",{attrs:{disabled:0==n,size:"mini",icon:"el-icon-arrow-up"},on:{click:function(e){return t.moveToPosition("up",n)}}}),t._v(" "),e("el-button",{attrs:{disabled:n+1==t.blocks.length,size:"mini",icon:"el-icon-arrow-down"},on:{click:function(e){return t.moveToPosition("down",n)}}})],1)],1)}),t._v(" "),e("el-button",{staticStyle:{width:"100%"},attrs:{icon:"el-icon-plus",type:"default"},on:{click:function(e){t.show_choice_modal=!0}}},[t._v("\n        "+t._s(t.$t("Add Action"))+"\n    ")]),t._v(" "),e("el-drawer",{ref:"choice_action_drawer",staticClass:"fc_company_info_drawer fc_choice_action_drawer",attrs:{"close-on-click-modal":!0,title:t.$t("Add Action"),visible:t.show_choice_modal,"append-to-body":!0,"destroy-on-close":!0,size:t.globalDrawerSize},on:{"update:visible":function(e){t.show_choice_modal=e}}},[e("block-choice",{attrs:{choice_context:"child",condition_type:"action",blocks:t.all_blocks},on:{insert:t.addBlock}})],1),t._v(" "),e("el-drawer",{staticClass:"fc_company_info_drawer",class:t.editing_block?"fc_drawer_for_"+t.editing_block.action_name+(t.editing_block.id?" fc_blocked_has_id":" fc_blocked_no_id"):"",attrs:{"close-on-click-modal":!1,title:"Edit "+(t.editing_block?t.editing_block.title:""),visible:t.editing_modal,"append-to-body":!0,"destroy-on-close":!0,size:t.globalDrawerSize,"with-header":!1},on:{"update:visible":function(e){t.editing_modal=e},close:function(){t.editing_modal=!1}}},[e("div",{staticClass:"fluentcrm_block_editor_body"},[t.editing_block&&t.editing_modal?[e("field-editor",{key:t.editing_index+"_"+t.editing_block.action_name,attrs:{title_badge:t.editing_block.type,show_controls:!0,data:t.editing_block.settings,options:t.options,action_name:t.editing_block.action_name,is_first:0===t.editing_index,is_last:t.editing_index===t.blocks.length-1,settings:t.current_block_fields},on:{save:function(e){return t.save()},save_reload:function(e){return t.save()},deleteSequence:function(e){return t.deleteBlock()},closeDrawer:function(e){t.editing_modal=!1}},scopedSlots:t._u([{key:"after_header",fn:function(){return[e("el-form-item",{attrs:{label:t.$t("Internal Label")}},[e("el-input",{attrs:{placeholder:t.$t("Internal Label")},model:{value:t.editing_block.title,callback:function(e){t.$set(t.editing_block,"title",e)},expression:"editing_block.title"}})],1)]},proxy:!0}],null,!1,4218782535)})]:t._e()],2)])],2)},[],!1,null,null,null).exports;var Io=e({name:"TriggerChanger",props:["funnel"],data:function(){return{funnel_data:JSON.parse(JSON.stringify(this.funnel)),triggers:[],fetching:!0,saving:!1}},methods:{getTriggers:function(){var t=this;this.fetching=!0,this.$get("funnels/triggers").then(function(e){t.triggers=e.triggers}).catch(function(e){t.handleError(e)}).finally(function(){t.fetching=!1})},changeTrigger:function(){var t=this;this.saving=!0,this.$put("funnels/".concat(this.funnel.id,"/change-trigger"),{title:this.funnel_data.title,trigger_name:this.funnel_data.trigger_name}).then(function(e){t.$notify.success(e.message),t.$emit("refreshTrigger",e.funnel)}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1})}},mounted:function(){this.getTriggers()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fcrm_funnel_changer"},[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],attrs:{data:t.funnel_data,"label-position":"top"}},[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                "+t._s(t.$t("Select New Automation Trigger"))+"\n                "),e("p",[t._v(t._s(t.$t("TriggerChanger.instruction")))])]),t._v(" "),e("el-select",{attrs:{filterable:"",placeholder:t.$t("Select")},model:{value:t.funnel_data.trigger_name,callback:function(e){t.$set(t.funnel_data,"trigger_name",e)},expression:"funnel_data.trigger_name"}},t._l(t.triggers,function(t,i){return e("el-option",{key:i,attrs:{label:t.category+" - "+t.label,value:i}})}),1),t._v(" "),t.triggers[t.funnel_data.trigger_name]?e("p",{domProps:{innerHTML:t._s(t.triggers[t.funnel_data.trigger_name].description)}}):t._e()],2),t._v(" "),t.funnel_data.trigger_name!=t.funnel.trigger_name?[e("el-form-item",[e("template",{slot:"label"},[t._v("\n                    "+t._s(t.$t("Automation Trigger Title"))+"\n                ")]),t._v(" "),e("el-input",{attrs:{type:"text",placeholder:t.$t("Trigger Title")},model:{value:t.funnel_data.title,callback:function(e){t.$set(t.funnel_data,"title",e)},expression:"funnel_data.title"}})],2),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{type:"primary"},on:{click:function(e){return t.changeTrigger()}}},[t._v(t._s(t.$t("Change Automation Trigger")))])]:t._e()],2)],1)},[],!1,null,null,null);const Lo=e({name:"FunnelEditor",props:["funnel_id","options"],components:{FieldEditor:Ao,FormField:So,BlockChoice:Oo,ReportWidget:Do,DomPath:Fo,ChildBlocks:jo,TriggerChanger:Io.exports,Confirm:d,InlineDoc:b},data:function(){return{showPopTest:!1,funnel:!1,working:!1,blocks:{},actions:[],funnel_sequences:[],block_fields:{},loading:!1,current_block:!1,current_block_index:!1,is_editing_root:!0,show_choice_modal:!1,choice_modal_index:"last",show_blocK_editor:!1,is_new_funnel:"yes"===this.$route.query.is_new,stats:{},show_inline_report:!1,show_trigger_changer:!1,showInlineEditFunnelTitle:!1,updatingFunnelSettings:!1}},computed:{funnelTitle:function(){var t=" ("+this.funnel.status+")";return"draft"==this.funnel.status&&(t='<span class="funnel_trigger_inst">'+t+"</span>"),this.funnel.title+t},action:function(){if(!this.actions)return{};var t=this.funnel.key;return this.actions[t]||{}},current_block_fields:function(){if(!this.current_block)return{};var t=this.current_block.action_name;return this.block_fields[t]}},methods:{fetchFunnel:function(){var t=this;this.loading=!0,this.$get("funnels/".concat(this.funnel_id),{with:["blocks","block_fields","funnel_sequences"]}).then(function(e){e.funnel.trigger||(t.$notify.error(t.$t("Attached Trigger could not be found")),t.show_trigger_changer=!0),t.funnel=e.funnel,t.block_fields=e.block_fields||{},t.blocks=e.blocks,t.actions=e.actions,window.fcrm_funnel_context_codes=e.composer_context_codes,t.funnel_sequences=e.funnel_sequences,!1!==t.current_block_index?(t.current_block=!1,t.$nextTick(function(){t.current_block=t.funnel_sequences[t.current_block_index]})):t.is_new_funnel&&t.showRootSettings(),t.is_new_funnel=!1}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1,t.working=!1})},addBlock:function(t){var e=this,i=JSON.parse(JSON.stringify(this.blocks[t])),n=this.choice_modal_index;"last"===n?n=this.funnel_sequences.length:n+=1,i.settings||(i.settings={}),"conditional"==i.type&&(i.children={yes:[],no:[]}),i.action_name=t,this.funnel_sequences.splice(n,0,i),this.current_block=!1,this.current_block_index=!1,this.$nextTick(function(){e.current_block=e.funnel_sequences[n],e.current_block_index=n}),i.reload_on_insert&&this.saveAndFetchSettings(),this.$refs.choice_action_goal_drawer.closeDrawer(),setTimeout(function(){e.show_blocK_editor=!0,e.show_choice_modal=!1},300)},handleBlockAdd:function(t){this.choice_modal_index=t,this.show_choice_modal=!0},setCurrentBlock:function(t,e){this.is_editing_root=!1,this.current_block=t,this.current_block_index=e,this.show_blocK_editor=!0},deleteFunnelSequence:function(){this.fireBeforeClose();var t=this.current_block_index;this.is_editing_root=!1,this.current_block=!1,this.current_block_index=!1,this.show_blocK_editor=!1,this.funnel_sequences.splice(t,1),this.saveFunnelSequences()},deleteBlock:function(t,e){this.funnel_sequences.splice(e,1),this.saveFunnelSequences()},cloneBlock:function(t,e){delete(t=JSON.parse(JSON.stringify(t))).id,this.removeBlockCampaign(t),this.prepareConditionalBlock(t),this.funnel_sequences.splice(e,0,t),this.saveFunnelSequences()},removeBlockCampaign:function(t){t.settings&&t.settings.campaign&&delete t.settings.campaign.id},prepareConditionalBlock:function(t){var e=this;"funnel_condition"===t.action_name&&(t.children.no.forEach(function(t){delete t.id,e.removeBlockCampaign(t)}),t.children.yes.forEach(function(t){delete t.id,e.removeBlockCampaign(t)}))},showRootSettings:function(){this.current_block=!1,this.current_block_index=!1,this.is_editing_root=!0,this.show_blocK_editor=!0},saveFunnelSequences:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.fluencrm_fallback_funnel_ajax)return this.fallbackSaveFunnelSequence(t,i);this.working=!0,this.$post("funnels/funnel/save-funnel-sequences",{funnel_settings:JSON.stringify(this.funnel.settings),conditions:JSON.stringify(this.funnel.conditions),funnel_title:this.funnel.title,funnel_description:this.funnel.description,status:this.funnel.status,sequences:this.getStripedSequences(),funnel_id:this.funnel_id}).then(function(t){i?i(t):(e.$set(e,"funnel_sequences",t.sequences),e.$notify.success(t.message),e.fireBeforeClose(),e.show_blocK_editor=!1,e.current_block=!1,e.current_block_index=!1)}).catch(function(n){"rest_no_route"==n.code?(e.$notify.info(e.$t("Trying fallback save. Please Wait...")),e.fallbackSaveFunnelSequence(t,i)):e.handleError(n)}).finally(function(){i||(e.working=!1)})},fallbackSaveFunnelSequence:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.fluencrm_fallback_funnel_ajax=!0,this.working=!0,window.jQuery.post(window.ajaxurl,{action:"fluentcrm_save_funnel_sequence_ajax",funnel_id:this.funnel.id,funnel_settings:JSON.stringify(this.funnel.settings),conditions:JSON.stringify(this.funnel.conditions),funnel_title:this.funnel.title,status:this.funnel.status,sequences:JSON.stringify(this.funnel_sequences),is_fluentcrm:"yes"}).then(function(t){i?i(t):(e.$set(e,"funnel_sequences",t.sequences),e.$notify.success(t.message),e.show_blocK_editor=!1,e.current_block=!1,e.current_block_index=!1)}).catch(function(t){console.log(t),e.handleError(t)}).always(function(){i||(e.working=!1)})},getStripedSequences:function(){var t=JSON.parse(JSON.stringify(this.funnel_sequences)),e=this.stripSequenceSets(t);return JSON.stringify(e)},stripSequenceSets:function(t){var e=this;return this.each(t,function(t){"send_custom_email"==t.action_name?t=e.stripEmailSequence(t):"funnel_condition"==t.action_name&&(t.children.no=e.stripSequenceSets(t.children.no),t.children.yes=e.stripSequenceSets(t.children.yes))}),t},stripEmailSequence:function(t){return t.settings.reference_campaign&&t.settings.reference_campaign==t.settings.campaign.id&&(t.settings.campaign={id:t.settings.campaign.id},t.is_stripped=!0),t},saveFunnelBlockSequence:function(){var t=this;this.$set(this.funnel_sequences,this.current_block_index,this.current_block),this.$nextTick(function(){t.saveFunnelSequences(!1)})},moveToPosition:function(t,e){var i=e-1;"down"===t&&(i=e+1);var n=this.funnel_sequences,s=n[e];n.splice(e,1),n.splice(i,0,s),this.$set(this,"funnel_sequences",n),this.saveFunnelSequences()},getBlockDescription:function(t){var e="";switch(t.action_name){case"send_custom_email":return this.isEmptyValue(t.settings.campaign.email_subject)?'<span class="funnel_trigger_inst">'+this.$t("Set Email Subject & Body")+"</span>":t.settings.campaign.email_subject;case"fluentcrm_wait_times":if("timestamp_wait"==t.settings.wait_type)e=this.$t("Wait until ")+t.settings.wait_date_time;else if("to_day"==t.settings.wait_type)e=this.$t("Wait until next ")+t.settings.to_day.join(" / ")+" - "+t.settings.to_day_time;else if("by_custom_field"==t.settings.wait_type){if(!t.settings.by_custom_field)return this.$t("Set Custom Field");e=this.$t("Wait by custom field ")+t.settings.by_custom_field}else e=this.$t("Wait ")+t.settings.wait_time_amount+" "+t.settings.wait_time_unit;break;case"add_contact_to_company":case"detach_contact_from_company":case"fluentcrm_contact_added_to_companies":case"fluentcrm_contact_removed_from_companies":case"fcrm_has_contact_company":e='<span class="funnel_trigger_inst">Set Companies</span>',t.settings.company&&this.each(this.options.companies,function(i){i.id==t.settings.company&&(e=i.title)});break;case"add_contact_to_list":case"detach_contact_from_list":case"fluentcrm_contact_added_to_lists":case"fluentcrm_contact_removed_from_lists":case"fcrm_has_contact_list":if(e='<span class="funnel_trigger_inst">'+this.$t("Set Lists")+"</span>",!this.isEmptyValue(t.settings.lists)){var i=[];this.each(this.options.lists,function(e){-1!==t.settings.lists.indexOf(e.id.toString())&&i.push(e.title)}),e=i.join(", ")}break;case"add_contact_to_tag":case"detach_contact_from_tag":case"fluentcrm_contact_added_to_tags":case"fluentcrm_contact_removed_from_tags":case"fcrm_has_contact_tag":e='<span class="funnel_trigger_inst">'+this.$t("Set Tags")+"</span>",this.isEmptyValue(t.settings.tags)||(e=this.getTagNames(t.settings.tags));break;case"send_campaign_email":e='<span class="funnel_trigger_inst">Set Campaign</span>',t.settings.campaign_id&&this.each(this.options.campaigns,function(i){i.id==t.settings.campaign_id&&(e=i.title)});break;case"add_to_email_sequence":if(this.isEmptyValue(t.settings.sequence_id))e='<span class="funnel_trigger_inst">'+this.$t("Set Email Sequence")+"</span>";else{e=this.$t("Add To Sequence: ");var n=[];this.each(this.options.email_sequences,function(e){t.settings.sequence_id===e.id&&n.push(e.title)}),e=n.join(", ")}break;case"fluentcrm_email_sequence_completed":e=this.isEmptyValue(t.settings.sequence_ids)?'<span class="funnel_trigger_inst">'+this.$t("Set Email Sequence")+"</span>":t.description;break;case"funnel_condition":e='<span class="funnel_trigger_inst">'+this.$t("Set Condition")+"</span>",this.isEmptyValue(t.settings.conditions)||this.isEmptyValue(t.settings.conditions[0])||(e=this.$t("Matching ")+t.settings.conditions.length+" condition sets");break;case"add_contact_activity":e='<span class="funnel_trigger_inst">'+this.$t("Set Note Title")+"</span>",this.isEmptyValue(t.settings.title)||(e=t.settings.title);break;case"update_contact_property":e='<span class="funnel_trigger_inst">'+this.$t("Set Property")+"</span>",this.isEmptyValue(t.settings.contact_properties)||this.isEmptyValue(t.settings.contact_properties[0].data_key)||(e=this.$t("Updating ")+t.settings.contact_properties.length+" properties");break;case"http_send_data":e='<span class="funnel_trigger_inst">'+this.$t("Set Webhook URL")+"</span>",this.isEmptyValue(t.settings.remote_url)||(e=this.$t("Send HTTP ")+t.settings.sending_method+" webhook");break;case"fcrm_change_user_role":e='<span class="funnel_trigger_inst">'+this.$t("Set User Role")+"</span>",this.isEmptyValue(t.settings.user_role)||(e=this.$t("Change User Role to ")+t.settings.user_role);break;case"remove_user_role":e='<span class="funnel_trigger_inst">'+this.$t("Remove User Role")+"</span>",this.isEmptyValue(t.settings.role)||(e=this.$t("Remove User Role: ")+t.settings.role);break;default:e=t.description}return e||t.description},getTriggerDescription:function(t){var e="";switch(t.trigger_name){case"fluentcrm_contact_added_to_companies":case"fluentcrm_contact_removed_from_companies":if(this.isEmptyValue(t.settings.companies))return'<span class="funnel_trigger_inst">Set Company</span>';var i=[];this.each(this.options.companies,function(e){-1!=t.settings.companies.indexOf(e.id.toString())&&i.push(e.title)}),e=i.join(", ");break;case"fluentcrm_contact_added_to_tags":case"fluentcrm_contact_removed_from_tags":if(this.isEmptyValue(t.settings.tags))return'<span class="funnel_trigger_inst">'+this.$t("Set Tag")+"</span>";var n=[];this.each(this.options.tags,function(e){-1!=t.settings.tags.indexOf(e.id.toString())&&n.push(e.title)}),e=n.join(", ");break;case"fluentcrm_contact_added_to_lists":case"fluentcrm_contact_removed_from_lists":if(this.isEmptyValue(t.settings.lists))return'<span class="funnel_trigger_inst">'+this.$t("Set Lists")+"</span>";var s=[];this.each(this.options.lists,function(e){-1!==t.settings.lists.indexOf(e.id.toString())&&s.push(e.title)}),e=s.join(", ");break;default:e=t.trigger.label}return e||t.trigger.label},getTagNames:function(t){var e=[];return this.each(this.options.tags,function(i){-1!=t.indexOf(i.id.toString())&&e.push(i.title)}),e.join(", ")},saveAndFetchSettings:function(){var t=this;this.$nextTick(function(){t.saveFunnelSequences(!1,function(e){t.fetchFunnel()})})},gotoReports:function(){this.$router.push({name:"funnel_subscribers",params:{funnel_id:this.funnel_id}})},getBlockIcon:function(t){var e=t.action_name;return this.blocks[e]&&this.blocks[e].icon?this.blocks[e].icon:""},getStats:function(){var t=this;this.$get("funnels/".concat(this.funnel_id,"/report")).then(function(e){var i=e.stats.metrics,n={};t.each(i,function(t){n[t.sequence_id]=t}),t.stats=n}).catch(function(e){t.handleError(e)}).finally(function(){})},getBlockClasses:function(t,e){var i,n,s=["fc_block_type_"+(null==t?void 0:t.type),"fluentcrm_block_"+(null==t?void 0:t.action_name)];return null!=t&&null!==(i=t.settings)&&void 0!==i&&i.type&&"required"==(null==t||null===(n=t.settings)||void 0===n?void 0:n.type)&&s.push("fc_funnel_benchmark_required"),this.current_block_index===e&&s.push("fluentcrm_block_active"),s},showEditTriggerModal:function(){this.show_trigger_changer=!0},handleTriggerChanged:function(){this.show_trigger_changer=!1,this.is_new_funnel=!0,this.fetchFunnel()},handleConditionAdd:function(t){return this.has_campaign_pro?this.blocks.funnel_condition?(this.choice_modal_index=t,void this.addBlock("funnel_condition")):(this.$notify.error(this.$t("Condition block is not available")),!1):(this.$alert('<p><strong>This block require pro version of FluentCRM</strong></p><p style="line-height: 22px; margin-bottom: 15px !important;">Please download and install FluentCRM Pro to activate this block</p><p><a class="el-button el-button--danger" :href="'+this.appVars.crm_pro_url+'" target="_blank" rel="noopener">Get FluentCRM Pro</a></p>',"Require FluentCRM Pro",{dangerouslyUseHTMLString:!0,showConfirmButton:!1}),!1)},fireBeforeClose:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.current_block&&"send_custom_email"==this.current_block.action_name&&this.unmountBlockEditor(),t&&t()},funnelRootSaved:function(){"yes"==this.$route.query.is_new&&this.$router.replace({query:null})},getTriggerIcon:function(t){return{woocommerce_order_status_completed:"fc-icon-woo_order_complete",woocommerce_order_status_processing:"fc-icon-woo_new_order",woocommerce_order_status_refunded:"fc-icon-woo_refund",woocommerce_order_status_changed:"fc-icon-woo",woocommerce_subscription_status_active:"fc-icon-woo_order_complete",woocommerce_subscription_renewal_payment_complete:"fc-icon-woo_order_complete",woocommerce_subscription_renewal_payment_failed:"fc-icon-woo_refund",wishlistmember_add_user_levels:"fc-icon-wishlist",tutor_after_enrolled:"fc-icon-tutor_lms_enrollment_course",tutor_course_complete_after:"fc-icon-tutor_lms_complete_course",tutor_lesson_completed_after:"fc-icon-tutor_lms_complete_course",rcp_membership_post_activate:"fc-icon-rcp_membership_level",rcp_transition_membership_status_expired:"fc-icon-rcp_membership_cancle",rcp_membership_post_cancel:"fc-icon-rcp_membership_cancle",pmpro_after_change_membership_level:"fc-icon-paid_membership_pro_user_level",pmpro_membership_post_membership_expiry:"fc-icon-membership_level_ex_pmp","mepr-account-is-active":"fc-icon-memberpress_membership","mepr-event-transaction-expired":"el-icon-circle-close",llms_user_enrolled_in_course:"fc-icon-lifter_lms_course_enrollment",lifterlms_course_completed:"fc-icon-lifter_lms_complete_course",llms_user_added_to_membership_level:"fc-icon-lifter_lms_membership",lifterlms_lesson_completed:"fc-icon-lifter_lms_complete_lession-t2",learndash_update_course_access:"fc-icon-learndash_enroll_course",learndash_lesson_completed:"fc-icon-learndash_complete_lesson",learndash_topic_completed:"fc-icon-learndash_complete_topic",learndash_course_completed:"fc-icon-learndash_complete_course",ld_added_group_access:"fc-icon-learndash_course_group",simulated_learndash_update_course_removed:"fc-icon-learndash_enroll_course",fc_ab_cart_simulation_woo:"fc-icon-woo",fluentcrm_contact_birthday:"el-icon-present",user_register:"fc-icon-wp_new_user_signup",fluentform_submission_inserted:"fc-icon-fluentforms",fluentcrm_contact_added_to_lists:"fc-icon-list_applied_2",edd_update_payment_status:"fc-icon-edd_new_order_success",edd_recurring_add_subscription_payment:"fc-icon-edd_new_order_success",edd_subscription_status_change:"el-icon-circle-close",affwp_set_affiliate_status:"fc-icon-trigger",fluent_surecart_purchase_created_wrap:"el-icon-shopping-cart-full",fluent_surecart_purchase_refund_wrap:"el-icon-sold-out"}[t]||"fc-icon-trigger"},initKeyboardSave:function(t){var e=this;(window.navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&"s"===t.key&&(t.preventDefault(),this.saveFunnelSequences(!1,function(t){e.working=!1,e.$set(e,"funnel_sequences",t.sequences),e.$notify.success(t.message)}),this.funnelRootSaved())},updateAutomationSettings:function(){var t=this;this.updatingFunnelSettings=!0,this.$put("funnels/funnel/".concat(this.funnel.id,"/title"),{title:this.funnel.title}).then(function(e){t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.updatingFunnelSettings=!1,t.showInlineEditFunnelTitle=!1})}},mounted:function(){this.fetchFunnel(),this.getStats(),this.changeTitle(this.$t("Edit Funnel")),document.addEventListener("keydown",this.initKeyboardSave)},beforeDestroy:function(){window.fcrm_funnel_context_codes=void 0,document.removeEventListener("keydown",this.initKeyboardSave)}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_settings_wrapper"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom fc_breadcrumb_inline_edit",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"funnels"}}},[t._v("\n                    "+t._s(t.$t("Automation Funnel"))+"\n                ")]),t._v(" "),t.funnel&&t.funnel.trigger?e("el-breadcrumb-item",{staticClass:"fc_breadcrumb_item"},[t.showInlineEditFunnelTitle?t._e():e("el-popover",{attrs:{placement:"right",title:t.funnel.trigger.label,width:"300",trigger:"hover",content:t.funnel.description||t.funnel.trigger.description}},[e("div",{staticClass:"fc_funnel_breadcrumb_title",attrs:{slot:"reference"},slot:"reference"},[e("span",{domProps:{innerHTML:t._s(t.funnelTitle)}})])]),t._v(" "),e("div",{staticClass:"fc_inline_editable"},[t.showInlineEditFunnelTitle?e("el-input",{attrs:{placeholder:t.$t("Automation Name")},model:{value:t.funnel.title,callback:function(e){t.$set(t.funnel,"title",e)},expression:"funnel.title"}}):t._e(),t._v(" "),t.showInlineEditFunnelTitle?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updatingFunnelSettings,expression:"updatingFunnelSettings"}],staticClass:"fc_primary_btn",attrs:{size:"small",type:"success"},on:{click:function(e){return t.updateAutomationSettings()}}},[t._v(t._s(t.$t("Save")))]):t._e(),t._v(" "),t.showInlineEditFunnelTitle?e("el-button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.showInlineEditFunnelTitle=!1}}},[t._v("\n                            "+t._s(t.$t("Cancel"))+"\n                        ")]):t._e(),t._v(" "),t.showInlineEditFunnelTitle?t._e():e("i",{staticClass:"el-icon-edit",on:{click:function(e){t.showInlineEditFunnelTitle=!0}}})],1)],1):t._e()],1)],1),t._v(" "),t.funnel&&t.funnel.trigger?e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{staticClass:"mr-5",staticStyle:{padding:"6px 15px 7px"},attrs:{size:"small",icon:"el-icon-setting"},on:{click:function(e){return t.showEditTriggerModal()}}}),t._v(" "),e("el-checkbox",{attrs:{size:"mini",border:""},model:{value:t.show_inline_report,callback:function(e){t.show_inline_report=e},expression:"show_inline_report"}},[t._v(t._s(t.$t("Stats")))]),t._v(" "),e("span",{staticClass:"mr-5 ml-5",staticStyle:{"vertical-align":"middle"}},[t._v(t._s(t.$t("Status"))+": "+t._s(t.funnel.status))]),t._v(" "),e("el-switch",{staticClass:"mr-5",attrs:{"active-value":"published","inactive-value":"draft"},on:{change:function(e){return t.saveFunnelSequences(!0)}},model:{value:t.funnel.status,callback:function(e){t.$set(t.funnel,"status",e)},expression:"funnel.status"}}),t._v(" "),"published"==t.funnel.status?e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.gotoReports()}}},[t._v("\n                "+t._s(t.$t("View Reports"))+"\n            ")]):t._e(),t._v(" "),e("inline-doc",{attrs:{doc_id:13791}})],1):t._e()]),t._v(" "),t.funnel&&t.funnel.trigger?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.working,expression:"working"}],staticClass:"fluentcrm_body fluentcrm_tile_bg"},[e("div",{staticClass:"fluentcrm_blocks_container"},[e("div",{staticClass:"fluentcrm_blocks_wrapper"},[e("div",{staticClass:"fluentcrm_blocks"},[e("div",{staticClass:"block_item_holder"},[e("div",{staticClass:"fluentcrm_block fluentcrm_block_trigger",class:t.is_editing_root?"fluentcrm_block_active":""},[t.appVars.icons.trigger_icon?e("div",{staticClass:"fluentcrm_blockin",on:{click:function(e){return t.showRootSettings()}}},[e("div",{staticClass:"fluentcrm_block_title"},[e("i",{class:t.getTriggerIcon(t.funnel.trigger_name)}),t._v(" "+t._s(t.funnel.title)+"\n                                ")]),t._v(" "),e("div",{staticClass:"fluentcrm_block_desc",domProps:{innerHTML:t._s(t.getTriggerDescription(t.funnel))}}),t._v(" "),t.show_inline_report?e("report-widget",{staticClass:"fluentcrm_block_stats mt-5",attrs:{stat:t.stats[0]}}):t._e()],1):t._e()]),t._v(" "),e("div",{staticClass:"block_item_add"},[e("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[e("div",{staticClass:"fc_action_selector"},[e("ul",[e("li",{on:{click:function(e){return t.handleBlockAdd(-1)}}},[e("h4",[t._v(t._s(t.$t("Add Action / Goal")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Run Action Task to do particular task on the contact")))])]),t._v(" "),e("li",{on:{click:function(e){return t.handleConditionAdd(-1)}}},[e("h4",[t._v(t._s(t.$t("Conditional Action")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Funnel_Conditional_Action_desc")))])])])]),t._v(" "),e("div",{staticClass:"fc_show_plus",attrs:{slot:"reference"},on:{click:function(e){return t.handleBlockAdd(-1)}},slot:"reference"},[e("i",{staticClass:"el-icon el-icon-circle-plus-outline"})])])],1)]),t._v(" "),t._l(t.funnel_sequences,function(i,n){return e("div",{key:n,staticClass:"block_item_holder",class:"block_item_holder_"+i.type},[e("div",{staticClass:"fluentcrm_block",class:t.getBlockClasses(i,n)},[e("div",{staticClass:"fluentcrm_blockin",on:{click:function(e){return t.setCurrentBlock(i,n)}}},[e("div",{staticClass:"fc_action_abs_right"},[e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link",on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{"font-weight":"bold",cursor:"pointer"}})]),t._v(" "),e("el-dropdown-menu",{staticClass:"fc_clickable_pop",attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("confirm",{attrs:{placement:"top-start",message:t.$t("Delete_Block_Alert")},on:{yes:function(e){return t.deleteBlock(i,n)}}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.$t("Delete")))])])],1),t._v(" "),e("el-dropdown-item",[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.cloneBlock(i,n)}}},[t._v(t._s(t.$t("Clone")))])])],1)],1)],1),t._v(" "),e("div",{staticClass:"fluentcrm_block_title"},[e("i",{class:t.getBlockIcon(i)}),t._v(" "+t._s(i.title)+"\n                                ")]),t._v(" "),e("div",{staticClass:"fluentcrm_block_desc",domProps:{innerHTML:t._s(t.getBlockDescription(i))}}),t._v(" "),t.show_inline_report?e("report-widget",{staticClass:"fluentcrm_block_stats mt-5",attrs:{stat:t.stats[i.id]}}):t._e()],1),t._v(" "),e("el-button-group",{staticClass:"fc_block_controls"},[e("el-button",{attrs:{disabled:0==n,size:"mini",icon:"el-icon-arrow-up"},on:{click:function(e){return t.moveToPosition("up",n)}}}),t._v(" "),e("el-button",{attrs:{disabled:n+1==t.funnel_sequences.length,size:"mini",icon:"el-icon-arrow-down"},on:{click:function(e){return t.moveToPosition("down",n)}}})],1),t._v(" "),"conditional"===i.type?[e("span",{staticClass:"fc_b_yes_node"}),t._v(" "),e("span",{staticClass:"fc_b_no_node"})]:t._e(),t._v(" "),e("span")],2),t._v(" "),"conditional"==i.type?["funnel_ab_testing"==i.action_name?[e("dom-path",{staticClass:"fc_ab_test fc_ab_test_a",attrs:{side:"left",from:"fc_b_no_node",to:"fc_b_no_node_point"}},[e("span",[t._v("A - "),e("span",[t._v(t._s(i.settings.path_a)+"%")])])]),t._v(" "),e("dom-path",{staticClass:"fc_ab_test fc_ab_test_b",attrs:{side:"right",from:"fc_b_yes_node",to:"fc_b_yes_node_point"}},[e("span",[t._v("B - "+t._s(i.settings.path_b)+"%")])])]:[e("dom-path",{staticClass:"fc_condition_node_point",attrs:{side:"left",from:"fc_b_no_node",to:"fc_b_no_node_point"}},[e("span",[t._v(t._s(t.$t("No")))])]),t._v(" "),e("dom-path",{staticClass:"fc_condition_node_point",attrs:{side:"right",from:"fc_b_yes_node",to:"fc_b_yes_node_point"}},[e("span",[t._v(t._s(t.$t("Yes")))])])],t._v(" "),e("div",{staticClass:"block_conditional_wrapper"},[e("div",{staticClass:"block_cond_holder block_cond_no"},[e("span",{staticClass:"fc_b_no_node_point"}),t._v(" "),e("div",{staticClass:"block_cond_inner"},[e("child-blocks",{attrs:{all_blocks:t.blocks,blocks:i.children.no,show_inline_report:t.show_inline_report,getBlockDescription:t.getBlockDescription,getBlockIcon:t.getBlockIcon,stats:t.stats,options:t.options,block_fields:t.block_fields},on:{save:function(e){return t.saveFunnelSequences()}}})],1)]),t._v(" "),e("div",{staticClass:"block_cond_holder block_cond_yes"},[e("span",{staticClass:"fc_b_yes_node_point"}),t._v(" "),e("div",{staticClass:"block_cond_inner"},[e("child-blocks",{attrs:{all_blocks:t.blocks,blocks:i.children.yes,show_inline_report:t.show_inline_report,getBlockDescription:t.getBlockDescription,getBlockIcon:t.getBlockIcon,stats:t.stats,options:t.options,block_fields:t.block_fields},on:{save:function(e){return t.saveFunnelSequences()}}})],1)])]),t._v(" "),e("div",{staticClass:"fc_cond_border_no_top"})]:t._e(),t._v(" "),e("div",{staticClass:"block_item_add"},[e("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[e("div",{staticClass:"fc_action_selector"},[e("ul",[e("li",{on:{click:function(e){return t.handleBlockAdd(n)}}},[e("h4",[t._v(t._s(t.$t("Add Action / Goal")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Run Action Task to do particular task on the contact")))])]),t._v(" "),e("li",{on:{click:function(e){return t.handleConditionAdd(n)}}},[e("h4",[t._v(t._s(t.$t("Conditional Action")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Funnel_Conditional_Action_desc")))])])])]),t._v(" "),e("div",{staticClass:"fc_show_plus",attrs:{slot:"reference"},on:{click:function(e){return t.handleBlockAdd(n)}},slot:"reference"},[e("i",{staticClass:"el-icon el-icon-circle-plus-outline"})])])],1)],2)})],2)])])]):t._e(),t._v(" "),t.loading?e("div",{staticClass:"fluentcrm_body fluentcrm_tile_bg",staticStyle:{position:"relative"}},[e("div",{staticClass:"fc_loading_bar"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):t._e()],1):t._e(),t._v(" "),e("el-drawer",{staticClass:"fc_company_info_drawer fc_drawer_edit_block fc_funnel_block_modal",class:t.current_block?"fc_drawer_for_"+t.current_block.action_name+(t.current_block.id?" fc_blocked_has_id":" fc_blocked_no_id"):"",attrs:{"close-on-click-modal":!1,visible:t.show_blocK_editor,"append-to-body":!0,"with-header":!1,size:t.globalDrawerSize,"destroy-on-close":!0,wrapperClosable:!1},on:{"update:visible":function(e){t.show_blocK_editor=e},close:t.fireBeforeClose}},[e("div",{staticClass:"fluentcrm_block_editor_body"},[t.current_block?[e("field-editor",{key:t.current_block_index+"_"+t.current_block.action_name,attrs:{title_badge:t.trans(t.current_block.type),block_type:t.current_block.type,show_controls:!0,data:t.current_block.settings,options:t.options,action_name:t.current_block.action_name,funnel_id:t.funnel_id,is_first:0===t.current_block_index,is_last:t.current_block_index===t.funnel_sequences.length-1,settings:t.current_block_fields},on:{save:function(e){return t.saveFunnelBlockSequence()},deleteSequence:function(e){return t.deleteFunnelSequence()},save_reload:function(e){return t.saveAndFetchSettings()},closeDrawer:function(e){t.show_blocK_editor=!1}},scopedSlots:t._u([{key:"after_header",fn:function(){return[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Internal Label")}},[e("el-input",{attrs:{placeholder:t.$t("Internal Label")},model:{value:t.current_block.title,callback:function(e){t.$set(t.current_block,"title",e)},expression:"current_block.title"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Internal Description")}},[e("el-input",{attrs:{rows:2,type:"textarea",placeholder:t.$t("Internal Description")},model:{value:t.current_block.description,callback:function(e){t.$set(t.current_block,"description",e)},expression:"current_block.description"}})],1)],1)],1)]},proxy:!0}],null,!1,3749070313)})]:t.is_editing_root?[e("field-editor",{key:"is_editing_root",attrs:{title_badge:"trigger",show_controls:!1,options:t.options,data:t.funnel.settings,settings:t.funnel.settingsFields},on:{save_reload:function(e){return t.saveAndFetchSettings()},closeDrawer:function(e){t.show_blocK_editor=!1}},scopedSlots:t._u([{key:"after_header",fn:function(){return[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Automation Name")}},[e("el-input",{attrs:{placeholder:t.$t("Automation Name")},model:{value:t.funnel.title,callback:function(e){t.$set(t.funnel,"title",e)},expression:"funnel.title"}})],1)],1),t._v(" "),e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Internal Description")}},[e("el-input",{attrs:{rows:2,type:"textarea",placeholder:t.$t("Internal Description")},model:{value:t.funnel.description,callback:function(e){t.$set(t.funnel,"description",e)},expression:"funnel.description"}})],1)],1)],1)]},proxy:!0}])}),t._v(" "),t.isEmptyValue(t.funnel.conditions)?t._e():e("el-form",{staticClass:"fc_funnel_conditions fc_block_white",attrs:{"label-position":"top",data:t.funnel.conditions}},[e("h3",[t._v(t._s(t.$t("Conditions")))]),t._v(" "),t._l(t.funnel.conditionFields,function(i,n){return e("div",{key:n},[e("form-field",{key:n,attrs:{field:i,options:t.options},on:{save_reload:function(e){return t.saveAndFetchSettings()}},model:{value:t.funnel.conditions[n],callback:function(e){t.$set(t.funnel.conditions,n,e)},expression:"funnel.conditions[conditionKey]"}})],1)})],2),t._v(" "),e("div",{staticClass:"fluentcrm-text-right"},[e("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){t.saveFunnelSequences(!1),t.funnelRootSaved()}}},[t._v("\n                        "+t._s(t.$t("Save Settings"))+"\n                    ")])],1)]:t._e()],2)]),t._v(" "),e("el-drawer",{ref:"choice_action_goal_drawer",staticClass:"fc_company_info_drawer",attrs:{"close-on-click-modal":!1,title:t.$t("Add Action / Goal"),visible:t.show_choice_modal,"append-to-body":!0,"with-header":!1,size:t.globalDrawerSize,"destroy-on-close":!0},on:{"update:visible":function(e){t.show_choice_modal=e}}},[t.show_choice_modal?e("block-choice",{attrs:{show_close:!0,blocks:t.blocks},on:{close:function(){t.show_choice_modal=!1},insert:t.addBlock}}):t._e()],1),t._v(" "),e("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.$t("Edit Primary Automation Trigger"),visible:t.show_trigger_changer,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.show_trigger_changer=e}}},[t.show_trigger_changer?e("trigger-changer",{attrs:{funnel:t.funnel},on:{refreshTrigger:function(e){return t.handleTriggerChanged()}}}):t._e()],1)],1)},[],!1,null,null,null).exports;const No={name:"ContactCardPop",props:{subscriber:{type:Object,default:function(){return{}}},display_key:{type:String,default:function(){return"email"}},placement:{type:String,default:function(){return"top-start"}},trigger_type:{type:String,default:function(){return"click"}}},methods:{viewProfile:function(){}}};var qo=i(3667),Mo={insert:"head",singleton:!1};a()(qo.A,Mo);qo.A.locals;const zo=e(No,function(){var t=this,e=t._self._c;return e("el-popover",{staticClass:"fc_dark",attrs:{placement:t.placement,width:"400",trigger:t.trigger_type}},[e("div",{staticClass:"fc_profile_card fluentcrm_profile_header fc_profile_pop"},[e("div",{staticClass:"fluentcrm_profile-photo"},[e("img",{attrs:{src:t.subscriber.photo}})]),t._v(" "),e("div",{staticClass:"profile-info"},[e("div",{staticClass:"profile_title"},[e("h3",[t._v(t._s(t.subscriber.full_name))]),t._v(" "),e("div",{staticClass:"profile_action"},[e("el-tag",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v(t._s(t._f("ucFirst")(t.subscriber.status)))])],1)]),t._v(" "),e("p",[t._v(t._s(t.subscriber.email)+" "),t.subscriber.user_id&&t.subscriber.user_edit_url?e("span",[t._v(" | "),e("a",{attrs:{target:"_blank",href:t.subscriber.user_edit_url}},[t._v(t._s(t.subscriber.user_id)+" "),e("span",{staticClass:"dashicons dashicons-external"})])]):t._e()]),t._v(" "),e("p",[t._v(t._s(t.$t("Added"))+" "+t._s(t._f("nsHumanDiffTime")(t.subscriber.created_at)))]),t._v(" "),e("router-link",{attrs:{to:{name:"subscriber",params:{id:t.subscriber.id}}}},[t._v("\n                "+t._s(t.$t("View Full Profile"))+"\n            ")])],1)]),t._v(" "),e("span",{class:"fc_trigger_"+t.trigger_type,attrs:{slot:"reference"},slot:"reference"},["photo"==t.display_key?[e("img",{staticClass:"fc_contact_photo",attrs:{title:t.$t("Contact ID:")+" "+t.subscriber.id,src:t.subscriber.photo}})]:"full"==t.display_key?e("div",{staticClass:"fc_photo_name"},[e("img",{staticClass:"fc_contact_photo",attrs:{title:t.$t("Contact ID:")+" "+t.subscriber.id,src:t.subscriber.photo}}),t._v(" "),e("span",[t._v(t._s(t.subscriber.full_name))])]):[t._v("\n             "+t._s(t.subscriber[t.display_key])+"\n        ")]],2)])},[],!1,null,null,null).exports;const Ro=e({name:"individualProgress",props:["sequences","funnel_subscriber","funnel"],computed:{keyedMetrics:function(){return Gs()(this.funnel_subscriber.metrics,"sequence_id")},timelines:function(){var t=this,e="Entrance ("+this.funnel.title+")";"pending"===this.funnel_subscriber.status?e+=this.$t("_In_Wfdoc"):"waiting"===this.funnel_subscriber.status&&(e+=this.$t("_In_Wfna"));var i=[{content:e,timestamp:this.nsHumanDiffTime(this.funnel_subscriber.created_at),size:"large",type:"primary",icon:"el-icon-more"}],n=!1;return this.each(this.sequences,function(e,s){var a=t.keyedMetrics[e.id]||{},o=e.title;"pending"===o?o+=t.$t("_In_Wfdc"):"waiting"===o&&(o+=t.$t("_In_Wfna")),"conditional"==e.type&&(n=e);var r="";if(e.condition_type){r="fc_path_"+e.condition_type,n&&(r="fc_"+n.action_name+" "+r);var l=t.$t("Condition:")+" "+e.condition_type;if("funnel_ab_testing"==n.action_name){var c="yes"==e.condition_type?t.$t("B"):t.$t("A");l=t.$t("Path: ")+c,r+="_"+c}o+=" ( "+l+" )"}a.status||(r+=" fc_timeline_empty"),i.push({content:o,status:a.status,notes:a.notes,timestamp:t.nsHumanDiffTime(a.created_at),color:t.getTimelineColor(a),wrapper_class:r})}),i}},methods:{getTimelineColor:function(t){return t.status&&"completed"===t.status?"#0bbd87":""}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_individual_progress"},[e("el-timeline",t._l(t.timelines,function(i,n){return e("el-timeline-item",{key:n,class:i.wrapper_class,attrs:{icon:i.icon,type:i.type,color:i.color,size:i.size,timestamp:i.timestamp}},[t._v("\n            "+t._s(i.content)+"\n                "),[i.notes?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:i.notes,placement:"top-start"}},[e("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(t._s(i.status))])],1):i.status?e("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(t._s(i.status))]):t._e()]],2)}),1)],1)},[],!1,null,null,null).exports;const Bo=e({name:"funnel-reporting-bar",props:["funnel_id","stats"],components:{GrowthChart:{extends:window.VueChartJs.Bar,mixins:[window.VueChartJs.mixins.reactiveProp],props:["stats","maxCumulativeValue"],data:function(){return{options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{id:"byDate",type:"linear",position:"left",gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,userCallback:function(t,e,i){if(Math.floor(t)===t)return t}}},{id:"byCumulative",type:"linear",position:"right",gridLines:{drawOnChartArea:!0},ticks:{beginAtZero:!0,userCallback:function(t,e,i){if(Math.floor(t)===t)return t}}}],xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,autoSkip:!1,maxTicksLimit:100}}]},drawBorder:!1,layout:{padding:{left:0,right:0,top:0,bottom:20}}}}},methods:{},mounted:function(){this.renderChart(this.chartData,this.options)}}},data:function(){return{fetching:!0,chartData:{},maxCumulativeValue:0}},computed:{},methods:{setupChartItems:function(){var t=[],e={label:this.$t("Contacts"),yAxisID:"byDate",backgroundColor:"rgba(81, 52, 178, 0.5)",borderColor:"#b175eb",data:[],fill:!0,gridLines:{display:!1}},i={label:this.$t("Line"),backgroundColor:"rgba(55, 162, 235, 0.1)",borderColor:"#37a2eb",data:[],yAxisID:"byCumulative",type:"line"};e.backgroundColor=this.getBackgroundColors(this.stats.metrics.length);var n=0;this.each(this.stats.metrics,function(s,a){e.data.push(s.count);var o=[s.label,s.percent+"%"];s.revenues&&o.push("Revenue: "+s.revenues.join(" & ")),t.push(o),i.data.push(s.count),s.count>n&&(n=s.count),"benchmark"===s.type&&(e.backgroundColor[a]="red")}),this.maxCumulativeValue=n+10,this.chartData={labels:t,datasets:[e,i]},this.fetching=!1},getBackgroundColors:function(t){return["#255A65","#22666C","#227372","#258077","#2D8C79","#3A997A","#4BA579","#5EB177","#73BD73","#8AC870","#A4D36C","#BFDC68","#DBE566","#544b66","#4f30c6","#190b1f","#6f23a7","#2d2134","#483ba6","#0e0d2c","#7a2d88","#181837","#2d187b","#2e2d4e","#491963","#1e052c","#3d3e8a","#2d163c","#644378","#210a50","#3f2c5b","#19164b","#461748"].slice(0,t)}},mounted:function(){this.setupChartItems()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticStyle:{"min-height":"400px"}},[e("growth-chart",{attrs:{maxCumulativeValue:t.maxCumulativeValue,"chart-data":t.chartData}})],1)},[],!1,null,null,null).exports;const Vo={name:"FunnelTextReport",props:["stats","funnel"],components:{ReportWidget:Do},data:function(){return{colors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}]}},methods:{format:function(t){return function(){return"".concat(t,"%")}}},computed:{lastItem:function(){return!!this.stats.metrics.length&&this.stats.metrics[this.stats.metrics.length-1]}},mounted:function(){}};var Uo=i(4693),Ho={insert:"head",singleton:!1};a()(Uo.A,Ho);Uo.A.locals;const Go={name:"FunnelSubscribers",props:["funnel_id"],components:{Pagination:m,ContactCard:zo,IndividualProgress:Ro,FunnelChart:Bo,FunnelTextReport:e(Vo,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_individual_progress"},[e("el-row",{attrs:{gutter:20}},[t._l(t.stats.metrics,function(i,n){return e("el-col",{key:n,staticClass:"fc_progress_card",attrs:{md:6,xs:24,lg:6,sm:12}},[e("div",{staticClass:"fc_progress_item",class:"fc_sequence_type_"+i.type},[e("el-progress",{attrs:{type:"circle",percentage:i.percent>100?100:i.percent,format:t.format(i.percent_text),color:t.colors}}),t._v(" "),e("h3",[t._v(t._s(i.label))]),t._v(" "),e("div",{staticClass:"stats_badges"},[e("report-widget",{attrs:{stat:i}})],1)],1)])}),t._v(" "),t.lastItem?e("el-col",{staticClass:"fc_progress_card",attrs:{md:6,xs:24,lg:6,sm:12}},[e("div",{staticClass:"fc_progress_item fc_sequence_type_result"},[e("el-progress",{attrs:{type:"circle",percentage:100,status:"success"}}),t._v(" "),e("h3",[t._v(t._s(t.$t("Overall Conversion Rate"))+": "+t._s(t.lastItem.percent)+"%")]),t._v(" "),e("div",{staticClass:"stats_badges"},[e("span",[t._v(t._s(t.$t("(y)")))])])],1)]):t._e()],2)],1)},[],!1,null,null,null).exports,Confirm:d,FunnelEmails:e({name:"FunnelEmails",props:["funnel_id"],components:{CampaignEmails:Oe,LinkMetrics:De},data:function(){return{email_sequences:[],fetching:!1,show_email_report:!1,show_email_report_id:!1,link_clicks_modal:!1,link_click_id:!1}},methods:{fetchEmailSequences:function(){var t=this;this.fetching=!0,this.$get("funnels/".concat(this.funnel_id,"/email_reports")).then(function(e){t.email_sequences=e.email_sequences}).catch(function(e){t.handleError(e)}).finally(function(){t.fetching=!1})},getPercent:function(t,e){return e&&t?parseFloat(t/e*100).toFixed(2)+"%":"--"},showEmailReport:function(t){this.show_email_report_id=t,this.show_email_report=!0},showLinkReport:function(t){this.link_click_id=t,this.link_clicks_modal=!0}},mounted:function(){this.fetchEmailSequences()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticClass:"fc_email_reports"},[e("div",{staticClass:"campaigns-table"},[t.email_sequences.length?e("div",{staticClass:"fluentcrm_title_cards"},t._l(t.email_sequences,function(i){return e("div",{key:i.id,staticClass:"fluentcrm_title_card"},[e("el-row",{staticClass:"d-flex items-center justify-between",attrs:{gutter:20}},[e("el-col",{attrs:{sm:24,md:12}},[e("div",{staticClass:"fluentcrm_card_desc"},[e("div",{staticClass:"fluentcrm_card_title",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.showEmailReport(i.campaign.id)}}},[t._v("\n                                "+t._s(i.title)+" ( "+t._s(i.campaign.subject)+" )\n                            ")]),t._v(" "),e("div",{staticClass:"fluentcrm_card_actions fluentcrm_card_actions_hidden"},[e("el-button",{attrs:{icon:"el-icon-data-analysis",type:"text",size:"mini"},on:{click:function(e){return t.showEmailReport(i.campaign.id)}}},[t._v(t._s(t.$t("Show Individual Emails")))])],1)])]),t._v(" "),e("el-col",{attrs:{sm:24,md:12}},[e("div",{staticClass:"fluentcrm_card_stats"},[e("ul",{staticClass:"fluentcrm_inline_stats"},[e("li",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.showEmailReport(i.campaign.id)}}},[e("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(i.campaign.stats.sent||"--"))]),t._v(" "),e("p",[t._v(t._s(t.$t("Sent")))])]),t._v(" "),e("li",{attrs:{title:i.campaign.stats.views}},[e("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.getPercent(i.campaign.stats.views,i.campaign.stats.sent)))]),t._v(" "),e("p",[t._v(t._s(t.$t("Opened")))])]),t._v(" "),e("li",{staticStyle:{cursor:"pointer"},attrs:{title:i.campaign.stats.clicks},on:{click:function(e){return t.showLinkReport(i.campaign.id)}}},[e("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.getPercent(i.campaign.stats.clicks,i.campaign.stats.sent)))]),t._v(" "),e("p",[t._v(t._s(t.$t("Clicked")))])]),t._v(" "),e("li",{attrs:{title:i.campaign.stats.unsubscribers}},[e("span",{staticClass:"fluentcrm_digit"},[t._v("\n                                        "+t._s(t.getPercent(i.campaign.stats.unsubscribers,i.campaign.stats.sent))+"\n                                    ")]),t._v(" "),e("p",[t._v(t._s(t.$t("Unsubscribed")))])]),t._v(" "),i.campaign.stats.revenue?e("li",[e("span",{staticClass:"fluentcrm_digit"},[t._v("\n                                        "+t._s(i.campaign.stats.revenue.total)+"\n                                    ")]),t._v(" "),e("p",[t._v(t._s(i.campaign.stats.revenue.label))])]):t._e()])])])],1)],1)}),0):e("h3",[t._v(t._s(t.$t("Sorry, No emails found in this automation")))])]),t._v(" "),e("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.$t("View Campaign Emails"),width:"60%","append-to-body":!0,visible:t.show_email_report},on:{closed:function(e){t.show_email_report_id=""},"update:visible":function(e){t.show_email_report=e}}},[t.show_email_report_id?e("campaign-emails",{attrs:{campaign_id:t.show_email_report_id}}):t._e()],1),t._v(" "),e("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.$t("Link Metrics"),width:"60%","append-to-body":!0,visible:t.link_clicks_modal},on:{closed:function(e){t.link_click_id=""},"update:visible":function(e){t.link_clicks_modal=e}}},[t.link_click_id?e("link-metrics",{attrs:{campaign_id:t.link_click_id,hide_title:!0}}):t._e()],1)],1)},[],!1,null,null,null).exports,SyncNewSteps:e({name:"SyncNewSteps",components:{GenericPromo:Te},props:["funnel_id"],data:function(){return{schedule_at:"",syncableCount:0,loading:!1,processing:!1}},methods:{getCount:function(){var t=this;this.loading=!0,this.$get("funnels/".concat(this.funnel_id,"/syncable-counts")).then(function(e){t.syncableCount=e.syncable_count}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},syncSteps:function(){var t=this;this.has_campaign_pro?(this.processing=!0,this.$post("funnels/".concat(this.funnel_id,"/sync-new-steps")).then(function(e){t.$notify.success(t.$t("Automation_Sync_Note_6")),t.syncableCount=0,t.$emit("reload")}).catch(function(e){t.handleError(e)}).finally(function(){t.processing=!1})):this.$notify.error(this.$t("Automation_Sync_Note_5"))}},mounted:function(){this.getCount()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("p",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.$t("Automation_Sync_Note_1")))]),t._v(" "),t.syncableCount?e("div",[e("h3",[t._v("There has around "+t._s(t.syncableCount)+" contacts that can be resumed to your newly added automation steps")]),t._v(" "),t.has_campaign_pro?[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.processing,expression:"processing"}],attrs:{disabled:t.processing,type:"success",siz:"small"},on:{click:t.syncSteps}},[t._v(t._s(t.$t("Automation_Sync_Note_2")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Automation_Sync_Note_2")))])]:[e("generic-promo")]],2):t.loading?e("div",[e("h3",[t._v(t._s(t.$t("Loading.....")))])]):e("div",[e("h3",[t._v(t._s(t.$t("Automation_Sync_Note_4")))])])])},[],!1,null,null,null).exports},data:function(){return{funnel:{},subscribers:[],loading:!1,pagination:{total:0,per_page:10,current_page:1},sequences:[],stats:{metrics:[],total_revenue:0,revenue_currency:"USD"},visualization_type:"chart",search:"",deleting:!1,updating:!1,selectedSubscribers:[],selected_status:"",selected_sequence:"",funnel_statuses:{active:this.$t("Active"),completed:this.$t("Completed"),cancelled:this.$t("Cancelled"),pending:this.$t("Pending")},loading_first:!0,syncSteps:!1}},methods:{fetchSubscribers:function(){var t=this;this.loading=!0;var e=["funnel","sequences"];this.loading_first||(e=[]),this.$get("funnels/".concat(this.funnel_id,"/subscribers"),{per_page:this.pagination.per_page,page:this.pagination.current_page,with:e,search:this.search,status:this.selected_status,sequence_id:this.selected_sequence}).then(function(e){t.subscribers=e.funnel_subscribers.data,t.pagination.total=e.funnel_subscribers.total,t.loading_first&&(t.funnel=e.funnel,t.sequences=e.sequences,t.loading_first=!1)}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},fetchReport:function(){var t=this;this.$get("funnels/".concat(this.funnel_id,"/report")).then(function(e){t.stats=e.stats}).catch(function(e){t.handleError(e)}).finally(function(){})},rowStatusClass:function(t){return"fc_table_row_"+t.row.status},removeFromFunnel:function(t){var e=this;this.deleting=!0,this.$del("funnels/".concat(this.funnel_id,"/subscribers"),{subscriber_ids:[t]}).then(function(t){e.$notify.success(t.message),e.fetchSubscribers()}).catch(function(t){e.handleError(t)}).finally(function(){e.deleting=!1})},bulkRemove:function(){var t=this;if(!this.selectedSubscribers.length)return this.$notify.error(this.$t("Please select subscribers first")),!1;this.deleting=!0,this.$del("funnels/".concat(this.funnel_id,"/subscribers"),{subscriber_ids:this.selectedSubscribers}).then(function(e){t.$notify.success(e.message),t.selectedSubscribers=[],t.fetchSubscribers()}).catch(function(e){t.handleError(e)}).finally(function(){t.deleting=!1})},changeFunnelSubscriptionStatus:function(t,e){var i=this;this.updating=!0,this.$put("funnels/".concat(this.funnel_id,"/subscribers/").concat(t,"/status"),{status:e}).then(function(t){i.$notify.success(t.message),i.fetchSubscribers()}).catch(function(t){i.handleError(t)}).finally(function(){i.updating=!1})},onSelection:function(t){var e=[];this.each(t,function(t){e.push(t.subscriber_id)}),this.selectedSubscribers=e}},mounted:function(){this.fetchSubscribers(),this.fetchReport(),this.changeTitle(this.$t("Funnel Report"))}};var Wo=i(9870),Ko={insert:"head",singleton:!1};a()(Wo.A,Ko);Wo.A.locals;const Jo=e(Go,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_settings_wrapper"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"funnels"}}},[t._v("\n                    "+t._s(t.$t("Automation Funnels"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",{attrs:{to:{name:"edit_funnel",params:{funnel_id:t.funnel_id}}}},[e("i",{staticClass:"el-icon-edit"}),t._v("\n                    "+t._s(t.funnel.title)+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.$t("Subscribers"))+"\n                ")])],1)],1),t._v(" "),e("div",{staticClass:"fluentcrm-actions"},[e("el-tooltip",{staticClass:"item",attrs:{openDelay:500,effect:"dark",content:t.$t("Funnel_Step_Alert"),placement:"left"}},[e("el-button",{attrs:{type:"default",size:"small"},on:{click:function(e){t.syncSteps=!0}}},[t._v("\n                    "+t._s(t.$t("Re-apply New Steps"))+"\n                ")])],1)],1)]),t._v(" "),t.stats.metrics.length?e("div",{staticClass:"fluentcrm_body fc_chart_box",staticStyle:{padding:"20px"}},[e("div",{staticClass:"text-align-center fluentcrm_pad_b_30"},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.visualization_type,callback:function(e){t.visualization_type=e},expression:"visualization_type"}},[e("el-radio-button",{attrs:{label:"chart"}},[t._v(t._s(t.$t("Chart Report")))]),t._v(" "),e("el-radio-button",{attrs:{label:"text"}},[t._v(t._s(t.$t("Step Report")))]),t._v(" "),e("el-radio-button",{attrs:{label:"emails"}},[t._v(t._s(t.$t("Emails Analytics")))])],1)],1),t._v(" "),"chart"==t.visualization_type?e("funnel-chart",{attrs:{stats:t.stats,funnel_id:t.funnel_id}}):"text"==t.visualization_type?e("funnel-text-report",{attrs:{stats:t.stats,funnel:t.funnel}}):"emails"==t.visualization_type?e("funnel-emails",{attrs:{funnel_id:t.funnel_id}}):t._e(),t._v(" "),t.stats.total_revenue?e("h3",{staticClass:"text-align-center"},[t._v("\n            "+t._s(t.$t("Fun_Total_Rftf"))+": "+t._s(t.stats.revenue_currency)+" "+t._s(t.stats.total_revenue_formatted))]):t._e()],1):t._e(),t._v(" "),t.loading?e("div",{staticClass:"fluentcrm_body fc_chart_box",staticStyle:{position:"relative"}},[e("div",{staticClass:"fc_loading_bar"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1),t._v(" "),e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}})],1):t._e(),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body fluentcrm_automation_funnel_reports"},[e("div",{staticClass:"fluentcrm_title_cards"},[e("div",{staticClass:"fluentcrm_inner_header"},[e("h3",{staticClass:"fluentcrm_inner_title"},[t._v(t._s(t.$t("Individual Reporting")))]),t._v(" "),e("div",{staticClass:"fluentcrm_inner_actions d-flex"},[e("div",{staticClass:"fluentcrm_inner_action",staticStyle:{"margin-right":"10px"}},[t._v("\n                        "+t._s(t.$t("Sequence"))+"\n                        "),e("el-select",{staticStyle:{"max-width":"120px"},attrs:{clearable:"",title:t.$t("Sequence"),placeholder:t.$t("All Sequences"),size:"mini"},on:{change:function(e){return t.fetchSubscribers()}},model:{value:t.selected_sequence,callback:function(e){t.selected_sequence=e},expression:"selected_sequence"}},t._l(t.sequences,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1)],1),t._v(" "),e("div",{staticClass:"fluentcrm_inner_action",staticStyle:{"margin-right":"10px"}},[t._v("\n                        "+t._s(t.$t("Status"))+"\n                        "),e("el-select",{staticStyle:{"max-width":"120px"},attrs:{title:t.$t("Status"),placeholder:t.$t("Status"),size:"mini"},on:{change:function(e){return t.fetchSubscribers()}},model:{value:t.selected_status,callback:function(e){t.selected_status=e},expression:"selected_status"}},[e("el-option",{attrs:{value:"",label:"All"}}),t._v(" "),t._l(t.funnel_statuses,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t}})})],2)],1),t._v(" "),e("div",{staticClass:"fluentcrm_inner_action"},[e("el-input",{staticClass:"input-with-select",staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:t.$t("Search")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchSubscribers.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.fetchSubscribers()}},slot:"append"})],1)],1)])]),t._v(" "),e("el-table",{attrs:{"empty-text":t.$t("No Data Available"),border:"",stripe:"",data:t.subscribers,"row-class-name":t.rowStatusClass},on:{"selection-change":t.onSelection}},[e("el-table-column",{attrs:{type:"selection"}}),t._v(" "),e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("individual-progress",{attrs:{funnel:t.funnel,funnel_subscriber:i.row,sequences:t.sequences}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"",width:"64"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("contact-card",{attrs:{trigger_type:"click",display_key:"photo",subscriber:t.row.subscriber}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Contact")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.subscriber?e("span",[t._v(t._s(i.row.subscriber.full_name||i.row.subscriber.email))]):e("span",[t._v(t._s(t.$t("No Subscriber Found")))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.status))]),t._v(" "),e("el-popover",{attrs:{placement:"top-start","min-width":"200",trigger:"hover",content:t.$t("Current status of the subscriber in the funnel")}},[e("i",{staticClass:"el-icon el-icon-info",attrs:{slot:"reference"},slot:"reference"})])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Latest Action")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.last_sequence?e("span",[t._v(t._s(i.row.last_sequence.title))]):"pending"==i.row.status?e("span",[t._v("\n                            "+t._s(t.$t("Fun_Waiting_fdoc"))+"\n                        ")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Next Step")},scopedSlots:t._u([{key:"default",fn:function(i){return["completed"!=i.row.status?[i.row.next_sequence_item?e("span",[t._v(t._s(i.row.next_sequence_item.title))]):t._e(),t._v(" "),"active"==i.row.status?e("span",{attrs:{title:i.row.next_execution_time}},[t._v("\n                                - ("+t._s(t._f("nsHumanDiffTime")(i.row.next_execution_time))+")\n                            ")]):t._e()]:e("span",[e("i",{staticClass:"el-icon el-icon-success",staticStyle:{"font-size":"22px"},attrs:{title:"Completed"}})])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"150",label:t.$t("Last Executed At")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.last_executed_time}},[t._v("\n                            "+t._s(t._f("nsHumanDiffTime")(i.row.last_executed_time))+"\n                        ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"150",label:t.$t("Created At")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.created_at}},[t._v("\n                            "+t._s(t._f("nsHumanDiffTime")(i.row.created_at))+"\n                        ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"150",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("confirm",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],on:{yes:function(e){return t.removeFromFunnel(i.row.subscriber_id)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1),t._v(" "),"cancelled"==i.row.status?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"info",size:"mini"},on:{click:function(e){return t.changeFunnelSubscriptionStatus(i.row.subscriber_id,"active")}}},[t._v("\n                            "+t._s(t.$t("Resume"))+"\n                        ")]):t._e(),t._v(" "),"active"==i.row.status?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"info",size:"mini"},on:{click:function(e){return t.changeFunnelSubscriptionStatus(i.row.subscriber_id,"cancelled")}}},[t._v("\n                            "+t._s(t.$t("Cancel"))+"\n                        ")]):t._e(),t._v(" "),"fcrm_manual_attach"==i.row.source_trigger_name?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("ProfileAutomations.Contact_Added_manually_to_Automation"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})]):t._e()]}}])})],1),t._v(" "),e("el-row",{attrs:{guter:20}},[e("el-col",{staticStyle:{"padding-top":"10px"},attrs:{xs:24,md:12}},[t.selectedSubscribers.length?e("confirm",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],on:{yes:function(e){return t.bulkRemove()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[t._v(t._s(t.$t("Delete Selected Contacts"))+" ("+t._s(t.selectedSubscribers.length)+")\n                        ")])],1):e("div",[t._v("")])],1),t._v(" "),e("el-col",{attrs:{xs:24,md:12}},[e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetchSubscribers}})],1)],1)],1)]),t._v(" "),e("el-drawer",{staticClass:"fc_company_info_drawer",attrs:{"append-to-body":!0,size:t.globalDrawerSize,title:t.$t("Sync_New_Steps"),visible:t.syncSteps},on:{"update:visible":function(e){t.syncSteps=e}}},[e("div",{staticStyle:{padding:"10px 20px"}},[t.syncSteps?e("sync-new-steps",{attrs:{funnel_id:t.funnel_id},on:{reload:function(e){t.fetchReport(),t.fetchSubscribers(),t.syncSteps=!1}}}):t._e()],1)])],1)},[],!1,null,null,null).exports;const Yo=e({name:"ImportFunnel",components:{FieldEditor:Ao,FormField:So},props:["options"],data:function(){return{sequences:[],funnel:{},blocks:{},block_fields:{},step:"upload",sequence_step:0,importing:!1,inline_errors:!1}},computed:{url:function(){var t=window.ajaxurl;return t+=(t.match(/\?/)?"&":"?")+jQuery.param({action:"fluentcrm_import_funnel"}),t},current_block:function(){return this.sequences[this.sequence_step]||!1},current_block_fields:function(){if(!this.current_block)return{};var t=this.current_block.action_name;return this.block_fields[t]}},methods:{success:function(t){this.sequences=t.funnel_sequences,this.funnel=t.funnel,this.blocks=t.blocks,this.block_fields=t.block_fields,this.step="root_editor"},error:function(t){var e=JSON.parse(t.message);this.$notify.error(e.message),e.requires&&(this.inline_errors=e.requires)},showSequenceEditor:function(t){jQuery("html, body").animate({scrollTop:0},"slow"),this.sequence_step=t,this.step="sequence_editor"},completeImport:function(){var t=this;this.importing=!0,this.$post("funnels/import",{funnel:this.funnel,sequences:JSON.stringify(this.sequences)}).then(function(e){t.$notify.success(e.message),t.$router.push({name:"edit_funnel",params:{funnel_id:e.funnel.id}})}).catch(function(e){t.handleError(e)}).finally(function(){t.importing=!1})}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_settings_wrapper fc_sequence_import"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title",staticStyle:{"padding-bottom":"10px"}},[e("el-breadcrumb",[e("el-breadcrumb-item",{attrs:{to:{name:"funnels"}}},[t._v(t._s(t.$t("Automation Funnels")))]),t._v(" "),e("el-breadcrumb-item",[t._v(t._s(t.$t("Import Automation Funnel")))])],1)],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.importing,expression:"importing"}],staticClass:"fluentcrm_body fluentcrm_title_cards fc_narrow_box fc_white_inverse",staticStyle:{"margin-top":"30px","max-width":"1160px"}},[t.has_campaign_pro?["upload"==t.step?e("div",{staticClass:"fc_funnel_upload text-align-center"},[e("h3",[t._v(t._s(t.$t("import_your_exported_automation_json_file")))]),t._v(" "),e("el-upload",{ref:"uploader",attrs:{drag:"",limit:1,action:t.url,multiple:!1,"on-error":t.error,"on-success":t.success}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n                        "+t._s(t.$t("Drop JSON file here or"))+" "),e("em",[t._v(t._s(t.$t("click to upload")))])])]),t._v(" "),t.inline_errors?e("pre",[t._v(t._s(t.inline_errors))]):t._e()],1):"root_editor"==t.step?e("div",{staticClass:"fc_funnel_editor"},[e("field-editor",{key:"is_editing_root",attrs:{title_badge:t.$t("Trigger"),show_controls:!1,options:t.options,data:t.funnel.settings,settings:t.funnel.settingsFields},scopedSlots:t._u([{key:"after_header",fn:function(){return[e("el-form-item",{attrs:{label:t.$t("Funnel Name")}},[e("el-input",{attrs:{placeholder:t.$t("Funnel Name")},model:{value:t.funnel.title,callback:function(e){t.$set(t.funnel,"title",e)},expression:"funnel.title"}})],1)]},proxy:!0}],null,!1,2596356023)}),t._v(" "),t.isEmptyValue(t.funnel.conditions)?t._e():e("el-form",{staticClass:"fc_funnel_conditions fc_block_white",attrs:{"label-position":"top",data:t.funnel.conditions}},[e("h3",[t._v(t._s(t.$t("Conditions")))]),t._v(" "),t._l(t.funnel.conditionFields,function(i,n){return e("div",{key:n},[e("form-field",{key:n,attrs:{field:i,options:t.options},model:{value:t.funnel.conditions[n],callback:function(e){t.$set(t.funnel.conditions,n,e)},expression:"funnel.conditions[conditionKey]"}})],1)})],2),t._v(" "),e("div",{staticClass:"fc_sequence_navigation"},[e("el-button",{attrs:{size:"large",type:"success"},on:{click:function(e){return t.showSequenceEditor(0)}}},[t._v("\n                        "+t._s(t.$t("Next"))+"\n                    ")])],1)],1):"sequence_editor"==t.step&&t.current_block?e("div",[e("field-editor",{key:t.sequence_step+"_"+t.current_block.action_name,attrs:{title_badge:t.current_block.type,show_controls:!1,data:t.current_block.settings,options:t.options,settings:t.current_block_fields},scopedSlots:t._u([{key:"after_header",fn:function(){return[e("el-form-item",{attrs:{label:t.$t("Internal Label")}},[e("el-input",{attrs:{placeholder:t.$t("Internal Label")},model:{value:t.current_block.title,callback:function(e){t.$set(t.current_block,"title",e)},expression:"current_block.title"}})],1)]},proxy:!0}],null,!1,3307252594)}),t._v(" "),e("div",{staticClass:"fc_sequence_navigation"},[t.sequence_step>0?e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showSequenceEditor(t.sequence_step-1)}}},[t._v("\n                        "+t._s(t.$t("Go Back"))+"\n                    ")]):t._e(),t._v(" "),t.sequence_step+1<t.sequences.length?e("el-button",{attrs:{size:"large",type:"success"},on:{click:function(e){return t.showSequenceEditor(t.sequence_step+1)}}},[t._v("\n                        "+t._s(t.$t("Next"))+" "+t._s(t.sequence_step+1)+" / "+t._s(t.sequences.length)+"\n                    ")]):e("el-button",{attrs:{size:"large",type:"primary"},on:{click:function(e){return t.completeImport()}}},[t._v("\n                        "+t._s(t.$t("Complete Import"))+"\n                    ")])],1)],1):t._e()]:e("div",{staticClass:"text-align-center"},[e("h2",[t._v(t._s(t.$t("Import Funnel From JSON File")))]),t._v(" "),e("p",[t._v("\n                "+t._s(t.$t("importing_funnel_from_json_file"))+"\n            ")]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v(t._s(t.$t("Upgrade_To_Pro")))]),t._v(" "),e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                "+t._s(t.$t("Get FluentCRM Pro"))+"\n            ")])])],2)])},[],!1,null,null,null).exports;const Qo=e({name:"FunnelSubscribers",props:[],components:{Pagination:m,ContactCard:zo,IndividualProgress:Ro,Confirm:d},data:function(){return{funnel:{},subscribers:[],loading:!1,pagination:{total:0,per_page:10,current_page:1},sequences:[],stats:{metrics:[],total_revenue:0,revenue_currency:"USD"},visualization_type:"chart",search:"",deleting:!1,updating:!1,selectedIds:[],selected_status:"",selected_sequence:"",funnel_statuses:{active:this.$t("Active"),completed:this.$t("Completed"),cancelled:this.$t("Cancelled"),pending:this.$t("Pending")},loading_first:!0,syncSteps:!1}},methods:{fetchSubscribers:function(){var t=this;this.loading=!0;var e=["funnel","sequences"];this.loading_first||(e=[]),this.$get("funnels/all-activities",{per_page:this.pagination.per_page,page:this.pagination.current_page,with:e,search:this.search,status:this.selected_status,sequence_id:this.selected_sequence}).then(function(e){t.subscribers=e.activities.data,t.pagination.total=e.activities.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1,t.loading_first=!1})},rowStatusClass:function(t){return"fc_table_row_"+t.row.status},removeFromFunnel:function(t){var e=this;this.deleting=!0,this.$del("funnels/".concat(t.funnel_id,"/subscribers"),{subscriber_ids:[t.subscriber_id]}).then(function(t){e.$notify.success(t.message),e.fetchSubscribers()}).catch(function(t){e.handleError(t)}).finally(function(){e.deleting=!1})},bulkRemove:function(){var t=this;if(!this.selectedIds.length)return this.$notify.error(this.$t("Please select subscribers first")),!1;this.deleting=!0,this.$post("funnels/remove-bulk-subscribers",{funnel_subscriber_ids:this.selectedIds}).then(function(e){t.$notify.success(e.message),t.selectedIds=[],t.fetchSubscribers()}).catch(function(e){t.handleError(e)}).finally(function(){t.deleting=!1})},changeFunnelSubscriptionStatus:function(t,e){var i=this;this.updating=!0,this.$put("funnels/".concat(t.funnel_id,"/subscribers/").concat(t.subscriber_id,"/status"),{status:e}).then(function(t){i.$notify.success(t.message),i.fetchSubscribers()}).catch(function(t){i.handleError(t)}).finally(function(){i.updating=!1})},onSelection:function(t){var e=[];this.each(t,function(t){e.push(t.id)}),this.selectedIds=e}},mounted:function(){this.fetchSubscribers(),this.changeTitle(this.$t("All Automation Activities"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_settings_wrapper"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"funnels"}}},[t._v("\n                    "+t._s(t.$t("Automation Funnels"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.$t("All Activities"))+"\n                ")])],1)],1),t._v(" "),e("div",{staticClass:"fluentcrm-actions"},[e("div",{staticClass:"fluentcrm_inner_action",staticStyle:{"margin-right":"10px"}},[t._v("\n                "+t._s(t.$t("Status"))+"\n                "),e("el-select",{staticStyle:{"max-width":"120px"},attrs:{title:t.$t("Status"),placeholder:t.$t("Status"),size:"mini"},on:{change:function(e){return t.fetchSubscribers()}},model:{value:t.selected_status,callback:function(e){t.selected_status=e},expression:"selected_status"}},[e("el-option",{attrs:{value:"",label:"All"}}),t._v(" "),t._l(t.funnel_statuses,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t}})})],2)],1)])]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body fluentcrm_automation_funnel_reports",staticStyle:{"padding-bottom":"30px"}},[e("el-table",{attrs:{"empty-text":t.$t("No Data Available"),border:"",stripe:"",data:t.subscribers,"row-class-name":t.rowStatusClass},on:{"selection-change":t.onSelection}},[e("el-table-column",{attrs:{type:"selection"}}),t._v(" "),e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("individual-progress",{attrs:{funnel:t.row.funnel,funnel_subscriber:t.row,sequences:t.row.funnel.actions}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Contact"),width:"260"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("contact-card",{attrs:{trigger_type:"click",display_key:"full",subscriber:t.row.subscriber}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Automation")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"edit_funnel",params:{funnel_id:i.row.funnel.id}}}},[t._v("\n                        "+t._s(i.row.funnel.title)+"\n                    ")]),t._v(" "),e("span",[t._v("("+t._s(i.row.status)+")")])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Next Step")},scopedSlots:t._u([{key:"default",fn:function(i){return["completed"!=i.row.status?[i.row.next_sequence_item?e("span",[t._v(t._s(i.row.next_sequence_item.title))]):t._e(),t._v(" "),"active"==i.row.status?e("span",{attrs:{title:i.row.next_execution_time}},[t._v("\n                                - ("+t._s(t._f("nsHumanDiffTime")(i.row.next_execution_time))+")\n                            ")]):t._e()]:e("span",[e("i",{staticClass:"el-icon el-icon-success",staticStyle:{"font-size":"22px"},attrs:{title:"Completed"}})])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"150",label:t.$t("Last Executed At")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.last_executed_time}},[t._v("\n                            "+t._s(t._f("nsHumanDiffTime")(i.row.last_executed_time))+"\n                        ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"150",label:t.$t("Created At")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.created_at}},[t._v("\n                            "+t._s(t._f("nsHumanDiffTime")(i.row.created_at))+"\n                        ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"150",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("confirm",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],on:{yes:function(e){return t.removeFromFunnel(i.row)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1),t._v(" "),"cancelled"==i.row.status?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"info",size:"mini"},on:{click:function(e){return t.changeFunnelSubscriptionStatus(i.row,"active")}}},[t._v("\n                        "+t._s(t.$t("Resume"))+"\n                    ")]):t._e(),t._v(" "),"active"==i.row.status?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"info",size:"mini"},on:{click:function(e){return t.changeFunnelSubscriptionStatus(i.row,"cancelled")}}},[t._v("\n                        "+t._s(t.$t("Cancel"))+"\n                    ")]):t._e(),t._v(" "),"fcrm_manual_attach"==i.row.source_trigger_name?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("ProfileAutomations.Contact_Added_manually_to_Automation"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})]):t._e()]}}])})],1),t._v(" "),e("el-row",{attrs:{guter:20}},[e("el-col",{staticStyle:{"padding-top":"10px"},attrs:{xs:24,md:12}},[t.selectedIds.length?e("confirm",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],on:{yes:function(e){return t.bulkRemove()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[t._v(t._s(t.$t("Delete Selected Contacts"))+" ("+t._s(t.selectedIds.length)+")\n                    ")])],1):e("div",[t._v("")])],1),t._v(" "),e("el-col",{attrs:{xs:24,md:12}},[e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetchSubscribers}})],1)],1)],1)])},[],!1,null,null,null).exports;var Zo=e({name:"EmailSequencePromo"},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_narrow_box fluentcrm_databox text-align-center"},[e("h2",{},[t._v(t._s(t.$t("Email Sequences")))]),t._v(" "),e("p",{staticClass:"text-align-center"},[t._v(t._s(t.$t("EmailSequencePromo.title")))]),t._v(" "),e("iframe",{attrs:{width:"764",height:"430",src:"https://www.youtube.com/embed/6nYOK2UzoVk",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}),t._v(" "),e("hr"),t._v(" "),e("p",[t._v(t._s(t.$t("Upgrade_To_Pro")))]),t._v(" "),e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Get FluentCRM Pro")))])])},[],!1,null,null,null);const Xo=e({name:"sequence-view",components:{EmailSequencePromo:Zo.exports},data:function(){return{}},mounted:function(){this.changeTitle(this.$t("Email Sequences"))}},function(){var t=this._self._c;return this.has_campaign_pro?t("div",{staticClass:"fc_sequence_root"},[t("router-view")],1):t("div",[t("email-sequence-promo")],1)},[],!1,null,null,null).exports;var tr=e({name:"CreateSequence",props:["dialogVisible"],data:function(){return{sequence:{title:""},errors:{title:""},saving:!1}},methods:{save:function(){var t=this;this.sequence.title?(this.errors={title:""},this.saving=!0,this.$post("sequences",this.sequence).then(function(e){t.$notify.success(e.message),t.$router.push({name:"edit-sequence",params:{id:e.sequence.id}})}).catch(function(e){var i=e.data?e.data:e;if(i.status&&403===i.status)t.notify.error(i.message);else if(i.title){var n=Object.keys(i.title);t.errors.title=i.title[n[0]]}}).finally(function(e){t.saving=!1})):this.errors.title=this.$t("Title field is required")}},computed:{isVisibile:{get:function(){return this.dialogVisible},set:function(t){this.$emit("toggleDialog",t)}}}},function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.$t("Create new email sequence"),visible:t.isVisibile,"append-to-body":!0,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(e){t.isVisibile=e}}},[e("div",[e("el-form",{attrs:{model:t.sequence,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:t.$t("Sequence Title")}},[e("el-input",{ref:"title",attrs:{placeholder:t.$t("Sequence Title")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save.apply(null,arguments)}},model:{value:t.sequence.title,callback:function(e){t.$set(t.sequence,"title",e)},expression:"sequence.title"}}),t._v(" "),e("span",{staticClass:"error"},[t._v(t._s(t.errors.title))])],1)],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{disabled:t.saving,type:"primary"},on:{click:function(e){return t.save()}}},[t._v(t._s(t.$t("Next")))])],1)])},[],!1,null,null,null);const er=e({name:"all-sequences",components:{CreateSequence:tr.exports,Confirm:d,Pagination:m,InlineDoc:b,EmailHeaderPopNav:y},data:function(){return{sequences:[],pagination:{total:0,per_page:10,current_page:1},loading:!0,dialogVisible:!1,duplicating:!1,search:"",options:{sampleCsv:null,delimiter:"comma"},order:"desc",orderBy:"id",selection:!1,selectedSequences:[],deleting:!1}},methods:{setup:function(){var t=this.$route.query;return window.fcrm_seq_sub_params&&(t=window.fcrm_seq_sub_params),this.order=t.order,this.orderBy=t.orderBy,this.search=t.search,t.page&&(this.pagination.current_page=parseInt(t.page)),t.per_page&&(this.pagination.per_page=parseInt(t.per_page)),!1},fetch:function(){var t=this;this.loading=!0;var e={per_page:this.pagination.per_page,page:this.pagination.current_page,with:["stats"],order:this.order,orderBy:this.orderBy,search:this.search},i={};Object.keys(e).forEach(function(t){void 0!==e[t]&&(i[t]=e[t])}),window.fcrm_seq_sub_params=i,i.t=Date.now(),this.$router.replace({name:"email-sequences",query:i}),delete e.t,this.$get("sequences",e).then(function(e){t.sequences=e.sequences.data,t.pagination.total=e.sequences.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},remove:function(t){var e=this;this.$del("sequences/".concat(t.id)).then(function(t){e.fetch(),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19})}).catch(function(t){e.handleError(t)})},duplicateSequence:function(t){var e=this;this.duplicating=!0,this.$post("sequences/".concat(t.id,"/duplicate")).then(function(t){e.$notify.success(t.message),e.$router.push({name:"edit-sequence",params:{id:t.sequence.id}})}).catch(function(t){e.handleError(t)}).finally(function(){e.duplicating=!0})},exportSequence:function(t){location.href=window.ajaxurl+"?"+jQuery.param({action:"fluentcrm_export_sequence",sequence_id:t.id})},handleSortable:function(t){"descending"===t.order?(this.orderBy=t.prop,this.order="desc"):(this.orderBy=t.prop,this.order="asc"),this.fetch()},getPercent:function(t,e){return e&&t?parseFloat(t/e*100).toFixed(2)+"%":"--"},onSelection:function(t){this.selection=!!t.length,this.selectedSequences=t},deleteSelected:function(){var t=this,e=[];this.each(this.selectedSequences,function(t){e.push(t.id)}),this.deleting=!0,this.$post("sequences/do-bulk-action",{sequence_ids:e}).then(function(e){t.$notify.success(e.message),t.fetch()}).catch(function(e){t.handleError(e)}).finally(function(){t.deleting=!1,t.selection=!1})}},mounted:function(){this.setup(),this.fetch(),this.changeTitle(this.$t("Email Sequences"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[e("email-header-pop-nav",{attrs:{head_title:t.$t("Email Sequences")}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.pagination.total,expression:"pagination.total"}],staticClass:"ff_small"},[t._v("("+t._s(t._f("formatMoney")(t.pagination.total))+")")])],1)]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("div",{staticClass:"fc-search-box"},[e("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),t.hasPermission("fcrm_manage_emails")?[e("el-button",{staticClass:"ml-5",attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("\n                    "+t._s(t.$t("Create New Sequence"))+"\n                ")]),t._v(" "),e("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-upload"},on:{click:function(e){return t.$router.push({name:"import_sequence"})}}},[t._v("\n                    "+t._s(t.$t("Import"))+"\n                ")])]:t._e(),t._v(" "),e("inline-doc",{attrs:{doc_id:1601}})],2)]),t._v(" "),e("div",{staticClass:"fluentcrm_body fluentcrm_pad_b_20",staticStyle:{position:"relative"}},[t.loading?e("div",{staticClass:"fc_loading_bar"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading||t.duplicating?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:7}}):t._e(),t._v(" "),t.loading||t.duplicating||!t.pagination.total?[t.loading||t.duplicating?t._e():e("div",{staticClass:"fluentcrm_hero_box"},[e("h2",[t._v(t._s(t.$t("All_Looks_lydnsasey")))]),t._v(" "),e("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"success"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("\n                    "+t._s(t.$t("All_Create_YFES"))+"\n                ")])],1)]:e("div",{staticClass:"fluentcrm_sequences_table"},[e("el-row",[e("el-col",{attrs:{md:12,sm:24}},[t.selection?e("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.deleteSelected()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],staticStyle:{margin:"8px 0 8px 10px"},attrs:{slot:"reference",icon:"el-icon-delete",size:"mini",type:"danger"},slot:"reference"},[t._v("\n                            "+t._s(t.$t("Delete Selected"))+"\n                        ")])],1):t._e(),t._v("\n                    \n                ")],1)],1),t._v(" "),e("el-table",{attrs:{stripe:"",border:"",data:t.sequences},on:{"sort-change":t.handleSortable,"selection-change":t.onSelection}},[e("el-table-column",{attrs:{type:"selection",width:45}}),t._v(" "),e("el-table-column",{attrs:{sortable:"",property:"title","min-width":250,label:t.$t("Title"),prop:"title"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"edit-sequence",params:{id:i.row.id},query:{t:(new Date).getTime()}}}},[t._v("\n                            "+t._s(i.row.title)+"\n                        ")])]}}],null,!1,3172779336)}),t._v(" "),e("el-table-column",{attrs:{width:190,label:t.$t("Emails")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.stats?e("span",[e("router-link",{attrs:{to:{name:"edit-sequence",params:{id:i.row.id},query:{t:(new Date).getTime()}}}},[t._v("\n                                "+t._s(t.$_n("%d Email","%d Emails",i.row.stats.emails))+"\n                            ")]),t._v(" "),i.row.stats.revenue&&i.row.stats.revenue.currency?e("span",{attrs:{title:t.$t("Revenue From Sequence Emails")}},[e("span",{staticClass:"el-icon el-icon-money"}),t._v(" "+t._s(i.row.stats.revenue.currency)+" "+t._s(i.row.stats.revenue.amount))]):t._e()],1):e("span",[t._v("--")])]}}],null,!1,2783157365)}),t._v(" "),e("el-table-column",{attrs:{width:170,sortable:"",property:"recipients_count",label:t.$t("Subscribers"),prop:"recipients_count"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"sequence-subscribers",params:{id:i.row.id},query:{t:(new Date).getTime()}}}},[e("span",[t._v(t._s(t.$_n("%d subscriber","%d subscribers",i.row.stats.subscribers)))])])]}}],null,!1,2033726023)}),t._v(" "),e("el-table-column",{attrs:{width:180,sortable:"",property:"created_at",label:t.$t("Created at"),prop:"created_at"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t._f("nsHumanDiffTime")(i.row.created_at)))])]}}],null,!1,1673373615)}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:t.$t("Actions"),"min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tooltip",{attrs:{effect:"dark",content:"Edit Emails",placement:"top"}},[e("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-edit"},on:{click:function(e){t.$router.push({name:"edit-sequence",params:{id:i.row.id},query:{t:(new Date).getTime()}})}}},[t._v("edit\n                            ")])],1),t._v(" "),e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link"},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{"font-weight":"bold",cursor:"pointer"}})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.duplicateSequence(i.row)}}},[e("span",{staticClass:"el-icon el-icon-copy-document"}),t._v(" "+t._s(t.$t("Duplicate"))+"\n                                ")])]),t._v(" "),e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:function(e){return t.exportSequence(i.row)}}},[e("span",{staticClass:"el-icon el-icon-download"}),t._v(" "+t._s(t.$t("Export"))+"\n                                ")])]),t._v(" "),e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("confirm",{attrs:{placement:"top-start",message:t.$t("Are you sure you want to delete this Sequence?")},on:{yes:function(e){return t.remove(i.row)}}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"el-icon el-icon-delete"}),t._v("\n                                        "+t._s(t.$t("Delete Sequence"))+"\n                                    ")])])],1)],1)],1)]}}],null,!1,4293942161)})],1),t._v(" "),e("el-row",[e("el-col",{attrs:{md:12,sm:24}},[t.selection?e("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.deleteSelected()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],staticStyle:{margin:"10px 0 0 15px"},attrs:{slot:"reference",icon:"el-icon-delete",size:"mini",type:"danger"},slot:"reference"},[t._v("\n                            "+t._s(t.$t("Delete Selected"))+"\n                        ")])],1):t._e(),t._v("\n                    \n                ")],1),t._v(" "),e("el-col",{attrs:{md:12,sm:24}},[e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)],1)],1)],2),t._v(" "),e("create-sequence",{attrs:{"dialog-visible":t.dialogVisible},on:{"update:dialogVisible":function(e){t.dialogVisible=e},"update:dialog-visible":function(e){t.dialogVisible=e},toggleDialog:function(e){t.dialogVisible=!1}}})],1)},[],!1,null,null,null).exports;const ir=e({name:"EditSequence",components:{Confirm:d,CampaignEmails:Oe,LinkMetrics:De,MailerConfig:L},props:["id"],data:function(){return{sequence:{},sequence_emails:[],loading:!1,addEmailModal:!1,showSequenceSettings:!1,savingSequence:!0,show_email_report:!1,show_email_report_id:!1,link_clicks_modal:!1,link_click_id:!1,order:"desc",orderBy:"id",duplicating:!1,show_title_input:!1,original_title:""}},methods:{showInputField:function(){var t=this;this.original_title=this.sequence.title,this.show_title_input=!0,this.$nextTick(function(){t.$refs.titleInput.focus()})},handleTitleBlur:function(){this.sequence.title!==this.original_title?this.saveSequence():this.show_title_input=!1},showEmailReport:function(t){this.show_email_report_id=t,this.show_email_report=!0},showLinkReport:function(t){this.link_click_id=t,this.link_clicks_modal=!0},fetchSequence:function(){var t=this;this.loading=!0;var e={with:["sequence_emails","email_stats"],order:this.order,orderBy:this.orderBy};this.$get("sequences/".concat(this.id),e).then(function(e){t.sequence=e.sequence,t.sequence_emails=e.sequence_emails,t.changeTitle(t.sequence.title+" - Sequence")}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},gotToSubscribers:function(){this.$router.push({name:"sequence-subscribers",params:{id:this.id},query:{t:(new Date).getTime()}})},toSequenceEmailEdit:function(t){this.$router.push({name:"edit-sequence-email",params:{sequence_id:this.sequence.id,email_id:t}})},remove:function(t){var e=this;this.$del("sequences/".concat(this.sequence.id,"/email/").concat(t.id)).then(function(t){e.fetchSequence(),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19})}).catch(function(t){e.handleError(t)})},getScheduleTiming:function(t){return t.delay&&"0"!==t.delay?"After ".concat(t.delay," ").concat(t.delay_unit," from starting point"):this.$t("Immediately")},getRelativeWaitTimes:function(t){var e=this.sequence_emails[t].delay;return 0==t?e:e-this.sequence_emails[t-1].delay},saveSequence:function(){var t=this;this.savingSequence=!0,this.$put("sequences/"+this.sequence.id,{title:this.sequence.title,settings:this.sequence.settings}).then(function(e){t.$notify.success(e.message),t.savingSequence=!1,t.show_title_input||t.fetchSequence()}).catch(function(e){t.handleError(e)}).finally(function(){t.showSequenceSettings=!1,t.show_title_input=!1})},duplicateSequence:function(t){var e=this;this.duplicating=!0,this.$post("sequences/".concat(t.id,"/email/duplicate")).then(function(t){e.$notify.success(t.message),e.fetchSequence(),e.duplicating=!1}).catch(function(t){e.handleError(t)}).finally(function(){e.duplicating=!1})},reapplySequence:function(){var t=this;this.$confirm(this.$t("Are you sure you want to re-apply new sequence emails to completed subscribers?"),this.$t("Confirm"),{confirmButtonText:this.$t("Yes"),cancelButtonText:this.$t("No"),type:"warning"}).then(function(){t.loading=!0,t.$post("sequences/"+t.sequence.id+"/reapply").then(function(e){t.$notify.success(e.message),t.fetchSequence()}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})})}},mounted:function(){this.fetchSequence(),this.changeTitle(this.$t("View Sequence"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",style:{display:"flex",alignItems:"center"},attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"email-sequences"}}},[t._v("\n                    "+t._s(t.$t("Email Sequences"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t.show_title_input?e("el-input",{ref:"titleInput",attrs:{size:"mini",placeholder:t.$t("Internal Title")},on:{blur:t.handleTitleBlur},model:{value:t.sequence.title,callback:function(e){t.$set(t.sequence,"title",e)},expression:"sequence.title"}}):e("span",{on:{click:t.showInputField}},[t._v(t._s(t.sequence.title))])],1)],1)],1),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[t.hasPermission("fcrm_manage_emails")?e("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-setting"},on:{click:function(e){t.showSequenceSettings=!0}}}):t._e(),t._v(" "),t.hasPermission("fcrm_manage_emails")?e("div",{staticClass:"text-align-center ml-5"},[e("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"primary"},on:{click:function(e){return t.toSequenceEmailEdit(0)}}},[t._v("\n                    "+t._s(t.$t("Add a Sequence Email"))+"\n                ")])],1):t._e(),t._v(" "),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.gotToSubscribers()}}},[t._v("\n                "+t._s(t.$t("View Subscribers"))+"\n            ")]),t._v(" "),t.hasPermission("fcrm_manage_emails")?e("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.reapplySequence()}}},[t._v("\n                "+t._s(t.$t("Re-apply Sequence"))+"\n            ")]):t._e()],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_body"},[e("div",{staticClass:"fluentcrm_body",staticStyle:{position:"relative"}},[t.loading?e("div",{staticClass:"fc_loading_bar"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading||t.duplicating?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:7}}):t._e(),t._v(" "),t.sequence_emails.length||t.loading?e("div",[e("div",{staticClass:"fluentcrm_title_cards"},[t._l(t.sequence_emails,function(i,n){return e("div",{key:i.id,staticClass:"fc_sequence_section"},[e("div",{staticClass:"fluentcrm_title_card"},[e("el-row",{staticClass:"d-flex items-center fluentcrm_title_card_row",attrs:{gutter:20}},[e("el-col",{attrs:{sm:24,md:12}},[e("span",{staticClass:"fc_seq_number"},[t._v(t._s(n+1))]),t._v(" "),e("div",{staticClass:"fluentcrm_card_desc"},[e("div",{staticClass:"fluentcrm_card_sub",attrs:{title:"From beginning date"}},[t._v("\n                                            "+t._s(t.getScheduleTiming(i.settings.timings))+"\n                                        ")]),t._v(" "),e("div",{staticClass:"fluentcrm_card_title"},[e("router-link",{attrs:{to:{name:"edit-sequence-email",params:{sequence_id:i.parent_id,email_id:i.id},query:{t:(new Date).getTime()}}}},[t._v("\n                                                "+t._s(i.title)+"\n                                            ")])],1),t._v(" "),e("div",{staticClass:"fluentcrm_card_actions fluentcrm_card_actions_hidden"},[e("router-link",{attrs:{to:{name:"edit-sequence-email",params:{sequence_id:i.parent_id,email_id:i.id},query:{t:(new Date).getTime()}}}},[e("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"}},[t._v("\n                                                    "+t._s(t.$t("edit"))+"\n                                                ")])],1),t._v(" "),e("el-button",{staticClass:"fluentcrm-report-text-btn",attrs:{icon:"el-icon-data-analysis",type:"text",size:"mini"},on:{click:function(e){return t.showEmailReport(i.id)}}},[t._v(t._s(t.$t("Show Report")))]),t._v(" "),e("el-button",{staticClass:"fluentcrm-duplicate-campaign",attrs:{size:"mini",type:"text",icon:"el-icon-document-copy"},on:{click:function(e){return t.duplicateSequence(i)}}},[t._v(t._s(t.$t("Duplicate"))+"\n                                            ")]),t._v(" "),e("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.remove(i)}}},[e("el-button",{staticClass:"fluentcrm-delete-campaign",attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[t._v("\n                                                    "+t._s(t.$t("Delete"))+"\n                                                ")])],1)],1)])]),t._v(" "),e("el-col",{attrs:{sm:24,md:12}},[e("div",{staticClass:"fluentcrm_card_stats"},[e("ul",{staticClass:"fluentcrm_inline_stats"},[e("li",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.showEmailReport(i.id)}}},[e("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(i.stats.sent||"--"))]),t._v(" "),e("p",[t._v(t._s(t.$t("Sent")))])]),t._v(" "),e("li",[e("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.percent(i.stats.views,i.stats.sent)))]),t._v(" "),e("p",[t._v(t._s(t.$t("Opened")))])]),t._v(" "),e("li",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.showLinkReport(i.id)}}},[e("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.percent(i.stats.clicks,i.stats.sent)))]),t._v(" "),e("p",[t._v(t._s(t.$t("Clicked")))])]),t._v(" "),e("li",[e("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.percent(i.stats.unsubscribers,i.stats.sent)))]),t._v(" "),e("p",[t._v(t._s(t.$t("Unsubscribed")))])]),t._v(" "),i.stats.revenue?e("li",[e("span",{staticClass:"fluentcrm_digit"},[t._v("\n                                                    "+t._s(i.stats.revenue.total)+"\n                                                ")]),t._v(" "),e("p",[t._v(t._s(i.stats.revenue.label))])]):t._e()])])])],1)],1)])}),t._v(" "),t.hasPermission("fcrm_manage_emails")&&!t.loading?e("div",{staticClass:"text-align-center",staticStyle:{"padding-bottom":"30px"}},[e("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(e){return t.toSequenceEmailEdit(0)}}},[t._v("\n                            "+t._s(t.$t("Vie_Add_aSE"))+"\n                        ")])],1):t._e()],2)]):e("div",[e("div",{staticClass:"fluentcrm_hero_box"},[e("h2",[t._v(t._s(t.$t("All_Looks_lydnsasey")))]),t._v(" "),e("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"success"},on:{click:function(e){return t.toSequenceEmailEdit(0)}}},[t._v("\n                        "+t._s(t.$t("All_Create_YFES"))+"\n                    ")])],1)])],1)]),t._v(" "),e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.savingSequence,expression:"savingSequence"}],attrs:{"close-on-click-modal":!1,title:t.$t("Edit Sequence and Settings"),width:"60%","append-to-body":!0,visible:t.showSequenceSettings},on:{"update:visible":function(e){t.showSequenceSettings=e}}},[t.sequence.settings?e("el-form",{attrs:{"label-position":"top",data:t.sequence}},[e("el-form-item",{attrs:{label:t.$t("Internal Title")}},[e("el-input",{attrs:{placeholder:t.$t("Internal Title")},model:{value:t.sequence.title,callback:function(e){t.$set(t.sequence,"title",e)},expression:"sequence.title"}})],1),t._v(" "),t.sequence.settings.mailer_settings?[e("mailer-config",{attrs:{mailer_settings:t.sequence.settings.mailer_settings}})]:t._e()],2):t._e(),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.saveSequence()}}},[t._v(t._s(t.$t("Save Settings")))])],1)],1),t._v(" "),e("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.$t("View Sequence Emails"),width:"60%","append-to-body":!0,visible:t.show_email_report},on:{closed:function(e){t.show_email_report_id=""},"update:visible":function(e){t.show_email_report=e}}},[t.show_email_report_id?e("campaign-emails",{attrs:{campaign_id:t.show_email_report_id}}):t._e()],1),t._v(" "),e("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.$t("Link Metrics"),width:"60%","append-to-body":!0,visible:t.link_clicks_modal},on:{closed:function(e){t.link_click_id=""},"update:visible":function(e){t.link_clicks_modal=e}}},[t.link_click_id?e("link-metrics",{attrs:{campaign_id:t.link_click_id,hide_title:!0}}):t._e()],1)],1)},[],!1,null,null,null).exports;const nr=e({name:"SequenceEmailEdit",props:["sequence_id","email_id"],components:{EmailBlockComposer:te,InputPopover:F,SendTestEmail:M},data:function(){return{sequence:{},email:{},loading:!1,saving:!1,app_loaded:!1,smartcodes:window.fcAdmin.globalSmartCodes,email_subject_status:!0,is_dirty:""}},watch:{email_id:function(){this.fetchSequenceEmail()}},methods:{backToSequence:function(){this.$router.push({name:"edit-sequence",params:{id:this.sequence_id},query:{t:(new Date).getTime()}})},fetchSequenceEmail:function(){var t=this;this.loading=!0,this.$get("sequences/".concat(this.sequence_id,"/email/").concat(this.email_id),{with:["sequence"]}).then(function(e){t.sequence=e.sequence,t.email=e.email}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1,t.app_loaded=!0})},save:function(){var t=this;if(!this.email.email_body)return this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peb"),offset:19});if(!this.email.email_subject)return this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peS"),offset:19});this.saving=!0,this.is_dirty=!1;var e={route_method:"create",email:JSON.stringify(this.email),sequence_id:this.sequence_id};parseInt(this.email_id)&&(e.route_method="update",e.mail_id=this.email_id),this.$post("sequences/sequence-email-update-create",e).then(function(e){t.$notify.success(e.message),parseInt(t.email_id)||t.$router.push({name:"edit-sequence-email",params:{sequence_id:e.email.parent_id,email_id:e.email.id}})}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1,t.is_dirty=!1})},maybeSave:function(){"visual_builder"==this.email.design_template?this.$bus.$emit("getVisualData",{}):this.save()},resetSubject:function(){var t=this;this.email_subject_status=!1,this.$nextTick(function(){t.email_subject_status=!0})},changingSpecificDaysStatus:function(){"yes"!=this.email.settings.timings.selected_days_only||this.email.settings.timings.allowed_days||this.$set(this.email.settings.timings,"allowed_days",["Mon","Tue","Wed","Thu","Fri","Sat","Sun"])},handleChangeContent:function(){""!==this.is_dirty?this.is_dirty=!0:this.is_dirty=!1},initKeyboardSave:function(t){(window.navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&"s"===t.key&&(t.preventDefault(),this.maybeSave())}},mounted:function(){this.fetchSequenceEmail(),document.addEventListener("keydown",this.initKeyboardSave)},beforeRouteLeave:function(t,e,i){if(this.is_dirty&&!window.confirm(this.$t("Unsaved_Confirm_Msg")))return!1;this.unmountBlockEditor(),document.removeEventListener("keydown",this.initKeyboardSave),i()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"email-sequences"}}},[t._v("\n                    "+t._s(t.$t("Email Sequences"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",{attrs:{to:{name:"edit-sequence",params:{id:t.sequence_id}}}},[t._v("\n                    "+t._s(t.sequence.title)+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.email.email_subject)+"\n                ")])],1)],1),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{staticClass:"mr-5",attrs:{size:"small"},on:{click:function(e){return t.backToSequence()}}},[t._v("\n                "+t._s(t.$t("Back"))+"\n            ")]),t._v(" "),e("send-test-email",{attrs:{btn_type:"danger",campaign:t.email}})],1)]),t._v(" "),t.app_loaded?[e("div",{staticClass:"fluentcrm_body fluentcrm_pad_30"},[e("el-form",{attrs:{"label-position":"top",model:t.email}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{sm:24,md:12}},[e("el-form-item",{attrs:{label:t.$t("Email Subject")}},[t.email_subject_status?e("input-popover",{attrs:{doc_url:"https://fluentcrm.com/docs/merge-codes-smart-codes-usage/",popper_extra:"fc_with_c_fields",placeholder:t.$t("Email Subject"),data:t.smartcodes},model:{value:t.email.email_subject,callback:function(e){t.$set(t.email,"email_subject",e)},expression:"email.email_subject"}}):t._e()],1)],1),t._v(" "),e("el-col",{attrs:{sm:24,md:12}},[e("el-form-item",{attrs:{label:t.$t("Email Pre-Header")}},[e("el-input",{attrs:{type:"textarea",placeholder:t.$t("Email Pre-Header"),rows:2},model:{value:t.email.email_pre_header,callback:function(e){t.$set(t.email,"email_pre_header",e)},expression:"email.email_pre_header"}})],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:8,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Delay")}},[e("el-row",{staticClass:"d-flex items-center"},[e("el-col",{staticStyle:{"min-width":"200px"},attrs:{md:6,sm:12}},[e("el-input-number",{model:{value:t.email.settings.timings.delay,callback:function(e){t.$set(t.email.settings.timings,"delay",e)},expression:"email.settings.timings.delay"}})],1),t._v(" "),e("el-col",{attrs:{md:12,sm:12}},[e("el-select",{model:{value:t.email.settings.timings.delay_unit,callback:function(e){t.$set(t.email.settings.timings,"delay_unit",e)},expression:"email.settings.timings.delay_unit"}},[e("el-option",{attrs:{value:"minutes",label:t.$t("Minutes")}}),t._v(" "),e("el-option",{attrs:{value:"hours",label:t.$t("Hours")}}),t._v(" "),e("el-option",{attrs:{value:"days",label:t.$t("Days")}}),t._v(" "),e("el-option",{attrs:{value:"weeks",label:t.$t("Weeks")}}),t._v(" "),e("el-option",{attrs:{value:"Months",label:t.$t("Months")}})],1)],1)],1),t._v(" "),e("p",[t._v(t._s(t.$t("Set after how many"))+" "+t._s(t.email.settings.timings.delay_unit||t.$t("time unit"))+"\n                                "+t._s(t.$t("the email will be triggered from the starting date")))])],1)],1),t._v(" "),e("el-col",{attrs:{md:8,sm:24}},[e("el-form-item",{staticClass:"fluentcrm_width_input",attrs:{label:t.$t("Sending Time Range")}},[e("el-time-picker",{attrs:{"is-range":"","value-format":"HH:mm",format:"HH:mm","range-separator":"To","start-placeholder":t.$t("Start Range"),"end-placeholder":t.$t("End Range")},model:{value:t.email.settings.timings.sending_time,callback:function(e){t.$set(t.email.settings.timings,"sending_time",e)},expression:"email.settings.timings.sending_time"}}),t._v(" "),e("p",[t._v(t._s(t.$t("Edi_If_ysatrtFstettt")))])],1)],1),t._v(" "),e("el-col",{attrs:{md:8,sm:24}},[e("el-checkbox",{staticClass:"mt-20",attrs:{"true-label":"yes","false-label":"no"},on:{change:function(e){return t.changingSpecificDaysStatus()}},model:{value:t.email.settings.timings.selected_days_only,callback:function(e){t.$set(t.email.settings.timings,"selected_days_only",e)},expression:"email.settings.timings.selected_days_only"}},[t._v("\n                            "+t._s(t.$t("Enable Specific Days Only"))+"\n                        ")]),t._v(" "),"yes"==t.email.settings.timings.selected_days_only?e("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:t.$t("Please select allowed days to send emails")}},[e("el-checkbox-group",{model:{value:t.email.settings.timings.allowed_days,callback:function(e){t.$set(t.email.settings.timings,"allowed_days",e)},expression:"email.settings.timings.allowed_days"}},[e("el-checkbox",{attrs:{label:"Mon"}},[t._v(t._s(t.$t("Monday")))]),t._v(" "),e("el-checkbox",{attrs:{label:"Tue"}},[t._v(t._s(t.$t("Tuesday")))]),t._v(" "),e("el-checkbox",{attrs:{label:"Wed"}},[t._v(t._s(t.$t("Wednesday")))]),t._v(" "),e("el-checkbox",{attrs:{label:"Thu"}},[t._v(t._s(t.$t("Thursday")))]),t._v(" "),e("el-checkbox",{attrs:{label:"Fri"}},[t._v(t._s(t.$t("Friday")))]),t._v(" "),e("el-checkbox",{attrs:{label:"Sat"}},[t._v(t._s(t.$t("Saturday")))]),t._v(" "),e("el-checkbox",{attrs:{label:"Sun"}},[t._v(t._s(t.$t("Sunday")))])],1)],1):t._e()],1)],1),t._v(" "),e("div",{staticClass:"fc_form_items_inline",class:{fc_is_highlighted:1==t.email.utm_status||"1"==t.email.utm_status}},[e("el-form-item",[e("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.email.utm_status,callback:function(e){t.$set(t.email,"utm_status",e)},expression:"email.utm_status"}},[t._v("\n                            "+t._s(t.$t("Ema_Add_UPFU"))+"\n                        ")])],1),t._v(" "),1==t.email.utm_status||"1"==t.email.utm_status?[e("el-form-item",{attrs:{label:t.$t("Campaign Source (required)")}},[e("el-input",{attrs:{placeholder:t.$t("The referrer: (e.g. google, newsletter)")},model:{value:t.email.utm_source,callback:function(e){t.$set(t.email,"utm_source",e)},expression:"email.utm_source"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Campaign Medium (required)")}},[e("el-input",{attrs:{placeholder:t.$t("Marketing medium: (e.g. cpc, banner, email)")},model:{value:t.email.utm_medium,callback:function(e){t.$set(t.email,"utm_medium",e)},expression:"email.utm_medium"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Campaign Name (required)")}},[e("el-input",{attrs:{placeholder:t.$t("Product, promo code, or slogan (e.g. spring_sale)")},model:{value:t.email.utm_campaign,callback:function(e){t.$set(t.email,"utm_campaign",e)},expression:"email.utm_campaign"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Campaign Term")}},[e("el-input",{attrs:{placeholder:t.$t("Identify the paid keywords")},model:{value:t.email.utm_term,callback:function(e){t.$set(t.email,"utm_term",e)},expression:"email.utm_term"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Campaign Content")}},[e("el-input",{attrs:{placeholder:t.$t("Use to differentiate ads")},model:{value:t.email.utm_content,callback:function(e){t.$set(t.email,"utm_content",e)},expression:"email.utm_content"}})],1)]:t._e()],2)],1)],1),t._v(" "),e("email-block-composer",{attrs:{show_audit:!0,show_merge:!0,enable_template_save:!0,enable_templates:!0,campaign:t.email},on:{save:function(e){return t.save()},changed:function(e){return t.handleChangeContent()},template_inserted:function(e){return t.resetSubject()}}},[e("template",{slot:"fc_editor_actions"},[e("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.maybeSave()}}},[t._v(t._s(t.$t("Save")))])],1)],2)]:e("div",{staticClass:"fluentcrm_body fluentcrm_pad_30 text-align-center"},[e("h3",[t._v(t._s(t.$t("Loading")))])])],2)},[],!1,null,null,null).exports;const sr=e({name:"sequence_sub_adder",props:["sequence_id"],components:{RecipientTaggerForm:fe},data:function(){return{settings:{subscribers:[{list:null,tag:null}],excludedSubscribers:[{list:null,tag:null}],sending_filter:"list_tag",dynamic_segment:{id:"",slug:""}},ready_tagger:!0,inserting_page:1,inserting_total_page:0,inserting_now:!1,btnSubscribing:!1,batch_completed:!1,in_total:0,estimated_count:0}},watch:{},methods:{processSubscribers:function(){var t=this,e=this.settings,i=e.subscribers.filter(function(t){return t.list&&t.tag}),n=e.excludedSubscribers.filter(function(t){return t.list&&t.tag});if("list_tag"===e.sending_filter){if(i.length!==e.subscribers.length||n.length&&n.length!==e.excludedSubscribers.length)return void this.$notify.error({title:this.$t("Oops!"),message:this.$t("_Su_Invalid_solatisi"),offset:19})}else if("dynamic_segment"==e.sending_filter){if(!e.dynamic_segment.uid)return void this.$notify.error({title:this.$t("Oops!"),message:this.$t("Please select the segment"),offset:19})}else if("advanced_filters"==e.sending_filter){var s=!1;if(this.each(e.advanced_filters,function(e){t.isEmptyValue(e)||(s=!0)}),!s)return void this.$notify.error({title:this.$t("Oops!"),message:this.$t("Please select the filters"),offset:19})}var a={subscribers:i,excludedSubscribers:n,sending_filter:e.sending_filter,dynamic_segment:e.dynamic_segment,page:this.inserting_page,advanced_filters:JSON.stringify(e.advanced_filters)};this.btnSubscribing=!0,this.inserting_now=!0,this.ready_tagger=!1,this.$post("sequences/".concat(this.sequence_id,"/subscribers"),a).then(function(e){e.remaining?(1===t.inserting_page&&(t.inserting_total_page=e.page_total),t.inserting_page=e.next_page,t.$nextTick(function(){t.processSubscribers()})):(t.batch_completed=!0,t.$notify.success({title:t.$t("Great!"),message:t.$t("_Su_Subscribers_hbas"),offset:19}),t.in_total=e.in_total)}).catch(function(e){t.handleError(e),t.btnSubscribing=!1,t.inserting_now=!1}).finally(function(){})},resetSettings:function(){var t=this;this.ready_tagger=!1,this.batch_completed=!1,this.inserting_now=!1,this.btnSubscribing=!1,this.inserting_page=1,this.inserting_total_page=0,this.settings={subscribers:[{list:null,tag:null}],excludedSubscribers:[{list:null,tag:null}],sending_filter:"list_tag",dynamic_segment:{id:"",slug:""}},this.$nextTick(function(){t.ready_tagger=!0})}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_sequence_sub_adder",staticStyle:{"margin-bottom":"20px"}},[t.ready_tagger?[e("recipient-tagger-form",{model:{value:t.settings,callback:function(e){t.settings=e},expression:"settings"}},[e("template",{slot:"fc_tagger_bottom"},[e("div",{staticClass:"text-align-center"},[e("p",[t._v("\n                        "+t._s(t.$t("_Su_Please_ntsewbstt"))+"\n                    ")])]),t._v(" "),e("div",{staticClass:"text-align-center"},[e("el-button",{attrs:{type:"success",size:"large"},on:{click:function(e){return t.processSubscribers()}}},[t._v("\n                        "+t._s(t.$t("Add to this Sequence"))+"\n                    ")])],1)])],2)]:e("div",{staticClass:"text-align-center fluentcrm_hero_box"},[t.batch_completed?[e("h3",[t._v(t._s(t.$t("Completed")))]),t._v(" "),e("h4",[t._v(t._s(t.$t("_Su_All_SLashbaSttsE")))]),t._v(" "),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.batch_completed,expression:"batch_completed"}],attrs:{type:"success",size:"small"},on:{click:function(e){return t.resetSettings()}}},[t._v("\n                "+t._s(t.$t("Back"))+"\n            ")]),t._v(" "),e("p",[e("b",[t._v(t._s(t.in_total))]),t._v(" "+t._s(t.$t("_Su_Subscribers_hbat")))])]:[e("h3",[t._v(t._s(t.$t("Processing now...")))]),t._v(" "),e("h4",[t._v(t._s(t.$t("Rec_Please_dnctw")))]),t._v(" "),t.inserting_total_page?[e("h2",[t._v(t._s(t.inserting_page)+"/"+t._s(t.inserting_total_page))]),t._v(" "),e("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.inserting_page/t.inserting_total_page*100),status:"success"}})]:t._e()]],2)],2)},[],!1,null,null,null).exports;var ar=e({name:"SequenceSubscribers",components:{Pagination:m,Confirm:d},props:["sequence_id","reload_count"],data:function(){return{loading:!1,subscribers:[],pagination:{total:0,per_page:20,current_page:1},selected_subscribers:[],removing:!1}},watch:{reload_count:function(){this.page=1,this.fetch()}},methods:{fetch:function(){var t=this;this.loading=!0,this.selected_subscribers=[];var e={per_page:this.pagination.per_page,page:this.pagination.current_page};this.$get("sequences/".concat(this.sequence_id,"/subscribers"),e).then(function(e){t.subscribers=e.data,t.pagination.total=e.total}).catch(function(e){t.handleError(e)}).finally(function(e){t.loading=!1})},removeSubscribers:function(){var t=this,e=[];this.each(this.selected_subscribers,function(t){e.push(t.id)}),this.removing=!0,this.$del("sequences/".concat(this.sequence_id,"/subscribers"),{tracker_ids:e}).then(function(e){t.$notify.success(e.message),t.fetch()}).catch(function(e){t.handleError(e)}).finally(function(){t.removing=!1})},handleSelectionChange:function(t){this.selected_subscribers=t}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_campaign_emails"},[e("h3",[t._v(t._s(t.$t("Sequence Subscribers")))]),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Found"),stripe:"",border:"",data:t.subscribers},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{label:"",width:"64",fixed:""},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"subscriber",params:{id:i.row.subscriber_id}}}},[e("img",{staticClass:"fc_contact_photo",attrs:{title:t.$t("Contact ID:")+i.row.subscriber_id,src:i.row.subscriber.photo}})])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Name"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.subscriber.full_name))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Email")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"subscriber",params:{id:i.row.subscriber_id}}}},[t._v(t._s(i.row.subscriber.email)+"\n                ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.status))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Started At")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.created_at}},[t._v("\n                    "+t._s(t._f("nsHumanDiffTime")(i.row.created_at))+"\n                ")]),t._v(" "),i.row.notes?e("span",{staticStyle:{position:"relative"}},[e("el-popover",{attrs:{width:"500",placement:"bottom",trigger:"click"}},[e("el-table",{attrs:{border:"",data:i.row.notes}},[e("el-table-column",{attrs:{label:"Email",prop:"email"}}),t._v(" "),e("el-table-column",{attrs:{width:160,label:"Date Time",prop:"scheduled_at"}})],1),t._v(" "),e("span",{attrs:{slot:"reference"},slot:"reference"},[e("i",{staticClass:"el-icon el-icon-info"})])],1)],1):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Next Email")},scopedSlots:t._u([{key:"default",fn:function(i){return["active"==i.row.status?e("span",{attrs:{title:i.row.created_at}},[t._v("\n                    "+t._s(t._f("nsHumanDiffTime")(i.row.next_execution_time))+"\n                ")]):e("span",[t._v("\n                    --\n                ")])]}}])})],1),t._v(" "),e("el-row",{staticStyle:{"margin-top":"10px"},attrs:{guter:20}},[e("el-col",{attrs:{xs:24,md:12}},[t.selected_subscribers.length?e("confirm",{directives:[{name:"loading",rawName:"v-loading",value:t.removing,expression:"removing"}],attrs:{message:t.$t("SequenceSubscribers.DeleteInfo")},on:{yes:function(e){return t.removeSubscribers()}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[t._v(" "+t._s(t.$t("Remove From Sequence"))+"\n                ")])],1):e("div",[t._v("")])],1),t._v(" "),e("el-col",{attrs:{xs:24,md:12}},[e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)],1)],1)},[],!1,null,null,null);const or=e({name:"SequenceSubscribers",props:["id"],components:{SubscribersAdder:sr,SequenceSubscribersView:ar.exports},data:function(){return{loading:!1,sequence:{},reload_count:0,show_adder:!1}},methods:{fetchSequence:function(){var t=this;this.loading=!0,this.$get("sequences/".concat(this.id)).then(function(e){t.sequence=e.sequence}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},backToEmails:function(){this.$router.push({name:"edit-sequence",params:{id:this.id},query:{t:(new Date).getTime()}})},reloadSubscribers:function(){this.show_adder=!1,this.reload_count+=1}},mounted:function(){this.fetchSequence()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"email-sequences"}}},[t._v("\n                    "+t._s(t.$t("Email Sequences"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",{attrs:{to:{name:"edit-sequence",params:{id:t.id}}}},[t._v("\n                    "+t._s(t.sequence.title)+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.$t("Subscribers"))+"\n                ")])],1)],1),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.backToEmails()}}},[t._v("\n                "+t._s(t.$t("View Emails"))+"\n            ")]),t._v(" "),t.hasPermission("fcrm_manage_emails")?e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.show_adder=!t.show_adder}}},[t.show_adder?e("span",[t._v(t._s(t.$t("Show Subscribers")))]):e("span",[t._v(t._s(t.$t("Add Subscribers")))])]):t._e()],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_body fluentcrm_pad_30"},[t.show_adder?e("subscribers-adder",{attrs:{sequence_id:t.id},on:{completed:function(e){return t.reloadSubscribers()}}}):e("div",{staticClass:"fluentcrm_sequence_subs"},[e("sequence-subscribers-view",{attrs:{reload_count:t.reload_count,sequence_id:t.id}})],1)],1)])},[],!1,null,null,null).exports;const rr=e({name:"ImportEmailSequence",components:{},data:function(){return{step:"upload",importing:!1,inline_errors:!1}},computed:{url:function(){var t=window.ajaxurl;return t+=(t.match(/\?/)?"&":"?")+jQuery.param({action:"fluentcrm_import_sequence"}),t}},methods:{success:function(t){this.$notify.success(t.message),this.$router.push({name:"edit-sequence",params:{id:t.sequence.id}})},error:function(t){var e=JSON.parse(t.message);this.$notify.error(e.message),e.requires&&(this.inline_errors=e.requires)}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_settings_wrapper fc_sequence_import"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"email-sequences"}}},[t._v("\n                    "+t._s(t.$t("Email Sequences"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.$t("Import"))+"\n                ")])],1)],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.importing,expression:"importing"}],staticClass:"fluentcrm_body fluentcrm_title_cards fc_narrow_box fc_white_inverse",staticStyle:{"margin-top":"30px","max-width":"1160px"}},[t.has_campaign_pro?[e("div",{staticClass:"fc_funnel_upload text-align-center"},[e("h3",[t._v(t._s(t.$t("Email_Sequence_Import_Note")))]),t._v(" "),e("el-upload",{ref:"uploader",attrs:{drag:"",limit:1,action:t.url,multiple:!1,"on-error":t.error,"on-success":t.success}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n                        "+t._s(t.$t("Drop JSON file here or"))+" "),e("em",[t._v(t._s(t.$t("click to upload")))])])]),t._v(" "),t.inline_errors?e("pre",[t._v(t._s(t.inline_errors))]):t._e()],1)]:t._e()],2)])},[],!1,null,null,null).exports;var lr=e({name:"CreateForm",components:{OptionSelector:Ft},data:function(){return{active_step:"template_selection",templates:[],fetching:!1,form:{template_id:"",title:"",selected_tags:[],selected_list:"",double_optin:!0},created_form:!1,creating:!1}},methods:{create:function(){var t=this;if(!this.form.template_id||!this.form.title||!this.form.selected_list)return this.$notify.error(this.$t("_Cr_Please_fuatf"));this.creating=!0,this.$post("forms",this.form).then(function(e){t.$notify.success(e.message),t.created_form=e.created_form}).catch(function(e){t.handleError(e)}).finally(function(){t.creating=!1})},changeToStep:function(t){this.active_step=t},fetchFormTemplates:function(){var t=this;this.fetching=!0,this.$get("forms/templates").then(function(e){t.templates=e.templates}).catch(function(e){t.handleError(e)}).finally(function(){t.fetching=!1})}},mounted:function(){this.fetchFormTemplates()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticClass:"fc_create_form_wrapper"},[t.created_form?e("div",{staticClass:"fc_created_form text-align-center",staticStyle:{padding:"20px"}},[e("h3",[t._v(t._s(t.$t("_Cr_Your_fhbcs")))]),t._v(" "),e("p",[t._v(t._s(t.$t("CreateForm.desc")))]),t._v(" "),e("code",[t._v(t._s(t.created_form.shortcode))]),t._v(" "),e("hr",{staticStyle:{margin:"12px 0"}}),t._v(" "),e("ul",{staticClass:"fc_links_inline d-flex items-center justify-center"},[e("li",[e("a",{staticClass:"el-button el-button--primary el-button--small",attrs:{target:"_blank",href:t.created_form.preview_url}},[t._v(t._s(t.$t("Preview The Form")))])]),t._v(" "),e("li",{staticClass:"ml-5"},[e("a",{staticClass:"el-button el-button--info el-button--small",attrs:{target:"_blank",href:t.created_form.edit_url}},[t._v(t._s(t.$t("Edit The Form")))])]),t._v(" "),e("li",{staticClass:"ml-5"},[e("a",{staticClass:"el-button el-button--info el-button--small",attrs:{target:"_blank",href:t.created_form.feed_url}},[t._v(t._s(t.$t("Edit Connection")))])])])]):["template_selection"==t.active_step?e("div",{staticClass:"fc_select_template_wrapper",staticStyle:{padding:"0 20px 40px"}},[e("h3",[t._v(t._s(t.$t("Select a template")))]),t._v(" "),e("el-radio-group",{on:{change:function(e){return t.changeToStep("config")}},model:{value:t.form.template_id,callback:function(e){t.$set(t.form,"template_id",e)},expression:"form.template_id"}},t._l(t.templates,function(t,i){return e("el-radio",{key:i,attrs:{label:t.id}},[e("el-tooltip",{attrs:{content:t.label,placement:"bottom"}},[e("div",[e("img",{staticStyle:{width:"200px",height:"168px"},attrs:{src:t.image}})])])],1)}),1)],1):"config"==t.active_step?[e("div",{staticClass:"fc_config_template",staticStyle:{padding:"40px 20px 10px 20px"}},[e("el-form",{attrs:{data:t.form,"label-position":"top"}},[e("el-form-item",{attrs:{label:t.$t("Form Title")}},[e("el-input",{attrs:{type:"text",placeholder:t.$t("Please Provide a Form Title")},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Add to List")}},[e("option-selector",{attrs:{field:{option_key:"lists",placeholder:t.$t("Select a List")}},model:{value:t.form.selected_list,callback:function(e){t.$set(t.form,"selected_list",e)},expression:"form.selected_list"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Add to Tags")}},[e("option-selector",{attrs:{field:{option_key:"tags",creatable:!0,placeholder:t.$t("Select Tags"),is_multiple:!0}},model:{value:t.form.selected_tags,callback:function(e){t.$set(t.form,"selected_tags",e)},expression:"form.selected_tags"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Double Opt-In")}},[e("el-checkbox",{model:{value:t.form.double_optin,callback:function(e){t.$set(t.form,"double_optin",e)},expression:"form.double_optin"}},[t._v(t._s(t.$t("_Cr_Enable_DOC")))])],1)],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("div",{staticClass:"fc_drawer_footer_wrap"},[e("p",{staticStyle:{"text-align":"left","margin-top":"0px"}},[t._v(t._s(t.$t("_Cr_This_fwbciFFaycc")))]),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.creating,expression:"creating"}],attrs:{size:"small",type:"primary"},on:{click:function(e){return t.create()}}},[t._v(t._s(t.$t("Create Form")))])],1)])]:t._e()]],2)},[],!1,null,null,null);const cr=e({name:"FluentForms",components:{createForm:lr.exports,Pagination:m,ItemCopier:Ue,InlineDoc:b},data:function(){return{forms:[],pagination:{page:1,per_page:10,total:0},loading:!1,installing_ff:!1,need_installation:!1,create_form_modal:!1,search:""}},methods:{fetchForms:function(){var t=this,e={per_page:this.pagination.per_page,page:this.pagination.current_page,search:this.search};this.loading=!0,this.$get("forms",e).then(function(e){e.installed?(t.forms=e.forms.data,t.pagination.total=e.forms.total,t.need_installation=!1):t.need_installation=!0}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},installFF:function(){var t=this;this.installing_ff=!0,this.$post("setting/install-fluentform").then(function(e){t.fetchForms(),t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.installing_ff=!1})},handleActionCommand:function(t){var e=t.form[t.url],i=t.target;e&&("blank"===i?window.open(e,"_blank"):window.location.href=e)}},mounted:function(){this.fetchForms(),this.changeTitle(this.$t("Forms"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-forms fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header align-center justify-between"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Forms")))]),t._v(" "),t.pagination.total?e("p",[t._v(t._s(t.$t("For_Fluent_FtacwyC")))]):t._e()]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("div",{staticClass:"fc-search-box",staticStyle:{"margin-right":"10px"}},[e("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetchForms},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchForms.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetchForms},slot:"append"})],1)],1),t._v(" "),t.need_installation?t._e():e("el-button",{staticStyle:{height:"30px","line-height":"10px"},attrs:{size:"small",type:"primary"},on:{click:function(e){t.create_form_modal=!0}}},[t._v("\n                "+t._s(t.$t("Create a New Form"))+"\n            ")]),t._v(" "),e("inline-doc",{attrs:{doc_id:267}})],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_body",staticStyle:{position:"relative"}},[t.loading?e("div",{staticClass:"fc_loading_bar"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):t._e(),t._v(" "),t.need_installation?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.installing_ff,expression:"installing_ff"}],staticClass:"fc_narrow_box fc_white_inverse text-align-center",attrs:{"element-loading-text":"Installing Fluent Forms..."}},[e("h2",[t._v(t._s(t.$t("For_Grow_YAbOF")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Forms.desc")))]),t._v(" "),e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.installFF()}}},[t._v(t._s(t.$t("Das_Activate_FFI")))])],1):e("div",{staticClass:"fc_forms",staticStyle:{"padding-top":"25px"}},[t.pagination.total||t.loading?e("div",[t.forms.length?e("el-table",{attrs:{border:"","empty-text":t.$t("No Form Found"),stripe:"",data:t.forms,width:"100%"}},[e("el-table-column",{attrs:{width:"80",label:t.$t("ID"),prop:"id"}}),t._v(" "),e("el-table-column",{attrs:{width:"250",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s(e.row.title)+"\n                        ")]}}],null,!1,2919489117)}),t._v(" "),e("el-table-column",{attrs:{width:"320",label:t.$t("Info")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.associate_lists?e("span",{staticClass:"fc_tag_items fc_list"},[e("i",{staticClass:"el-icon-files"}),t._v(t._s(i.row.associate_lists))]):t._e(),t._v(" "),i.row.associate_tags?e("span",{staticClass:"fc_tag_items fc_tag"},[e("i",{staticClass:"el-icon-price-tag"}),t._v(" "+t._s(i.row.associate_tags))]):t._e()]}}],null,!1,438697228)}),t._v(" "),e("el-table-column",{attrs:{width:"250",label:t.$t("Shortcode")},scopedSlots:t._u([{key:"default",fn:function(t){return[e("item-copier",{attrs:{text:t.row.shortcode}})]}}],null,!1,1405429745)}),t._v(" "),e("el-table-column",{attrs:{width:"200",label:t.$t("Created at")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{attrs:{title:i.row.created_at}},[t._v("\n                                "+t._s(t._f("nsHumanDiffTime")(i.row.created_at))+"\n                            ")])]}}],null,!1,4254526601)}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:t.$t("Actions"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-dropdown",{on:{command:t.handleActionCommand}},[e("el-button",{attrs:{size:"small",type:"info"}},[t._v("\n                                    "+t._s(t.$t("Actions"))+" "),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:{form:i.row,url:"preview_url",target:"blank"}}},[t._v("\n                                        "+t._s(t.$t("Preview Form"))+"\n                                    ")]),t._v(" "),i.row.feed_url?e("el-dropdown-item",{attrs:{command:{form:i.row,url:"feed_url",target:"blank"}}},[t._v("\n                                        "+t._s(t.$t("Edit Integration Settings"))+"\n                                    ")]):t._e(),t._v(" "),i.row.funnel_url?e("el-dropdown-item",{attrs:{command:{form:i.row,url:"funnel_url",target:"same"}}},[t._v("\n                                        "+t._s(t.$t("Edit Connected Automation"))+"\n                                    ")]):t._e(),t._v(" "),e("el-dropdown-item",{attrs:{command:{form:i.row,url:"edit_url",target:"blank"}}},[t._v("\n                                        "+t._s(t.$t("Edit Form"))+"\n                                    ")])],1)],1)]}}],null,!1,1374541795)})],1):t._e(),t._v(" "),t.loading?t._e():e("el-row",{staticStyle:{padding:"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{md:12,sm:24}},[t._v("\n                        "+t._s(t.$t("Forms.if_need_desc"))+"\n                    ")]),t._v(" "),e("el-col",{attrs:{md:12,sm:24}},[e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetchForms}})],1)],1)],1):e("div",{staticClass:"fc_narrow_box fc_white_inverse text-align-center"},[e("h2",[t._v(t._s(t.$t("For_Looks_Lydncafy")))]),t._v(" "),e("el-button",{attrs:{type:"danger"},on:{click:function(e){t.create_form_modal=!0}}},[t._v(t._s(t.$t("Create Your First Form")))])],1)])],1),t._v(" "),e("el-drawer",{staticClass:"fc_company_info_drawer",attrs:{"with-header":!0,size:t.globalDrawerSize,title:t.$t("Create a Form"),"append-to-body":!0,"wrapper-closable":!1,visible:t.create_form_modal},on:{"update:visible":function(e){t.create_form_modal=e}}},[e("div",{staticStyle:{padding:"0 20px"}},[t.create_form_modal?e("create-form"):t._e()],1)])],1)},[],!1,null,null,null).exports;const ur=e({name:"SmtpSettings",components:{ItemCopier:Ue},data:function(){return{loading:!1,fetching:!1,bounce_settings:{ses:{}},active_provider_key:"ses",installing:!1,fluentsmtp_info:!1,fluentsmtp_just_installed:!1,fluentsmtp_config_url:"#",switching:!1}},computed:{activeProvider:function(){return this.bounce_settings[this.active_provider_key]}},methods:{getBounceSettings:function(){var t=this;this.fetching=!0,this.$get("setting/bounce_configs").then(function(e){t.bounce_settings=e.bounce_settings,e.fluentsmtp_info&&(t.fluentsmtp_info=e.fluentsmtp_info)}).catch(function(e){t.handleError(e)}).finally(function(){t.fetching=!1})},installFluentSMTP:function(){var t=this;this.installing=!0,this.$post("setting/install-fluentsmtp").then(function(e){e.is_installed?(t.$notify.success(e.message),t.appVars.has_fluentsmtp=!0,t.appVars.disable_fluentmail_suggest=!0,t.fluentsmtp_just_installed=!0,t.fluentsmtp_config_url=e.config_url,t.getBounceSettings()):t.$notify.error(t.$t("Plugin_Not_Installed_Alert"))}).catch(function(e){t.handleError(e)}).finally(function(){t.installing=!1})},switchingProvider:function(){var t=this;this.switching=!0,setTimeout(function(){t.switching=!1},300)}},mounted:function(){this.getBounceSettings(),this.changeTitle(this.$t("Email Service Provider Settings"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("SMTP/Email Sending Service Settings")))])])]),t._v(" "),e("div",{staticClass:"fluentcrm_pad_around"},[t.appVars.has_fluentsmtp?t.fluentsmtp_just_installed?e("div",{staticClass:"settings-section fluentcrm_databox fc_smtp_desc text-center"},[e("h3",[t._v(t._s(t.$t("FluentSMTP plugin has successfully installed")))]),t._v(" "),e("p",[t._v(t._s(t.$t("fluentSMTP_requires_to_configure_properly")))]),t._v(" "),e("a",{staticClass:"button button-primary",attrs:{href:t.fluentsmtp_config_url}},[t._v(t._s(t.$t("Configure FluentSMTP")))])]):t.fluentsmtp_info?e("div",{staticClass:"settings-section fluentcrm_databox fc_smtp_desc"},[t.fluentsmtp_info.configured?[e("h3",[t._v(t._s(t.$t("SmtpSettings.Configured.title")))]),t._v(" "),e("hr"),t._v(" "),e("h3",[t._v(t._s(t.$t("Verified Email Senders")))]),t._v(" "),e("ul",t._l(t.fluentsmtp_info.verified_senders,function(i){return e("li",{key:i},[t._v(t._s(i))])}),0),t._v(" "),e("a",{staticClass:"button",attrs:{href:t.fluentsmtp_info.config_url}},[t._v(t._s(t.$t("Goto FluentSMTP Settings")))])]:[e("h3",[t._v(t._s(t.$t("SmtpSettings.Configured.failed.desc")))]),t._v(" "),e("a",{staticClass:"button button-primary",attrs:{href:t.fluentsmtp_info.config_url}},[t._v(t._s(t.$t("Configure FluentSMTP")))])]],2):t._e():e("div",{staticClass:"settings-section fluentcrm_databox fc_smtp_desc"},[e("h3",[t._v(t._s(t.$t("SmtpSettings.FluentSMTP.title")))]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v(t._s(t.$t("learn_about_fluentSMTP"))+" "),e("a",{attrs:{target:"_blank",href:"https://fluentsmtp.com"}},[t._v(t._s(t.$t("Learn more about FluentSMTP Plugin.")))])]),t._v(" "),e("el-row",{attrs:{gutter:12}},[e("el-col",{attrs:{span:12}},[e("h3",[t._v(t._s(t.$t("Dedicated API and SMTP connections")))]),t._v(" "),e("ul",[e("li",[t._v("Amazon SES")]),t._v(" "),e("li",[t._v("Mailgun")]),t._v(" "),e("li",[t._v("SendGrid")]),t._v(" "),e("li",[t._v("SendInBlue")]),t._v(" "),e("li",[t._v("PepiPost")]),t._v(" "),e("li",[t._v("SparkPost")]),t._v(" "),e("li",[t._v(t._s(t.$t("+ Any SMTP Provider")))])])]),t._v(" "),e("el-col",{attrs:{span:12}},[e("h3",[t._v(t._s(t.$t("Features of Fluent SMTP Plugin")))]),t._v(" "),e("ul",[e("li",[t._v(t._s(t.$t("Optimized API connection with Mail Service Providers")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Email Logging for better visibility")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Email Routing based on the sender email address")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Real-Time Email Delivery")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Resend Any Emails")))]),t._v(" "),e("li",[t._v(t._s(t.$t("In Details Reporting")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Super fast UI powered by VueJS")))])])])],1),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"fc_call_action text-align-center"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.installing,expression:"installing"}],attrs:{disabled:t.installing,type:"success"},on:{click:function(e){return t.installFluentSMTP()}}},[t._v("\n                    "+t._s(t.$t("install_fluentSMTP"))+"\n                ")])],1)],1),t._v(" "),t.fetching?e("el-skeleton",{staticClass:"fluentcrm_databox"}):e("div",{staticClass:"settings-section fluentcrm_databox fc_smtp_desc"},[e("h2",[t._v(t._s(t.$t("Bounce Handling Settings")))]),t._v(" "),e("hr"),t._v(" "),e("h3",[t._v(t._s(t.$t("Select Your Email Service Provider")))]),t._v(" "),e("el-select",{on:{change:function(e){return t.switchingProvider()}},model:{value:t.active_provider_key,callback:function(e){t.active_provider_key=e},expression:"active_provider_key"}},t._l(t.bounce_settings,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t.label}})}),1),t._v(" "),e("hr",{staticStyle:{margin:"20px 0 15px 0"}}),t._v(" "),t.switching?e("el-skeleton",{attrs:{rows:8}}):[e("h2",[t._v(t._s(t.activeProvider.label)+" "+t._s(t.$t("Bounce Handler")))]),t._v(" "),e("p",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.$t("If you use"))+" "),e("b",[t._v(t._s(t.activeProvider.label))]),t._v(" "+t._s(t.$t("for sending your WordPress emails. This section is for you")))]),t._v(" "),e("p",[t._v(t._s(t.activeProvider.input_title))]),t._v(" "),e("item-copier",{attrs:{text:t.activeProvider.webhook_url}}),t._v(" "),e("p",{domProps:{innerHTML:t._s(t.activeProvider.input_info)}}),t._v(" "),e("p",[t._v(t._s(t.$t("For Step by Step instruction please"))+" "),e("a",{attrs:{target:"_blank",rel:"noopener",href:t.activeProvider.doc_url}},[t._v(t._s(t.$t("follow this tutorial")))])])]],2)],1)])},[],!1,null,null,null).exports;const dr=e({name:"General-Settings",components:{FormBuilder:Gt},data:function(){return{loading:!1,fetching:!1,user_syncing:{},user_syncing_fields:{},registration_setting:{},registration_fields:{},role_based_tagging_settings:{},role_based_tagging_settings_fields:{},user_syncing_settings:{},comment_settings:{},comment_fields:{},woo_checkout_fields:!1,woo_checkout_settings:{},app_ready:!1}},methods:{getSettings:function(){var t=this;this.fetching=!0,this.$get("setting/auto_subscribe_settings",{with:["fields"]}).then(function(e){t.user_syncing_settings=e.user_syncing_settings,t.user_syncing_fields=e.user_syncing_fields,t.registration_setting=e.registration_setting,t.registration_fields=e.registration_fields,t.comment_settings=e.comment_settings,t.comment_fields=e.comment_fields,t.role_based_tagging_settings=e.role_based_tagging_settings,t.role_based_tagging_settings_fields=e.role_based_tagging_settings_fields,e.woo_checkout_fields&&(t.woo_checkout_fields=e.woo_checkout_fields,t.woo_checkout_settings=e.woo_checkout_settings),t.app_ready=!0}).catch(function(e){t.handleError(e)}).finally(function(){t.fetching=!1})},saveSettings:function(){var t=this;this.loading=!0,this.$post("setting/auto_subscribe_settings",{registration_setting:this.registration_setting,comment_settings:this.comment_settings,user_syncing_settings:this.user_syncing_settings,woo_checkout_settings:this.woo_checkout_settings,role_based_tagging_settings:this.role_based_tagging_settings}).then(function(e){t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})}},mounted:function(){this.getSettings(),this.changeTitle(this.$t("General Settings"))}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticClass:"fluentcrm-settings fc-general-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("General Settings")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[t.app_ready?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"success",size:"medium"},on:{click:function(e){return t.saveSettings()}}},[t._v("\n                "+t._s(t.$t("Save Settings"))+"\n            ")]):t._e()],1)]),t._v(" "),t.app_ready?e("div",{staticClass:"fluentcrm_pad_around"},[e("div",{staticClass:"settings-section fluentcrm_databox",staticStyle:{"padding-bottom":"15px"}},[e("h2",[t._v(t._s(t.user_syncing_fields.title))]),t._v(" "),e("p",[t._v(t._s(t.user_syncing_fields.sub_title))]),t._v(" "),e("hr"),t._v(" "),e("form-builder",{staticClass:"mt-20",attrs:{formData:t.user_syncing_settings,fields:t.user_syncing_fields.fields}})],1),t._v(" "),e("div",{staticClass:"settings-section fluentcrm_databox"},[e("h2",[t._v(t._s(t.registration_fields.title))]),t._v(" "),e("p",[t._v(t._s(t.registration_fields.sub_title))]),t._v(" "),e("hr"),t._v(" "),e("form-builder",{staticClass:"mt-20",attrs:{formData:t.registration_setting,fields:t.registration_fields.fields}})],1),t._v(" "),e("div",{staticClass:"settings-section fluentcrm_databox",staticStyle:{"padding-bottom":"15px"}},[e("h2",[t._v(t._s(t.role_based_tagging_settings_fields.title))]),t._v(" "),e("p",[t._v(t._s(t.role_based_tagging_settings_fields.sub_title))]),t._v(" "),e("hr"),t._v(" "),t.has_campaign_pro||"yes"!=t.role_based_tagging_settings.status?t._e():e("p",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("This feature only available on FluentCRM Pro."))+" "),e("a",{attrs:{target:"_blank",rel:"noopener",href:"https://fluentcrm.com?utm_source=dashboard&utm_medium=plugin&utm_campaign=pro&utm_id=wp"}},[t._v(t._s(t.$t("Please purchase Pro")))]),t._v(" "+t._s(t.$t("to enable this feature")))]),t._v(" "),e("form-builder",{staticClass:"mt-20",attrs:{formData:t.role_based_tagging_settings,fields:t.role_based_tagging_settings_fields.fields}})],1),t._v(" "),e("div",{staticClass:"settings-section fluentcrm_databox",staticStyle:{"padding-bottom":"15px"}},[e("h2",[t._v(t._s(t.comment_fields.title))]),t._v(" "),e("p",[t._v(t._s(t.comment_fields.sub_title))]),t._v(" "),e("hr"),t._v(" "),e("form-builder",{staticClass:"mt-20",attrs:{formData:t.comment_settings,fields:t.comment_fields.fields}})],1),t._v(" "),t.woo_checkout_fields?e("div",{staticClass:"settings-section fluentcrm_databox",staticStyle:{"padding-bottom":"15px"}},[e("h2",[t._v(t._s(t.woo_checkout_fields.title))]),t._v(" "),e("p",[t._v(t._s(t.woo_checkout_fields.sub_title))]),t._v(" "),t.has_campaign_pro?t._e():e("p",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("This feature only available on FluentCRM Pro."))+" "),e("a",{attrs:{target:"_blank",rel:"noopener",href:"https://fluentcrm.com?utm_source=dashboard&utm_medium=plugin&utm_campaign=pro&utm_id=wp"}},[t._v(t._s(t.$t("Please purchase Pro")))]),t._v(" "+t._s(t.$t("to enable this feature")))]),t._v(" "),e("hr"),t._v(" "),e("form-builder",{staticClass:"mt-20",attrs:{formData:t.woo_checkout_settings,fields:t.woo_checkout_fields.fields}})],1):t._e(),t._v(" "),t.app_ready?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"success",size:"medium"},on:{click:function(e){return t.saveSettings()}}},[t._v("\n            "+t._s(t.$t("Save Settings"))+"\n        ")]):t._e()],1):t._e()])},[],!1,null,null,null).exports;const _r=e({name:"LicenseSettings",components:{},data:function(){return{fetching:!0,verifying:!1,licenseData:{},licenseKey:"",showNewLicenseInput:!1,errorMessage:""}},methods:{getSettings:function(){var t=this;this.errorMessage="",this.fetching=!0,this.$get("campaign-pro-settings/license",{verify:!0}).then(function(e){t.licenseData=e}).catch(function(e){t.handleError(e)}).finally(function(){t.fetching=!1})},verifyLicense:function(){var t=this;if(!this.licenseKey)return this.$notify.error(this.$t("Please provide a license key")),void(this.errorMessage=this.$t("Please provide a license key"));this.verifying=!0,this.errorMessage="",this.$post("campaign-pro-settings/license",{license_key:this.licenseKey}).then(function(e){t.licenseData=e.license_data,t.$notify.success(e.message)}).catch(function(e){var i="";(i="string"==typeof e?e:e&&e.message?e.message:window.FLUENTCRM.convertToText(e))||(i=t.$t("Something is wrong!")),t.errorMessage=i,t.handleError(e)}).finally(function(){t.verifying=!1})},deactivateLicense:function(){var t=this;this.verifying=!0,this.$del("campaign-pro-settings/license").then(function(e){t.licenseData=e.license_data,t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.verifying=!1})}},mounted:function(){this.has_campaign_pro&&this.getSettings(),this.changeTitle(this.$t("General Settings"))}},function(){var t=this,e=t._self._c;return t.has_campaign_pro?e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("License Management")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{staticClass:"refresh-setting-icon",attrs:{type:"text",size:"medium",icon:"el-icon-refresh"},on:{click:t.getSettings}})],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.verifying,expression:"verifying"}],staticClass:"fluentcrm_pad_around"},[t.fetching?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticClass:"text-align-center"},[e("h3",[t._v(t._s(t.$t("Fetching License Information Please wait")))])]):e("div",{staticClass:"fc_narrow_box fc_white_inverse text-align-center",class:"fc_license_"+t.licenseData.status},["expired"==t.licenseData.status?e("div",[e("h3",[t._v(t._s(t.$t("Looks like your license has been expired"))+" "+t._s(t._f("nsHumanDiffTime")(t.licenseData.expires)))]),t._v(" "),e("a",{staticClass:"el-button el-button--danger el-button--small",attrs:{href:t.licenseData.renew_url,target:"_blank"}},[t._v(t._s(t.$t("Click Here to Renew your License")))]),t._v(" "),e("hr",{staticStyle:{margin:"20px 0px"}}),t._v(" "),t.showNewLicenseInput?e("div",[e("h3",[t._v(t._s(t.$t("Your License Key")))]),t._v(" "),e("el-input",{attrs:{placeholder:"License Key"},model:{value:t.licenseKey,callback:function(e){t.licenseKey=e},expression:"licenseKey"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-lock"},on:{click:function(e){return t.verifyLicense()}},slot:"append"},[t._v(t._s(t.$t("Verify License")))])],1)],1):e("p",[t._v(t._s(t.$t("Have a new license Key?"))+" "),e("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showNewLicenseInput=!t.showNewLicenseInput}}},[t._v(t._s(t.$t("Click here")))])])]):"valid"==t.licenseData.status?e("div",[t._m(0),t._v(" "),e("h2",[t._v(t._s(t.$t("You license key is valid and activated")))]),t._v(" "),e("hr",{staticStyle:{margin:"20px 0px"}}),t._v(" "),e("p",[t._v(t._s(t.$t("Want to deactivate this license?"))+" "),e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deactivateLicense()}}},[t._v(t._s(t.$t("Click here")))])])]):e("div",[e("h3",[t._v(t._s(t.$t("FluentCRM_License.desc")))]),t._v(" "),e("el-input",{attrs:{placeholder:"License Key"},model:{value:t.licenseKey,callback:function(e){t.licenseKey=e},expression:"licenseKey"}},[e("el-button",{attrs:{slot:"append",type:"success",icon:"el-icon-lock"},on:{click:function(e){return t.verifyLicense()}},slot:"append"},[t._v(t._s(t.$t("Verify License")))])],1),t._v(" "),e("hr",{staticStyle:{margin:"20px 0 30px"}}),t._v(" "),t.showNewLicenseInput?t._e():e("p",[t._v(t._s(t.$t("dont_have_license_key"))+" "),e("a",{attrs:{target:"_blank",href:t.licenseData.purchase_url}},[t._v(t._s(t.$t("Purchase one here")))])])],1)]),t._v(" "),e("p",{staticClass:"text-align-center",staticStyle:{color:"red"},domProps:{innerHTML:t._s(t.errorMessage)}})])]):t._e()},[function(){var t=this._self._c;return t("div",{staticClass:"text-align-center"},[t("span",{staticClass:"el-icon el-icon-circle-check",staticStyle:{"font-size":"50px"}})])}],!1,null,null,null).exports;const pr=e({name:"IntegrationSettings",components:{OptionSelector:Ft},data:function(){return{loading:!1,integrations:{},selected_integration:"",syncing_data:!1,syncing_status:!1,syncing_page:1,last_sync_id:0,saving:!1,switching:!1,syncing_error:!1}},computed:{currentIntegration:function(){return!(this.isEmptyValue(this.integrations)||!this.selected_integration)&&this.integrations[this.selected_integration]}},methods:{fetchIntegrations:function(){var t=this;this.loading=!0,this.$get("setting/integrations",{with:["fields"]}).then(function(e){t.integrations=e.integrations,t.isEmptyValue(t.integrations)||(t.$route.query.selected_integration&&t.integrations[t.$route.query.selected_integration]?t.selected_integration=t.$route.query.selected_integration:t.selected_integration=Object.keys(t.integrations)[0])}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},syncData:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.syncing_page=1);var e={tags:this.currentIntegration.settings.tags,lists:this.currentIntegration.settings.lists,contact_status:this.currentIntegration.settings.contact_status,provider:this.selected_integration,action:"sync",syncing_page:this.syncing_page,last_sync_id:this.last_sync_id};this.syncing_data=!0,this.syncing_error=!1,this.$post("setting/integrations",e).then(function(e){e&&e.syncing_status?(t.syncing_status=e.syncing_status,t.syncing_status.has_more?(t.syncing_page+=1,t.last_sync_id=t.syncing_status.last_sync_id,t.syncData(!1)):t.syncing_data=!1):(console.log(e),e||(e=t.$t("Something went wrong, when syncing data")),t.syncing_error=e)}).catch(function(e){console.log(e),e||(e=t.$t("Something went wrong!")),t.syncing_error=e,t.handleError(e)}).finally(function(){})},saveSettings:function(){var t=this,e={tags:this.currentIntegration.settings.tags,lists:this.currentIntegration.settings.lists,contact_status:this.currentIntegration.settings.contact_status,provider:this.selected_integration,action:"save"};this.saving=!0,this.$post("setting/integrations",e).then(function(e){t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1})},reloadPage:function(){window.location.reload(!0)},switchProvider:function(t){var e=this;this.syncing_data||(this.switching=!0,this.$nextTick(function(){e.selected_integration=t,e.$router.push({name:"integration_settings",query:{selected_integration:t}}),e.switching=!1,e.syncing_error=""}))},disableSync:function(){var t=this,e={tags:this.currentIntegration.settings.tags,lists:this.currentIntegration.settings.lists,contact_status:this.currentIntegration.settings.contact_status,provider:this.selected_integration,action:"disable"};this.saving=!0,this.$post("setting/integrations",e).then(function(e){t.fetchIntegrations(),t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1})}},mounted:function(){this.fetchIntegrations()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fc_integration_settings"},[e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[t.selected_integration?[e("div",{staticClass:"fluentcrm_header"},[e("ul",{staticClass:"fc_settings_sub_menu"},t._l(t.integrations,function(i,n){return e("li",{key:n,class:{fc_active:n==t.selected_integration},on:{click:function(e){return t.switchProvider(n)}}},[t._v("\n                        "+t._s(i.title)+"\n                    ")])}),0)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around"},[t.currentIntegration?e("div",{staticClass:"fc_integration"},[e("p",{staticStyle:{"line-height":"140%"}},[t._v(t._s(t.currentIntegration.sub_title))]),t._v(" "),t.switching?t._e():e("div",{staticClass:"fc_integration_sync fluentcrm_databox"},[t.currentIntegration.settings.is_enabled?t._e():e("div",[e("h2",[t._v(t._s(t.currentIntegration.sync_title))]),t._v(" "),e("p",[t._v(t._s(t.currentIntegration.sync_desc))])]),t._v(" "),t.syncing_status?e("div",{staticClass:"text-align-center"},[t.syncing_status.has_more?[t.syncing_error?[e("h3",[t._v(t._s(t.$t("Looks like there had a problem to sync the data")))]),t._v(" "),e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.syncData(!1)}}},[t._v("\n                                        "+t._s(t.$t("Resume"))+"\n                                    ")]),t._v(" "),e("h5",[t._v(t._s(t.$t("Error Details")))]),t._v(" "),e("pre",[t._v(t._s(t.syncing_error))])]:[e("h3",[t._v(t._s(t.$t("Importing now...")))]),t._v(" "),e("h4",[t._v(t._s(t.$t("IntegrationSettings.importing_desc")))]),t._v(" "),e("h2",[t._v(t._s(t.syncing_status.current_page)+"/"+t._s(t.syncing_status.page_total))]),t._v(" "),e("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.syncing_status.current_page/t.syncing_status.page_total*100),status:"success"}}),t._v(" "),e("p",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}]},[t._v(t._s(t.$t("Syncing...")))])]]:e("div",[e("h3",[t._v(t._s(t.$t("IntegrationSettings.data_sync_completed")))]),t._v(" "),e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.reloadPage()}}},[t._v(t._s(t.$t("Reload Page")))])],1)],2):e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.syncing_data,expression:"syncing_data"}],attrs:{"label-position":"top",data:t.currentIntegration.settings}},[e("el-form-item",{attrs:{label:t.$t("Default List to Contact (Optional)")}},[e("option-selector",{attrs:{field:{option_key:"lists",creatable:!0,is_multiple:!0}},model:{value:t.currentIntegration.settings.lists,callback:function(e){t.$set(t.currentIntegration.settings,"lists",e)},expression:"currentIntegration.settings.lists"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Default Tag for Contact (Optional)")}},[e("option-selector",{attrs:{field:{option_key:"tags",creatable:!0,is_multiple:!0}},model:{value:t.currentIntegration.settings.tags,callback:function(e){t.$set(t.currentIntegration.settings,"tags",e)},expression:"currentIntegration.settings.tags"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Default contact status (for new contacts)")}},[e("option-selector",{attrs:{field:{option_key:"editable_statuses"}},model:{value:t.currentIntegration.settings.contact_status,callback:function(e){t.$set(t.currentIntegration.settings,"contact_status",e)},expression:"currentIntegration.settings.contact_status"}}),t._v(" "),"pending"==t.currentIntegration.settings.contact_status?e("p",[t._v("\n                                    "+t._s(t.$t("IntegrationSettings.send_double_optin")))]):t._e()],1),t._v(" "),t.currentIntegration.settings.is_enabled?e("div",[e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.saveSettings()}}},[t._v(t._s(t.$t("Save Settings"))+"\n                                ")]),t._v(" "),e("p",{staticStyle:{"margin-top":"30px"}},[t._v("or "),e("span",{staticStyle:{cursor:"pointer","text-decoration":"underline"},on:{click:function(e){return t.syncData(!0)}}},[t._v(t._s(t.$t("click here")))]),t._v("\n                                    "+t._s(t.$t("to re-sync the data again")))]),t._v(" "),e("p",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.$t("If you want to disable auto-syncing"))+" "),e("span",{staticStyle:{cursor:"pointer","text-decoration":"underline"},on:{click:function(e){return t.disableSync()}}},[t._v(t._s(t.$t("click here")))])])],1):e("div",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.syncData(!0)}}},[t._v("\n                                    "+t._s(t.currentIntegration.sync_button)+"\n                                ")]),t._v(" "),e("p",[t._v("\n                                    "+t._s(t.$t("IntegrationSettings.sync_desc"))+"\n                                    "+t._s(t.currentIntegration.title))])],1),t._v(" "),e("p",[t._v(t._s(t.$t("WP_CLI_Help"))+" "),e("a",{attrs:{target:"_blank",href:"https://fluentcrm.com/docs/wp-cli-commands/"}},[t._v(t._s(t.$t("Read CLI Documentation")))])])],1)],1)]):t._e()])]:t.loading?t._e():e("div",{staticClass:"fc_integrations_list"},[e("div",{staticClass:"fluentcrm_header",staticStyle:{padding:"0px 15px"}},[e("h3",[t._v(t._s(t.$t("Integrations")))])]),t._v(" "),e("div",{staticClass:"fluentcrm_pad_around"},[e("p",[t._v(t._s(t.$t("fluentcrtm_integrations_with_all_of_plugins"))+" "),e("a",{attrs:{rel:"noopener noffollow",href:"https://fluentcrm.com?utm_source=dashboard&utm_medium=plugin&utm_campaign=pro&utm_id=wp"}},[t._v(t._s(t.$t("pro version of FluentCRM")))])]),t._v(" "),e("h4",[t._v(t._s(t.$t("ECOMMERCE INTEGRATION:")))]),t._v(" "),e("ul",[e("li",[e("b",[t._v(t._s(t.$t("WooCommerce Integration:")))]),t._v(" "+t._s(t.$t("IntegrationSettings.woo_desc"))+"\n                    ")]),t._v(" "),e("li",[e("b",[t._v(t._s(t.$t("EDD Integration:")))]),t._v(" "+t._s(t.$t("edd_integration_instruction"))+"\n                    ")])]),t._v(" "),e("h4",[t._v(t._s(t.$t("LMS INTEGRATION:")))]),t._v(" "),e("ul",[e("li",[e("b",[t._v(t._s(t.$t("LifterLMS:")))]),t._v(" "+t._s(t.$t("lifterlms_integration_instruction"))+"\n                    ")]),t._v(" "),e("li",[e("b",[t._v(t._s(t.$t("LearnDash Integration:")))]),t._v(" "+t._s(t.$t("learndash_integration_instruction"))+"\n                    ")]),t._v(" "),e("li",[e("b",[t._v(t._s(t.$t("TutorLMS Integration:")))]),t._v(" "+t._s(t.$t("tutorlms_integration_instruction"))+"\n                    ")])]),t._v(" "),e("h4",[t._v(t._s(t.$t("MEMBERSHIP INTEGRATION:")))]),t._v(" "),e("ul",[e("li",[t._v(t._s(t.$t("Paid Membership Pro integration.")))]),t._v(" "),e("li",[t._v(t._s(t.$t("MemberPress.")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Wishlist Members.")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Restrict Content Pro Integration")))]),t._v(" "),e("li",[t._v(t._s(t.$t("WPFusion Integration")))])]),t._v(" "),e("h4",[t._v(t._s(t.$t("Form INTEGRATION:")))]),t._v(" "),e("ul",[e("li",[t._v(t._s(t.$t("Fluent Forms Integration")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Elementor Pro Form Integration")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Divi Bloom Integration")))]),t._v(" "),e("li",[t._v(t._s(t.$t("ThriveArchitect")))])]),t._v(" "),e("h4",[t._v(t._s(t.$t("Page Builder INTEGRATIONS:")))]),t._v(" "),e("ul",[e("li",[t._v(t._s(t.$t("ThriveThemes integration")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Divi Themes")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Elementor Page Builder")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Gutenberg / WordPress Editor Conditional Blocks")))]),t._v(" "),e("li",[t._v(t._s(t.$t("Oxygen Builder Integration")))])])])])],2)])},[],!1,null,null,null).exports;function mr(t){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mr(t)}function fr(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function hr(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=mr(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const gr=e({name:"ExperimentalFeaturesSettings",components:{GenericPromo:Te},data:function(){return{btnFromLoading:!1,loading:!1,settings:{},settings_loaded:!1,campaigns:[],campaignLoading:!1,searchQuery:"",statuses:[{key:"all",label:this.$t("All")},{key:"draft",label:this.$t("Draft")},{key:"pending",label:this.$t("Pending")},{key:"archived",label:this.$t("Archived")},{key:"incomplete",label:this.$t("Incomplete")},{key:"purged",label:this.$t("Purged")},{key:"processing",label:this.$t("Processing")},{key:"pending-scheduled",label:this.$t("Scheduled (pending)")},{key:"scheduled",label:this.$t("Scheduled")}]}},methods:{save:function(){var t=this;this.btnFromLoading=!0,this.$post("setting/experiments",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?fr(Object(i),!0).forEach(function(e){hr(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):fr(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},this.settings)).then(function(e){t.$notify.success({title:t.$t("Great!"),message:e.message,offset:19}),setTimeout(function(){window.location.reload()},500)}).finally(function(){t.btnFromLoading=!1})},fetchSettings:function(){var t=this;this.loading=!0,this.$get("setting/experiments").then(function(e){t.settings=e.settings}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1,t.settings_loaded=!0})},fetchCampaign:function(t){var e=this;this.campaignLoading=!0,this.searchQuery=t,this.$get("campaigns",{searchBy:this.searchQuery}).then(function(t){e.campaignLoading=!1,e.campaigns=t.campaigns.data}).catch(function(t){console.log(t)})}},mounted:function(){this.fetchSettings(),this.fetchCampaign(""),this.changeTitle(this.$t("Experimental Settings"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Advanced Features Settings")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("el-button",{attrs:{type:"success",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.save}},[t._v(t._s(t.$t("Update Settings"))+"\n                ")])],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around"},[e("p",[t._v(t._s(t.$t("Features_Enable_Or_Disable")))]),t._v(" "),e("el-form",{attrs:{model:t.settings,"label-position":"top"}},[e("table",{staticClass:"form-table"},[e("tr",{attrs:{valign:"top"}},[e("th",[t._v("\n                            "+t._s(t.$t("Quick Contact Navigation"))+"\n                            "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("h3",[t._v(t._s(t.$t("Quick Contact Navigation")))]),t._v(" "),e("p",[t._v("\n                                        "+t._s(t.$t("Quick_Nav_Enable_Help"))+"\n                                    ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("td",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.quick_contact_navigation,callback:function(e){t.$set(t.settings,"quick_contact_navigation",e)},expression:"settings.quick_contact_navigation"}},[t._v("\n                                "+t._s(t.$t("Enable Quick Contact Navigation"))+"\n                            ")])],1)]),t._v(" "),e("tr",{attrs:{valign:"top"}},[e("th",[t._v("\n                            "+t._s(t.$t("Campaign Archives"))+"\n                            "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("h3",[t._v(t._s(t.$t("Campaign Archives on Frontend")))]),t._v(" "),e("p",[t._v("\n                                        "+t._s(t.$t("Email_Camp_Enable_Help"))+"\n                                    ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("td",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.campaign_archive,callback:function(e){t.$set(t.settings,"campaign_archive",e)},expression:"settings.campaign_archive"}},[t._v("\n                                "+t._s(t.$t("Enable Campaign Archive Frontend Feature"))+"\n                            ")]),t._v(" "),"yes"==t.settings.campaign_archive?e("div",{staticClass:"settings-section fluentcrm_databox"},[e("h3",{staticStyle:{margin:"0 0 10px"}},[t._v(t._s(t.$t("Campaign Archive Settings")))]),t._v(" "),e("hr"),t._v(" "),e("el-form-item",{attrs:{label:t.$t("List_Campaigns_Label")}},[e("el-input",{attrs:{placeholder:"Campaign Search Keyword",type:"text"},model:{value:t.settings.campaign_search,callback:function(e){t.$set(t.settings,"campaign_search",e)},expression:"settings.campaign_search"}}),t._v(" "),e("p",[t._v(t._s(t.$t("List_Campaigns_Help")))])],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Select Campaigns")}},[e("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.campaignLoading,expression:"campaignLoading"}],attrs:{multiple:"",placeholder:t.$t("Select Campaigns"),filterable:"","popper-class":"fc_select_campaigns_popover",remote:!0,clearable:!0,"remote-method":t.fetchCampaign},model:{value:t.settings.campaign_ids,callback:function(e){t.$set(t.settings,"campaign_ids",e)},expression:"settings.campaign_ids"}},t._l(t.campaigns,function(i){return e("el-option",{key:i.id,attrs:{label:i.title,value:i.id}},[t._v("\n                                            "+t._s(i.title)+"\n                                            "),e("span",{class:"badge "+i.status},[t._v(t._s(i.status))])])}),1),t._v(" "),e("p",{staticClass:"help_text"},[t._v(t._s(t.$t("Leave it blank to display all campaigns")))])],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Filter by status")}},[e("el-select",{attrs:{placeholder:t.$t("Filter by status")},model:{value:t.settings.campaign_status,callback:function(e){t.$set(t.settings,"campaign_status",e)},expression:"settings.campaign_status"}},t._l(t.statuses,function(t){return e("el-option",{key:t.key,attrs:{value:t.key,label:t.label}})}),1)],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Max Campaigns to list (max 50)")}},[e("el-input",{attrs:{placeholder:t.$t("Campaign Search Keyword"),min:1,max:50,type:"number"},model:{value:t.settings.campaign_max_number,callback:function(e){t.$set(t.settings,"campaign_max_number",e)},expression:"settings.campaign_max_number"}})],1),t._v(" "),e("el-form-item",[e("p",[t._v(t._s(t.$t("Campaign_Shortcode_Help")))]),t._v(" "),t.has_campaign_pro?[e("textarea",{staticStyle:{width:"100%",background:"#ecf5ff",height:"40px"},attrs:{readonly:!0}},[t._v("[fluent_crm_campaign_archives]")]),t._v(" "),e("p",[t._v("You can use multiple email campaign archives with the following shortcode: "),e("b",[t._v("[fluent_crm_campaign_archives ids=1101,5,1100,1072 status=all search=Summer limit=50]")]),t._v(". If the parameters "),e("b",[t._v("ids, status, search,")]),t._v(" or "),e("b",[t._v("limit")]),t._v(" are missing, the values from the global campaign archive settings will be used.")])]:e("div",[e("h2",{staticClass:"text-align-center"},[t._v(t._s(t.$t("Campaign_Feature_Note")))]),t._v(" "),e("generic-promo")],1)],2)],1):t._e()],1)]),t._v(" "),e("tr",{attrs:{valign:"top"}},[e("th",[t._v("\n                            "+t._s(t.$t("Date & Time Format"))+"\n                            "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",[t._v("\n                                        "+t._s(t.$t("Date_And_Time_Format_Label"))+"\n                                    ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("td",[e("el-radio-group",{model:{value:t.settings.classic_date_time,callback:function(e){t.$set(t.settings,"classic_date_time",e)},expression:"settings.classic_date_time"}},[e("el-radio",{attrs:{label:"no"}},[t._v(t._s(t.$t("Date Time difference (EG: 2 hours ago)")))]),t._v(" "),e("el-radio",{attrs:{label:"yes"}},[t._v(t._s(t.$t("WordPress Default")))])],1)],1)]),t._v(" "),e("tr",{attrs:{valign:"top"}},[e("th",[t._v("\n                            "+t._s(t.$t("Navigation"))+"\n                            "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",[t._v("\n                                        "+t._s(t.$t("Fluent_CRM_Nav_Hide"))+"\n                                    ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("td",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.full_navigation,callback:function(e){t.$set(t.settings,"full_navigation",e)},expression:"settings.full_navigation"}},[t._v("\n                                "+t._s(t.$t("Fluent_CRM_Exp"))+"\n                            ")])],1)]),t._v(" "),e("tr",{attrs:{valign:"top"}},[e("th",[t._v("\n                            "+t._s(t.$t("Company Module"))+"\n                            "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",[t._v("\n                                        "+t._s(t.$t("Company_Module_Help_1"))+"\n                                    ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("td",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.company_module,callback:function(e){t.$set(t.settings,"company_module",e)},expression:"settings.company_module"}},[t._v("\n                                "+t._s(t.$t("Enable Company Module for Contacts"))+"\n                            ")]),t._v(" "),"yes"==t.settings.company_module?e("div",{staticClass:"settings-section fluentcrm_databox"},[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.company_auto_logo,callback:function(e){t.$set(t.settings,"company_auto_logo",e)},expression:"settings.company_auto_logo"}},[t._v("\n                                    "+t._s(t.$t("Company_Logo_Auto_Download_Help"))+"\n                                    "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",[t._v("\n                                                "+t._s(t.$t("Company_Logo_Auto_Download_Note"))+"\n                                            ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1)],1):t._e()],1)]),t._v(" "),e("tr",{attrs:{valign:"top"}},[e("th",[t._v("\n                            "+t._s(t.$t("Disable AI?"))+"\n                            "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",[t._v("\n                                        Enable or Disable AI integration on Visual Email Builder\n                                    ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("td",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.disable_visual_ai,callback:function(e){t.$set(t.settings,"disable_visual_ai",e)},expression:"settings.disable_visual_ai"}},[t._v("\n                                "+t._s(t.$t("Disable AI Integration on Visual Email Builder"))+"\n                            ")])],1)]),t._v(" "),e("tr",{attrs:{valign:"top"}},[e("th",[t._v("\n                            "+t._s(t.$t("Multi-Threading Email Sending?"))+"\n                            "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",[t._v("\n                                        Enable or Disable Multi-Thread Email Sending. If you enable this, FluentCRM try to send emails in parallel.\n                                    ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("td",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.multi_threading_emails,callback:function(e){t.$set(t.settings,"multi_threading_emails",e)},expression:"settings.multi_threading_emails"}},[t._v("\n                                "+t._s(t.$t("Enable Multi-Threading Email Sending"))+"\n                            ")]),t._v(" "),"yes"==t.settings.multi_threading_emails?e("div",{staticClass:"settings-section fluentcrm_databox"},[e("p",{staticStyle:{"margin-bottom":"10px"}},[e("b",[t._v("Please make sure your server met the following requirements for optimal performance.")])]),t._v(" "),e("ul",{staticClass:"fc_list"},[e("li",[t._v("Multiple CPU on the server.")]),t._v(" "),e("li",[t._v("At least 4GB Server Memory (RAM).")]),t._v(" "),e("li",[t._v("Rate limit of your SMTP/Email Sending Service is within the max email sending rate set in email settings.")]),t._v(" "),e("li",[t._v("Max Execution Time of PHP value should within within 50-60 seconds.")]),t._v(" "),e("li",[t._v("If you already have a good sending speed. Do not enable this feature.")])])]):t._e()],1)]),t._v(" "),e("tr",{attrs:{valign:"top"}},[e("th",[t._v("\n                            "+t._s(t.$t("System Log"))+"\n                            "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",[t._v("\n                                        Enable to log FluentCRM system events. Useful for debugging purpose.\n                                    ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("td",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.settings.system_logs,callback:function(e){t.$set(t.settings,"system_logs",e)},expression:"settings.system_logs"}},[t._v("\n                                "+t._s(t.$t("__ENABLE_SYSTEM_LOG"))+"\n                            ")])],1)])]),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"success",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.save}},[t._v(t._s(t.$t("Update Settings"))+"\n                    ")])],1)],1)],1)])},[],!1,null,null,null).exports;const vr=e({name:"SystemLogs",components:{Pagination:m},data:function(){return{logs:[],pagination:{total:0,current_page:1,per_page:20},loading:!1,search:""}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("setting/system-logs",{per_page:this.pagination.per_page,page:this.pagination.current_page,search:this.search}).then(function(e){t.logs=e.logs.data,t.pagination.total=e.logs.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},deleteAll:function(){var t=this;this.loading=!0,this.$get("setting/system-logs/reset").then(function(e){t.$notify.success(e.message),t.logs=[],t.pagination.total=0}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header d-flex items-center justify-between"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("System Logs")))]),t._v(" "),e("p",[t._v("Logs from FluentCRM System Events - Useful for debugging purpose")])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("div",{staticClass:"fc_right_search"},[e("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.deleteAll}},[t._v("\n                "+t._s(t.$t("Reset"))+"\n            ")]),t._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:t.fetch}},[t._v("\n                "+t._s(t.$t("Refresh"))+"\n            ")])],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_pad_b_20",staticStyle:{position:"relative"}},[t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):e("el-table",{staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Found"),stripe:"",data:t.logs}},[e("el-table-column",{attrs:{label:t.$t("ID"),prop:"id",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Title"),width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.title)+"\n                ")]}}])}),t._v(" "),e("el-table-column",{attrs:{"min-width":"250",label:t.$t("Description")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{domProps:{innerHTML:t._s(i.row.description)}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Date Time"),width:"190",property:"created_at"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.created_at?[e("i",{staticClass:"el-icon-time"}),t._v("\n                        "+t._s(i.row.created_at)+"\n                    ")]:t._e()]}}])})],1),t._v(" "),e("pagination",{attrs:{pagination:t.pagination,layout:"total, sizes, prev, pager, next, jumper"},on:{fetch:t.fetch}})],1)])},[],!1,null,null,null).exports;const br=e({name:"ActivityLogs",components:{Pagination:m,Confirm:d},data:function(){return{logs:[],pagination:{total:0,current_page:1,per_page:20},loading:!1,search:"",confirm_message:"<b>"+this.$t("Are you sure to reset?")+"</b><br />"+this.$t("reset_all_activity_logs_notice")}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("setting/activity-logs",{per_page:this.pagination.per_page,page:this.pagination.current_page,search:this.search}).then(function(e){t.logs=e.logs.data,t.pagination.total=e.logs.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},resetActivityLogs:function(){var t=this;this.loading=!0,this.$get("setting/activity-logs/reset").then(function(e){t.$notify.success(e.message),t.logs=[]}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header d-flex items-center justify-between"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Activity Logs")))]),t._v(" "),e("p",[t._v(t._s(t.$t("activity_log_info_2")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("div",{staticClass:"fc_right_search"},[e("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),t.logs.length?e("confirm",{attrs:{width:"200",placement:"left-start",message:t.confirm_message},on:{yes:function(e){return t.resetActivityLogs()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{margin:"0px 10px"},attrs:{slot:"reference",type:"danger",size:"mini",icon:"el-icon-delete"},slot:"reference"},[t._v(t._s(t.$t("Reset Logs"))+"\n                ")])],1):t._e(),t._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:t.fetch}},[t._v("\n                "+t._s(t.$t("Refresh"))+"\n            ")])],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_pad_b_20",staticStyle:{position:"relative"}},[t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):e("el-table",{staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Found"),stripe:"",data:t.logs}},[e("el-table-column",{attrs:{label:t.$t("#"),width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.$index+1)+"\n                ")]}}])}),t._v(" "),e("el-table-column",{attrs:{"min-width":"250",label:t.$t("Activity By")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{domProps:{innerHTML:t._s(i.row.activity_by_email)}})]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"200",label:t.$t("Action")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{domProps:{innerHTML:t._s(i.row.action)}})]}}])}),t._v(" "),e("el-table-column",{attrs:{"min-width":"280",label:t.$t("Description")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{domProps:{innerHTML:t._s(i.row.description)}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Date Time"),width:"190",property:"created_at"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.created_at?[e("i",{staticClass:"el-icon-time"}),t._v("\n                        "+t._s(i.row.created_at)+"\n                    ")]:t._e()]}}])})],1),t._v(" "),e("pagination",{attrs:{pagination:t.pagination,layout:"total, sizes, prev, pager, next, jumper"},on:{fetch:t.fetch}})],1)])},[],!1,null,null,null).exports;const yr=e({name:"CreateLink",components:{FormBuilder:Gt},props:["editing_row","item_mode"],data:function(){return{link:{title:"",notes:"",target_url:"",actions:{tags:[],lists:[]},detach_actions:{tags:[],lists:[]}},creating:!1,fields:{title:{type:"input-text",placeholder:this.$t("Link Title"),label:this.$t("Link Title"),help:this.$t("Your link title so you do not forget it")},target_url:{type:"input-text",data_type:"url",placeholder:this.$t("Your target URL"),label:this.$t("Target Full URL"),help:this.$t("Insert a valid url that this link will direct to")},actions:{type:"input-tag-list",label:"",wrapper_class:"fc_group_field_half",tag_label:this.$t("Apply Tags when clicked (optional)"),tag_help:this.$t("CreateLink.Action.tag_help"),list_label:this.$t("Apply Lists when clicked (optional)"),list_help:this.$t("CreateLink.Action.list_help")},detach_actions:{type:"input-tag-list",label:"",wrapper_class:"fc_group_field_half",tag_label:this.$t("Remove Tags when clicked (optional)"),tag_help:this.$t("CreateLink.Detach_Action.tag_help"),list_label:this.$t("Remove Lists when clicked (optional)"),list_help:this.$t("CreateLink.Detach_Action.list_help")},auto_login:{type:"inline-checkbox",true_label:"yes",false_label:"no",checkbox_label:this.$t("Auto_Login_Label"),label:this.$t("Auto Login"),help:this.$t("__CreateLinkAutoHelp")},notes:{type:"input-text",placeholder:this.$t("Your URL Note"),data_type:"textarea",label:this.$t("Note (Optional)"),help:this.$t("Feel free to add a note regarding this URL")}},link_created:!1}},methods:{createLink:function(){var t=this;this.creating=!0,this.$post("smart-links",{link:this.link}).then(function(e){t.$emit("linkCreated",e.link),t.$notify.success(e.message),t.link.short_url=e.link.short_url,t.link_created=!0}).catch(function(e){t.handleError(e)}).finally(function(){t.creating=!1})},updateLink:function(){var t=this;this.$put("smart-links/".concat(this.link.id),{link:this.link}).then(function(e){t.$emit("linkCreated",e.link),t.$notify.success(e.message),t.link_created=!0}).catch(function(e){t.handleError(e)}).finally(function(){t.creating=!1})}},created:function(){"edit"==this.item_mode&&(this.link=JSON.parse(JSON.stringify(this.editing_row)))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_create_link_wrapper"},[t.link_created?e("div",{staticClass:"fc_narrow_box fc_white_inverse text-align-center"},[e("p",[t._v("\n            "+t._s(t.$t("_Cr_Please_utfsuawau"))+"\n        ")]),t._v(" "),e("el-input",{attrs:{type:"textarea",readonly:!0},model:{value:t.link.short_url,callback:function(e){t.$set(t.link,"short_url",e)},expression:"link.short_url"}})],1):e("div",[e("form-builder",{attrs:{fields:t.fields,formData:t.link}}),t._v(" "),"create"==t.item_mode?e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createLink()}}},[t._v("\n            "+t._s(t.$t("Create Smart Link"))+"\n        ")]):e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.updateLink()}}},[t._v("\n            "+t._s(t.$t("Update Smart Link"))+"\n        ")])],1)])},[],!1,null,null,null).exports;var wr=e({name:"ItemCopier",props:["url"],methods:{gotoUrl:function(){}}},function(){var t=this,e=t._self._c;return e("el-input",{attrs:{size:"mini",readonly:!0},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}},[e("a",{attrs:{slot:"append",href:t.url,target:"_blank",rel:"nofollow"},slot:"append"},[e("i",{staticClass:"el-icon-link"})])])},[],!1,null,null,null);const Cr=e({name:"actionLinks",components:{InlineDoc:b,CreateLink:yr,Confirm:d,Pagination:m,ItemCopier:Ue,UrlGoTo:wr.exports,ListTagItems:Da},data:function(){return{links:[],loading:!1,activating:!1,require_activation:!1,create_link_modal:!1,pagination:{total:0,per_page:20,current_page:1},search:"",editingRow:!1,edit_modal:!1}},methods:{fetchLinks:function(){var t=this;this.loading=!0,this.$get("smart-links",{per_page:this.pagination.per_page,page:this.pagination.current_page,search:this.search}).then(function(e){t.links=e.action_links.data,t.pagination.total=e.action_links.total}).catch(function(e){"disabled"===e.status?t.require_activation=!0:t.handleError(e)}).finally(function(){t.loading=!1})},activateModule:function(){var t=this;this.activating=!0,this.$post("smart-links/activate").then(function(e){t.require_activation=!1,t.create_link_modal=!0,window.fcAdmin.has_smart_link=!0}).catch(function(e){t.handleError(e)}).finally(function(){t.activating=!1})},remove:function(t){var e=this;this.$del("smart-links/".concat(t.id)).then(function(t){e.$notify.success(t.message),e.fetchLinks()}).catch(function(t){e.handleError(t)})},showEdit:function(t){t.detach_actions||(t.detach_actions={tags:[],lists:[]}),this.editingRow=t,this.edit_modal=!0}},created:function(){this.has_campaign_pro&&this.fetchLinks(),this.changeTitle(this.$t("Smart Links"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v("\n                "+t._s(t.$t("Smart Links"))+"\n                "),e("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[e("p",[t._v("\n                        "+t._s(t.$t("Lin_SmartLinks_aytta"))+"\n                    ")]),t._v(" "),e("el-button",{attrs:{slot:"reference",type:"text",icon:"el-icon-info"},slot:"reference"})],1)],1)]),t._v(" "),t.has_campaign_pro?e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("div",{staticClass:"fc-search-box",staticStyle:{"margin-right":"10px"}},[e("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetchLinks},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchLinks.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetchLinks},slot:"append"})],1)],1),t._v(" "),e("el-button",{attrs:{disabled:t.require_activation,type:"primary",size:"small"},on:{click:function(e){t.create_link_modal=!0}}},[t._v("\n                "+t._s(t.$t("Add New Smart Link"))+"\n            ")]),t._v(" "),e("inline-doc",{attrs:{doc_id:11634}})],1):t._e()]),t._v(" "),t.has_campaign_pro?e("div",{staticClass:"fluentcrm_pad_around fluentcrm_smart_links_wrap",staticStyle:{position:"relative"}},[t.require_activation?e("div",{staticClass:"fc_narrow_box fc_white text-align-center"},[e("h1",[t._v(t._s(t.$t("SmartLinks")))]),t._v(" "),e("p",[t._v("\n                "+t._s(t.$t("Lin_SmartLinks_aytta"))+"\n            ")]),t._v(" "),e("el-button",{attrs:{type:"success",size:"large"},on:{click:function(e){return t.activateModule()}}},[t._v("\n                "+t._s(t.$t("Start Using SmartLinks"))+"\n            ")])],1):e("div",{staticClass:"settings-section settings-general"},[t.loading?e("div",{staticClass:"fc_loading_bar",attrs:{slot:"before_contacts_table"},slot:"before_contacts_table"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:8}}):e("el-table",{attrs:{"empty-text":t.$t("No Data Found"),stripe:"",data:t.links}},[e("el-table-column",{staticClass:"hello",attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticStyle:{"padding-left":"60px"}},[e("h4",[t._v(t._s(t.$t("Attached Tags and Lists")))]),t._v(" "),e("p",[e("list-tag-items",{attrs:{item_type:"tags",items:i.row.actions.tags}}),t._v(" "),e("list-tag-items",{attrs:{item_type:"lists",items:i.row.actions.lists}})],1),t._v(" "),i.row.detach_actions?[e("h4",[t._v(t._s(t.$t("Detach Tags and Lists")))]),t._v(" "),e("p",[e("list-tag-items",{attrs:{item_type:"tags",items:i.row.detach_actions.tags}}),t._v(" "),e("list-tag-items",{attrs:{item_type:"lists",items:i.row.detach_actions.lists}})],1)]:t._e(),t._v(" "),e("p",[e("b",[t._v(t._s(t.$t("Auto Login"))+":")]),t._v(" "+t._s(i.row.auto_login))]),t._v(" "),e("p",[e("b",[t._v(t._s(t.$t("Subscriber Clicks"))+":")]),t._v(" "+t._s(i.row.contact_clicks))]),t._v(" "),e("p",[e("b",[t._v(t._s(t.$t("Public User Clicks"))+":")]),t._v(" "+t._s(i.row.all_clicks-i.row.contact_clicks))]),t._v(" "),i.row.notes?[e("h4",[t._v(t._s(t.$t("Note"))+":")]),t._v(" "),e("p",{domProps:{innerHTML:t._s(i.row.notes)}})]:t._e()],2)]}}],null,!1,997939855)}),t._v(" "),e("el-table-column",{attrs:{"min-width":170,width:"170",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"title"},[t._v("\n                            "+t._s(i.row.title)+"\n                        ")])]}}],null,!1,4172638071)}),t._v(" "),e("el-table-column",{attrs:{"min-width":270,label:t.$t("Smart URL")},scopedSlots:t._u([{key:"default",fn:function(t){return[e("item-copier",{attrs:{text:t.row.short_url}})]}}],null,!1,4064985928)}),t._v(" "),e("el-table-column",{attrs:{"min-width":270,label:t.$t("Target URL")},scopedSlots:t._u([{key:"default",fn:function(t){return[e("url-go-to",{attrs:{url:t.row.target_url}})]}}],null,!1,2251746495)}),t._v(" "),e("el-table-column",{attrs:{width:"100",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.showEdit(i.row)}}}),t._v(" "),e("confirm",{on:{yes:function(e){return t.remove(i.row)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)]}}],null,!1,1109812164)})],1),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetchLinks}})],1)]):e("div",{staticClass:"fluentcrm_pad_around"},[e("div",{staticClass:"fc_narrow_box fc_white text-align-center"},[e("h1",[t._v(t._s(t.$t("SmartLinks")))]),t._v(" "),e("p",[t._v("\n                "+t._s(t.$t("Lin_SmartLinks_aytta"))+"\n            ")]),t._v(" "),e("p",[t._v("\n                "+t._s(t.$t("Lin_This_iapfPdtFPta"))+"\n            ")]),t._v(" "),e("div",{},[e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                    "+t._s(t.$t("Get FluentCRM Pro"))+"\n                ")])])])]),t._v(" "),e("el-dialog",{attrs:{"close-on-click-modal":!1,width:"60%","append-to-body":!0,visible:t.create_link_modal,title:t.$t("Create a new Smart link")},on:{"update:visible":function(e){t.create_link_modal=e}}},[t.create_link_modal?e("create-link",{attrs:{item_mode:"create"},on:{linkCreated:t.fetchLinks}}):t._e()],1),t._v(" "),e("el-dialog",{attrs:{"close-on-click-modal":!1,width:"60%","append-to-body":!0,visible:t.edit_modal,title:t.$t("Edit Smart link")},on:{"update:visible":function(e){t.edit_modal=e}}},[t.edit_modal?e("create-link",{attrs:{item_mode:"edit",editing_row:t.editingRow},on:{linkCreated:t.fetchLinks}}):t._e()],1)],1)},[],!1,null,null,null).exports;function $r(t){return Array.isArray?Array.isArray(t):"[object Array]"===Pr(t)}function kr(t){return"string"==typeof t}function xr(t){return"number"==typeof t}function Sr(t){return!0===t||!1===t||function(t){return Ar(t)&&null!==t}(t)&&"[object Boolean]"==Pr(t)}function Ar(t){return"object"==typeof t}function Er(t){return null!=t}function Tr(t){return!t.trim().length}function Pr(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Or=Object.prototype.hasOwnProperty;class Dr{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach(t=>{let i=Fr(t);this._keys.push(i),this._keyMap[i.id]=i,e+=i.weight}),this._keys.forEach(t=>{t.weight/=e})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Fr(t){let e=null,i=null,n=null,s=1,a=null;if(kr(t)||$r(t))n=t,e=jr(t),i=Ir(t);else{if(!Or.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const o=t.name;if(n=o,Or.call(t,"weight")&&(s=t.weight,s<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(o));e=jr(o),i=Ir(o),a=t.getFn}return{path:e,id:i,weight:s,src:n,getFn:a}}function jr(t){return $r(t)?t:t.split(".")}function Ir(t){return $r(t)?t.join("."):t}var Lr={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let i=[],n=!1;const s=(t,e,a)=>{if(Er(t))if(e[a]){const o=t[e[a]];if(!Er(o))return;if(a===e.length-1&&(kr(o)||xr(o)||Sr(o)))i.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(o));else if($r(o)){n=!0;for(let t=0,i=o.length;t<i;t+=1)s(o[t],e,a+1)}else e.length&&s(o,e,a+1)}else i.push(t)};return s(t,kr(e)?e.split("."):e,0),n?i:i[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const Nr=/[^ ]+/g;class qr{constructor({getFn:t=Lr.getFn,fieldNormWeight:e=Lr.fieldNormWeight}={}){this.norm=function(t=1,e=3){const i=new Map,n=Math.pow(10,e);return{get(e){const s=e.match(Nr).length;if(i.has(s))return i.get(s);const a=1/Math.pow(s,.5*t),o=parseFloat(Math.round(a*n)/n);return i.set(s,o),o},clear(){i.clear()}}}(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((t,e)=>{this._keysMap[t.id]=e})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,kr(this.docs[0])?this.docs.forEach((t,e)=>{this._addString(t,e)}):this.docs.forEach((t,e)=>{this._addObject(t,e)}),this.norm.clear())}add(t){const e=this.size();kr(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,i=this.size();e<i;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!Er(t)||Tr(t))return;let i={v:t,i:e,n:this.norm.get(t)};this.records.push(i)}_addObject(t,e){let i={i:e,$:{}};this.keys.forEach((e,n)=>{let s=e.getFn?e.getFn(t):this.getFn(t,e.path);if(Er(s))if($r(s)){let t=[];const e=[{nestedArrIndex:-1,value:s}];for(;e.length;){const{nestedArrIndex:i,value:n}=e.pop();if(Er(n))if(kr(n)&&!Tr(n)){let e={v:n,i,n:this.norm.get(n)};t.push(e)}else $r(n)&&n.forEach((t,i)=>{e.push({nestedArrIndex:i,value:t})})}i.$[n]=t}else if(kr(s)&&!Tr(s)){let t={v:s,n:this.norm.get(s)};i.$[n]=t}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function Mr(t,e,{getFn:i=Lr.getFn,fieldNormWeight:n=Lr.fieldNormWeight}={}){const s=new qr({getFn:i,fieldNormWeight:n});return s.setKeys(t.map(Fr)),s.setSources(e),s.create(),s}function zr(t,{errors:e=0,currentLocation:i=0,expectedLocation:n=0,distance:s=Lr.distance,ignoreLocation:a=Lr.ignoreLocation}={}){const o=e/t.length;if(a)return o;const r=Math.abs(n-i);return s?o+r/s:r?1:o}const Rr=32;function Br(t,e,i,{location:n=Lr.location,distance:s=Lr.distance,threshold:a=Lr.threshold,findAllMatches:o=Lr.findAllMatches,minMatchCharLength:r=Lr.minMatchCharLength,includeMatches:l=Lr.includeMatches,ignoreLocation:c=Lr.ignoreLocation}={}){if(e.length>Rr)throw new Error(`Pattern length exceeds max of ${Rr}.`);const u=e.length,d=t.length,_=Math.max(0,Math.min(n,d));let p=a,m=_;const f=r>1||l,h=f?Array(d):[];let g;for(;(g=t.indexOf(e,m))>-1;){let t=zr(e,{currentLocation:g,expectedLocation:_,distance:s,ignoreLocation:c});if(p=Math.min(t,p),m=g+u,f){let t=0;for(;t<u;)h[g+t]=1,t+=1}}m=-1;let v=[],b=1,y=u+d;const w=1<<u-1;for(let n=0;n<u;n+=1){let a=0,r=y;for(;a<r;){zr(e,{errors:n,currentLocation:_+r,expectedLocation:_,distance:s,ignoreLocation:c})<=p?a=r:y=r,r=Math.floor((y-a)/2+a)}y=r;let l=Math.max(1,_-r+1),g=o?d:Math.min(_+r,d)+u,C=Array(g+2);C[g+1]=(1<<n)-1;for(let a=g;a>=l;a-=1){let o=a-1,r=i[t.charAt(o)];if(f&&(h[o]=+!!r),C[a]=(C[a+1]<<1|1)&r,n&&(C[a]|=(v[a+1]|v[a])<<1|1|v[a+1]),C[a]&w&&(b=zr(e,{errors:n,currentLocation:o,expectedLocation:_,distance:s,ignoreLocation:c}),b<=p)){if(p=b,m=o,m<=_)break;l=Math.max(1,2*_-m)}}if(zr(e,{errors:n+1,currentLocation:_,expectedLocation:_,distance:s,ignoreLocation:c})>p)break;v=C}const C={isMatch:m>=0,score:Math.max(.001,b)};if(f){const t=function(t=[],e=Lr.minMatchCharLength){let i=[],n=-1,s=-1,a=0;for(let o=t.length;a<o;a+=1){let o=t[a];o&&-1===n?n=a:o||-1===n||(s=a-1,s-n+1>=e&&i.push([n,s]),n=-1)}return t[a-1]&&a-n>=e&&i.push([n,a-1]),i}(h,r);t.length?l&&(C.indices=t):C.isMatch=!1}return C}function Vr(t){let e={};for(let i=0,n=t.length;i<n;i+=1){const s=t.charAt(i);e[s]=(e[s]||0)|1<<n-i-1}return e}const Ur=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Hr{constructor(t,{location:e=Lr.location,threshold:i=Lr.threshold,distance:n=Lr.distance,includeMatches:s=Lr.includeMatches,findAllMatches:a=Lr.findAllMatches,minMatchCharLength:o=Lr.minMatchCharLength,isCaseSensitive:r=Lr.isCaseSensitive,ignoreDiacritics:l=Lr.ignoreDiacritics,ignoreLocation:c=Lr.ignoreLocation}={}){if(this.options={location:e,threshold:i,distance:n,includeMatches:s,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:r,ignoreDiacritics:l,ignoreLocation:c},t=r?t:t.toLowerCase(),t=l?Ur(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const u=(t,e)=>{this.chunks.push({pattern:t,alphabet:Vr(t),startIndex:e})},d=this.pattern.length;if(d>Rr){let t=0;const e=d%Rr,i=d-e;for(;t<i;)u(this.pattern.substr(t,Rr),t),t+=Rr;if(e){const t=d-Rr;u(this.pattern.substr(t),t)}}else u(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,ignoreDiacritics:i,includeMatches:n}=this.options;if(t=e?t:t.toLowerCase(),t=i?Ur(t):t,this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:s,distance:a,threshold:o,findAllMatches:r,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],d=0,_=!1;this.chunks.forEach(({pattern:e,alphabet:i,startIndex:p})=>{const{isMatch:m,score:f,indices:h}=Br(t,e,i,{location:s+p,distance:a,threshold:o,findAllMatches:r,minMatchCharLength:l,includeMatches:n,ignoreLocation:c});m&&(_=!0),d+=f,m&&h&&(u=[...u,...h])});let p={isMatch:_,score:_?d/this.chunks.length:1};return _&&n&&(p.indices=u),p}}class Gr{constructor(t){this.pattern=t}static isMultiMatch(t){return Wr(t,this.multiRegex)}static isSingleMatch(t){return Wr(t,this.singleRegex)}search(){}}function Wr(t,e){const i=t.match(e);return i?i[1]:null}class Kr extends Gr{constructor(t,{location:e=Lr.location,threshold:i=Lr.threshold,distance:n=Lr.distance,includeMatches:s=Lr.includeMatches,findAllMatches:a=Lr.findAllMatches,minMatchCharLength:o=Lr.minMatchCharLength,isCaseSensitive:r=Lr.isCaseSensitive,ignoreDiacritics:l=Lr.ignoreDiacritics,ignoreLocation:c=Lr.ignoreLocation}={}){super(t),this._bitapSearch=new Hr(t,{location:e,threshold:i,distance:n,includeMatches:s,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:r,ignoreDiacritics:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Jr extends Gr{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,i=0;const n=[],s=this.pattern.length;for(;(e=t.indexOf(this.pattern,i))>-1;)i=e+s,n.push([e,i-1]);const a=!!n.length;return{isMatch:a,score:a?0:1,indices:n}}}const Yr=[class extends Gr{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Jr,class extends Gr{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends Gr{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends Gr{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends Gr{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends Gr{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},Kr],Qr=Yr.length,Zr=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const Xr=new Set([Kr.type,Jr.type]);class tl{constructor(t,{isCaseSensitive:e=Lr.isCaseSensitive,ignoreDiacritics:i=Lr.ignoreDiacritics,includeMatches:n=Lr.includeMatches,minMatchCharLength:s=Lr.minMatchCharLength,ignoreLocation:a=Lr.ignoreLocation,findAllMatches:o=Lr.findAllMatches,location:r=Lr.location,threshold:l=Lr.threshold,distance:c=Lr.distance}={}){this.query=null,this.options={isCaseSensitive:e,ignoreDiacritics:i,includeMatches:n,minMatchCharLength:s,findAllMatches:o,ignoreLocation:a,location:r,threshold:l,distance:c},t=e?t:t.toLowerCase(),t=i?Ur(t):t,this.pattern=t,this.query=function(t,e={}){return t.split("|").map(t=>{let i=t.trim().split(Zr).filter(t=>t&&!!t.trim()),n=[];for(let t=0,s=i.length;t<s;t+=1){const s=i[t];let a=!1,o=-1;for(;!a&&++o<Qr;){const t=Yr[o];let i=t.isMultiMatch(s);i&&(n.push(new t(i,e)),a=!0)}if(!a)for(o=-1;++o<Qr;){const t=Yr[o];let i=t.isSingleMatch(s);if(i){n.push(new t(i,e));break}}}return n})}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:n,ignoreDiacritics:s}=this.options;t=n?t:t.toLowerCase(),t=s?Ur(t):t;let a=0,o=[],r=0;for(let n=0,s=e.length;n<s;n+=1){const s=e[n];o.length=0,a=0;for(let e=0,n=s.length;e<n;e+=1){const n=s[e],{isMatch:l,indices:c,score:u}=n.search(t);if(!l){r=0,a=0,o.length=0;break}if(a+=1,r+=u,i){const t=n.constructor.type;Xr.has(t)?o=[...o,...c]:o.push(c)}}if(a){let t={isMatch:!0,score:r/a};return i&&(t.indices=o),t}}return{isMatch:!1,score:1}}}const el=[];function il(t,e){for(let i=0,n=el.length;i<n;i+=1){let n=el[i];if(n.condition(t,e))return new n(t,e)}return new Hr(t,e)}const nl="$and",sl="$or",al="$path",ol="$val",rl=t=>!(!t[nl]&&!t[sl]),ll=t=>({[nl]:Object.keys(t).map(e=>({[e]:t[e]}))});function cl(t,e,{auto:i=!0}={}){const n=t=>{let s=Object.keys(t);const a=(t=>!!t[al])(t);if(!a&&s.length>1&&!rl(t))return n(ll(t));if((t=>!$r(t)&&Ar(t)&&!rl(t))(t)){const n=a?t[al]:s[0],o=a?t[ol]:t[n];if(!kr(o))throw new Error((t=>`Invalid value for key ${t}`)(n));const r={keyId:Ir(n),pattern:o};return i&&(r.searcher=il(o,e)),r}let o={children:[],operator:s[0]};return s.forEach(e=>{const i=t[e];$r(i)&&i.forEach(t=>{o.children.push(n(t))})}),o};return rl(t)||(t=ll(t)),n(t)}function ul(t,e){const i=t.matches;e.matches=[],Er(i)&&i.forEach(t=>{if(!Er(t.indices)||!t.indices.length)return;const{indices:i,value:n}=t;let s={indices:i,value:n};t.key&&(s.key=t.key.src),t.idx>-1&&(s.refIndex=t.idx),e.matches.push(s)})}function dl(t,e){e.score=t.score}class _l{constructor(t,e={},i){this.options={...Lr,...e},this.options.useExtendedSearch,this._keyStore=new Dr(this.options.keys),this.setCollection(t,i)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof qr))throw new Error("Incorrect 'index' type");this._myIndex=e||Mr(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Er(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const e=[];for(let i=0,n=this._docs.length;i<n;i+=1){const s=this._docs[i];t(s,i)&&(this.removeAt(i),i-=1,n-=1,e.push(s))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:i,includeScore:n,shouldSort:s,sortFn:a,ignoreFieldNorm:o}=this.options;let r=kr(t)?kr(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=Lr.ignoreFieldNorm}){t.forEach(t=>{let i=1;t.matches.forEach(({key:t,norm:n,score:s})=>{const a=t?t.weight:null;i*=Math.pow(0===s&&a?Number.EPSILON:s,(a||1)*(e?1:n))}),t.score=i})}(r,{ignoreFieldNorm:o}),s&&r.sort(a),xr(e)&&e>-1&&(r=r.slice(0,e)),function(t,e,{includeMatches:i=Lr.includeMatches,includeScore:n=Lr.includeScore}={}){const s=[];return i&&s.push(ul),n&&s.push(dl),t.map(t=>{const{idx:i}=t,n={item:e[i],refIndex:i};return s.length&&s.forEach(e=>{e(t,n)}),n})}(r,this._docs,{includeMatches:i,includeScore:n})}_searchStringList(t){const e=il(t,this.options),{records:i}=this._myIndex,n=[];return i.forEach(({v:t,i,n:s})=>{if(!Er(t))return;const{isMatch:a,score:o,indices:r}=e.searchIn(t);a&&n.push({item:t,idx:i,matches:[{score:o,value:t,norm:s,indices:r}]})}),n}_searchLogical(t){const e=cl(t,this.options),i=(t,e,n)=>{if(!t.children){const{keyId:i,searcher:s}=t,a=this._findMatches({key:this._keyStore.get(i),value:this._myIndex.getValueForItemAtKeyId(e,i),searcher:s});return a&&a.length?[{idx:n,item:e,matches:a}]:[]}const s=[];for(let a=0,o=t.children.length;a<o;a+=1){const o=t.children[a],r=i(o,e,n);if(r.length)s.push(...r);else if(t.operator===nl)return[]}return s},n=this._myIndex.records,s={},a=[];return n.forEach(({$:t,i:n})=>{if(Er(t)){let o=i(e,t,n);o.length&&(s[n]||(s[n]={idx:n,item:t,matches:[]},a.push(s[n])),o.forEach(({matches:t})=>{s[n].matches.push(...t)}))}}),a}_searchObjectList(t){const e=il(t,this.options),{keys:i,records:n}=this._myIndex,s=[];return n.forEach(({$:t,i:n})=>{if(!Er(t))return;let a=[];i.forEach((i,n)=>{a.push(...this._findMatches({key:i,value:t[n],searcher:e}))}),a.length&&s.push({idx:n,item:t,matches:a})}),s}_findMatches({key:t,value:e,searcher:i}){if(!Er(e))return[];let n=[];if($r(e))e.forEach(({v:e,i:s,n:a})=>{if(!Er(e))return;const{isMatch:o,score:r,indices:l}=i.searchIn(e);o&&n.push({score:r,key:t,value:e,idx:s,norm:a,indices:l})});else{const{v:s,n:a}=e,{isMatch:o,score:r,indices:l}=i.searchIn(s);o&&n.push({score:r,key:t,value:s,norm:a,indices:l})}return n}}_l.version="7.1.0",_l.createIndex=Mr,_l.parseIndex=function(t,{getFn:e=Lr.getFn,fieldNormWeight:i=Lr.fieldNormWeight}={}){const{keys:n,records:s}=t,a=new qr({getFn:e,fieldNormWeight:i});return a.setKeys(n),a.setIndexRecords(s),a},_l.config=Lr,_l.parseQuery=cl,function(...t){el.push(...t)}(tl);const pl=e({name:"Documentations",data:function(){return{search:"",fetching:!1,docs:[],utl_param:"?utm_source=wp&utm_medium=doc&utm_campaign=doc",reading_doc_status:!1,reading_doc:{},fuseDocs:null}},computed:{doc_cats:function(){if(!this.docs.length)return[];var t={item_3:{label:this.$t("Getting Started With Audience"),docs:[]},item_7:{label:this.$t("Grow Your Audience"),docs:[]},item_4:{label:this.$t("Email Campaign"),docs:[]},item_5:{label:this.$t("Automation Funnels"),docs:[]}};return this.each(this.docs,function(e){var i="item_"+e.category.value;t[i]||(t[i]={label:e.category.label,cat_id:e.category.value,docs:[]}),t[i].docs.push(e)}),Object.values(t)},search_items:function(){return this.search&&this.docs.length?this.fuseDocs.search(this.search).map(function(t){return t.item}):[]}},methods:{openSearch:function(){},fetchDocs:function(){var t=this;this.fetching=!0,this.$get("docs").then(function(e){t.docs=e.docs,t.fuseDocs=new _l(t.docs,{keys:["title","content"]})}).catch(function(e){t.handleError(e)}).finally(function(){t.fetching=!1})},readDoc:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];document.getElementById("doc_search_end").scrollIntoView(),this.reading_doc={doc:t,docIndex:e,catIndex:i,isSearch:n},this.reading_doc_status=!0},goToNext:function(){if(this.reading_doc.isSearch)return this.search_items[this.reading_doc.docIndex+1]?this.readDoc(this.search_items[this.reading_doc.docIndex+1],this.reading_doc.docIndex+1,0,!0):(this.reading_doc_status=!1,this.search=""),!1;this.doc_cats[this.reading_doc.catIndex].docs[this.reading_doc.docIndex+1]?this.readDoc(this.doc_cats[this.reading_doc.catIndex].docs[this.reading_doc.docIndex+1],this.reading_doc.docIndex+1,this.reading_doc.catIndex):this.doc_cats[this.reading_doc.catIndex+1]&&this.doc_cats[this.reading_doc.catIndex+1].docs[0]?this.readDoc(this.doc_cats[this.reading_doc.catIndex+1].docs[0],0,this.reading_doc.catIndex+1):this.reading_doc_status=!1}},mounted:function(){this.fetchDocs()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_docs"},[e("div",{staticClass:"fc_doc_header text-align-center",staticStyle:{"max-width":"800px",margin:"50px auto",padding:"0px 20px"}},[e("h1",[t._v(t._s(t.$t("How can we help you?")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Please view the"))+" "),e("a",{attrs:{href:"https://fluentcrm.com/docs"}},[t._v(t._s(t.$t("documentation")))]),t._v("\n            "+t._s(t.$t("still_cant_find_the_answer"))+" "),e("a",{attrs:{href:"https://wpmanageninja.com/support-tickets/"}},[t._v(t._s(t.$t("open a support ticket")))]),t._v("\n            "+t._s(t.$t("and we will be happy to answer your questions and assist you with any problems."))+".\n            "),e("br"),t._v("Want to discuss something with users like you? "),t._m(0)]),t._v(" "),e("el-input",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],attrs:{clearable:"",disabled:t.fetching,size:"large",placeholder:t.$t("Search Type and Enter...")},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.reading_doc_status=!1}},slot:"append"})],1),t._v(" "),t.search?e("div",{staticClass:"search_result"},[e("div",{staticClass:"fc_doc_items"},[e("div",{staticClass:"fc_doc_header"},[e("h3",[t._v(t._s(t.$t("Search Results for:"))+" "+t._s(t.search))])]),t._v(" "),e("div",{staticClass:"fc_doc_lists"},[t.search_items.length?e("ul",t._l(t.search_items,function(i,n){return e("li",{key:i.id},[e("span",{domProps:{innerHTML:t._s(i.title)},on:{click:function(e){return t.readDoc(i,n,0,!0)}}}),t._v(" "),e("a",{staticStyle:{float:"right"},attrs:{target:"_blank",href:i.link+t.utl_param}},[e("span",{staticClass:"dashicons dashicons-external"})])])}),0):e("p",[t._v(t._s(t.$t("Sorry! No docs found")))])])])]):t._e()],1),t._v(" "),e("div",{attrs:{id:"doc_search_end"}}),t._v(" "),t.reading_doc_status?e("div",[e("div",{staticClass:"doc_read"},[e("h1",[e("a",{attrs:{target:"_blank",rel:"noopener",href:t.reading_doc.doc.link+t.utl_param},domProps:{innerHTML:t._s(t.reading_doc.doc.title)}})]),t._v(" "),e("div",{staticClass:"simple_dic"},[t._v("\n                You are reading the simple version of this document. "),e("a",{attrs:{target:"_blank",rel:"noopener",href:t.reading_doc.doc.link+t.utl_param}},[t._v("To read the doc on our site click here")]),t._v(". To view all doc index "),e("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.reading_doc_status=!1}}},[e("b",[t._v("click here")])])]),t._v(" "),e("div",{staticClass:"reading_doc_body",domProps:{innerHTML:t._s(t.reading_doc.doc.content)}}),t._v(" "),e("div",{staticClass:"doc_navigation"},[e("el-button",{on:{click:function(e){return t.goToNext()}}},[t._v("Read Next Documentation")])],1)])]):e("div",{staticClass:"doc_body"},t._l(t.doc_cats,function(i,n){return e("div",{key:n,staticClass:"doc_each_items"},[e("div",{staticClass:"fc_doc_items"},[e("div",{staticClass:"fc_doc_header"},[e("h3",[t._v(t._s(i.label))])]),t._v(" "),e("div",{staticClass:"fc_doc_lists"},[e("ul",t._l(i.docs,function(i,s){return e("li",{key:i.id},[e("span",{domProps:{innerHTML:t._s(i.title)},on:{click:function(e){return t.readDoc(i,s,n)}}}),t._v(" "),e("a",{staticStyle:{float:"right"},attrs:{rel:"noopener",target:"_blank",href:i.link+t.utl_param}},[e("span",{staticClass:"dashicons dashicons-external"})])])}),0)])])])}),0)])},[function(){var t=this._self._c;return t("a",{attrs:{target:"_blank",rel:"noopener",href:"https://www.facebook.com/groups/fluentcrm"}},[t("b",[this._v("Join our facebook community")])])}],!1,null,null,null).exports;function ml(t){return ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ml(t)}function fl(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function hl(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=ml(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=ml(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ml(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const gl=e({name:"Addons",components:{CustomIcon:Pe},data:function(){return{addOns:[],loading:!0,installing:!1,experimental_features:{},saving:!1,campaigns:[],campaignLoading:!1,searchQuery:"",statuses:[{key:"all",label:this.$t("All")},{key:"draft",label:this.$t("Draft")},{key:"pending",label:this.$t("Pending")},{key:"archived",label:this.$t("Archived")},{key:"incomplete",label:this.$t("Incomplete")},{key:"purged",label:this.$t("Purged")},{key:"processing",label:this.$t("Processing")},{key:"pending-scheduled",label:this.$t("Scheduled (pending)")},{key:"scheduled",label:this.$t("Scheduled")}]}},methods:{fetchAddons:function(){var t=this;this.loading=!0,this.$get("docs/addons",{with:["experimental_features"]}).then(function(e){t.addOns=e.addons,t.experimental_features=e.experimental_features}).catch(function(e){t.$handleError(e)}).finally(function(){t.loading=!1})},installPlugin:function(t){var e=this;this.installing=!0,this.$post("setting/install-"+t).then(function(t){t.is_installed?e.$notify.success(t.message):e.$notify.error(e.$t("Sorry, the selected plugins could not be installed")),e.fetchAddons()}).catch(function(t){e.handleError(t)}).finally(function(){e.installing=!1})},saveExperimentalSettings:function(){var t=this;this.saving=!0,this.$post("setting/experiments",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?fl(Object(i),!0).forEach(function(e){hl(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):fl(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},this.experimental_features)).then(function(e){t.$notify.success({title:t.$t("Great!"),message:e.message,offset:19}),setTimeout(function(){window.location.reload()},500)}).finally(function(){t.saving=!1})},fetchCampaign:function(t){var e=this;this.campaignLoading=!0,this.searchQuery=t,this.$get("campaigns",{searchBy:this.searchQuery}).then(function(t){e.campaignLoading=!1,e.campaigns=t.campaigns.data}).catch(function(t){console.log(t)})}},mounted:function(){this.fetchAddons(),this.fetchCampaign(""),this.changeTitle(this.$t("Addons"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_docs",staticStyle:{"max-width":"1000px",margin:"30px auto",padding:"0px 20px"}},[e("div",{staticClass:"addons_wrap"},[t.loading?e("el-skeleton",{staticStyle:{width:"100%"},attrs:{animated:""}},[e("template",{slot:"template"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:24}},[e("el-skeleton",{staticStyle:{background:"white",padding:"15px"},attrs:{rows:5}})],1),t._v(" "),e("el-col",{attrs:{span:24}},[e("el-skeleton",{staticStyle:{background:"white",padding:"15px"},attrs:{rows:5}})],1),t._v(" "),e("el-col",{attrs:{span:24}},[e("el-skeleton",{staticStyle:{background:"white",padding:"15px"},attrs:{rows:5}})],1)],1)],1)],2):[e("div",{staticClass:"fc-advanced-modules-features-wrap"},[e("div",{staticClass:"fc-advanced-module-features-header"},[e("h3",[t._v(t._s(t.$t("Advanced Modules")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Advanced_Feature_And_Integrations_Desc")))])]),t._v(" "),e("div",{staticClass:"fc-advanced-modules-wrap"},[e("div",{staticClass:"fc-advanced-module-box"},[e("div",{staticClass:"fc-advanced-module-header"},[e("div",{staticClass:"icon"},[e("CustomIcon",{attrs:{type:"company"}})],1),t._v(" "),e("div",{staticClass:"right"},[e("h5",[e("span",{staticClass:"text"},[t._v("\n                                    "+t._s(t.$t("Company Module"))+"\n                                    "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[e("div",{staticStyle:{"max-width":"500px"},attrs:{slot:"content"},slot:"content"},[t._v("\n                                            "+t._s(t.$t("Company_Module_Help"))+"\n                                        ")]),t._v(" "),e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("el-switch",{attrs:{"active-value":"yes","inactive-value":"no"},on:{change:function(e){return t.saveExperimentalSettings()}},model:{value:t.experimental_features.company_module,callback:function(e){t.$set(t.experimental_features,"company_module",e)},expression:"experimental_features.company_module"}})],1),t._v(" "),e("p",[t._v(t._s(t.$t("Business Contact Management")))])])]),t._v(" "),e("div",{staticClass:"fc-advanced-module-footer"},[e("div",{staticClass:"fc-advanced-module-footer-top"},[e("span",{staticClass:"fc_addon_installed",class:{disabled:"no"==t.experimental_features.company_module}},[t._v("\n                                "+t._s("yes"==t.experimental_features.company_module?t.$t("Enabled"):t.$t("Disabled"))+"\n                            ")]),t._v(" "),e("el-popover",{staticStyle:{"margin-left":"auto"},attrs:{placement:"top",width:"500",trigger:"click"}},[e("div",[e("h3",[t._v(t._s(t.$t("Company Module Settings")))]),t._v(" "),e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.experimental_features.company_module,callback:function(e){t.$set(t.experimental_features,"company_module",e)},expression:"experimental_features.company_module"}},[t._v("\n                                            "+t._s(t.$t("Enable Company Module for Contacts"))+"\n                                        ")]),t._v(" "),"yes"==t.experimental_features.company_module?e("div",{staticStyle:{"margin-top":"15px"}},[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.experimental_features.company_auto_logo,callback:function(e){t.$set(t.experimental_features,"company_auto_logo",e)},expression:"experimental_features.company_auto_logo"}},[t._v("\n                                                "+t._s(t.$t("Company_Logo_Auto_Download_Help"))+"\n                                                "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",[t._v("\n                                                            "+t._s(t.$t("Company_Logo_Auto_Download_Note"))+"\n                                                        ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1)],1):t._e(),t._v(" "),e("div",{staticStyle:{"margin-top":"15px"}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{disabled:t.saving,type:"success",size:"small"},on:{click:function(e){return t.saveExperimentalSettings()}}},[t._v(t._s(t.$t("Save Settings")))])],1)],1),t._v(" "),e("el-button",{staticClass:"fc-learn-more-btn",attrs:{slot:"reference",size:"small"},slot:"reference"},[t._v(t._s(t.$t("Settings")))])],1)],1)])]),t._v(" "),e("div",{staticClass:"fc-advanced-module-box"},[e("div",{staticClass:"fc-advanced-module-header"},[e("div",{staticClass:"icon"},[e("CustomIcon",{attrs:{type:"campaign"}})],1),t._v(" "),e("div",{staticClass:"right"},[e("h5",[e("span",{staticClass:"text"},[t._v("\n                                    "+t._s(t.$t("Campaign Archives"))+"\n                                    "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[e("div",{staticStyle:{"max-width":"500px"},attrs:{slot:"content"},slot:"content"},[t._v("\n                                            "+t._s(t.$t("Email_Camp_Enable_Help"))+"\n                                        ")]),t._v(" "),e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("el-switch",{attrs:{"active-value":"yes","inactive-value":"no"},on:{change:function(e){return t.saveExperimentalSettings()}},model:{value:t.experimental_features.campaign_archive,callback:function(e){t.$set(t.experimental_features,"campaign_archive",e)},expression:"experimental_features.campaign_archive"}})],1),t._v(" "),e("p",[t._v(t._s(t.$t("Frontend Showcase with Shortcode")))])])]),t._v(" "),e("div",{staticClass:"fc-advanced-module-footer"},[e("div",{staticClass:"fc-advanced-module-footer-top"},[e("span",{staticClass:"fc_addon_installed",class:{disabled:"no"==t.experimental_features.campaign_archive}},[t._v("\n                                    "+t._s("yes"==t.experimental_features.campaign_archive?t.$t("Enabled"):t.$t("Disabled"))+"\n                                ")]),t._v(" "),e("el-popover",{staticStyle:{"margin-left":"auto"},attrs:{placement:"left",width:"500",trigger:"click","popper-class":"fc_addons_campaign_popover"}},[e("div",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.experimental_features.campaign_archive,callback:function(e){t.$set(t.experimental_features,"campaign_archive",e)},expression:"experimental_features.campaign_archive"}},[t._v("\n                                            "+t._s(t.$t("Enable Campaign Archive Frontend Feature"))+"\n                                        ")]),t._v(" "),"yes"==t.experimental_features.campaign_archive?e("el-form",{attrs:{"label-position":"top",model:t.experimental_features}},[e("h4",{staticStyle:{margin:"10px 0 10px"}},[t._v(t._s(t.$t("Campaign Archive Settings")))]),t._v(" "),e("hr"),t._v(" "),e("el-form-item",{attrs:{label:t.$t("List_Campaigns_Label")}},[e("el-input",{attrs:{placeholder:t.$t("Campaign Search Keyword"),type:"text"},model:{value:t.experimental_features.campaign_search,callback:function(e){t.$set(t.experimental_features,"campaign_search",e)},expression:"experimental_features.campaign_search"}}),t._v(" "),e("p",{staticStyle:{margin:"0"}},[t._v(t._s(t.$t("List_Campaigns_Help")))])],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Select Campaigns")}},[e("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.campaignLoading,expression:"campaignLoading"}],attrs:{multiple:"",placeholder:t.$t("Select Campaigns"),filterable:"","popper-class":"fc_select_campaigns_popover",remote:!0,clearable:!0,"remote-method":t.fetchCampaign},model:{value:t.experimental_features.campaign_ids,callback:function(e){t.$set(t.experimental_features,"campaign_ids",e)},expression:"experimental_features.campaign_ids"}},t._l(t.campaigns,function(i){return e("el-option",{key:i.id,attrs:{label:i.title,value:i.id}},[t._v("\n                                                        "+t._s(i.title)+"\n                                                        "),e("span",{class:"badge "+i.status},[t._v(t._s(i.status))])])}),1),t._v(" "),e("p",{staticClass:"help_text",staticStyle:{margin:"0"}},[t._v(t._s(t.$t("Leave it blank to display all campaigns")))])],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Filter by status")}},[e("el-select",{attrs:{placeholder:t.$t("Filter by status")},model:{value:t.experimental_features.campaign_status,callback:function(e){t.$set(t.experimental_features,"campaign_status",e)},expression:"experimental_features.campaign_status"}},t._l(t.statuses,function(t){return e("el-option",{key:t.key,attrs:{value:t.key,label:t.label}})}),1)],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Max Campaigns to list (max 50)")}},[e("el-input",{attrs:{placeholder:t.$t("Campaign Search Keyword"),min:1,max:50,type:"number"},model:{value:t.experimental_features.campaign_max_number,callback:function(e){t.$set(t.experimental_features,"campaign_max_number",e)},expression:"experimental_features.campaign_max_number"}})],1),t._v(" "),e("el-form-item",[e("p",{staticStyle:{margin:"0"}},[t._v(t._s(t.$t("Campaign_Shortcode_Help")))]),t._v(" "),t.has_campaign_pro?e("textarea",{staticStyle:{width:"100%",background:"#ecf5ff",height:"40px"},attrs:{readonly:!0}},[t._v("[fluent_crm_campaign_archives]")]):e("div",[e("h2",{staticClass:"text-align-center"},[t._v(t._s(t.$t("Campaign_Feature_Note")))])])])],1):t._e(),t._v(" "),e("div",{staticStyle:{"margin-top":"15px"}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{disabled:t.saving||!t.has_campaign_pro,type:"success",size:"small"},on:{click:function(e){return t.saveExperimentalSettings()}}},[t._v(t._s(t.$t("Save Settings")))])],1)],1),t._v(" "),e("el-button",{staticClass:"fc-learn-more-btn",attrs:{slot:"reference",size:"small"},slot:"reference"},[t._v(t._s(t.$t("Settings")))])],1)],1)])]),t._v(" "),e("div",{staticClass:"fc-advanced-module-box"},[e("div",{staticClass:"fc-advanced-module-header"},[e("div",{staticClass:"icon"},[e("CustomIcon",{attrs:{type:"event-tracking"}})],1),t._v(" "),e("div",{staticClass:"right"},[e("h5",[e("span",{staticClass:"text"},[t._v("\n                                    "+t._s(t.$t("Event Tracking Module"))+"\n                                    "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[e("div",{staticStyle:{"max-width":"500px"},attrs:{slot:"content"},slot:"content"},[t._v("\n                                            "+t._s(t.$t("Event_Tracking_Module_Help"))+"\n                                        ")]),t._v(" "),e("i",{staticClass:"el-icon el-icon-info"})])],1),t._v(" "),e("el-switch",{attrs:{"active-value":"yes","inactive-value":"no"},on:{change:function(e){return t.saveExperimentalSettings()}},model:{value:t.experimental_features.event_tracking,callback:function(e){t.$set(t.experimental_features,"event_tracking",e)},expression:"experimental_features.event_tracking"}})],1),t._v(" "),e("p",[t._v(t._s(t.$t("Flexible Contact Behavior Analytic")))])])]),t._v(" "),e("div",{staticClass:"fc-advanced-module-footer"},[e("div",{staticClass:"fc-advanced-module-footer-top"},[e("span",{staticClass:"fc_addon_installed",class:{disabled:"no"==t.experimental_features.event_tracking}},[t._v("\n                                "+t._s("yes"==t.experimental_features.event_tracking?t.$t("Enabled"):t.$t("Disabled"))+"\n                            ")]),t._v(" "),e("a",{staticClass:"fc-learn-more-btn",attrs:{href:"https://fluentcrm.com/docs/event-tracking-automation/",target:"_blank"}},[t._v(t._s(t.$t("Learn More")))])])])])])]),t._v(" "),e("div",{staticClass:"fc-advanced-modules-features-wrap fc-recommended-plugins-wrap"},[e("div",{staticClass:"fc-advanced-module-features-header"},[e("h3",[t._v(t._s(t.$t("Recommended Plugins and Addons")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Plugins that will extend your FluentCrm Functionalities")))])]),t._v(" "),e("div",{staticClass:"fc-advanced-modules-wrap"},[t.has_campaign_pro?t._e():e("div",{staticClass:"fc-advanced-module-box"},[e("div",{staticClass:"fc-advanced-module-header"},[e("div",{staticClass:"right"},[e("h5",[e("span",{staticClass:"text"},[t._v("\n                                        "+t._s(t.$t("Addons.fluentcrm_pro.title"))+"\n                                    ")])]),t._v(" "),e("p",[t._v(t._s(t.$t("with_fluentcrm_pro_integrate_with_other_plugins")))])])]),t._v(" "),e("div",{staticClass:"fc-advanced-module-footer"},[e("a",{staticClass:"fc-pro-btn el-button el-button--danger",attrs:{target:"_blank",href:"https://fluentcrm.com?utm_source=dashboard&utm_medium=plugin&utm_campaign=pro&utm_id=wp"}},[t._v(t._s(t.$t("Get FluentCRM Pro Now")))])])]),t._v(" "),t._l(t.addOns,function(i,n){return e("div",{key:n,staticClass:"fc-advanced-module-box"},[e("div",{staticClass:"fc-advanced-module-header"},[e("div",{staticClass:"icon"},[e("img",{attrs:{src:i.logo,alt:i.title}})]),t._v(" "),e("div",{staticClass:"right"},[e("h5",[e("a",{staticClass:"text",attrs:{href:i.learn_more_url,target:"_blank"}},[t._v("\n                                        "+t._s(i.title)+" "),e("i",{staticClass:"dashicons dashicons-external"})])]),t._v(" "),e("p",[t._v(t._s(i.description))])])]),t._v(" "),e("div",{staticClass:"fc-advanced-module-footer"},[i.is_installed?e("div",{staticClass:"fc-advanced-module-footer-top"},[e("span",{staticClass:"fc_addon_installed"},[t._v("\n                                "+t._s(t.$t("Installed"))+"\n                            ")]),t._v(" "),e("a",{staticClass:"el-button el-button--default fc-learn-more-btn",attrs:{href:i.settings_url}},[t._v(t._s(t.$t("View Settings")))])]):e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],staticClass:"btn-full-width",attrs:{disabled:t.saving,type:"primary"},on:{click:function(e){return t.installPlugin(n)}}},[t._v(t._s(i.action_text)+"\n                            ")])],1)])})],2)])]],2)])},[],!1,null,null,null).exports;const vl=e({components:{GrowthChart:{extends:window.VueChartJs.Line,mixins:[window.VueChartJs.mixins.reactiveProp],props:["chart_options"],mounted:function(){this.renderChart(this.chartData,this.chart_options)}}},name:"ChartBuilder",props:["currency_sign","data_sets"],data:function(){return{chartData:!1,maxCumulativeValue:0,chartOptions:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,autoSkip:!0,maxTicksLimit:10}}]},drawBorder:!1,layout:{padding:{left:20,right:20,top:20,bottom:20}}}}},methods:{setupChartItemsX:function(){var t=this,e={labels:[],datasets:[]},i=0;this.each(this.data_sets,function(n,s){var a={label:n.label,data:[],backgroundColor:n.backgroundColor,borderColor:n.borderColor,type:"line",yAxisID:n.id,fill:n.fill};t.each(n.data,function(t,n){a.data.push(t),parseInt(t)>i&&(i=parseInt(t)),0==s&&e.labels.push(n)}),e.datasets.push(a)}),i>1e4?i=1e3*Math.ceil(i/1e3):i>500?i=100*Math.ceil(i/100):i+=10,this.maxCumulativeValue=i;var n=[];this.each(this.data_sets,function(e,i){n.push({id:e.id,type:"linear",position:0==i?"left":"right",gridLines:{drawOnChartArea:0==i},ticks:{beginAtZero:!0,max:t.maxCumulativeValue,userCallback:function(t,e,i){if(Math.floor(t)===t)return t},callback:function(t,e,i){return this.currency_sign+" "+t}}})}),this.chartOptions.scales.yAxes=n,this.setToolTip(),this.chartData=e},setToolTip:function(){var t=this;this.chartOptions.tooltips={enabled:!1,custom:function(e){var i=document.getElementById("fc_reports_tooltip");if(i||((i=document.createElement("div")).id="fc_reports_tooltip",i.innerHTML="<table></table>",document.body.appendChild(i)),0!==e.opacity){if(i.classList.remove("above","below","no-transform"),e.yAlign?i.classList.add(e.yAlign):i.classList.add("no-transform"),e.dataPoints[0]){var n=e.dataPoints[0].index,s=[];if(t.each(t.data_sets,function(t,e){s.unshift({title:Object.keys(t.data)[n],value:parseInt(Object.values(t.data)[n]),color:t.borderColor})}),e.body){var a="<tbody>";s.forEach(function(e,i){a+='<tr><td style="color: '+e.color+';"><b>'+e.title+"</b>: "+t.currency_sign+t.formatMoney(e.value,0)+"</td></tr>"}),a+="</tbody>",i.querySelector("table").innerHTML=a}var o=this._chart.canvas.getBoundingClientRect();i.style.opacity=1,i.style.position="absolute",i.style.left=o.left+window.pageXOffset+e.caretX+"px",i.style.top=o.top+window.pageYOffset+e.caretY+"px",i.style.fontFamily=e._bodyFontFamily,i.style.fontSize=e.bodyFontSize+"px",i.style.fontStyle=e._bodyFontStyle,i.style.padding=e.yPadding+"px "+e.xPadding+"px",i.style.pointerEvents="none"}}else i.style.opacity=0}}}},mounted:function(){this.setupChartItemsX()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_chart"},[t.chartData?e("growth-chart",{attrs:{chart_options:t.chartOptions,currency_sign:t.currency_sign,"chart-data":t.chartData}}):t._e()],1)},[],!1,null,null,null).exports;var bl=e({name:"RangePicker",props:["range_settings"],data:function(){return{pickerOptions:{shortcuts:it},compare_type_options:{previous_period:this.$t("Previous Period"),previous_month:this.$t("Previous Month"),previous_quarter:this.$t("Previous Quarter"),previous_year:this.$t("Previous Year"),custom:this.$t("Custom"),no_comparison:this.$t("No Comparison")}}},methods:{onChange:function(t){this.$emit("changed")}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_range_picker"},[e("el-date-picker",{staticClass:"mr-5",attrs:{type:"daterange",align:"center",size:"large","value-format":"yyyy-MM-dd",format:"dd, MMM","unlink-panels":"","range-separator":t.$t("To"),"start-placeholder":t.$t("Start date"),"end-placeholder":t.$t("End date"),"picker-options":t.pickerOptions},on:{change:function(e){return t.onChange()}},model:{value:t.range_settings.date_range,callback:function(e){t.$set(t.range_settings,"date_range",e)},expression:"range_settings.date_range"}}),t._v(" "),e("span",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(t.$t("compare to")))]),t._v(" "),e("el-select",{staticClass:"ml-5",staticStyle:{display:"inline-block","max-width":"140px"},attrs:{"popper-class":"fc_dropdown",size:"large",placeholder:t.$t("Select")},on:{change:function(e){return t.onChange()}},model:{value:t.range_settings.compare_type,callback:function(e){t.$set(t.range_settings,"compare_type",e)},expression:"range_settings.compare_type"}},t._l(t.compare_type_options,function(t,i){return e("el-option",{key:i,attrs:{label:t,value:i}})}),1),t._v(" "),"custom"==t.range_settings.compare_type?e("el-date-picker",{staticClass:"fc_range_picker_custom_date",attrs:{align:"right",size:"large","value-format":"yyyy-MM-dd",format:"dd, MMM yyyy",placeholder:t.$t("Compare Date")},on:{change:function(e){return t.onChange()}},model:{value:t.range_settings.compare_date,callback:function(e){t.$set(t.range_settings,"compare_date",e)},expression:"range_settings.compare_date"}}):t._e()],1)},[],!1,null,null,null);function yl(t){return yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yl(t)}function wl(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Cl(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?wl(Object(i),!0).forEach(function(e){$l(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):wl(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function $l(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=yl(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=yl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yl(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var kl=e({name:"CommerceGrowth",props:["provider","overview"],components:{ChartBuilder:vl,AjaxSelector:jt,RangePicker:bl.exports},data:function(){return{data_sets:[],range_settings:{date_range:[],compare_date:"",compare_type:"previous_period"},report_type:"product_growth",sub_type:"all",product_id:"",fetching:!1,app_ready:!1,sub_type_value:"",subtype_period_value:""}},computed:{current_report:function(){return this.overview.supports[this.report_type]},tabular_items:function(){var t=this,e=[],i={},n=[],s=[];this.each(this.data_sets,function(a,o){i[o]=0,s.push(a.label);var r=0;t.each(a.data,function(t,s){e[r]||(e[r]=[]),n[r]||(n[r]=[]),e[r].push(Number(t)),-1===n[r].indexOf(s)&&n[r].push(s),i[o]+=Number(t),r++})});var a=2==Object.values(i).length,o="";return a&&(o=this.getChangeHtml(i)),{headers:s,items:e,totals:i,labels:n,totalChange:o,is_compare:a,prefix:this.current_report.is_money?this.overview.currency_sign:""}}},watch:{product_id:function(){this.fetch()},report_type:function(){this.fetch()},sub_type:function(t){this.sub_type_value=""},sub_type_value:function(){this.fetch()}},methods:{fetch:function(){var t=this;this.fetching=!0,this.app_ready=!1,this.$get("commerce-reports/"+this.provider+"/report",Cl(Cl({item_id:this.product_id},this.range_settings),{},{report_type:this.report_type,sub_type:this.sub_type,sub_type_value:this.sub_type_value})).then(function(e){t.range_settings.date_range=e.current_range,t.data_sets=e.data_sets}).catch(function(e){t.handleError(e)}).finally(function(){t.fetching=!1,t.app_ready=!0})},getChangeHtml:function(t){if(t.length<2||!t[1])return"n/a";var e=(t[0]-t[1])/t[1]*100;return e>0?'<span class="fc_positive">'+e.toFixed(2)+"%</span>":'<span class="fc_negative">'+e.toFixed(2)+"%</span>"}},mounted:function(){this.fetch()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_card_widget"},[e("ul",{staticClass:"fc_settings_sub_menu fc_report_sub_menu"},t._l(t.overview.supports,function(i,n){return e("li",{key:n,class:{fc_active:n==t.report_type},on:{click:function(e){t.report_type=n}}},[t._v("\n                "+t._s(i.title)+"\n            ")])}),0),t._v(" "),e("div",{staticClass:"fc_report_sub_header fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[t.current_report.has_product?e("span",{staticStyle:{width:"200px",display:"inline-block"}},[e("ajax-selector",{attrs:{field:{placeholder:t.$t("All Products"),is_multiple:!1,option_key:"product_selector_"+t.provider,size:"large",clearable:!0}},model:{value:t.product_id,callback:function(e){t.product_id=e},expression:"product_id"}})],1):t._e()]),t._v(" "),e("div",{staticClass:"fluentcrm-actions"},[e("range-picker",{attrs:{range_settings:t.range_settings},on:{changed:function(e){return t.fetch()}}})],1)]),t._v(" "),t.current_report.sub_types?e("div",{staticClass:"fc_report_sub_header2"},[e("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                "+t._s(t.$t("Report Type:"))+"\n            ")]),t._v(" "),e("div",{staticClass:"fc_report_sub_header2_contents"},[e("div",{staticClass:"fc_report_sub_type"},[e("el-select",{attrs:{placeholder:"Select",size:"small"},model:{value:t.sub_type,callback:function(e){t.sub_type=e},expression:"sub_type"}},t._l(t.current_report.sub_types,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),"all"!=t.sub_type?e("div",{staticClass:"fc_sub_type_value"},[e("el-select",{attrs:{filterable:"",placeholder:"Select",size:"small"},model:{value:t.sub_type_value,callback:function(e){t.sub_type_value=e},expression:"sub_type_value"}},t._l("tag"==t.sub_type?t.current_report.tags:t.current_report.lists,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1):t._e()])]):t._e(),t._v(" "),t.app_ready?e("div",{staticClass:"fluentcrm_body"},[e("chart-builder",{attrs:{data_sets:t.data_sets,currency_sign:t.current_report.is_money?t.overview.currency_sign:""}}),t._v(" "),2==t.range_settings.date_range.length?e("p",{staticStyle:{"text-align":"center"}},[t._v("\n                "+t._s(t.$t("Showing stats from"))+" "+t._s(t.range_settings.date_range[0])+" to "+t._s(t.range_settings.date_range[1])+"\n            ")]):t._e(),t._v(" "),e("div",{staticClass:"fluentcrm_history_table_wrap"},[e("table",{staticClass:"table fc_horizontal_table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("Date")))]),t._v(" "),t._l(t.tabular_items.headers,function(i){return e("th",{key:i},[e("span",{domProps:{innerHTML:t._s(i)}})])}),t._v(" "),t.tabular_items.is_compare?e("th",[t._v(t._s(t.$t("Change"))+" (%)")]):t._e()],2)]),t._v(" "),e("tbody",t._l(t.tabular_items.labels,function(i,n){return e("tr",{key:n},[e("td",[t._v(t._s(i.join(" vs ")))]),t._v(" "),t._l(t.tabular_items.items[n],function(i,n){return e("td",{key:n},[e("span",{domProps:{innerHTML:t._s(t.tabular_items.prefix)}}),t._v(t._s(t.formatMoney(i))+"\n                        ")])}),t._v(" "),t.tabular_items.is_compare?[e("td",{domProps:{innerHTML:t._s(t.getChangeHtml(t.tabular_items.items[n]))}})]:t._e()],2)}),0),t._v(" "),e("tfoot",[e("tr",[e("td"),t._v(" "),t._l(t.tabular_items.totals,function(i,n){return e("th",{key:n},[e("span",{domProps:{innerHTML:t._s(t.tabular_items.prefix)}}),t._v(t._s(t.formatMoney(i))+"\n                        ")])}),t._v(" "),t.tabular_items.is_compare?e("th",{domProps:{innerHTML:t._s(t.tabular_items.totalChange)}}):t._e()],2)])])])],1):e("div",{staticClass:"fluentcrm_body"},[e("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{rows:3,animated:""}}),t._v(" "),e("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{rows:6,animated:""}})],1)])},[],!1,null,null,null);var xl=e({name:"CommerceReports",components:{CommerceGrowth:kl.exports},props:["provider"],data:function(){return{loading:!1,overview:!1,loading_top_products:!1,date_range:["",""],pickerOptions:{shortcuts:it}}},methods:{getOverview:function(){var t=this;this.loading=!0,this.$get("commerce-reports/"+this.provider,{with:["top_products"]}).then(function(e){t.overview=e.report}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},getTopProducts:function(){var t=this;this.loading_top_products=!0,this.$get("commerce-reports/"+this.provider,{top_products_only:"yes",date_range:this.date_range}).then(function(e){t.overview.top_products=e.report.top_products}).catch(function(e){t.handleError(e)}).finally(function(){t.loading_top_products=!1})}},mounted:function(){this.getOverview()}},function(){var t=this,e=t._self._c;return e("div",[t.loading?e("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{gutter:30}},[e("el-col",{attrs:{span:18}},[e("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{rows:3,animated:""}}),t._v(" "),e("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{rows:6,animated:""}})],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{animated:""}},[e("template",{slot:"template"},[e("el-skeleton-item",{staticStyle:{width:"100%",height:"40px"},attrs:{variant:"rect"}}),t._v(" "),e("el-skeleton-item",{staticStyle:{width:"100%",height:"40px"},attrs:{variant:"rect"}}),t._v(" "),e("el-skeleton-item",{staticStyle:{width:"50%"},attrs:{variant:"button"}})],1)],2),t._v(" "),e("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{rows:3,animated:""}})],1)],1):t.overview&&t.overview.enabled?e("div",[e("el-row",{class:"fc_advanced_report fc_report_"+t.provider,attrs:{gutter:30}},[e("h3",{staticStyle:{padding:"0 20px 10px"}},[t._v("\n                "+t._s(t.overview.title)+"\n                "),t.overview.title_info?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.overview.title_info,placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})]):t._e()],1),t._v(" "),e("el-col",{staticClass:"fc_report_body",attrs:{sm:24,md:16,lg:18}},[e("div",{staticClass:"fc_card_widgets"},[t._l(t.overview.widgets,function(i,n){return e("div",{key:n,staticClass:"fc_card_widget"},[e("div",{staticClass:"fluentcrm_body"},[i.is_money?[e("span",{domProps:{innerHTML:t._s(t.overview.currency_sign)}}),e("span",{domProps:{innerHTML:t._s(t.formatMoney(i.value))}})]:e("span",{domProps:{innerHTML:t._s(i.value)}})],2),t._v(" "),e("div",{staticClass:"stat_title",domProps:{innerHTML:t._s(i.label)}})])}),t._v(" "),t.overview.store_average?[e("div",{staticClass:"fc_card_widget"},[e("div",{staticClass:"fluentcrm_body"},[e("span",{domProps:{innerHTML:t._s(t.overview.currency_sign)}}),t._v(t._s(t._f("formatMoney")(t.overview.store_average.aov))+"\n                            ")]),t._v(" "),e("div",{staticClass:"stat_title"},[t._v(t._s(t.$t("Average Order Value (AOV)")))])]),t._v(" "),e("div",{staticClass:"fc_card_widget"},[e("div",{staticClass:"fluentcrm_body"},[t._v(t._s(t._f("formatMoney")(t.overview.store_average.aoc)))]),t._v(" "),e("div",{staticClass:"stat_title"},[t._v(t._s(t.$t("Average Order/Customer (AOC)")))])])]:t._e()],2),t._v(" "),e("div",{staticClass:"ns_subscribers_chart"},[e("commerce-growth",{attrs:{overview:t.overview,provider:t.provider}})],1)]),t._v(" "),t.overview.top_products?e("el-col",{attrs:{sm:24,md:8,lg:6}},[e("div",{staticClass:"fc_m_20 fc_quick_links fc_onboarding"},[e("div",{staticClass:"fluentcrm_header",staticStyle:{"justify-content":"space-between"}},[e("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                            "+t._s(t.$t("Top Selling Products"))+"\n                        ")]),t._v(" "),t.overview.has_top_products_filter?e("div",{staticClass:"fluentcrm-actions"},[e("el-popover",{attrs:{placement:"left",width:"400",trigger:"click"}},[e("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,"range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},on:{change:function(e){return t.getTopProducts()}},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}}),t._v(" "),e("el-button",{staticStyle:{padding:"0"},attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-date"},slot:"reference"})],1)],1):t._e()]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_top_products,expression:"loading_top_products"}],staticClass:"fluentcrm_body"},[e("ul",{staticClass:"fc_lined_items fc_top_products"},t._l(t.overview.top_products,function(i){return e("li",{key:i.item_id},[t._v("\n                                "+t._s(i.post_title)+"\n                                x "),e("span",{staticClass:"fc_count_total"},[t._v(t._s(i.count))]),t._v(" "),i.revenue?[t._v(" = "),e("span",{staticClass:"fc_revenue_total"},[e("em",{domProps:{innerHTML:t._s(t.overview.currency_sign)}}),t._v(t._s(t._f("formatMoney")(i.revenue)))])]:t._e()],2)}),0)])])]):t._e()],1)],1):e("div",{staticClass:"fc_m_20 fc_onboarding"},[e("div",{staticClass:"fluentcrm_body fc_narrow_box"},[e("h3",[t._v(t._s(t.$t("Data Sync is required for"))+" "+t._s(t.overview.title))]),t._v(" "),e("p",{domProps:{innerHTML:t._s(t.overview.enable_instruction)}})])])],1)},[],!1,null,null,null);const Sl=e({name:"ReportsHome",components:{CommerceReports:xl.exports},data:function(){return{reporters:[],loading:!1,provider:"crm",providers:[],switching:!1}},watch:{provider:function(){var t=this;this.$router.push({name:"reports",query:{provider:this.provider}}),this.switching=!0,setTimeout(function(){t.switching=!1},100)}},methods:{getReportProviders:function(){var t=this;this.loading=!0,this.$get("reports/advanced-providers").then(function(e){t.providers=e.providers}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})}},mounted:function(){this.changeTitle(this.$t("Reports")),this.has_campaign_pro&&(this.getReportProviders(),this.$route.query.provider&&(this.provider=this.$route.query.provider))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-forms fluentcrm-view-wrapper fluentcrm_view"},[t.has_campaign_pro?[e("ul",{staticClass:"fc_settings_sub_menu fc_report_sub_menu",staticStyle:{"margin-bottom":"20px"}},t._l(t.providers,function(i,n){return e("li",{key:n,class:{fc_active:n==t.provider},on:{click:function(e){t.provider=n}}},[t._v("\n                "+t._s(i.title)+"\n            ")])}),0),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.provider&&!t.switching?e("commerce-reports",{attrs:{provider:t.provider}}):t._e()],1)]:e("div",[e("div",{staticClass:"fc_adv_report_demo"},[e("div",{staticClass:"fc_report_wrap"},[e("div",{staticClass:"fc_report_promo"},[e("h3",[t._v(t._s(t.$t("Get_Advance_Report_Title")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Get_Advance_Report_Desc")))]),t._v(" "),e("p",[e("a",{staticClass:"el-button el-button--danger el-button--large",attrs:{href:"https://fluentcrm.com/?utm_source=dashboard&utm_medium=plugin&utm_campaign=pro&utm_id=wp",target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Upgrade to FluentCRM Pro")))])])])])])])],2)},[],!1,null,null,null).exports;const Al=e({name:"TagMapper",components:{OptionSelector:Ft},props:["tag_options","driver","current_driver","item_label","option_key"],data:function(){return{app_ready:!1,simulated_tag_id:"",element_ready:!1,autoCreateAll:"no"}},watch:{autoCreateAll:function(t){"yes"==t?this.tag_options.forEach(function(t){t.will_create="yes"}):this.tag_options.forEach(function(t){t.will_create="no"})}},methods:{initOptions:function(){this.element_ready=!0}},mounted:function(){this.app_ready=!0}},function(){var t=this,e=t._self._c;return e("div",[e("span",{staticStyle:{display:"none !important",visibility:"hidden !important"}},[e("option-selector",{attrs:{field:{is_multiple:!1,creatable:!0,option_key:"tags"}},on:{element_ready:function(e){return t.initOptions()}},model:{value:t.simulated_tag_id,callback:function(e){t.simulated_tag_id=e},expression:"simulated_tag_id"}})],1),t._v(" "),t.app_ready?e("table",{staticClass:"fc_table fc_horizontal_table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t._f("ucFirst")(t.driver))+" "+t._s(t.item_label))]),t._v(" "),e("th",[t._v("FluentCRM "+t._s(t.item_label))]),t._v(" "),e("th",[t._v("\n                "+t._s(t.$t("Auto Create"))+" "+t._s(t.item_label)+"?\n                "),e("div",{staticStyle:{"line-height":"0"}},[e("el-switch",{attrs:{"active-value":"yes","inactive-value":"no"},model:{value:t.autoCreateAll,callback:function(e){t.autoCreateAll=e},expression:"autoCreateAll"}}),t._v(" "),e("span",{staticStyle:{"font-size":"14px","font-weight":"300"}},[t._v(t._s(t.$t("Select All")))])],1)])])]),t._v(" "),e("tbody",t._l(t.tag_options,function(i){return e("tr",{key:i.remote_id},[e("td",[t._v(t._s(i.remote_name))]),t._v(" "),e("td",["yes"==i.will_create?e("span",{staticStyle:{"font-style":"italic"}},[t._v("\n                    "+t._s(t.item_label)+" "+t._s(t.$t("will be created automatically in FluentCRM"))+"\n                ")]):t.element_ready?e("option-selector",{attrs:{field:{is_multiple:!1,creatable:!0,option_key:t.option_key}},model:{value:i.fluentcrm_id,callback:function(e){t.$set(i,"fluentcrm_id",e)},expression:"tag.fluentcrm_id"}}):e("span",[t._v(t._s(t.$t("Loading...")))])],1),t._v(" "),e("td",[e("el-switch",{attrs:{"active-value":"yes","inactive-value":"no"},model:{value:i.will_create,callback:function(e){t.$set(i,"will_create",e)},expression:"tag.will_create"}})],1)])}),0)]):t._e(),t._v(" "),e("p",{domProps:{innerHTML:t._s(t.current_driver[t.option_key+"_map_info"])}})])},[],!1,null,null,null).exports;const El=e({name:"ContactFieldMapper",props:["contact_fields","contact_fillables","driver"],data:function(){return{}}},function(){var t=this,e=t._self._c;return e("div",[e("table",{staticClass:"fc_table fc_horizontal_table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t._f("ucFirst")(t.driver))+" "+t._s(t.$t("Field")))]),t._v(" "),e("th",[t._v(t._s(t.$t("FluentCRM Field")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Skip")))])])]),t._v(" "),e("tbody",t._l(t.contact_fields,function(i,n){return e("tr",{key:n},[e("td",[t._v("\n                    "+t._s(i.remote_label)+"\n                ")]),t._v(" "),e("td",["yes"==i.will_skip?e("span",[t._v("\n                        "+t._s(t.$t("this value will be skipped"))+"\n                    ")]):e("el-select",{attrs:{filterable:"",clearable:""},model:{value:i.fluentcrm_field,callback:function(e){t.$set(i,"fluentcrm_field",e)},expression:"field.fluentcrm_field"}},[i.options?t._l(i.options,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t}})}):t._l(t.contact_fillables,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t}})})],2)],1),t._v(" "),e("td",[e("el-switch",{attrs:{"active-value":"yes","inactive-value":"no"},model:{value:i.will_skip,callback:function(e){t.$set(i,"will_skip",e)},expression:"field.will_skip"}})],1)])}),0)])])},[],!1,null,null,null).exports;function Tl(t){return Tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(t)}function Pl(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Ol(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Pl(Object(i),!0).forEach(function(e){Dl(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Pl(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Dl(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Tl(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Tl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tl(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const Fl=e({name:"ImportRunner",props:["driver","credential","map_settings","segment_options"],data:function(){return{loading:!1,import_summary:{},importing:!1,import_completed:!1,import_info:{completed:0,total:0,import_tracker:{}},errors:!1}},methods:{fetchImportSummary:function(){var t=this;this.loading=!0,this.$post("migrators/summary",Ol({driver:this.driver,credential:this.credential,map_settings:this.map_settings},this.segment_options)).then(function(e){t.import_summary=e.import_summary}).catch(function(e){t.handleError(e),t.$emit("prev")}).finally(function(){t.loading=!1})},startImport:function(){var t=this;this.importing=!0,this.$post("migrators/import",Ol({driver:this.driver,credential:this.credential,map_settings:this.map_settings,completed:this.import_info.completed,import_tracker:this.import_info.import_tracker},this.segment_options)).then(function(e){t.$set(t,"import_info",e.import_info),e.import_info.has_more?t.$nextTick(function(){t.startImport()}):t.import_completed=!0}).catch(function(e){t.handleError(e),t.errors=e}).finally(function(){})}},mounted:function(){this.fetchImportSummary()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("div",{staticClass:"fc_step_header"},[e("h3",[t._v(t._s(t.$t("Review & Import")))]),t._v(" "),e("p")]),t._v(" "),t.import_completed?e("div",{staticClass:"text-align-center"},[e("h3",[t._v(t._s(t.$t("All contacts from"))+" "+t._s(t.driver)+" "+t._s(t.$t("has been completed.")))]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({name:"subscribers"})}}},[t._v(t._s(t.$t("View Contacts")))])],1):t.importing?e("div",{staticClass:"text-align-center"},[e("h3",[t._v(t._s(t.$t("Importing now...")))]),t._v(" "),e("h4",[t._v(t._s(t.$t("Use_Please_dnctm")))]),t._v(" "),[t.import_info.total&&!t.import_info.hide_progress?e("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.import_info.completed/t.import_info.total*100),status:"success"}}):t._e(),t._v(" "),e("p",{directives:[{name:"loading",rawName:"v-loading",value:t.importing,expression:"importing"}]},[t._v(t._s(t.$t("Migrating")))]),t._v(" "),e("p",{domProps:{innerHTML:t._s(t.import_info.message)}}),t._v(" "),t.errors?e("div",{staticClass:"text-align-left"},[e("h4",[t._v(t._s(t.$t("Importing_Error_message")))]),t._v(" "),e("pre",[t._v(t._s(t.errors))])]):t._e()]],2):e("div",{staticClass:"text-align-center"},[e("h2",{domProps:{innerHTML:t._s(t.import_summary.message)}}),t._v(" "),e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.startImport()}}},[t._v(t._s(t.$t("Confirm Import")))])],1)])},[],!1,null,null,null).exports;var jl=e({name:"CredentialVerify",components:{FormBuilder:Gt},props:["driver","cred","current_driver"],data:function(){return{verifying:!1}},methods:{verifyConnection:function(){var t=this;this.verifying=!0,this.$post("migrators/verify-cred",{driver:this.driver,credential:this.cred}).then(function(e){t.$notify.success(e.message),t.$emit("verified")}).catch(function(e){t.handleError(e)}).finally(function(){t.verifying=!1})},back:function(){this.$emit("back")}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_credential"},[e("div",{staticClass:"fc_step_header"},[e("h3",[t._v(t._s(t.$t("Connect with"))+" "+t._s(t.driver))]),t._v(" "),e("p",[t._v(t._s(t.$t("Please configure"))+" "+t._s(t.driver)+" "+t._s(t.$t("with API key")))])]),t._v(" "),e("form-builder",{attrs:{formData:t.cred,fields:t.current_driver.credential_fields}}),t._v(" "),t.current_driver.doc_url?e("p",[e("a",{staticStyle:{"text-decoration":"underline"},attrs:{target:"_blank",rel:"noopener",href:t.current_driver.doc_url}},[t._v(t._s(t.$t("Check the documentation")))]),t._v(" "+t._s(t.$t("for migrating from"))+" "),e("b",[t._v(t._s(t.current_driver.title))])]):t._e(),t._v(" "),e("div",{staticClass:"text-align-right",staticStyle:{"margin-top":"20px"}},[e("el-button",{attrs:{type:"info"},on:{click:function(e){return t.back()}}},[t._v(t._s(t.$t("Back")))]),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.verifying,expression:"verifying"}],attrs:{type:"primary"},on:{click:function(e){return t.verifyConnection()}}},[t._v("\n            "+t._s(t.$t("Continue [Map Data]"))+"\n        ")])],1)],1)},[],!1,null,null,null);const Il=e({name:"CRMMigrator",components:{TagMapper:Al,ContactFieldMapper:El,OptionSelector:Ft,ImportRunner:Fl,CredentialVerify:jl.exports},data:function(){return{loading:!1,drivers:{},selected_driver:"",step:1,cred:{api_key:""},segment_options:{lists:[],tags:[],contact_fields:[]},map_settings:{list_id:"",local_list_id:"",local_tag_id:"",import_silently:"yes",import_active_only:"yes"},import_summary:{}}},computed:{current_driver:function(){return this.drivers[this.selected_driver]||{}}},methods:{getDrivers:function(){var t=this;this.loading=!0,this.$get("migrators").then(function(e){t.drivers=e.drivers}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},back:function(){this.step-=1},selectDriver:function(){this.cred=JSON.parse(JSON.stringify(this.current_driver.credentials)),this.step=2},credentialVerified:function(){this.listMappings(),this.step=3},listMappings:function(){var t=this;this.loading=!0,this.$get("migrators/list-tag-mappings",{driver:this.selected_driver,credential:this.cred,map_settings:this.map_settings}).then(function(e){t.segment_options=e.options}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},maybeRefetchTags:function(){this.current_driver.refresh_on_list_change&&this.listMappings()}},mounted:function(){this.getDrivers()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[t._v(t._s(t.$t("Transfer Data From Other CRM")))])]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"})]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around",staticStyle:{"max-width":"1190px",margin:"0 auto"}},[e("el-steps",{attrs:{active:t.step,"align-center":""}},[e("el-step",{attrs:{title:t.$t("CRM"),description:t.$t("Select Current CRM")}}),t._v(" "),e("el-step",{attrs:{title:t.$t("Connect"),description:t.$t("Connect with your CRM")}}),t._v(" "),e("el-step",{attrs:{title:t.$t("Map Data"),description:t.$t("Map the data")}}),t._v(" "),e("el-step",{attrs:{title:t.$t("Review"),description:t.$t("Review & Import")}})],1),t._v(" "),e("div",{staticClass:"settings-section fluentcrm_databox"},[1==t.step?e("div",{staticClass:"fc_crm_selection_step"},[e("div",{staticClass:"fc_step_header"},[e("h3",[t._v(t._s(t.$t("select_current_crm_software")))]),t._v(" "),e("p",[t._v(t._s(t.$t("transfer_data_from_current_ems_to_fluentcrm")))])]),t._v(" "),e("div",{staticClass:"fc_crm_lists"},[e("el-radio-group",{staticClass:"sources fc_inline_image_radio",model:{value:t.selected_driver,callback:function(e){t.selected_driver=e},expression:"selected_driver"}},t._l(t.drivers,function(i,n){return e("el-radio",{key:n,staticClass:"option",class:"fc_driver_"+n,attrs:{label:n}},[e("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:i.logo}}),t._v(" "),e("span",{staticClass:"fc_text_label"},[t._v(t._s(i.title))])])}),1)],1),t._v(" "),t.current_driver.doc_url?e("p",[e("a",{staticStyle:{"text-decoration":"underline"},attrs:{target:"_blank",rel:"noopener",href:t.current_driver.doc_url}},[t._v(t._s(t.$t("Check the documentation")))]),t._v(" "+t._s(t.$t("for migrating from"))+" "),e("b",[t._v(t._s(t.current_driver.title))])]):t._e(),t._v(" "),e("div",{staticClass:"text-align-right"},[e("el-button",{attrs:{disabled:!t.selected_driver,type:"primary"},on:{click:function(e){return t.selectDriver()}}},[t._v(t._s(t.$t("Next")))])],1)]):2==t.step?e("div",{staticClass:"fc_crm_selection_step"},[e("credential-verify",{attrs:{driver:t.selected_driver,current_driver:t.current_driver,cred:t.cred},on:{verified:function(e){return t.credentialVerified()},back:function(e){return t.back()}}})],1):3==t.step?e("div",{staticClass:"fc_crm_selection_step"},[e("div",{staticClass:"fc_step_header"},[e("h3",[t._v(t._s(t.$t("Map your Data")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Please configure"))+" "+t._s(t.current_driver.title)+" "+t._s(t.$t("associate data with FluentCRM")))])]),t._v(" "),e("el-form",{attrs:{"label-position":"top",data:t.map_settings}},[t.current_driver.supports.lists?e("el-form-item",{attrs:{label:t.$t("Select List")}},[e("el-select",{on:{change:function(e){return t.maybeRefetchTags()}},model:{value:t.map_settings.list_id,callback:function(e){t.$set(t.map_settings,"list_id",e)},expression:"map_settings.list_id"}},t._l(t.segment_options.lists,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})}),1)],1):t.current_driver.supports.has_list_mapper&&t.segment_options.mapped_lists&&t.segment_options.mapped_lists.length?e("el-form-item",{attrs:{label:t.$t("Map List")}},[e("tag-mapper",{attrs:{option_key:"lists",item_label:"List",driver:t.selected_driver,current_driver:t.current_driver,tag_options:t.segment_options.mapped_lists}})],1):t._e(),t._v(" "),t.segment_options.all_ready?[t.current_driver.supports.auto_tag_mapper?e("div",{staticStyle:{"margin-bottom":"20px"}},[e("el-checkbox",{attrs:{"true-label":"yes"},model:{value:t.segment_options.auto_mapping,callback:function(e){t.$set(t.segment_options,"auto_mapping",e)},expression:"segment_options.auto_mapping"}},[t._v("Automatically map tags from "+t._s(t.current_driver.title)+" in FluentCRM")])],1):t._e(),t._v(" "),t.segment_options.tags.length&&"yes"!=t.segment_options.auto_mapping?e("el-form-item",{attrs:{label:t.$t("Map Tags")}},[e("tag-mapper",{attrs:{option_key:"tags",item_label:"Tag",driver:t.selected_driver,current_driver:t.current_driver,tag_options:t.segment_options.tags}})],1):t._e(),t._v(" "),t.segment_options.contact_fields&&t.segment_options.contact_fields.length?e("el-form-item",{attrs:{label:t.$t("Map Contact Fields")}},[e("contact-field-mapper",{attrs:{driver:t.selected_driver,contact_fields:t.segment_options.contact_fields,contact_fillables:t.segment_options.contact_fillables}})],1):t._e(),t._v(" "),t.current_driver.field_map_info?e("p",{staticStyle:{"margin-bottom":"50px"},domProps:{innerHTML:t._s(t.current_driver.field_map_info)}}):t._e(),t._v(" "),e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Assigned List in FluentCRM (optional)")}},[e("option-selector",{attrs:{field:{is_multiple:!1,creatable:!0,option_key:"lists"}},model:{value:t.map_settings.local_list_id,callback:function(e){t.$set(t.map_settings,"local_list_id",e)},expression:"map_settings.local_list_id"}}),t._v(" "),e("p",[t._v(t._s(t.$t("Will be applied to all the imported contacts")))])],1)],1),t._v(" "),t.current_driver.supports.empty_tags?e("el-col",{attrs:{md:12,sm:24}},[e("el-form-item",{attrs:{label:t.$t("Default Tag ID (optional)")}},[e("option-selector",{attrs:{field:{is_multiple:!1,creatable:!0,option_key:"tags"}},model:{value:t.map_settings.local_tag_id,callback:function(e){t.$set(t.map_settings,"local_tag_id",e)},expression:"map_settings.local_tag_id"}}),t._v(" "),e("p",[t._v(t._s(t.$t("Home.Default_tag_id.instruction"))+"\n                                        "+t._s(t.selected_driver))])],1)],1):t._e()],1),t._v(" "),t.current_driver.supports.active_imports_only?e("el-form-item",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.map_settings.import_active_only,callback:function(e){t.$set(t.map_settings,"import_active_only",e)},expression:"map_settings.import_active_only"}},[t._v(t._s(t.$t("Import only active subscribers from"))+" "+t._s(t.selected_driver)+"\n                            ")])],1):t._e(),t._v(" "),e("div",{staticClass:"text-align-right",staticStyle:{"margin-top":"20px"}},[e("el-button",{attrs:{disabled:t.loading,type:"primary"},on:{click:function(e){t.step++}}},[t._v("\n                                "+t._s(t.$t("Continue [Review and Import]"))+"\n                            ")])],1)]:t._e()],2)],1):4==t.step?e("div",{staticClass:"fc_crm_selection_step"},[e("import-runner",{attrs:{driver:t.selected_driver,credential:t.cred,contact_fields:t.segment_options.contact_fields,segment_options:t.segment_options,map_settings:t.map_settings},on:{prev:function(){t.step=3}}})],1):t._e()])],1)])},[],!1,null,null,null).exports;const Ll=e({name:"AbandonReportWidgets",props:["widgets"]},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fcrm-abandon-report-widgets"},t._l(t.widgets,function(i,n){return e("div",{key:n,staticClass:"fcrm-abandon-report-widget"},[e("div",{staticClass:"widget-title"},[t._v(t._s(i.title)+" "),""!=i.count?e("span",{staticClass:"count"},[t._v(t._s(i.count))]):t._e()]),t._v(" "),e("div",{staticClass:"widget-body",domProps:{innerHTML:t._s(i.value)}})])}),0)},[],!1,null,"017788fe",null).exports;var Nl=e({name:"AbandonReportCarts",props:["carts"],components:{ItemCopier:Ue,Confirm:d,LazyIndividualProgress:Ws},data:function(){return{dialogVisible:!1,singleCart:"",countries:window.fcAdmin.countries,deletingCart:!1,selection:!1,selectedCarts:[]}},methods:{handleSelectedCarts:function(){var t=this;this.$confirm(this.$t("Are you sure you want to delete selected carts?"),this.$t("Warning"),{confirmButtonText:this.$t("Yes"),cancelButtonText:this.$t("No"),type:"warning"}).then(function(){t.deleteCarts(t.selectedCarts.map(function(t){return t.id}))})},deleteCarts:function(t){var e=this;this.deletingCart=!0,this.$post("abandon-carts/bulk-delete",{cart_ids:t}).then(function(t){e.$notify.success(t.message),e.selection=!1,e.selectedCarts=[],e.$emit("refetch")}).catch(function(t){e.handleError(t)}).finally(function(){e.deletingCart=!1})},editCart:function(t){this.dialogVisible=!0,this.singleCart=t},addressHandler:function(t,e){if(this.singleCart){var i=t.shippingAddress;if("billing"==e&&(i=t.billingAddress),i){var n=[i.first_name+" "+i.last_name,i.address_1+" "+i.address_2,i.postcode,i.city,this.countryName(i.country)];return(n=n.filter(function(t){return!!t})).join("<br>")}return this.$t("No Address found")}},countryName:function(t){var e="";return this.countries.map(function(i){i.code==t&&(e=i.title)}),e||t},onSelection:function(t){this.selection=!!t.length,this.selectedCarts=t}},mounted:function(){}},function(){var t,e,i,n,s,a,o=this,r=o._self._c;return r("div",{staticClass:"fcrm_abandon_reports_carts"},[r("el-table",{staticClass:"fcrm_abandon_reports_table",staticStyle:{width:"100%"},attrs:{border:"",data:o.carts,stripe:""},on:{"selection-change":o.onSelection}},[r("el-table-column",{attrs:{type:"selection",width:45}}),o._v(" "),r("el-table-column",{attrs:{label:o.$t("Name"),prop:"date",width:"250"},scopedSlots:o._u([{key:"default",fn:function(t){return[r("div",{staticClass:"fc_name_avatar"},[r("div",{staticClass:"fc_avatar"},[r("img",{attrs:{src:t.row.customer_avatar}})]),o._v(" "),r("div",{staticClass:"fc_names"},[r("div",{staticClass:"fc_name"},[t.row.contact_id?r("router-link",{attrs:{to:{name:"subscriber",params:{id:t.row.contact_id}}}},[o._v("\n                                "+o._s(t.row.full_name)+"\n                            ")]):r("span",[o._v("\n                                "+o._s(t.row.full_name)+"\n                            ")])],1),o._v(" "),r("div",{staticClass:"fc_email"},[o._v(o._s(t.row.email))])])])]}}])}),o._v(" "),r("el-table-column",{attrs:{label:o.$t("Automation"),prop:"automation_id"},scopedSlots:o._u([{key:"default",fn:function(t){return[t.row.automation&&t.row.contact_id?r("lazy-individual-progress",{attrs:{subscriber_id:t.row.contact_id,funnel:t.row.automation}}):r("span",[o._v("\n                    --\n                ")])]}}])}),o._v(" "),r("el-table-column",{attrs:{label:o.$t("Cart Total"),prop:"cart_total",sortable:"",width:"180"},scopedSlots:o._u([{key:"default",fn:function(t){return[r("span",{staticClass:"cart-total fluentcrm_clickable",on:{click:function(e){return o.editCart(t.row)}}},[o._v(o._s(t.row.currency)+" "+o._s(t.row.total))])]}}])}),o._v(" "),r("el-table-column",{attrs:{label:o.$t("Order Status"),prop:"cart_total",width:"180"},scopedSlots:o._u([{key:"default",fn:function(t){return[r("span",{staticClass:"status",class:t.row.status},[o._v("\n                    "+o._s(t.row.status)+"\n                    "),"skipped"==t.row.status&&t.row.note?r("el-tooltip",{attrs:{"popper-class":"sidebar-popper",effect:"dark",placement:"top"}},[r("div",{staticStyle:{"max-width":"400px"},attrs:{slot:"content"},domProps:{innerHTML:o._s(t.row.note)},slot:"content"}),o._v(" "),r("i",{staticClass:"tooltip-icon el-icon-info"})]):o._e()],1)]}}])}),o._v(" "),r("el-table-column",{attrs:{label:o.$t("Time"),prop:"cart_total",sortable:"",width:"180"},scopedSlots:o._u([{key:"default",fn:function(t){return[o._v("\n                "+o._s(o._f("nsHumanDiffTime")(t.row.created_at))+"\n            ")]}}])}),o._v(" "),r("el-table-column",{attrs:{label:o.$t("Action"),fixed:"right","min-width":"140"},scopedSlots:o._u([{key:"default",fn:function(t){return[r("div",{staticClass:"action-btns"},[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:o.$t("View Cart"),placement:"top-start"}},[r("i",{staticClass:"el-icon-view",on:{click:function(e){return o.editCart(t.row)}}})]),o._v(" "),r("confirm",{directives:[{name:"loading",rawName:"v-loading",value:o.deletingCart,expression:"deletingCart"}],on:{yes:function(e){return o.deleteCarts([t.row.id])}}},[r("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1),o._v(" "),r("div",{staticClass:"fcrm-abandon-reports-header",staticStyle:{"margin-top":"10px"}},[r("div",{staticClass:"left"},[o.selection?r("div",[r("el-button",{attrs:{loading:o.deletingCart,type:"danger",size:"small"},on:{click:o.handleSelectedCarts}},[o._v("\n                    "+o._s(o.$t("Delete Selected Carts"))+"\n                ")])],1):o._e()]),o._v(" "),r("div",{staticClass:"right"},[o._t("pagination_block")],2)]),o._v(" "),r("el-dialog",{attrs:{"append-to-body":!0,title:o.$t("Cart Details"),visible:o.dialogVisible,"custom-class":"fcrm_abandon_cart_details_popover"},on:{"update:visible":function(t){o.dialogVisible=t}}},[o.singleCart?r("div",{staticClass:"fcrm_abandon_cart_details_wrap"},[r("div",{staticClass:"fcrm_abandon_cart_address_wrap"},[r("div",{staticClass:"fcrm_abandon_cart_address"},[r("h4",[o._v(o._s(o.$t("Billing Address")))]),o._v(" "),r("p",{domProps:{innerHTML:o._s(o.addressHandler(null===(t=o.singleCart)||void 0===t||null===(t=t.cart)||void 0===t?void 0:t.customer_data,"billing"))}})]),o._v(" "),r("div",{staticClass:"fcrm_abandon_cart_address"},[r("h4",[o._v(o._s(o.$t("Shipping Address")))]),o._v(" "),r("p",{domProps:{innerHTML:o._s(o.addressHandler(null===(e=o.singleCart)||void 0===e||null===(e=e.cart)||void 0===e?void 0:e.customer_data,"shipping"))}})])]),o._v(" "),r("table",[r("thead",[r("tr",[r("th",{staticClass:"product_image"},[o._v(o._s(o.$t("Image")))]),o._v(" "),r("th",[o._v(o._s(o.$t("Items")))]),o._v(" "),r("th",[o._v(o._s(o.$t("Quantity")))]),o._v(" "),r("th",[o._v(o._s(o.$t("Amount")))])])]),o._v(" "),r("tbody",o._l(null===(i=o.singleCart.cart)||void 0===i?void 0:i.cart_contents,function(t,e){return r("tr",{key:e},[r("td",{staticClass:"product_image"},[r("img",{attrs:{src:t.product_image,alt:t.title}})]),o._v(" "),r("td",[o._v(o._s(t.title))]),o._v(" "),r("td",[o._v(o._s(t.quantity))]),o._v(" "),r("td",[o._v(o._s(o.singleCart.currency)+" "+o._s(t.line_total))])])}),0),o._v(" "),r("tfoot",[r("tr",{staticClass:"shipping-tr"},[r("td",[o._v(o._s(o.$t("Shipping")))]),o._v(" "),r("td"),o._v(" "),r("td"),o._v(" "),r("td",[o._v(o._s(o.singleCart.currency)+" "+o._s(null===(n=o.singleCart)||void 0===n?void 0:n.shipping))])]),o._v(" "),r("tr",{staticClass:"tax-tr"},[r("td",[o._v(o._s(o.$t("Tax(es)")))]),o._v(" "),r("td"),o._v(" "),r("td"),o._v(" "),r("td",[o._v(o._s(o.singleCart.currency)+" "+o._s(o.singleCart.tax))])]),o._v(" "),r("tr",{staticClass:"total-tr"},[r("td",[o._v(o._s(o.$t("Total")))]),o._v(" "),r("td"),o._v(" "),r("td"),o._v(" "),r("td",[o._v(o._s(o.singleCart.currency)+" "+o._s(null===(s=o.singleCart)||void 0===s?void 0:s.total))])])])]),o._v(" "),null!==(a=o.singleCart.cart)&&void 0!==a&&null!==(a=a.customer_data)&&void 0!==a&&a.order_comments?r("div",[r("hr"),o._v(" "),r("p",[r("b",[o._v(o._s(o.$t("Order Comments")))])]),o._v(" "),r("p",[o._v(o._s(o.singleCart.cart.customer_data.order_comments))])]):o._e(),o._v(" "),o.singleCart.recovery_url?r("div",[r("h4",[o._v(o._s(o.$t("Recovery URL")))]),o._v(" "),r("item-copier",{attrs:{text:o.singleCart.recovery_url}})],1):o._e(),o._v(" "),o.singleCart.order_url?r("div",[r("a",{attrs:{target:"_blank",rel:"noopener",href:o.singleCart.order_url}},[o._v(o._s(o.$t("View Original Order")))])]):o._e()]):o._e()])],1)},[],!1,null,null,null);const ql=e({name:"AbandonReports",components:{AbandonReportCarts:Nl.exports,AbandonReportWidgets:Ll,Pagination:m},data:function(){return{reportSummary:[],loading:!1,cartsLoading:!1,dateRange:"",pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:this.$t("Last week"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-6048e5),t.$emit("pick",[i,e])}},{text:this.$t("Last month"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}},{text:this.$t("Last 3 months"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-7776e6),t.$emit("pick",[i,e])}}]},carts:[],query:{status:"all",search:""},pagination:{total:0,per_page:10,current_page:1},cartStatuses:{all:this.$t("All carts"),draft:this.$t("Draft Carts"),processing:this.$t("In Progress"),recovered:this.$t("Recovered Carts"),lost:this.$t("Lost Carts"),opt_out:this.$t("Opt-Out Carts"),skipped:this.$t("Skipped Carts")},haveAutomation:!0}},methods:{getWidgetAndCartsReports:function(){this.getReports(),this.getCartsReports()},getReports:function(){var t=this;this.loading=!0,this.$get("abandon-carts/report-summary",{date_range:this.dateRange}).then(function(e){t.reportSummary=e.widgets}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},getCartsReports:function(){var t=this;this.cartsLoading=!0,this.$get("abandon-carts",{date_range:this.dateRange,query:this.query,per_page:this.pagination.per_page,page:this.pagination.current_page}).then(function(e){t.carts=e.carts.data,t.haveAutomation=e.haveAutomation||!1,t.pagination.total=e.carts.total}).catch(function(e){t.handleError(e)}).finally(function(){t.cartsLoading=!1})},goToAbandonedSettings:function(){this.$router.push({name:"abandon_cart_settings"})},goToFunnel:function(){this.$router.push({name:"funnels"})}},mounted:function(){this.changeTitle(this.$t("Abandoned Carts")),this.getReports(),this.getCartsReports()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fcrm-abandon-reports-wrapper fluentcrm-view-wrapper fluentcrm_view"},[t.haveAutomation?t._e():e("el-alert",{staticClass:"fcrm-alert-warning",attrs:{type:"warning","show-icon":!1}},[e("template",{slot:"title"},[e("p",[t._v(t._s(t.$t("No active Abandoned Cart automation."))+" "),e("a",{attrs:{href:"#"},on:{click:t.goToFunnel}},[t._v(t._s(t.$t("Set up an automation")))]),t._v(" to recover lost sales. To Learn More "),e("a",{attrs:{href:"https://fluentcrm.com/docs/abandon-cart-automation/",target:"_blank"}},[t._v(t._s(t.$t("Click here")))]),t._v(".\n            ")])])],2),t._v(" "),e("div",{staticClass:"fcrm-abandon-reports-header"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("Abandon Carts - Reports")))]),t._v(" "),e("div",{staticClass:"action"},[e("el-date-picker",{attrs:{"end-placeholder":t.$t("End date"),"picker-options":t.pickerOptions,"range-separator":t.$t("To"),"start-placeholder":t.$t("Start date"),align:"right",type:"daterange"},on:{change:t.getWidgetAndCartsReports},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}}),t._v(" "),e("el-button",{on:{click:t.goToAbandonedSettings}},[e("i",{staticClass:"el-icon-setting"})])],1)]),t._v(" "),t.loading?e("div",{staticClass:"fc_block_white"},[e("el-skeleton",{attrs:{rows:6,animated:""}})],1):e("abandon-report-widgets",{attrs:{widgets:t.reportSummary}}),t._v(" "),e("div",{staticClass:"fcrm-abandon-report-carts-wrap"},[e("div",{staticClass:"fcrm-abandon-reports-header"},[e("div",{staticClass:"left"},[e("el-select",{attrs:{size:"small"},on:{change:function(e){return t.getCartsReports()}},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},t._l(t.cartStatuses,function(t,i){return e("el-option",{key:i,attrs:{label:t,value:i}})}),1)],1),t._v(" "),e("div",{staticClass:"action"},[e("el-input",{attrs:{clearable:"",placeholder:t.$t("Search by Name/ Email"),size:"small"},on:{clear:function(e){return t.getCartsReports()}},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getCartsReports()}},model:{value:t.query.search,callback:function(e){t.$set(t.query,"search",e)},expression:"query.search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.getCartsReports()}},slot:"append"})],1)],1)]),t._v(" "),t.loading||t.cartsLoading?e("div",{staticClass:"fc_block_white"},[e("el-skeleton",{attrs:{rows:6,animated:""}})],1):e("abandon-report-carts",{attrs:{carts:t.carts},on:{refetch:t.getCartsReports},scopedSlots:t._u([{key:"pagination_block",fn:function(){return[e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.getCartsReports}})]},proxy:!0}])})],1)],1)},[],!1,null,"43dbd5a5",null).exports;const Ml=e({name:"CompaniesRoute"},function(){var t=this._self._c;return t("div",[t("router-view")],1)},[],!1,null,null,null).exports;function zl(t){return zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(t)}function Rl(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Bl(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Rl(Object(i),!0).forEach(function(e){Vl(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Rl(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Vl(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=zl(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=zl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zl(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ul=e({name:"CompanyCsvImporter",components:{CsvImporter:Li,GenericPromo:Te},data:function(){return{step:"upload",options:{delimiter:"comma",type:"company",sampleCsv:this.appVars.images_url+"/sample-companies.csv"},headers:{},fields:{},columns:[],form:{map:[],file:"",update:"yes",create_owner:"yes"},importing:!1,importing_page:1,results:{}}},methods:{handleUploadSuccess:function(t){this.headers=t.headers,this.form.map=t.map,this.form.file=t.file,this.columns=t.columns,this.fields=t.fields,this.step="map"},importCompanies:function(){var t=this;this.importing=!0,this.$post("companies/csv-import",Bl(Bl({},this.form),{},{importing_page:this.importing_page,delimiter:this.options.delimiter})).then(function(e){if(t.results=e,e.has_more)return t.importing_page++,void t.importCompanies();t.$notify.success(t.$t("Companies imported successfully")),t.$emit("imported"),t.importing=!1}).catch(function(e){t.importing=!1,t.handleError(e)})}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_csv_import fc_company_unsaved fc_company_info_wrapper fc_company_in_drawer"},[t.has_campaign_pro?["upload"==t.step?e("div",[e("csv-importer",{attrs:{options:t.options},on:{success:t.handleUploadSuccess}})],1):t._e(),t._v(" "),"map"==t.step?e("div",[e("h3",[t._v("Please map the fields")]),t._v(" "),e("table",{directives:[{name:"loading",rawName:"v-loading",value:t.importing,expression:"importing"}],staticClass:"fc_horizontal_table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("CSV Headers")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Company Fields")))])])]),t._v(" "),e("tbody",t._l(t.headers,function(i,n){return e("tr",{key:n},[e("td",[e("el-input",{attrs:{value:i,disabled:""}})],1),t._v(" "),e("td",[e("el-select",{attrs:{clearable:""},model:{value:t.form.map[n].table,callback:function(e){t.$set(t.form.map[n],"table",e)},expression:"form.map[index].table"}},[e("el-option-group",{attrs:{label:t.$t("Main Properties")}},t._l(t.columns,function(i,n){return e("el-option",{key:n,attrs:{label:t.fields[i]||i,value:i}})}),1),t._v(" "),t.appVars.company_custom_fields&&t.appVars.company_custom_fields.length?e("el-option-group",{attrs:{label:t.$t("Custom Properties")}},t._l(t.appVars.company_custom_fields,function(t){return e("el-option",{key:t.slug,attrs:{label:t.label,value:"_custom_"+t.slug}})}),1):t._e()],1)],1)])}),0)]),t._v(" "),e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.importing,expression:"importing"}],attrs:{"label-position":"top"},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[e("el-form-item",{staticClass:"no-margin-bottom"},[e("template",{slot:"label"},[t._v("\n                        "+t._s(t.$t("Update Companies"))+"\n                        "),e("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("h3",[t._v(t._s(t.$t("Update Companies")))]),t._v(" "),e("p",[t._v("\n                                    "+t._s(t.$t("Do you want to update the companies data"))+"\n                                    "),e("br"),t._v(" "+t._s(t.$t("if it's already exist?"))+"\n                                ")])]),t._v(" "),e("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),e("el-radio-group",{model:{value:t.form.update,callback:function(e){t.$set(t.form,"update",e)},expression:"form.update"}},[e("el-radio",{attrs:{label:"yes"}},[t._v(t._s(t.$t("Yes")))]),t._v(" "),e("el-radio",{attrs:{label:"no"}},[t._v(t._s(t.$t("No")))])],1)],2),t._v(" "),e("el-form-item",[e("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.form.create_owner,callback:function(e){t.$set(t.form,"create_owner",e)},expression:"form.create_owner"}},[t._v(t._s(t.$t("Create owner as contact if not exist")))])],1)],1),t._v(" "),e("div",{staticClass:"fc_company_save_wrap"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.importing,expression:"importing"}],attrs:{disabled:t.importing,type:"success"},on:{click:function(e){return t.importCompanies()}}},[t._v("\n                    "+t._s(t.$t("Import Companies"))+"\n                    "),t.results.total?e("span",[t._v("("+t._s(t.results.total)+" / "+t._s(t.results.completed)+")")]):t._e()])],1)],1):t._e()]:e("div",{staticClass:"text-align-center"},[e("generic-promo")],1)],2)},[],!1,null,null,null);function Hl(t){return Hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(t)}function Gl(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Wl(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Gl(Object(i),!0).forEach(function(e){Kl(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Gl(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Kl(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Hl(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Hl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hl(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const Jl=e({name:"ActionMenu",components:{CompanyInfoSide:vs,CompanyCsvImporter:Ul.exports},props:["options","query_data"],data:function(){return{newCompanyDrawer:!1,new_company:{},createState:"new"}},methods:{toggle:function(t){this.createState=t,this.newCompanyDrawer=!0},fetch:function(t){this.$emit("fetch",t)},companyCreated:function(t){this.$router.push({name:"view_company",params:{company_id:t.id}})},handleImported:function(){this.fetch({}),this.newCompanyDrawer=!1},exportCompanies:function(){location.href=window.ajaxurl+"?"+jQuery.param(Wl(Wl({action:"fluentcrm_export_companies"},this.query_data),{},{format:"csv"}))}}},function(){var t=this,e=t._self._c;return e("div",{},[e("el-button-group",[e("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"primary"},on:{click:function(e){return t.toggle("new")}}},[t._v("\n            "+t._s(t.$t("Add Company"))+"\n        ")]),t._v(" "),e("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-upload"},on:{click:function(e){return t.toggle("csv")}}},[t._v("\n            "+t._s(t.$t("Import"))+"\n        ")]),t._v(" "),e("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-download"},on:{click:function(e){return t.exportCompanies()}}},[t._v("\n            "+t._s(t.$t("Export"))+"\n        ")])],1),t._v(" "),e("el-drawer",{staticClass:"fc_company_info_drawer",attrs:{"with-header":!0,size:t.globalDrawerSize,title:"new"==t.createState?t.$t("Create company"):t.$t("Import CSV"),"append-to-body":!0,visible:t.newCompanyDrawer},on:{"update:visible":function(e){t.newCompanyDrawer=e}}},[t.newCompanyDrawer?e("div",{staticStyle:{padding:"10px 15px"}},["new"==t.createState?e("company-info-side",{attrs:{company:t.new_company,is_drawer:!0},on:{companyCreated:t.companyCreated}}):e("div",[e("company-csv-importer",{on:{imported:function(e){return t.handleImported()}}})],1)],1):t._e()])],1)},[],!1,null,null,null).exports;function Yl(t){return Yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yl(t)}function Ql(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Zl(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ql(Object(i),!0).forEach(function(e){Xl(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ql(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Xl(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=Yl(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Yl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yl(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function tc(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],i=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}throw new TypeError(Yl(t)+" is not iterable")}function ec(){var t,e,i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",s=i.toStringTag||"@@toStringTag";function a(i,n,s,a){var l=n&&n.prototype instanceof r?n:r,c=Object.create(l.prototype);return ic(c,"_invoke",function(i,n,s){var a,r,l,c=0,u=s||[],d=!1,_={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,i){return a=e,r=0,l=t,_.n=i,o}};function p(i,n){for(r=i,l=n,e=0;!d&&c&&!s&&e<u.length;e++){var s,a=u[e],p=_.p,m=a[2];i>3?(s=m===n)&&(l=a[(r=a[4])?5:(r=3,3)],a[4]=a[5]=t):a[0]<=p&&((s=i<2&&p<a[1])?(r=0,_.v=n,_.n=a[1]):p<m&&(s=i<3||a[0]>n||n>m)&&(a[4]=i,a[5]=n,_.n=m,r=0))}if(s||i>1)return o;throw d=!0,n}return function(s,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,m),r=u,l=m;(e=r<2?t:l)||!d;){a||(r?r<3?(r>1&&(_.n=-1),p(r,l)):_.n=l:_.v=l);try{if(c=2,a){if(r||(s="next"),e=a[s]){if(!(e=e.call(a,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,r<2&&(r=0)}else 1===r&&(e=a.return)&&e.call(a),r<2&&(l=TypeError("The iterator does not provide a '"+s+"' method"),r=1);a=t}else if((e=(d=_.n<0)?l:i.call(n,_))!==o)break}catch(e){a=t,r=1,l=e}finally{c=1}}return{value:e,done:d}}}(i,s,a),!0),c}var o={};function r(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][n]?e(e([][n]())):(ic(e={},n,function(){return this}),e),d=c.prototype=r.prototype=Object.create(u);function _(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,ic(t,s,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=c,ic(d,"constructor",c),ic(c,"constructor",l),l.displayName="GeneratorFunction",ic(c,s,"GeneratorFunction"),ic(d),ic(d,s,"Generator"),ic(d,n,function(){return this}),ic(d,"toString",function(){return"[object Generator]"}),(ec=function(){return{w:a,m:_}})()}function ic(t,e,i,n){var s=Object.defineProperty;try{s({},"",{})}catch(t){s=0}ic=function(t,e,i,n){function a(e,i){ic(t,e,function(t){return this._invoke(e,i,t)})}e?s?s(t,e,{value:i,enumerable:!n,configurable:!n,writable:!n}):t[e]=i:(a("next",0),a("throw",1),a("return",2))},ic(t,e,i,n)}function nc(t,e,i,n,s,a,o){try{var r=t[a](o),l=r.value}catch(t){return void i(t)}r.done?e(l):Promise.resolve(l).then(n,s)}const sc={name:"BulkCompanyActions",props:["selectedCompanies","options","pagination"],components:{Confirm:d},data:function(){return{delete_confirm_message:"<b>"+this.$t("Are you sure to delete?")+"</b><br />"+this.$t("delete_all_companies_notice"),actions:{},select_job:{action_name:"",selected_options:[]},doing_action:!1,select_status:"",processCount:0,allSelected:!1,processingAllBulk:!1,currentAllActionLastCompanyId:0}},watch:{"select_job.action_name":{handler:function(){this.select_job.selected_options=[],this.select_status=""},deep:!0}},computed:{currentAction:function(){return!!this.select_job.action_name&&this.actions[this.select_job.action_name]},canSelectAll:function(){return this.pagination&&this.selectedCompanies.length<this.pagination.total&&this.selectedCompanies.length==this.pagination.per_page&&window.fcrm_company_query_params&&"companies"==this.$route.name}},methods:{handleBulkActionRoute:function(){var t=this;if(!this.canSelectAll||!this.allSelected)return this.doBulkAction(),!1;this.$confirm(this.$t("You are about to apply the selected action to all the companies (")+this.pagination.total+this.$t(") of this filter. Please confirm."),"Warning",{confirmButtonText:"Yes, let's do it!",cancelButtonText:"Cancel",type:"warning"}).then(function(){t.processingAllBulk=!0,t.processAllBulk(function(){alert(t.$t("All companies have been processed successfully!"))})}).catch(function(){t.allSelected=!1})},doBulkAction:function(){var t,e=this;return(t=ec().m(function t(){var i,n,s,a,o;return ec().w(function(t){for(;;)switch(t.n){case 0:if(i=[],e.each(e.selectedCompanies,function(t){i.push(t.id)}),i.length){t.n=1;break}return e.$notify.error(e.$t("Please select companies first")),t.a(2,!1);case 1:e.doing_action=!0,n=Tn()(i,100),s={action_name:e.select_job.action_name,action_options:e.select_job.selected_options,new_status:e.select_status},a=ec().m(function t(i){return ec().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e.repeatBulkAction(n[i],s).then(function(t){i===n.length-1&&(e.$emit("refetch"),e.$notify.success(t.message))}).catch(function(t){e.handleError(t)});case 1:return t.a(2)}},t)}),o=0;case 2:if(!(o<n.length)){t.n=4;break}return t.d(tc(a(o)),3);case 3:o++,t.n=2;break;case 4:e.doing_action=!1;case 5:return t.a(2)}},t)}),function(){var e=this,i=arguments;return new Promise(function(n,s){var a=t.apply(e,i);function o(t){nc(a,n,s,o,r,"next",t)}function r(t){nc(a,n,s,o,r,"throw",t)}o(void 0)})})()},repeatBulkAction:function(t,e){return e.company_ids=t,this.$post("companies/do-bulk-action",e)},processAllBulk:function(t){var e=this,i={is_all:"yes",action_name:this.select_job.action_name,action_options:this.select_job.selected_options,new_status:this.select_status,last_id:this.currentAllActionLastCompanyId,per_page:50,company_query:window.fcrm_company_query_params};this.$post("companies/do-bulk-action",i).then(function(i){e.processCount+=parseInt(i.completed_companies),i.is_completed?(e.processingAllBulk=!1,e.$emit("refetch"),e.$notify.success(i.message),t&&t()):(e.currentAllActionLastCompanyId=i.last_company_id,e.$nextTick(function(){e.processAllBulk(t)}))}).catch(function(t){e.handleError(t)})}},mounted:function(){var t={},e={};this.hasPermission("fcrm_manage_contact_cats")&&(t={change_company_type:{label:this.$t("Change Company Type"),custom_options:this.appVars.company_types,btn_text:this.$t("Change Company Type"),is_multiple:!1},change_company_category:{label:this.$t("Change Company Category"),custom_options:this.appVars.company_categories,btn_text:this.$t("Change Company Type"),is_multiple:!1}}),this.hasPermission("fcrm_manage_contact_cats_delete")&&(e={delete_companies:{label:this.$t("Delete Companies")}}),this.actions=Zl(Zl({},t),e)}};const ac={name:"CompanyTable",components:{BulkActionMenu:Sn,Toggler:e({name:"ColumnToggler",components:{Filterer:vn},data:function(){return{selection:[],companyColumns:X}},computed:{columnGroups:function(){var t=[{slug:"company",label:this.$t("Primary Fields"),fields:X}];if(this.appVars.company_custom_fields&&this.appVars.company_custom_fields.length){var e=this.appVars.company_custom_fields.map(function(t){return{label:t.label,value:"_custom_"+t.slug}});t.push({slug:"custom_fields",label:this.$t("Custom Fields"),fields:e})}return t}},methods:{init:function(){var t=this.storage.get("companyColumns");t?(this.selection=t,this.fire()):this.save()},save:function(){this.storage.set("companyColumns",this.selection),this.fire()},fire:function(){var t=this;this.$emit("input",this.selection),setTimeout(function(){t.$emit("dataChanged",t.selection)},400)}},mounted:function(){this.init()}},function(){var t=this,e=t._self._c;return e("filterer",{attrs:{name:"column-toggler"}},[e("el-button",{staticClass:"fc_columns_filter",attrs:{slot:"header",icon:"el-icon-setting",plain:"",size:"small"},slot:"header"},[t._v("\n        "+t._s(t.$t("Columns"))+"\n    ")]),t._v(" "),e("el-checkbox-group",{staticClass:"fluentcrm-filter-options fc_column_toggler_checks fc_checkbox_group",attrs:{slot:"items"},slot:"items",model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}},[t._l(t.columnGroups,function(i,n){return[e("el-checkbox",{key:n,attrs:{disabled:!0}},[t._v(t._s(i.label))]),t._v(" "),t._l(i.fields,function(i,s){return e("el-checkbox",{key:n+" "+s,staticClass:"el-dropdown-menu__item fc_checkbox",attrs:{label:i.value}},[t._v("\n                "+t._s(i.label)+"\n            ")])})]})],2),t._v(" "),e("el-dropdown-item",{staticClass:"no-hover",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"fc_primary_button",staticStyle:{width:"100%"},attrs:{type:"success",size:"mini"},on:{click:t.save}},[t._t("btn-label",function(){return[t._v(t._s(t.$t("Save")))]})],2)],1)],1)},[],!1,null,null,null).exports,Searcher:xn,Pagination:m,BulkCompanyActions:e(sc,function(){var t=this,e=t._self._c;return e("div",{staticStyle:{flex:"1"}},[e("div",{staticClass:"fc_bulk_wrap"},[e("div",{staticClass:"fc_bulk_item"},[e("label",[t._v(t._s(t.$t("Select Action")))]),t._v(" "),e("el-select",{staticClass:"mt-5",attrs:{clearable:"",filterable:"",size:"mini",placeholder:t.$t("Select Bulk Action")},model:{value:t.select_job.action_name,callback:function(e){t.$set(t.select_job,"action_name",e)},expression:"select_job.action_name"}},t._l(t.actions,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t.label}})}),1)],1),t._v(" "),t.currentAction&&t.currentAction.options?[e("el-select",{staticClass:"ml-5 mt-5",attrs:{filterable:"",multiple:"",size:"mini",placeholder:t.$t("Select")},model:{value:t.select_job.selected_options,callback:function(e){t.$set(t.select_job,"selected_options",e)},expression:"select_job.selected_options"}},t._l(t.currentAction.options,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"ml-5 mt-5",attrs:{disable:t.doing_action,size:"mini",disabled:!t.select_job.selected_options.length,type:"success"},on:{click:function(e){return t.handleBulkActionRoute()}}},[t._v("\n                "+t._s(t.$t("Confirm"))+" ("+t._s(t.currentAction.label)+")\n            ")])]:"change_company_category"==t.select_job.action_name?[e("el-select",{staticClass:"ml-5 mt-5",attrs:{filterable:"",size:"mini",placeholder:t.$t("Select")},model:{value:t.select_status,callback:function(e){t.select_status=e},expression:"select_status"}},t._l(t.currentAction.custom_options,function(t){return e("el-option",{key:t,attrs:{value:t,label:t}})}),1),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"ml-5 mt-5",attrs:{disable:t.doing_action,size:"mini",disabled:!t.select_status,type:"success"},on:{click:function(e){return t.handleBulkActionRoute()}}},[t._v("\n                "+t._s(t.$t("Change Category"))+"\n            ")])]:"change_company_type"==t.select_job.action_name?[e("el-select",{staticClass:"ml-5 mt-5",attrs:{filterable:"",size:"mini",placeholder:t.$t("Select")},model:{value:t.select_status,callback:function(e){t.select_status=e},expression:"select_status"}},t._l(t.currentAction.custom_options,function(i){return e("el-option",{key:i,attrs:{value:i,label:t._f("ucFirst")(i)}})}),1),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"ml-5 mt-5",attrs:{disable:t.doing_action,size:"mini",disabled:!t.select_status,type:"success"},on:{click:function(e){return t.handleBulkActionRoute()}}},[t._v("\n                "+t._s(t.$t("Change Type"))+"\n            ")])]:"delete_companies"==t.select_job.action_name?[e("confirm",{attrs:{placement:"top-start",message:t.delete_confirm_message},on:{yes:function(e){return t.handleBulkActionRoute()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action,size:"mini",type:"danger"},slot:"reference"},[t._v(t._s(t.$t("Delete Companies"))+"\n                ")])],1)]:t._e()],2),t._v(" "),t.canSelectAll?e("div",{staticClass:"fc_bulk_navs"},[t.allSelected?e("p",[t._v(t._s(t.$t("All"))+" "+t._s(t.pagination.total)+" "+t._s(t.$t("companies selected"))+".\n            "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.allSelected=!1}}},[t._v(t._s(t.$t("Select only this page")))])],1):e("p",[t._v(t._s(this.selectedCompanies.length)+" "+t._s(t.$t("companies on this page selected"))+".\n            "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.allSelected=!0}}},[t._v(t._s(t.$t("Select all"))+"\n                "+t._s(t.pagination.total)+" "+t._s(t.$t("companies"))+"\n            ")])],1)]):t._e(),t._v(" "),e("el-dialog",{attrs:{title:t.$t("Processing...."),visible:t.processingAllBulk,width:"50%","append-to-body":!0,"close-on-click-modal":!1}},[t.processingAllBulk?e("div",{staticStyle:{"text-align":"center"}},[e("h3",[t._v(t._s(t.$t("Action"))+": "+t._s(t.currentAction.label)+" "),e("span",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}]})]),t._v(" "),e("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.processCount/t.pagination.total*100),status:"success"}}),t._v(" "),e("h3",[t._v(t._s(t.$t("Processing"))+" "+t._s(t.processCount)+" "+t._s(t.$t("of"))+" "+t._s(t.pagination.total)+" "+t._s(t.$t("companies")))]),t._v(" "),e("h4",[t._v(t._s(t.$t("Please do not close this window while processing this bulk action")))])],1):t._e()])],1)},[],!1,null,null,null).exports},props:["companies","always_searchbar","show_skeleton","is_loading","query_data","pagination","options"],data:function(){return{selection:!1,initialFired:!1,selectedCompanies:[],selectionCount:0,columns:[],countries:window.fcAdmin.countries,filterItems:{company_categories:{key:"company_categories",title:"Industry",type:"selections"},company_types:{key:"company_types",title:"Company Type",type:"selections"}},popFilter:{key:"",value:""}}},computed:{currentFilterableItems:function(){var t=[];for(var e in this.filterItems)this.query_data.inline_filters[e]||t.push(this.filterItems[e]);return t}},methods:{onSelection:function(t){this.selection=!!t.length,this.selectedCompanies=t,this.selectionCount=t.length},match:function(t,e){e[t.slug]?e[t.slug]++:e[t.slug]=1},handleSortable:function(t){"descending"===t.order?(this.query_data.sort_by=t.prop,this.query_data.sort_order="DESC"):(this.query_data.sort_by=t.prop,this.query_data.sort_order="ASC"),this.fetch()},fetch:function(){this.selection=!1,this.selectedCompanies=[],this.$emit("fetch")},maybeReFetch:function(){var t=!1;this.initialFired||(t=!0),t&&(this.fetch(),this.initialFired=!0)},listeners:function(){var t=this;this.addAction("search-subscribers","fluentcrm",function(e){t.query_data.search=e,t.pagination.current_page=1,t.fetch()}),this.addAction("loading","fluentcrm",function(e){t.loading=e})},countryName:function(t){var e="";return this.countries.map(function(i){i.code==t&&(e=i.title)}),e},getFormattedAddress:ot,getDomainName:at,pushInlineSearch:function(){this.popFilter.key&&this.popFilter.value&&(this.$set(this.query_data.inline_filters,this.popFilter.key,this.popFilter.value),this.fetch(),this.$refs.companies_inline_filters.doClose(),this.popFilter={key:"",value:""})},removeFilterItem:function(t){this.$delete(this.query_data.inline_filters,t),this.fetch()},getCustomValue:function(t,e){var i=t.meta;if(!i||this.isEmptyValue(i.custom_values))return"";var n=i.custom_values[e]||"";return se()(n)?n.join(", "):n}},mounted:function(){this.listeners()}};var oc=i(4383),rc={insert:"head",singleton:!1};a()(oc.A,rc);oc.A.locals;var lc=e(ac,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_contacts_wrap",staticStyle:{position:"relative"}},[e("div",{staticClass:"fluentcrm-header-secondary"},[e("bulk-action-menu",[t.selection?e("div",{staticClass:"fc_filter_boxes"},[e("bulk-company-actions",{attrs:{selectedCompanies:t.selectedCompanies,options:t.options,pagination:t.pagination},on:{refetch:function(e){return t.fetch()}}})],1):e("div",{staticClass:"fc_filter_boxes"},[t.query_data.inline_filters&&!t.isEmptyValue(t.query_data.inline_filters)?e("ul",{staticClass:"fc_inline_filters"},t._l(t.query_data.inline_filters,function(i,n){var s;return e("li",{key:n},[t._v("\n                        "+t._s(null===(s=t.filterItems[n])||void 0===s?void 0:s.title)+": "),i&&i.length?e("span",[t._v(t._s(i.join(", ")))]):t._e(),t._v(" "),e("span",{staticClass:"clickable el-icon el-icon-close",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.removeFilterItem(n)}}})])}),0):t._e(),t._v(" "),t.currentFilterableItems.length?e("el-popover",{ref:"companies_inline_filters",attrs:{size:"mini",placement:"right",width:"400",trigger:"click"}},[e("div",{staticClass:"fc_filter_item"},[e("el-select",{attrs:{placeholder:"Select Filter"},model:{value:t.popFilter.key,callback:function(e){t.$set(t.popFilter,"key",e)},expression:"popFilter.key"}},t._l(t.currentFilterableItems,function(t){return e("el-option",{key:t.key,attrs:{label:t.title,value:t.key}})}),1),t._v(" "),t.popFilter.key&&t.appVars[t.popFilter.key]?[e("p",[t._v("Select Search Options")]),t._v(" "),e("el-select",{attrs:{filterable:!0,multiple:!0},model:{value:t.popFilter.value,callback:function(e){t.$set(t.popFilter,"value",e)},expression:"popFilter.value"}},t._l(t.appVars[t.popFilter.key],function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})}),1),t._v(" "),e("el-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"mini"},on:{click:t.pushInlineSearch}},[t._v("Search\n                                Companies\n                            ")])]:t._e()],2),t._v(" "),e("el-button",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[e("span",{staticClass:"el-icon el-icon-plus"}),t._v(" "),e("span",[t._v("Add Filter")])])],1):t._e()],1),t._v(" "),e("div",{staticClass:"fc_search_box"},[t._t("before_search_box"),t._v(" "),e("searcher",{model:{value:t.query_data.search,callback:function(e){t.$set(t.query_data,"search",e)},expression:"query_data.search"}}),t._v(" "),e("toggler",{on:{dataChanged:function(e){return t.maybeReFetch()}},model:{value:t.columns,callback:function(e){t.columns=e},expression:"columns"}})],2)])],1),t._v(" "),e("div",{staticClass:"fc_subscribers_table"},[t.show_skeleton?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:10}}):e("el-table",{ref:"companiesTable",staticStyle:{width:"100%"},attrs:{border:"","default-sort":{prop:t.query_data.sort_by,order:"DESC"==t.query_data.sort_order?"descending":"ascending"},"empty-text":t.$t("No Companies Found"),data:t.companies,id:"fluentcrm-subscribers-table",stripe:""},on:{"selection-change":t.onSelection,"sort-change":t.handleSortable}},[t.hasPermission("fcrm_manage_contact_cats")||t.hasPermission("fcrm_manage_contact_cats_delete")?e("el-table-column",{attrs:{type:"selection"}}):t._e(),t._v(" "),e("el-table-column",{attrs:{label:"",property:"id",sortable:"custom",width:"55"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"view_company",params:{company_id:i.row.id}}}},[i.row.logo?e("img",{staticClass:"fc_contact_photo",attrs:{title:t.$t("Company ID:")+" "+i.row.id,src:i.row.logo}}):e("span",{staticClass:"fc_empty_logo",attrs:{title:t.$t("Company ID:")+" "+i.row.id}})])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Name"),"min-width":"180",property:"name",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"view_company",params:{company_id:i.row.id}}}},[t._v("\n                        "+t._s(i.row.name)+"\n                    ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Company Email"),"min-width":"180px",property:"email",sortable:"custom"}}),t._v(" "),-1!=t.columns.indexOf("owner_id")?e("el-table-column",{attrs:{label:t.$t("Company Owner"),property:"owner_id",width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.owner?e("span",[e("router-link",{staticClass:"fc_photo_text",attrs:{to:{name:"subscriber",params:{id:i.row.owner.id}}}},[e("img",{staticClass:"fc_contact_photo",attrs:{src:i.row.owner.photo}}),t._v(" "),e("span",[t._v(t._s(i.row.owner.full_name||i.row.owner.email))])])],1):e("span",[t._v("--")])]}}],null,!1,2758247785)}):t._e(),t._v(" "),-1!=t.columns.indexOf("industry")?e("el-table-column",{attrs:{label:t.$t("Industry"),"min-width":"250px",property:"industry",sortable:"custom"}}):t._e(),t._v(" "),-1!=t.columns.indexOf("type")?e("el-table-column",{attrs:{sortable:"custom","min-width":"120",label:t.$t("Type"),property:"type"}}):t._e(),t._v(" "),-1!=t.columns.indexOf("phone")?e("el-table-column",{attrs:{"min-width":"120",label:t.$t("Phone"),property:"phone"}}):t._e(),t._v(" "),-1!=t.columns.indexOf("address")?e("el-table-column",{attrs:{"min-width":"260",label:t.$t("Address"),property:"address_line_1",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t.getFormattedAddress(i.row)))])]}}],null,!1,1150850719)}):t._e(),t._v(" "),-1!=t.columns.indexOf("city")?e("el-table-column",{attrs:{"min-width":"130",label:t.$t("City"),property:"city"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.city))])]}}],null,!1,88447361)}):t._e(),t._v(" "),-1!=t.columns.indexOf("country")?e("el-table-column",{attrs:{"min-width":"130",label:t.$t("Country"),property:"country"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t.countryName(i.row.country)))])]}}],null,!1,2706371968)}):t._e(),t._v(" "),-1!=t.columns.indexOf("website")?e("el-table-column",{attrs:{label:t.$t("Website"),width:"150",property:"website",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.website?e("a",{attrs:{target:"_blank",rel:"noopener",title:i.row.website,href:i.row.website}},[t._v("\n                        "+t._s(t.getDomainName(i.row.website))+"\n                    ")]):e("span",[t._v("n/a")])]}}],null,!1,2390222738)}):t._e(),t._v(" "),t._l(t.appVars.company_custom_fields,function(i){return-1!=t.columns.indexOf("_custom_"+i.slug)?e("el-table-column",{key:i.slug,attrs:{width:"150",label:i.label},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.getCustomValue(e.row,i.slug))+"\n                ")]}}],null,!0)}):t._e()}),t._v(" "),e("el-table-column",{attrs:{width:"100",label:"Contacts",prop:"contacts_count"}}),t._v(" "),-1!=t.columns.indexOf("employees_number")?e("el-table-column",{attrs:{width:"100",label:t.$t("Employees"),property:"employees_number"}}):t._e(),t._v(" "),-1!=t.columns.indexOf("updated_at")?e("el-table-column",{attrs:{label:t.$t("Last Changed"),width:"190",property:"updated_at",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.updated_at?[e("i",{staticClass:"el-icon-time"}),t._v(" "),e("span",{attrs:{title:i.row.updated_at}},[t._v(t._s(t._f("nsHumanDiffTime")(i.row.updated_at)))])]:t._e()]}}],null,!1,380598594)}):t._e(),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Date Added"),width:"190",property:"created_at",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("i",{staticClass:"el-icon-time"}),t._v(" "),e("span",{attrs:{title:i.row.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(i.row.created_at)))])]}}])})],2)],1),t._v(" "),t.show_skeleton?t._e():e("el-row",{staticClass:"d-flex items-center",attrs:{guter:20}},[e("el-col",{attrs:{xs:24,md:12}},[t.selection?e("div",{staticClass:"fc_filter_boxes mt-5",staticStyle:{"padding-left":"15px"}},[e("bulk-company-actions",{attrs:{selectedCompanies:t.selectedCompanies,options:t.options},on:{refetch:function(e){return t.fetch()}}})],1):e("div",[t._v("")])]),t._v(" "),e("el-col",{attrs:{xs:24,md:12}},[e("pagination",{attrs:{pagination:t.pagination,hide_on_single:!1,extra_sizes:[200,250,300,400,600]},on:{per_page_change:function(e){t.storage.set("company_perpage",e)},fetch:t.fetch}})],1)],1)],1)},[],!1,null,null,null);function cc(t){return cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cc(t)}function uc(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function dc(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?uc(Object(i),!0).forEach(function(e){_c(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):uc(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function _c(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=cc(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=cc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cc(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const pc=e({name:"AllCompanies",components:{ActionMenu:Jl,CompanyTable:lc.exports,ContactHeaderPopNav:Vn},data:function(){return{companies:[],pagination:{total:0,per_page:20,current_page:1},query_data:{search:"",sort_by:"id",sort_order:"DESC",page:null,categories:[],inline_filters:{}},loading:!1,app_ready:!1,first_loading:!0,options:{types:[],categories:[]},ui_config:{show_category:!0},categoryId:null}},methods:{getOptions:function(){this.options={categories:window.fcAdmin.company_categories,types:window.fcAdmin.company_types}},setup:function(){var t=this.$route.query;window.fcrm_company_query_params&&(t=window.fcrm_company_query_params);var e={search:t.search||"",sort_by:t.sort_by||"id",sort_order:t.sort_order||"DESC",inline_filters:{}};t.page&&(this.pagination.current_page=parseInt(t.page)),this.query_data=e;var i=!1;return this.$route.params.categoryId?(i=!0,this.categoryId=this.$route.params.categoryId,this.query_data.categories=[parseInt(this.$route.params.categoryId)],this.ui_config.show_category=!1):this.$route.params.categories&&console.log(this.$route.params.categories),this.app_ready=!0,i},fetch:function(){var t=this;this.loading=!0;var e={per_page:this.pagination.per_page,page:this.pagination.current_page,sort_by:this.query_data.sort_by,sort_order:this.query_data.sort_order};e=dc(dc({},this.query_data),e);var i={};this.each(e,function(e,n){t.isEmptyValue(e)||(i[n]=e)}),window.fcrm_company_query_params=i,i.t=Date.now(),this.$router.replace({name:"companies",query:i}),this.$get("companies",e).then(function(e){t.companies=e.companies.data,t.pagination.total=e.companies.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1,t.first_loading=!1})}},mounted:function(){this.pagination.per_page=parseInt(this.storage.get("company_perpage",10))||10,this.getOptions(),this.setup(),this.changeTitle(this.$t("Companies"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-subscribers fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[e("contact-header-pop-nav",{attrs:{head_title:t.$t("Companies")}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.pagination.total,expression:"pagination.total"}],staticClass:"ff_small"},[t._v("("+t._s(t._f("formatMoney")(t.pagination.total))+")")])],1)]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[t.hasPermission("fcrm_manage_contact_cats")?e("action-menu",{attrs:{query_data:t.query_data,options:t.options},on:{fetch:t.fetch}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"fluentcrm_body fluentcrm_pad_b_15 fluentcrm_subscribers"},[t.app_ready?e("company-table",{attrs:{always_searchbar:!1,options:t.options,query_data:t.query_data,is_loading:!1,companies:t.companies,pagination:t.pagination,show_skeleton:t.first_loading,ui_config:t.ui_config},on:{fetch:t.fetch}}):t._e()],1)])},[],!1,null,null,null).exports;const mc=e({name:"ViewCompany",props:["company_id"],components:{CompanyInfoSide:vs},data:function(){return{company:null,loading:!1,updating:!1,show_profile:!0,menu_items:window.fcAdmin.company_profile_sections,activeTab:this.$route.name}},watch:{company_id:function(){this.company=null,this.fetchCompany()}},methods:{setup:function(t){this.company=t,this.changeTitle(t.name+" - Company")},fetchCompany:function(){var t=this;this.loading=!0,this.show_profile=!1,this.$get("companies/"+this.company_id).then(function(e){t.setup(e.company)}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},deleteCompany:function(){var t=this;this.loading=!0,this.$del("companies/".concat(this.id)).then(function(e){t.$notify.success(e.message),t.$router.push({name:"companies"})}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},maybeCustomHandler:function(t){var e=this;"fluentcrm_company_profile_extended"==t.name&&(this.show_profile=!1,setTimeout(function(){e.show_profile=!0},100))}},mounted:function(){this.fetchCompany(),this.changeTitle(this.$t("View Company"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[t.company?e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{lg:6,md:8,sm:24,xs:24}},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"companies"}}},[t._v("\n                            "+t._s(t.$t("Companies"))+"\n                        ")]),t._v(" "),e("el-breadcrumb-item",[t._v(t._s(t.company.name))])],1)],1)]),t._v(" "),e("div",{staticClass:"fc_company_sidebar"},[e("company-info-side",{attrs:{company:t.company}})],1)]),t._v(" "),e("el-col",{attrs:{lg:18,md:16,sm:24,xs:24}},[e("el-menu",{staticClass:"fc_segment_menu",staticStyle:{"margin-bottom":"10px"},attrs:{mode:"horizontal",router:!0,"default-active":t.activeTab}},t._l(t.menu_items,function(i,n){return e("el-menu-item",{key:n,class:"fc_item_"+i.name+" "+(i.item_class||""),attrs:{route:{name:i.name,query:i.query},index:i.query?i.query.handler:i.name}},[e("span",[t._v(t._s(i.title))])])}),1),t._v(" "),e("router-view",{attrs:{company_id:t.company_id,company:t.company}})],1)],1):e("div",[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{lg:6,md:8,sm:24,xs:24}},[e("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{animated:!0,rows:25}})],1),t._v(" "),e("el-col",{attrs:{lg:18,md:16,sm:24,xs:24}},[e("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{animated:!0,rows:10}})],1)],1)],1)],1)},[],!1,null,null,null).exports;var fc=e({name:"ContactAssignSelector",props:["company"],components:{},data:function(){return{contact_search:"",contacts:[],searched:!1,loading:!1,selectedIds:[],attaching:!1}},methods:{fetchContacts:function(){var t=this;this.loading=!0,this.selectedIds=[],this.$get("companies/search-unattached-contacts",{limit:20,search:this.contact_search,company_id:this.company.id}).then(function(e){t.contacts=e.results,t.searched=!0}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},attachContacts:function(){var t=this;this.attaching=!0,this.$post("companies/attach-subscribers",{subscriber_ids:this.selectedIds,company_ids:[this.company.id]}).then(function(e){t.$notify.success(e.message),t.$emit("attached")}).catch(function(e){t.handleError(e)}).finally(function(){t.attaching=!1})}}},function(){var t=this,e=t._self._c;return e("div",[e("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"Search Contact"},model:{value:t.contact_search,callback:function(e){t.contact_search=e},expression:"contact_search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetchContacts},slot:"append"})],1),t._v(" "),t.loading?e("div",[e("el-skeleton",{attrs:{animated:!0,rows:3}})],1):t.searched&&!t.contacts.length?e("div",[e("p",[t._v(t._s(t.$t("No contacts found based on your search")))])]):e("div",{staticClass:"fc_companies"},[e("el-checkbox-group",{staticClass:"fc_rich_checkboxes",model:{value:t.selectedIds,callback:function(e){t.selectedIds=e},expression:"selectedIds"}},t._l(t.contacts,function(i){return e("el-checkbox",{key:i.id,attrs:{label:i.id}},[e("div",{staticClass:"fc_company_card"},[e("div",{staticClass:"fc_company_body"},[e("div",{staticClass:"company_name"},[t._v("\n                            "+t._s(i.full_name)+"\n                        ")]),t._v(" "),e("div",{staticClass:"company_domain"},[t._v("\n                            "+t._s(i.email)+"\n                        ")]),t._v(" "),t.company.phone?e("div",{staticClass:"company_email"},[e("span",[t._v(t._s(t.company.phone))])]):t._e()]),t._v(" "),e("div",{staticClass:"fc_company_logo fc_company_photo"},[e("img",{attrs:{src:i.photo,alt:""}})])])])}),1),t._v(" "),t.selectedIds.length?e("div",[e("div",{staticStyle:{padding:"10px 10px 20px"}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.attaching,expression:"attaching"}],attrs:{disabled:t.attaching,size:"small",type:"success"},on:{click:function(e){return t.attachContacts()}}},[t._v("\n                    "+t._s(t.$t("Attach Selected Contacts"))+" ("+t._s(t.selectedIds.length)+")\n                ")])],1)]):t._e()],1)],1)},[],!1,null,null,null);var hc=e({name:"ContactAdded",props:["company"],components:{ContactAssignSelector:fc.exports,FormHandler:Pi},data:function(){return{assignState:"existing",newContactDrawer:!1}},methods:{showContactAdd:function(){this.newContactDrawer=!0},handleCreated:function(t){this.newContactDrawer=!1,this.$router.push({name:"subscriber",params:{id:t.id}})},handleAttached:function(){this.newContactDrawer=!1,this.$emit("reloadContacts")}}},function(){var t=this,e=t._self._c;return e("div",[e("el-button",{staticClass:"fc_columns_filter",staticStyle:{"margin-left":"10px",padding:"8px 15px"},attrs:{icon:"el-icon-plus",size:"small",plain:""},on:{click:function(e){return t.showContactAdd()}}},[t._v(t._s(t.$t("Contact")))]),t._v(" "),e("el-drawer",{staticClass:"fc_company_info_drawer",attrs:{"with-header":!0,size:t.globalDrawerSize,title:"existing"==t.assignState?t.$t("Add existing contacts"):t.$t("Create contact & Assign"),"append-to-body":!0,visible:t.newContactDrawer},on:{"update:visible":function(e){t.newContactDrawer=e}}},[t.newContactDrawer?e("div",{staticStyle:{padding:"10px 15px"}},[e("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[e("el-radio-group",{model:{value:t.assignState,callback:function(e){t.assignState=e},expression:"assignState"}},[e("el-radio-button",{attrs:{value:"existing",label:"existing"}},[t._v(t._s(t.$t("Add Existing")))]),t._v(" "),e("el-radio-button",{attrs:{value:"new",label:"new"}},[t._v(t._s(t.$t("Create New")))])],1)],1),t._v(" "),"existing"==t.assignState?e("div",[e("contact-assign-selector",{attrs:{company:t.company},on:{attached:function(e){return t.handleAttached()}}})],1):e("div",[e("form-handler",{attrs:{company_id:t.company.id},on:{created:t.handleCreated}})],1)]):t._e()])],1)},[],!1,null,null,null);function gc(t){return gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(t)}function vc(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function bc(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=gc(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=gc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gc(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const yc=e({name:"CompanyMembers",props:["company_id","company"],components:{ContactsTable:Rn,ContactAdder:hc.exports},data:function(){return{loading:!0,subscribers:[],columns:[],pagination:{current_page:1,per_page:10,total:0},query_data:{tags:[],lists:[],search:"",statuses:[],sort_by:"id",sort_type:"DESC",custom_fields:!1},ui_config:{show_list:!0,show_tag:!0,disable_filters_without_selection:!0},options:{tags:[],lists:[],statuses:[],countries:[],sampleCsv:null,delimiter:"comma"}}},methods:{fetchContacts:function(){var t=this;this.loading=!0,this.$get("subscribers",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?vc(Object(i),!0).forEach(function(e){bc(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):vc(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({company_ids:[this.company_id],per_page:this.pagination.per_page,page:this.pagination.current_page},this.query_data)).then(function(e){t.subscribers=e.subscribers.data,t.pagination.total=e.subscribers.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},getOptions:function(){var t=this;this.$get("reports/options",{fields:"tags,lists,statuses,contact_types,sampleCsv,custom_fields"}).then(function(e){t.options=e.options})}},mounted:function(){this.getOptions()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("contacts-table",{attrs:{fire_ready_fetch:!0,options:t.options,always_searchbar:!0,query_data:t.query_data,is_loading:t.loading,ui_config:t.ui_config,subscribers:t.subscribers,pagination:t.pagination},on:{fetch:function(e){return t.fetchContacts()}}},[e("div",{attrs:{slot:"after_search_box"},slot:"after_search_box"},[e("contact-adder",{attrs:{company:t.company},on:{reloadContacts:function(e){return t.fetchContacts()}}})],1)])],1)},[],!1,null,null,null).exports;const wc=e({name:"CompanyNotes",props:["company_id"],components:{ObjectNotesTemplate:ua},mounted:function(){this.changeTitle(this.$t("Notes"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_notes_wrapper fc_company_notes_wrap"},[e("object-notes-template",{staticStyle:{"box-shadow":"none","border-radius":"0"},attrs:{subscriber_id:t.company_id,route_prefix:"companies",section_title:t.$t("Notes & Activities")}})],1)},[],!1,null,null,null).exports;const Cc=e({name:"CompanyExternalView",props:["company","company_id"],data:function(){return{profile_section:"",heading:"",content_html:"",loading:!0,crud:null,showForm:!1,crudConfig:{},saving:!1}},watch:{"$route.query":{handler:function(t){this.profile_section=t.handler,this.fetchData()},deep:!0,immediate:!0}},methods:{fetchData:function(){var t=this;this.loading=!0,this.$get("companies/".concat(this.company_id,"/custom_tab_view"),{section_provider:this.profile_section}).then(function(e){t.heading=e.heading,t.content_html=e.content_html,e.crud&&(t.crud=e.crud)}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})}},mounted:function(){this.fetchData()}},function(){var t=this,e=t._self._c;return t.loading?e("el-skeleton",{staticClass:"fc_skeleton_loader",staticStyle:{"margin-top":"20px"},attrs:{animated:""}},[e("template",{slot:"template"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:12}},[e("el-skeleton",{attrs:{rows:10}})],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-skeleton",{attrs:{rows:3}})],1)],1)],1)],2):e("div",{staticClass:"fluentcrm_databox"},[e("div",{staticClass:"fc_external_company_profile_data",class:"fc_section_"+t.profile_section,domProps:{innerHTML:t._s(t.content_html)}})])},[],!1,null,null,null).exports;var $c=e({name:"EmailSequencePromo"},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_narrow_box fluentcrm_databox text-align-center"},[e("h2",{},[t._v(t._s(t.$t("Recurring Campaigns")))]),t._v(" "),e("p",{staticClass:"text-align-center"},[t._v(t._s(t.$t("Send_Email_Daily_Weekly_Monthly")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Upgrade_To_Pro")))]),t._v(" "),e("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Get FluentCRM Pro")))])])},[],!1,null,null,null);const kc=e({name:"RecurringCampaignsView",components:{EmailRecurringPromo:$c.exports}},function(){var t=this._self._c;return this.has_campaign_pro?t("div",{staticClass:"fc_recurring_root"},[t("router-view")],1):t("div",[t("email-recurring-promo")],1)},[],!1,null,null,null).exports;var xc=e({name:"BulkCampaignActions",props:["selectedCampaigns","options"],components:{Confirm:d},data:function(){return{actions:{},select_job:{action_name:"",selected_options:[]},doing_action:!1,select_status:"",selectedLabels:[]}},watch:{"select_job.action_name":{handler:function(){this.select_job.selected_options=[],this.select_status=""},deep:!0}},methods:{doBulkAction:function(){var t=this,e=[];this.each(this.selectedCampaigns,function(t){e.push(t.id)}),this.doing_action=!0,this.$post("recurring-campaigns/do-bulk-action",{action_name:this.select_job.action_name,labels:this.selectedLabels,campaign_ids:e}).then(function(e){t.$notify.success(e.message),t.$emit("refetch"),t.selectedLabels=[]}).catch(function(e){t.handleError(e)}).finally(function(){t.doing_action=!1})}},mounted:function(){this.actions={apply_labels:{label:this.$t("Apply Labels"),options:this.options.labels},delete_campaigns:{label:this.$t("Delete Recurring Campaigns")}}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_bulk_wrap"},[e("div",{staticClass:"fc_bulk_item"},[e("label",[t._v(t._s(t.$t("Select Action")))]),t._v(" "),e("el-select",{staticClass:"mt-5",attrs:{clearable:"",filterable:"",size:"mini",placeholder:t.$t("Select Bulk Action")},model:{value:t.select_job.action_name,callback:function(e){t.$set(t.select_job,"action_name",e)},expression:"select_job.action_name"}},t._l(t.actions,function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t.label}})}),1)],1),t._v(" "),"apply_labels"===t.select_job.action_name?[e("el-select",{attrs:{filterable:"",size:"mini",placeholder:t.$t("Select Labels"),multiple:""},model:{value:t.selectedLabels,callback:function(e){t.selectedLabels=e},expression:"selectedLabels"}},t._l(t.options.labels,function(i){return e("el-option",{key:i.id,attrs:{value:i.id}},[e("span",{style:"background:"+i.settings.color+";padding: 2px 5px 4px 5px;border-radius: 4px;"},[t._v("\n                    "+t._s(i.title)+"\n                ")])])}),1),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"ml-5",attrs:{disable:t.doing_action,size:"mini",disabled:!t.selectedLabels.length,type:"success"},on:{click:function(e){return t.doBulkAction()}}},[t._v("\n            "+t._s(t.$t("Apply Label"))+"\n        ")])]:"delete_campaigns"==t.select_job.action_name?[e("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.doBulkAction()}}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action,size:"mini",type:"danger"},slot:"reference"},[t._v(t._s(t.$t("Delete Campaigns"))+"\n            ")])],1)]:t._e()],2)},[],!1,null,"1d2a510f",null);const Sc=e({name:"RecurringCampaigns",components:{Confirm:d,Pagination:m,EmailHeaderPopNav:y,Labels:w,BulkCampaignActions:xc.exports},data:function(){return{loading:!1,deleting:!1,search:"",dialogVisible:!1,app_loaded:!1,pagination:{total:0,per_page:10,current_page:1},order:"desc",orderBy:"id",selection:!1,campaigns:[],selectedCampaigns:[],duplicating:!1,showingLabelsConfig:!1,options:{labels:[]},labelFilter:[],selectedLabels:[],isOpenCampaignAction:!1,showApplyLabelSetting:!1,showActionButtons:!1}},methods:{fetch:function(){var t=this;this.loading=!0;var e={per_page:this.pagination.per_page,page:this.pagination.current_page,labels:this.labelFilter,with:["stats"],order:this.order,orderBy:this.orderBy,search:this.search};this.$get("recurring-campaigns",e).then(function(e){t.campaigns=e.campaigns.data,t.pagination.total=e.campaigns.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1,t.app_loaded=!0})},deleteSelected:function(){var t=this,e=[];this.each(this.selectedCampaigns,function(t){e.push(t.id)}),this.deleteCampaigns(e,function(){t.selectedCampaigns=[],t.selection=!1})},onSelection:function(t){this.selection=!!t.length,this.selectedCampaigns=t},deleteCampaigns:function(t,e){var i=this;this.$post("recurring-campaigns/delete-bulk",{campaign_ids:t}).then(function(t){e&&e(t),i.fetch(),i.$notify.success(t.message)}).catch(function(t){i.handleError(t)})},duplicateCampaign:function(t){var e=this;this.duplicating=!0,this.$post("recurring-campaigns/".concat(t.id,"/duplicate")).then(function(t){e.$notify.success(t.message),e.$router.push({name:"view_recurring_campaign",params:{campaign_id:t.campaign_id}})}).catch(function(t){e.handleError(t)}).finally(function(){e.duplicating=!1})},handleSortable:function(t){"descending"===t.order?(this.orderBy=t.prop,this.order="desc"):(this.orderBy=t.prop,this.order="asc"),this.fetch()},getDescription:function(t){var e=t.scheduling_settings,i="yes"==e.send_automatically?"(automatically)":"(manually)";return"daily"==e.type?"Broadcasts daily at ".concat(e.time," ").concat(i):"weekly"==e.type?"Broadcasts every ".concat(this.getFullDayName(e.day)," at ").concat(e.time," ").concat(i):"monthly"==e.type?"Broadcasts every ".concat(this.getDayName(e.day)," of a month at ").concat(e.time," ").concat(i):"--"},getFullDayName:function(t){switch(t){case"sun":return this.$t("Sunday");case"mon":return this.$t("Monday");case"tue":return this.$t("Tuesday");case"wed":return this.$t("Wednesday");case"thu":return this.$t("Thursday");case"fri":return this.$t("Friday");case"sat":return this.$t("Saturday");default:return"--"}},getDayName:function(t){if(t<1||t>31)return"--";switch(t){case 1:case 21:case 31:return"".concat(t,"st");case 2:case 22:return"".concat(t,"nd");case 3:case 23:return"".concat(t,"rd");default:return"".concat(t,"th")}},exportRecurringCampaign:function(t){this.has_campaign_pro?location.href=window.ajaxurl+"?"+jQuery.param({action:"fluentcrm_export_recurring_campaign",campaign_id:t.id}):this.$notify.error(this.$t("Recurring_Campaign_Export_Alert"))},fetchLabels:function(){var t=this;this.$get("labels").then(function(e){t.options.labels=e.labels}).catch(function(e){t.handleError(e)}).finally(function(){})},showLabelDialog:function(){this.showingLabelsConfig=!0},closeDrawer:function(){this.showingLabelsConfig=!1},handleBackAction:function(){this.showActionButtons=!0,this.showApplyLabelSetting=!1},toggleComponent:function(){var t=this;this.isOpenCampaignAction=!this.isOpenCampaignAction,this.isOpenCampaignAction?(this.showActionButtons=!0,setTimeout(function(){document.addEventListener("click",t.handleClickOutside)},0)):document.removeEventListener("click",this.handleClickOutside)},handleClickOutside:function(t){var e;null!==(e=this.$refs.fcFunnelActions)&&void 0!==e&&e.contains(t.target)||this.closePopOver()},closePopOver:function(){this.isOpenCampaignAction=!1,this.showApplyLabelSetting=!1,this.showActionButtons=!0},applyLabelSetting:function(t){this.showApplyLabelSetting=!0,this.showActionButtons=!1,this.selectedLabels=t.labels.map(function(t){return t.id})},applyLabels:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"attach";this.$put("recurring-campaigns/"+t.id+"/update-labels",{action:n,label_ids:"attach"==n?this.selectedLabels:e}).then(function(t){i.$notify.success(t.message),i.fetch()}).catch(function(t){i.handleError(t)}).finally(function(){})}},watch:{labelFilter:function(){this.fetch()}},mounted:function(){this.fetch(),this.fetchLabels(),this.changeTitle(this.$t("Recurring Email Campaigns"))}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("h3",[e("email-header-pop-nav",{attrs:{head_title:t.$t("Recurring Email Campaigns")}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.pagination.total,expression:"pagination.total"}],staticClass:"ff_small"},[t._v("("+t._s(t._f("formatMoney")(t.pagination.total))+")")])],1)]),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[e("div",{staticClass:"fc-search-box"},[e("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),e("el-select",{staticClass:"ml-5",staticStyle:{"max-width":"194px"},attrs:{size:"mini",multiple:"",clearable:"",placeholder:t.$t("Filter by Labels"),filterable:""},model:{value:t.labelFilter,callback:function(e){t.labelFilter=e},expression:"labelFilter"}},t._l(t.options.labels,function(i){return e("el-option",{key:i.id,attrs:{value:i.id,label:i.title}},[e("span",{style:"background:"+i.settings.color+";padding: 2px 5px 4px 5px;border-radius: 4px;"},[t._v("\n                        "+t._s(i.title)+"\n                    ")])])}),1),t._v(" "),t.hasPermission("fcrm_manage_emails")?[e("el-button",{staticClass:"ml-5",attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(e){return t.$router.push({name:"create_recurring_campaign"})}}},[t._v("\n                    "+t._s(t.$t("Create New Recurring Campaign"))+"\n                ")])]:t._e(),t._v(" "),e("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-upload"},on:{click:function(e){return t.$router.push({name:"import_recurring_campaigns"})}}},[t._v("\n                "+t._s(t.$t("Import"))+"\n            ")]),t._v(" "),e("el-dropdown",{attrs:{trigger:"click"}},[e("span",{staticClass:"el-dropdown-link"},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{cursor:"pointer"}})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{staticClass:"fc_dropdown_action"},[e("span",{staticClass:"el-popover__reference",on:{click:t.showLabelDialog}},[t._v("\n                            "+t._s(t.$t("Manage Labels"))+"\n                        ")])])],1)],1)],2)]),t._v(" "),t.selection?e("div",{staticClass:"fluentcrm-header-secondary"},[e("bulk-campaign-actions",{attrs:{selectedCampaigns:t.selectedCampaigns,options:t.options},on:{refetch:t.fetch}})],1):t._e(),t._v(" "),e("div",{staticClass:"fluentcrm_body fluentcrm_pad_b_20",staticStyle:{position:"relative"}},[t.loading?e("div",{staticClass:"fc_loading_bar"},[e("el-progress",{staticClass:"el-progress_animated",attrs:{"show-text":!1,percentage:30}})],1):t._e(),t._v(" "),t.loading&&!t.app_loaded?e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{rows:7}}):t._e(),t._v(" "),t.pagination.total?e("div",{staticClass:"fluentcrm_sequences_table"},[e("el-table",{attrs:{stripe:"",border:"",data:t.campaigns},on:{"sort-change":t.handleSortable,"selection-change":t.onSelection}},[e("el-table-column",{attrs:{type:"selection",width:"45"}}),t._v(" "),e("el-table-column",{attrs:{sortable:"",property:"title",width:"250",label:t.$t("Title"),prop:"title"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"view_recurring_campaign",params:{campaign_id:i.row.id},query:{t:(new Date).getTime()}}}},[t._v("\n                            "+t._s(i.row.title)+"\n                            "),e("el-tag",{attrs:{size:"mini",type:"active"==i.row.status?"success":"info"}},[t._v("\n                                "+t._s(i.row.status)+"\n                            ")])],1),t._v(" "),i.row.has_draft?e("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(e){return t.$router.push({name:"past_recurring_emails",params:{campaign_id:i.row.id}})}}},[t._v("View Draft Email")]):t._e()]}}],null,!1,3025220140)}),t._v(" "),e("el-table-column",{attrs:{width:"250",label:t.$t("Labels")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.labels?e("div",{staticClass:"fc_funnel_labels"},t._l(i.row.labels,function(n,s){return e("el-tag",{key:s,style:"background:"+n.color,attrs:{size:"mini"}},[t._v("\n                                "+t._s(n.title)+"\n                                "),e("Confirm",{attrs:{message:t.$t("Remove_Label_From_campaign_Message")},on:{yes:function(e){return t.applyLabels(i.row,n.id,"detach")}}},[e("i",{staticClass:"el-tag__close el-icon-close",attrs:{slot:"reference"},slot:"reference"})])],1)}),1):t._e()]}}],null,!1,1352563911)}),t._v(" "),e("el-table-column",{attrs:{width:"220",label:t.$t("Description")},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v("\n                        "+t._s(t.getDescription(i.row.settings))+"\n                        "),"active"!=i.row.status||i.row.has_draft?t._e():e("span",{staticClass:"fc_small",attrs:{title:t.nsHumanDiffTime(i.row.scheduled_at)}},[e("br"),t._v("Next Schedule: "+t._s(i.row.scheduled_at))])]}}],null,!1,4136558109)}),t._v(" "),e("el-table-column",{attrs:{width:"100",label:t.$t("Broadcasts")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("router-link",{attrs:{to:{name:"past_recurring_emails",params:{campaign_id:i.row.id}}}},[t._v("\n                            "+t._s(i.row.emails_count)+"\n                        ")])]}}],null,!1,4061137372)}),t._v(" "),e("el-table-column",{attrs:{width:"180",sortable:"",property:"created_at",label:t.$t("Created at"),prop:"created_at"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t._f("nsHumanDiffTime")(i.row.created_at)))])]}}],null,!1,1673373615)}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:t.$t("Actions"),"min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tooltip",{attrs:{effect:"dark",content:t.$t("Edit Emails"),placement:"top"}},[e("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-edit"},on:{click:function(e){t.$router.push({name:"view_recurring_campaign",params:{campaign_id:i.row.id},query:{t:(new Date).getTime()}})}}},[t._v(t._s(t.$t("edit"))+"\n                            ")])],1),t._v(" "),e("el-popover",{attrs:{visible:t.isOpenCampaignAction,placement:"bottom","popper-class":"fc-funnel-actions-popover",width:200},scopedSlots:t._u([{key:"reference",fn:function(){return[e("span",{ref:"buttonRefMoreFiled",staticClass:"fbs_show_board_show_section_actions",on:{click:t.toggleComponent}},[e("i",{staticClass:"el-icon-more icon-90degree el-icon--right",staticStyle:{"font-weight":"bold",cursor:"pointer"}})])]},proxy:!0}],null,!0)},[e("div",{ref:"fcFunnelActions"},[t.showActionButtons?t._e():e("div",{staticClass:"fc_funnel_action_header",on:{click:t.handleBackAction}},[e("i",{staticClass:"el-icon-back"}),t._v(" "+t._s(t.$t("Back")))]),t._v(" "),t.showActionButtons?e("div",{staticClass:"fc_funnel_acton_field"},[e("el-button",{staticClass:"fc_funnel_action_btn",attrs:{link:"",icon:"el-icon-copy-document"},on:{click:function(e){return t.duplicateCampaign(i.row)}}},[t._v("\n                                        "+t._s(t.$t("Duplicate"))+"\n                                    ")]),t._v(" "),e("el-button",{staticClass:"fc_funnel_action_btn",attrs:{link:"",icon:"el-icon-price-tag"},on:{click:function(e){return t.applyLabelSetting(i.row)}}},[t._v("\n                                        "+t._s(t.$t("Apply Labels"))+"\n                                    ")]),t._v(" "),t.hasPermission("fcrm_manage_emails")?e("el-button",{staticClass:"fc_funnel_action_btn",attrs:{link:"",icon:"el-icon-download"},on:{click:function(e){return t.exportRecurringCampaign(i.row)}}},[t._v("\n                                        "+t._s(t.$t("Export Campaign"))+"\n                                    ")]):t._e(),t._v(" "),e("confirm",{attrs:{placement:"top-start",message:t.$t("Rec_Camp_Delete_Alert")},on:{yes:function(e){return t.deleteCampaigns([i.row.id])}}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("el-button",{staticClass:"fc_funnel_action_btn",attrs:{icon:"el-icon-delete"}},[t._v("\n                                                "+t._s(t.$t("Delete Automation"))+"\n                                            ")])],1)])],1):t._e(),t._v(" "),t.showApplyLabelSetting?e("el-form",{staticClass:"fc_label_form"},[e("el-form-item",{attrs:{label:t.$t("Labels")}},[e("el-select",{attrs:{multiple:"",placeholder:"Select Labels"},model:{value:t.selectedLabels,callback:function(e){t.selectedLabels=e},expression:"selectedLabels"}},t._l(t.options.labels,function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1),t._v(" "),e("el-form-item",[e("el-button",{staticClass:"fc_primary_button",attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return t.applyLabels(i.row,[],"attach")}}},[t._v("\n                                            "+t._s(t.$t("Apply"))+"\n                                        ")])],1)],1):t._e()],1)])]}}],null,!1,3204402118)})],1),t._v(" "),e("el-row",[e("el-col",{attrs:{md:12,sm:24}},[t._v("\n                    \n                ")]),t._v(" "),e("el-col",{attrs:{md:12,sm:24}},[e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)],1)],1):e("div",[t.loading?t._e():e("div",{staticClass:"fluentcrm_hero_box"},[e("h2",[t._v(t._s(t.$t("Rec_Camp_Empty_Alert")))]),t._v(" "),e("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"success"},on:{click:function(e){return t.$router.push({name:"create_recurring_campaign"})}}},[t._v("\n                    "+t._s(t.$t("Create New Recurring Campaign"))+"\n                ")])],1)])],1),t._v(" "),t.showingLabelsConfig?e("labels",{attrs:{open:t.showingLabelsConfig},on:{close:t.closeDrawer,callFetchLabels:t.fetchLabels}}):t._e()],1)},[],!1,null,null,null).exports;const Ac=e({name:"CampaignBasicSettings",props:["campaign"],methods:{maybeResetDay:function(){"weekly"==this.campaign.settings.scheduling_settings.type?this.campaign.settings.scheduling_settings.day="mon":"monthly"==this.campaign.settings.scheduling_settings.type&&(this.campaign.settings.scheduling_settings.day=1)}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_flow_basic"},[e("el-form-item",{attrs:{label:t.$t("Title of the Recurring Campaign")}},[e("el-input",{attrs:{type:"text",placeholder:t.$t("eg: Weekly Post Updated")},model:{value:t.campaign.title,callback:function(e){t.$set(t.campaign,"title",e)},expression:"campaign.title"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("How often you want to send this email?")}},[e("el-radio-group",{attrs:{size:"small"},on:{change:function(e){return t.maybeResetDay()}},model:{value:t.campaign.settings.scheduling_settings.type,callback:function(e){t.$set(t.campaign.settings.scheduling_settings,"type",e)},expression:"campaign.settings.scheduling_settings.type"}},[e("el-radio-button",{attrs:{label:"daily"}},[t._v(t._s(t.$t("Daily")))]),t._v(" "),e("el-radio-button",{attrs:{label:"weekly"}},[t._v(t._s(t.$t("Weekly")))]),t._v(" "),e("el-radio-button",{attrs:{label:"monthly"}},[t._v(t._s(t.$t("Monthly")))])],1)],1),t._v(" "),e("el-row",{attrs:{gutter:30}},["weekly"==t.campaign.settings.scheduling_settings.type?e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Select which day you want to send email")}},[e("el-select",{attrs:{placeholder:t.$t("Select Day of the week")},model:{value:t.campaign.settings.scheduling_settings.day,callback:function(e){t.$set(t.campaign.settings.scheduling_settings,"day",e)},expression:"campaign.settings.scheduling_settings.day"}},[e("el-option",{attrs:{value:"mon",label:t.$t("Every Monday")}}),t._v(" "),e("el-option",{attrs:{value:"tue",label:t.$t("Every Tuesday")}}),t._v(" "),e("el-option",{attrs:{value:"wed",label:t.$t("Every Wednesday")}}),t._v(" "),e("el-option",{attrs:{value:"thu",label:t.$t("Every Thursday")}}),t._v(" "),e("el-option",{attrs:{value:"fri",label:t.$t("Every Friday")}}),t._v(" "),e("el-option",{attrs:{value:"sat",label:t.$t("Every Saturday")}}),t._v(" "),e("el-option",{attrs:{value:"sun",label:t.$t("Every Sunday")}})],1)],1)],1):t._e(),t._v(" "),"monthly"==t.campaign.settings.scheduling_settings.type?e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Select which day of the month to send email")}},[e("el-select",{attrs:{placeholder:t.$t("Select Day of the month")},model:{value:t.campaign.settings.scheduling_settings.day,callback:function(e){t.$set(t.campaign.settings.scheduling_settings,"day",e)},expression:"campaign.settings.scheduling_settings.day"}},t._l(31,function(i){return e("el-option",{key:i,attrs:{value:i,label:t.$t("Day")+" - "+i}})}),1)],1)],1):t._e(),t._v(" "),e("el-col",{attrs:{md:12,xs:24}},[e("el-form-item",{attrs:{label:t.$t("Which time you would like to schedule")}},[e("el-time-select",{attrs:{"picker-options":{step:"00:15",start:"00:00",end:"23:59"},placeholder:t.$t("Select Schedule time")},model:{value:t.campaign.settings.scheduling_settings.time,callback:function(e){t.$set(t.campaign.settings.scheduling_settings,"time",e)},expression:"campaign.settings.scheduling_settings.time"}}),t._v(" "),e("p",{staticStyle:{margin:"0","font-size":"90%"}},[t._v(t._s(t.$t("Current Date & Time (server):"))+" "+t._s(t.currentDateTime()))])],1)],1)],1),t._v(" "),e("el-form-item",[e("el-checkbox",{staticClass:"fc_inline_check",attrs:{"true-label":"yes","false-label":"no"},model:{value:t.campaign.settings.scheduling_settings.send_automatically,callback:function(e){t.$set(t.campaign.settings.scheduling_settings,"send_automatically",e)},expression:"campaign.settings.scheduling_settings.send_automatically"}},[t._v(t._s(t.$t("Send_Email_Auto_Info")))])],1)],1)},[],!1,null,null,null).exports;const Ec=e({name:"CampaignConditions",props:["sending_conditions"],methods:{addMoreCondition:function(){this.sending_conditions.push([{object_type:"cpt",object_name:"post",object_key:"post_date",comparison_type:"within_days",compare_value:7}])},removeCondition:function(t,e){this.sending_conditions[t].splice(e,1),this.sending_conditions[t].length||this.sending_conditions.splice(t,1)}}},function(){var t=this,e=t._self._c;return t.sending_conditions.length?e("div",{staticClass:"flow_conditions"},[t._l(t.sending_conditions,function(i,n){return e("div",{key:n,staticClass:"fc_flow_condition_block"},[t._l(i,function(i,s){return e("div",{key:s,staticClass:"fc_flow_condition"},[e("span",[t._v(t._s(t.$t("Send emails if"))+" ")]),t._v(" "),e("span",[e("el-select",{attrs:{size:"mini"},model:{value:i.object_name,callback:function(e){t.$set(i,"object_name",e)},expression:"condition.object_name"}},t._l(t.appVars.publicPostTypes,function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})}),1)],1),t._v(" "),e("span",[t._v(t._s(t.$t("published within")))]),t._v(" "),e("span",[e("el-input",{attrs:{size:"mini",type:"number",placeholder:t.$t("type days")},model:{value:i.compare_value,callback:function(e){t.$set(i,"compare_value",e)},expression:"condition.compare_value"}})],1),t._v(" "),e("span",[t._v(t._s(t.$t("days")))]),t._v(" "),e("span",{staticStyle:{"margin-left":"20px"}},[e("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(e){return t.removeCondition(n,s)}}})],1)])}),t._v(" "),n+1!=t.sending_conditions.length?e("p",{staticClass:"fc_or"},[e("span",[t._v(t._s(t.$t("OR")))])]):t._e()],2)}),t._v(" "),e("div",{staticClass:"fc_flow_more"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.addMoreCondition()}}},[t._v(t._s(t.$t("Add OR Condition")))])],1)],2):e("div",[e("p",[t._v(t._s(t.$t("Emails_Will_Sent_Auto"))+", "),e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addMoreCondition()}}},[t._v(t._s(t.$t("click here")))])])])},[],!1,null,null,null).exports;const Tc=e({name:"CreateRecurringCampaignFlow",components:{RecipientTaggerForm:fe,BasicSettings:Ac,ConditionsSettings:Ec},data:function(){return{loading:!1,creating:!1,activeStep:0,steps:[{title:this.$t("Start"),description:this.$t("Provide campaign details")},{title:this.$t("Conditions"),description:this.$t("Select automation conditions")},{title:this.$t("Recipients"),description:this.$t("Select Email Recipients")}],campaign:{title:"",email_subject:"",email_pre_header:"",email_body:"",status:"draft",settings:{subscribers_settings:{subscribers:[{list:"all",tag:"all"}],excludedSubscribers:[{list:null,tag:null}],sending_filter:"list_tag",dynamic_segment:{id:"",slug:""},advanced_filters:[[]]},scheduling_settings:{type:"weekly",day:"",time:"",send_automatically:"yes"},sending_conditions:[[{object_type:"cpt",object_name:"post",object_key:"post_date",comparison_type:"within_days",compare_value:7}]]}}}},methods:{nextStep:function(t){if(1===t){if(!this.campaign.title)return void this.$notify.error(this.$t("Please provide an unique title"));if(!this.campaign.settings.scheduling_settings.time)return void this.$notify.error(this.$t("Please provide a time"));if("weekly"==this.campaign.settings.scheduling_settings.type&&!this.campaign.settings.scheduling_settings.day)return void this.$notify.error(this.$t("Please provide a day"))}else if(2==t){if(this.campaign.settings.sending_conditions.length)if(this.campaign.settings.sending_conditions[0][0].compare_value<1)return void this.$notify.error(this.$t("Please provide condition value"))}this.activeStep=t},goToPrev:function(t){this.activeStep=t},createCampaign:function(){var t=this;this.creating=!0,this.$post("recurring-campaigns",{campaign:JSON.stringify(this.campaign)}).then(function(e){t.$notify.success(e.message),t.$router.push({name:"view_recurring_campaign",params:{campaign_id:e.campaign_id}})}).catch(function(e){t.handleError(e),(0===e.go_to_step||e.go_to_step)&&(t.activeStep=e.go_to_step)}).finally(function(){t.creating=!1})}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_create_flow"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"recurring_campaigns"}}},[t._v("\n            "+t._s(t.$t("Recurring Email Campaigns"))+"\n        ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n            "+t._s(t.$t("Create a recurring email broadcast"))+"\n        ")])],1),t._v(" "),e("el-steps",{attrs:{active:t.activeStep,simple:"","finish-status":"success"}},t._l(t.steps,function(t,i){return e("el-step",{key:i,attrs:{title:t.title,description:t.description}})}),1),t._v(" "),e("el-form",{attrs:{"label-position":"top",data:t.campaign}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body fluentcrm_body_boxed fc_flow_items"},[0==t.activeStep?e("div",{staticClass:"step-container"},[e("div",{staticClass:"fc_flow_intro fc_flow_settings"},[e("h3",[t._v(t._s(t.$t("Basic_Info_Of_Rec_Camp")))]),t._v(" "),e("basic-settings",{attrs:{campaign:t.campaign}})],1),t._v(" "),e("div",{staticClass:"flow_nav"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[t._v("\n                            \n                        ")]),t._v(" "),e("el-col",{staticClass:"text-align-right",attrs:{span:12}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{size:"small",type:"success"},on:{click:function(e){return t.nextStep(1)}}},[t._v("\n                                "+t._s(t.$t("Continue to next step [conditions]"))+"\n                            ")])],1)],1)],1)]):t._e(),t._v(" "),1==t.activeStep?e("div",{staticClass:"step-container"},[e("div",{staticClass:"fc_flow_conditions fc_flow_settings"},[e("h3",[t._v("Conditions for sending emails "+t._s(t.campaign.settings.scheduling_settings.type)+" email")]),t._v(" "),e("conditions-settings",{attrs:{sending_conditions:t.campaign.settings.sending_conditions}})],1),t._v(" "),e("div",{staticClass:"flow_nav"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.goToPrev(0)}}},[t._v(" "+t._s(t.$t("Back"))+"\n                            ")])],1),t._v(" "),e("el-col",{staticClass:"text-align-right",attrs:{span:12}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{size:"small",type:"success"},on:{click:function(e){return t.nextStep(2)}}},[t._v("\n                                "+t._s(t.$t("Cam_Continue_TNS_"))+"\n                            ")])],1)],1)],1)]):t._e(),t._v(" "),2==t.activeStep?e("div",{staticClass:"step-container"},[e("div",{staticClass:"fc_flow_subscribers fc_flow_settings"},[e("h3",[t._v(t._s(t.$t("Select Subscribers")))]),t._v(" "),e("recipient-tagger-form",{model:{value:t.campaign.settings.subscribers_settings,callback:function(e){t.$set(t.campaign.settings,"subscribers_settings",e)},expression:"campaign.settings.subscribers_settings"}})],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.goToPrev(1)}}},[t._v(" "+t._s(t.$t("Back"))+"\n                        ")])],1),t._v(" "),e("el-col",{staticClass:"text-align-right",attrs:{span:12}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{size:"small",type:"success"},on:{click:function(e){return t.createCampaign()}}},[t._v("\n                            "+t._s(t.$t("Create Recurring Campaign"))+"\n                        ")])],1)],1)],1):t._e()])])],1)},[],!1,null,null,null).exports;const Pc=e({name:"ViewSingleCampaign",props:["campaign_id"],data:function(){return{campaign:{},loading:!0}},methods:{fetchCampaign:function(){var t=this;this.loading=!0,this.$get("recurring-campaigns/"+this.campaign_id).then(function(e){t.campaign=e.campaign}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},changeStatus:function(){var t=this;this.$post("recurring-campaigns/"+this.campaign.id+"/change-status",{status:this.campaign.status}).then(function(e){t.$notify.success(e.message)}).catch(function(e){t.handleError(e),"active"===t.campaign.status&&(t.campaign.status="draft")})}},mounted:function(){this.fetchCampaign()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[t.campaign?e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"recurring_campaigns"}}},[t._v("\n                    "+t._s(t.$t("Recurring Campaigns"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.campaign.title)+"\n                    "),e("span",{staticClass:"status",staticStyle:{width:"auto"}},[t._v(" - "+t._s(t.campaign.status))])])],1)],1),t._v(" "),e("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[t.campaign.id?e("ul",{staticClass:"fc_action_menu"},[e("li",{staticStyle:{padding:"0 15px 0 0",display:"flex","align-items":"center","column-gap":"7px"}},[e("el-switch",{attrs:{"active-value":"active","inactive-value":"draft"},on:{change:function(e){return t.changeStatus()}},model:{value:t.campaign.status,callback:function(e){t.$set(t.campaign,"status",e)},expression:"campaign.status"}}),t._v("\n                    "+t._s(t._f("ucFirst")(t.campaign.status))+"\n                ")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"view_recurring_campaign",params:{campaign_id:t.campaign.id}}}},[t._v("\n                        "+t._s(t.$t("Email Configuration"))+"\n                    ")])],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"recurring_campaign_settings",params:{campaign_id:t.campaign.id}}}},[t._v("\n                        "+t._s(t.$t("Settings"))+"\n                    ")])],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"past_recurring_emails",params:{campaign_id:t.campaign.id}}}},[t._v("\n                        "+t._s(t.$t("Email History"))+"\n                    ")])],1)]):t._e()])]):t._e(),t._v(" "),t.campaign.id?e("div",{staticClass:"fluentcrm_body fluentcrm_body_boxed",class:t.$route.name},[e("router-view",{attrs:{campaign:t.campaign}})],1):t.loading?e("div",{staticClass:"fluentcrm_body fluentcrm_body_boxed"},[e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{animated:!0,rows:7}})],1):t._e()])},[],!1,null,null,null).exports;const Oc=e({name:"CampaignName",components:{EmailBlockComposer:te,InputPopover:F,SendTestEmail:M},props:["campaign"],data:function(){return{loading:!1,saving:!1,app_loaded:!1,smartcodes:window.fcAdmin.globalSmartCodes,email_subject_status:!0,is_dirty:""}},methods:{maybeSave:function(){"visual_builder"==this.campaign.design_template?this.$bus.$emit("getVisualData",{}):this.save()},save:function(){var t=this;if(!this.campaign.email_body)return this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peb"),offset:19});if(!this.campaign.email_subject)return this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peS"),offset:19});this.saving=!0,this.is_dirty=!1;var e={campaign:JSON.stringify(this.campaign),campaign_id:this.campaign.id};this.$post("recurring-campaigns/update-campaign-data",e).then(function(e){t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1})},resetSubject:function(){},handleChangeContent:function(){},initKeyboardSave:function(t){(window.navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&"s"===t.key&&(t.preventDefault(),this.maybeSave())}},mounted:function(){this.changeTitle("Email - "+this.campaign.title),document.addEventListener("keydown",this.initKeyboardSave)},beforeDestroy:function(){document.removeEventListener("keydown",this.initKeyboardSave)}},function(){var t=this,e=t._self._c;return e("div",[e("el-form",{attrs:{"label-position":"top",model:t.campaign}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{sm:24,md:12}},[e("el-form-item",{attrs:{label:t.$t("Email Subject")}},[t.email_subject_status?e("input-popover",{attrs:{doc_url:"https://fluentcrm.com/docs/merge-codes-smart-codes-usage/",popper_extra:"fc_with_c_fields",placeholder:t.$t("Email Subject"),data:t.smartcodes},model:{value:t.campaign.email_subject,callback:function(e){t.$set(t.campaign,"email_subject",e)},expression:"campaign.email_subject"}}):t._e()],1)],1),t._v(" "),e("el-col",{attrs:{sm:24,md:12}},[e("el-form-item",{attrs:{label:t.$t("Email Pre-Header")}},[e("el-input",{attrs:{type:"textarea",placeholder:t.$t("Email Pre-Header"),rows:2},model:{value:t.campaign.email_pre_header,callback:function(e){t.$set(t.campaign,"email_pre_header",e)},expression:"campaign.email_pre_header"}})],1)],1)],1),t._v(" "),e("el-form-item",[e("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.campaign.utm_status,callback:function(e){t.$set(t.campaign,"utm_status",e)},expression:"campaign.utm_status"}},[t._v("\n                "+t._s(t.$t("Ema_Add_UPFU"))+"\n            ")])],1),t._v(" "),1==t.campaign.utm_status||"1"==t.campaign.utm_status?e("div",{staticClass:"fc_form_items_inline fc_is_highlighted",staticStyle:{"margin-bottom":"20px"}},[e("el-form-item",{attrs:{label:t.$t("Campaign Source (required)")}},[e("el-input",{attrs:{placeholder:t.$t("The referrer: (e.g. google, newsletter)")},model:{value:t.campaign.utm_source,callback:function(e){t.$set(t.campaign,"utm_source",e)},expression:"campaign.utm_source"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Campaign Medium (required)")}},[e("el-input",{attrs:{placeholder:t.$t("Marketing medium: (e.g. cpc, banner, email)")},model:{value:t.campaign.utm_medium,callback:function(e){t.$set(t.campaign,"utm_medium",e)},expression:"campaign.utm_medium"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Campaign Name (required)")}},[e("el-input",{attrs:{placeholder:t.$t("Product, promo code, or slogan (e.g. spring_sale)")},model:{value:t.campaign.utm_campaign,callback:function(e){t.$set(t.campaign,"utm_campaign",e)},expression:"campaign.utm_campaign"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Campaign Term")}},[e("el-input",{attrs:{placeholder:t.$t("Identify the paid keywords")},model:{value:t.campaign.utm_term,callback:function(e){t.$set(t.campaign,"utm_term",e)},expression:"campaign.utm_term"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Campaign Content")}},[e("el-input",{attrs:{placeholder:t.$t("Use to differentiate ads")},model:{value:t.campaign.utm_content,callback:function(e){t.$set(t.campaign,"utm_content",e)},expression:"campaign.utm_content"}})],1)],1):t._e()],1),t._v(" "),e("email-block-composer",{attrs:{disabled_templates:{visual_builder:!0},show_audit:!0,show_merge:!0,enable_template_save:!0,enable_templates:!0,campaign:t.campaign},on:{save:function(e){return t.save()},changed:function(e){return t.handleChangeContent()},template_inserted:function(e){return t.resetSubject()}}},[e("template",{slot:"fc_editor_actions"},[e("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.maybeSave()}}},[t._v(t._s(t.$t("Save")))])],1)],2),t._v(" "),e("send-test-email",{attrs:{btn_type:"danger",campaign:{email_subject:t.campaign.email_subject,email_pre_header:t.campaign.email_pre_header,email_body:t.campaign.email_body,design_template:t.campaign.design_template,settings:t.campaign.settings}}})],1)},[],!1,null,null,null).exports;const Dc=e({name:"RecurringEmailSettings",props:["campaign"],components:{RecipientTaggerForm:fe,BasicSettings:Ac,ConditionsSettings:Ec},data:function(){return{saving:!1}},methods:{updateCampaign:function(){var t=this;this.saving=!0;var e={campaign:JSON.stringify({settings:this.campaign.settings,title:this.campaign.title})};this.$post("recurring-campaigns/"+this.campaign.id+"/update-settings",e).then(function(e){t.$notify.success(e.message)}).catch(function(e){t.handleError(e)}).finally(function(){t.saving=!1})}},mounted:function(){this.changeTitle(this.$t("Settings")+" - "+this.campaign.title)}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fc_recurring_settings"},[e("div",{staticClass:"fc_flow_items"},[e("div",{staticClass:"step-container"},[e("el-form",{attrs:{"label-position":"top"}},[e("h3",[t._v(t._s(t.$t("Scheduling Settings")))]),t._v(" "),e("div",{staticClass:"fc_flow_intro fc_flow_settings"},[e("basic-settings",{attrs:{campaign:t.campaign}})],1),t._v(" "),e("h3",[t._v(t._s(t.$t("Sending Conditions")))]),t._v(" "),e("div",{staticClass:"fc_flow_intro fc_flow_settings"},[e("conditions-settings",{attrs:{sending_conditions:t.campaign.settings.sending_conditions}})],1),t._v(" "),e("h3",[t._v(t._s(t.$t("Recipients")))]),t._v(" "),e("div",{staticClass:"fc_flow_intro fc_flow_settings"},[e("recipient-tagger-form",{model:{value:t.campaign.settings.subscribers_settings,callback:function(e){t.$set(t.campaign.settings,"subscribers_settings",e)},expression:"campaign.settings.subscribers_settings"}})],1),t._v(" "),e("div",{staticClass:"flow_nav",staticStyle:{"text-align":"right"}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{disabled:t.saving,type:"success"},on:{click:function(e){return t.updateCampaign()}}},[t._v("\n                        "+t._s(t.$t("Save Settings"))+"\n                    ")])],1)])],1)])])},[],!1,null,null,null).exports;const Fc=e({name:"EmailHistory",components:{EmailPreview:S,Pagination:m},props:["campaign"],data:function(){return{drafts:[],history:[],pagination:{total:0,per_page:20,current_page:1},loading:!1,previewingCampaign:!1,updatingStatus:!1}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("recurring-campaigns/"+this.campaign.id+"/emails",{per_page:this.pagination.per_page,page:this.pagination.current_page}).then(function(e){e.drafts&&(t.drafts=e.drafts),t.history=e.emails.data,t.pagination.total=e.emails.total}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},showPreview:function(t){this.previewingCampaign=t},changeCampaignStatus:function(t,e){var i=this;this.updatingStatus=!0,this.$put("recurring-campaigns/"+this.campaign.id+"/emails/"+e.id,{status:t}).then(function(t){i.$notify.success(t.message),i.fetch()}).catch(function(t){i.handleError(t)}).finally(function(){i.updatingStatus=!1})}},mounted:function(){this.fetch(),this.changeTitle(this.$t("Email History")+" - "+this.campaign.title)}},function(){var t=this,e=t._self._c;return e("div",[t.loading?e("div",[e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{animated:!0,rows:7}})],1):t.drafts.length||t.history.length?[t.drafts.length?e("div",[e("h3",[t._v(t._s(t.$t("Drafts")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Draft_Email_Info")))]),t._v(" "),e("div",{staticClass:"fc_mail_cards"},t._l(t.drafts,function(i){return e("div",{key:i.id,staticClass:"fc_mail_card fc_shadow"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{sm:24,md:12}},[e("div",{staticClass:"fc_mail_desc"},[e("p",{staticClass:"fc_top_sub"},[t._v(t._s(i.status)+" | "+t._s(i.scheduled_at))]),t._v(" "),e("h3",[t._v(t._s(i.email_subject))])])]),t._v(" "),e("el-col",{attrs:{sm:24,md:12}},[e("div",{staticClass:"fc_mail_actions"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$router.push({name:"recurring_email_report",params:{campaign_id:t.campaign.id,email_id:i.id}})}}},[t._v("Review & Schedule")]),t._v(" "),e("el-button",{attrs:{type:"default",size:"small"},on:{click:function(e){return t.showPreview(i)}}},[t._v("\n                                    "+t._s(t.$t("Preview Email"))+"\n                                ")]),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updatingStatus,expression:"updatingStatus"}],attrs:{disabled:t.updatingStatus,type:"danger",plain:"",size:"small"},on:{click:function(e){return t.changeCampaignStatus("cancelled",i)}}},[t._v("\n                                    "+t._s(t.$t("Cancel This email"))+"\n                                ")])],1)])],1)],1)}),0)]):t._e(),t._v(" "),t.history.length?e("div",[e("h3",[t._v(t._s(t.$t("Previous Emails")))]),t._v(" "),e("p",[t._v(t._s(t.$t("Previous_Email_Hist")))]),t._v(" "),e("div",{staticClass:"fc_mail_cards"},[t._l(t.history,function(i){return e("div",{key:i.id,staticClass:"fc_mail_card fc_shadow"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{sm:24,md:12}},[e("div",{staticClass:"fc_mail_desc"},[e("p",{staticClass:"fc_top_sub"},[t._v(t._s(i.status)+" | "+t._s(i.scheduled_at))]),t._v(" "),e("h3",[t._v(t._s(i.email_subject))])])]),t._v(" "),e("el-col",{attrs:{sm:24,md:12}},[e("div",{staticClass:"fc_mail_actions"},[e("el-button",{attrs:{type:"default",size:"small"},on:{click:function(e){return t.showPreview(i)}}},[t._v("\n                                    "+t._s(t.$t("Preview Email"))+"\n                                ")]),t._v(" "),"cancelled"==i.status?[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updatingStatus,expression:"updatingStatus"}],attrs:{disabled:t.updatingStatus,type:"danger",plain:"",size:"small"},on:{click:function(e){return t.changeCampaignStatus("draft",i)}}},[t._v("\n                                        "+t._s(t.$t("Send to Draft"))+"\n                                    ")])]:t._e(),t._v(" "),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$router.push({name:"recurring_email_report",params:{campaign_id:t.campaign.id,email_id:i.id}})}}},[t._v(t._s(t.$t("View Report")))])],2)])],1)],1)}),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],2)]):t._e()]:e("div",[e("h3",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.$t("All_Email_Hist")))])]),t._v(" "),t.previewingCampaign?e("div",[e("email-preview",{attrs:{by_campaign_id:!0,auto_load:!0,show_audit:!0,campaign:t.previewingCampaign},on:{modalClosed:function(){t.previewingCampaign=null}}})],1):t._e()],2)},[],!1,null,null,null).exports;const jc=e({name:"RecurringMailEditor",props:["campaign","saving"],components:{EmailBlockComposer:te},methods:{nextStep:function(){this.$emit("goToNext")},updateCampaign:function(){this.$emit("updateCampaign")}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"template",staticStyle:{"border-top":"5px solid #e3e8ee"}},[e("email-block-composer",{attrs:{disabled_templates:{visual_builder:!0},show_audit:!0,show_merge:!0,enable_template_save:!0,enable_templates:!0,campaign:t.campaign},on:{save:function(e){return t.updateCampaign()}}},[e("template",{slot:"fc_editor_actions"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{disabled:t.saving,size:"small",type:"success"},on:{click:function(e){return t.updateCampaign()}}},[t._v("\n                "+t._s(t.$t("Save"))+"\n            ")]),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{disabled:t.saving,size:"small",type:"primary",icon:"el-icon-right"},on:{click:function(e){return t.nextStep()}}},[t._v(t._s(t.$t("Cam_Continue_S"))+"\n            ")])],1)],2)],1)},[],!1,null,null,null).exports;const Ic=e({name:"RecurringMailConfig",props:["campaign","saving"],components:{EmailSubjects:N,TestEmail:M},data:function(){return{fetchingTemplate:!1,editor_status:!0,loading:!1,smart_codes:[],inline_errors:"",pickerOptions:nt}},methods:{nextStep:function(){this.$emit("goToNext")},updateCampaign:function(){this.$emit("updateCampaign")},goToPrev:function(){this.$emit("goToPrev")}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"template",staticStyle:{margin:"30px 20px"}},[e("div",{staticClass:"fc_narrow_box fc_white_inverse"},[e("el-form",{attrs:{"label-position":"top",model:t.campaign}},[e("email-subjects",{attrs:{mailer_settings:!0,multi_subject:!1,label_align:"top",campaign:t.campaign}}),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Set_Date_Time_Label")}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","picker-options":t.pickerOptions,placeholder:t.$t("Select date and time")},model:{value:t.campaign.scheduled_at,callback:function(e){t.$set(t.campaign,"scheduled_at",e)},expression:"campaign.scheduled_at"}})],1),t._v(" "),e("el-form-item",[e("test-email",{attrs:{campaign:t.campaign}})],1)],1)],1),t._v(" "),e("el-row",{staticStyle:{"max-width":"860px",margin:"0 auto"},attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-button",{attrs:{size:"small",type:"text",disabled:t.saving},on:{click:function(e){return t.goToPrev()}}},[t._v(" "+t._s(t.$t("Back"))+"\n            ")])],1),t._v(" "),e("el-col",{staticClass:"text-align-right",attrs:{span:12}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{disabled:t.saving,size:"small",type:"primary"},on:{click:function(e){return t.updateCampaign()}}},[t._v("\n                "+t._s(t.$t("Update"))+"\n            ")]),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{disabled:t.saving,size:"small",type:"success"},on:{click:function(e){return t.nextStep()}}},[t._v("\n                "+t._s(t.$t("Schedule Campaign"))+"\n            ")])],1)],1)],1)},[],!1,null,null,null).exports;var Lc=e({name:"RecurringEmailArchivedReport",props:["campaign_id"],components:{CampaignChart:Me,LinkMetrics:De,CampaignDetails:Be,CampaignEmails:Oe,Unsubscribers:ze,ReadableRecipients:we},data:function(){return{loading:!1,request_counter:1,campaign:null,stat:[],sent_count:0,analytics:[],activeTab:"campaign_details",app_loaded:!1}},computed:{chartData:function(){var t,e,i;Object.keys(this.analytics).length;var n=[this.sent_count,parseInt((null===(t=this.analytics.open)||void 0===t?void 0:t.total)||0),parseInt((null===(e=this.analytics.click)||void 0===e?void 0:e.total)||0),parseInt((null===(i=this.analytics.unsubscribe)||void 0===i?void 0:i.total)||0)];return{labels:[this.$t("Email Sent"),this.$t("Opens"),this.$t("Clicks"),this.$t("Unsubscribe")],datasets:[{label:this.$t("Emails"),data:JSON.parse(JSON.stringify(n)),backgroundColor:["#8154ce","#a45892","#6dcc3e","#ff5b5b"]}]}}},methods:{getCampaignStatus:function(){var t=this;this.loading=!0,this.$get("campaigns/".concat(this.campaign_id,"/status"),{request_counter:this.request_counter}).then(function(e){t.campaign=e.campaign,t.stat=e.stat,t.sent_count=e.sent_count,t.analytics=e.analytics,t.changeTitle(t.campaign.title+" - Campaign"),"working"==e.campaign.status&&t.fetchStatAgain()}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1,t.app_loaded=!0})},fetchStatAgain:function(){var t=this;setTimeout(function(){t.request_counter+=1,t.getCampaignStatus()},4e3)},getPercent:function(t){return this.sent_count?parseFloat(t/this.sent_count*100).toFixed(2)+"%":"--"},getCampaignPercent:function(){return parseInt(this.sent_count/this.campaign.recipients_count*100)}},mounted:function(){this.getCampaignStatus()}},function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.app_loaded,expression:"!app_loaded"}],staticClass:"email_archived_report"},["working"==t.campaign.status?e("div",{staticStyle:{"margin-bottom":"20px","text-align":"center"}},[e("h3",[t._v(" "+t._s(t.$t("Vie_Your_easrn"))+"\n            "),e("span",{directives:[{name:"loading",rawName:"v-loading",value:"working"==t.campaign.status,expression:"campaign.status == 'working'"}]},[t._v(t._s(t.$t("Sending")))])]),t._v(" "),e("el-progress",{attrs:{"text-inside":!0,"stroke-width":36,percentage:t.getCampaignPercent(),status:"success"}})],1):t._e(),t._v(" "),e("el-row",{staticClass:"fc_campaign_archived_wrapper",attrs:{gutter:30}},[e("el-col",{attrs:{md:8,sm:12,xs:24}},[e("div",{staticClass:"fc_campaign_report"},[e("h3",[t._v(t._s(t.$t("Campaign Performance")))]),t._v(" "),e("ul",[t._l(t.stat,function(i){return e("li",{key:i.status},[e("i",{staticClass:"el-icon el-icon-message"}),t._v(" "),e("span",{staticClass:"fc_report_title"},[t._v(t._s(t._f("ucFirst")(i.status))+" "+t._s(t.$t("Emails")))]),t._v(" "),e("span",{staticClass:"fc_report_value"},[t._v("\n                                "+t._s(i.total)+"\n                            ")])])}),t._v(" "),t._l(t.analytics,function(i){return e("li",{key:i.type,class:"fc_camp_data_"+i.type},[e("i",{class:i.icon_class}),t._v(" "),e("span",{staticClass:"fc_report_title"},[t._v(t._s(i.label))]),t._v(" "),"open"==i.type?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("open_rate_info"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])]:"click"==i.type?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("click_rate_info"),placement:"top-start"}},[e("i",{staticClass:"el-icon el-icon-info"})])]:t._e(),t._v(" "),i.is_percent?e("span",{staticClass:"fc_report_value"},[t._v("\n                        "+t._s(t.getPercent(i.total))+"\n                    ")]):e("span",{staticClass:"fc_report_value"},[t._v("\n                        "+t._s(i.total)+"\n                    ")])],2)})],2)])]),t._v(" "),e("el-col",{attrs:{md:8,sm:12,xs:24}},[e("div",{staticClass:"fc_campaign_report"},[e("h3",[t._v(t._s(t.$t("Emails Stats")))]),t._v(" "),e("div",{staticStyle:{"max-width":"270px",margin:"0 auto"}},[t.chartData&&t.campaign?e("campaign-chart",{attrs:{"chart-data":t.chartData}}):t._e()],1)])]),t._v(" "),e("el-col",{attrs:{md:8,sm:12,xs:24}},[e("div",{staticClass:"fc_campaign_report"},[e("h3",[t._v(t._s(t.$t("Link activity")))]),t._v(" "),e("div",{},[t.campaign?e("link-metrics",{attrs:{hide_title:!0,campaign_id:t.campaign_id}}):t._e()],1)])])],1),t._v(" "),t.campaign?e("div",{staticClass:"fc_campaign_details"},[e("el-tabs",{staticStyle:{"min-height":"200px"},attrs:{type:"border-card","tab-position":"top"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e("el-tab-pane",{attrs:{name:"campaign_details",label:t.$t("Campaign Details")}},[e("campaign-details",{attrs:{campaign:t.campaign}})],1),t._v(" "),e("el-tab-pane",{attrs:{lazy:!0,name:"campaign_subscribers",label:t.$t("Emails")}},[e("campaign-emails",{attrs:{campaign_id:t.campaign_id},on:{fetchCampaign:function(e){return t.getCampaignStatus()}}})],1),t._v(" "),t.analytics.unsubscribe&&t.campaign?e("el-tab-pane",{attrs:{lazy:!0,name:"campaign_unsubscribers",label:t.$t("Unsubscribers")}},[e("unsubscribers",{attrs:{campaign_id:t.campaign.id}})],1):t._e(),t._v(" "),t.campaign?e("el-tab-pane",{attrs:{lazy:!0,name:"campaign_selections",label:t.$t("Contact Selections")}},[e("h2",[t._v("Contact Selections")]),t._v(" "),e("readable-recipients",{attrs:{settings:t.campaign.settings}})],1):t._e()],1)],1):t._e()],1)},[],!1,null,null,null);var Nc=e({name:"RecurringEmailReport",components:{CampaignEmailProcessStat:Re,ArchivedReport:Lc.exports},props:["campaign","parent_campaign"],methods:{handleUnscheduled:function(){this.$router.push({name:"past_recurring_emails",params:{campaign_id:this.parent_campaign.id}})},getCampaignPercent:function(){return parseInt(this.sent_count/this.campaign.recipients_count*100)}}},function(){var t=this,e=t._self._c;return e("div",["pending-scheduled"==t.campaign.status||"processing"==t.campaign.status||"scheduled"==t.campaign.status?[e("campaign-email-process-stat",{attrs:{campaign:t.campaign},on:{unscheduled:function(e){return t.handleUnscheduled()}}})]:[e("div",{staticStyle:{padding:"20px"}},[e("archived-report",{attrs:{campaign_id:t.campaign.id}})],1)]],2)},[],!1,null,null,null);const qc=e({name:"ViewSingleCampaignReport",props:["campaign_id","email_id"],components:{EmailEditor:jc,MailConfig:Ic,RecurringEmailReport:Nc.exports},data:function(){return{parent_campaign:{},campaign:{},loading:!0,saving:!1,active_step:""}},methods:{fetchCampaign:function(){var t=this;this.loading=!0,this.$get("recurring-campaigns/"+this.campaign_id+"/emails/"+this.email_id).then(function(e){t.parent_campaign=e.campaign,t.campaign=e.email,"draft"==e.email.status?t.active_step="edit":"cancelled"==e.email.status?t.$router.push({name:"past_recurring_emails",params:{campaign_id:t.campaign_id}}):t.active_step="reports"}).catch(function(e){t.handleError(e)}).finally(function(){t.loading=!1})},maybePublishCampaign:function(){var t=this;this.campaign.status="pending-scheduled",this.updateCampaign(function(){t.active_step="reports"})},gotToNextStep:function(){var t=this;this.updateCampaign(function(){"edit"==t.active_step?t.active_step="review":"review"==t.active_step&&(t.active_step="reports")})},updateCampaign:function(t){var e=this;this.saving=!0,this.$post("recurring-campaigns/"+this.campaign_id+"/emails/update-email",{email:JSON.stringify(this.campaign),step:this.active_step}).then(function(i){e.$notify.success(i.message),t&&t(i)}).catch(function(t){e.handleError(t),"review"==e.active_step&&(e.campaign.status="draft")}).finally(function(){e.saving=!1})},reloadPage:function(){window.location.reload(!0)}},mounted:function(){this.fetchCampaign()}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[t.parent_campaign?e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"recurring_campaigns"}}},[t._v("\n                    "+t._s(t.$t("Recurring Campaigns"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",{attrs:{to:{name:"past_recurring_emails",params:{campaign_id:t.campaign_id}}}},[t._v("\n                    "+t._s(t.parent_campaign.title)+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.campaign.title)+" ("+t._s(t.campaign.status)+") / "+t._s(t.active_step)+"\n                ")])],1)],1)]):t._e(),t._v(" "),t.campaign.id?e("div",{staticClass:"fluentcrm_body"},["edit"==t.active_step?[e("email-editor",{attrs:{saving:t.saving,campaign:t.campaign},on:{goToNext:function(e){return t.gotToNextStep()},updateCampaign:function(e){return t.updateCampaign()}}})]:"review"==t.active_step?[e("mail-config",{attrs:{campaign:t.campaign},on:{goToNext:function(e){return t.maybePublishCampaign()},updateCampaign:function(e){return t.updateCampaign()}}})]:"reports"==t.active_step?[e("recurring-email-report",{attrs:{campaign:t.campaign,parent_campaign:t.parent_campaign},on:{reload:function(e){return t.reloadPage()}}})]:t._e()],2):t.loading?e("div",{staticClass:"fluentcrm_body fluentcrm_body_boxed"},[e("el-skeleton",{staticStyle:{padding:"20px"},attrs:{animated:!0,rows:7}})],1):t._e()])},[],!1,null,null,null).exports;const Mc=e({name:"ImportRecurringCampaign",components:{GenericPromo:Te},data:function(){return{step:"upload",importing:!1,inline_errors:!1}},computed:{url:function(){var t=window.ajaxurl;return t+=(t.match(/\?/)?"&":"?")+jQuery.param({action:"fluentcrm_import_recurring_campaigns"}),t}},methods:{success:function(t){this.$notify.success(t.message),this.$router.push({name:"view_recurring_campaign",params:{campaign_id:t.campaign_id}})},error:function(t){var e=JSON.parse(t.message);this.$notify.error(e.message),e.requires&&(this.inline_errors=e.requires)}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_settings_wrapper fc_sequence_import"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"recurring_campaigns"}}},[t._v("\n                    "+t._s(t.$t("Recurring Email Campaigns"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.$t("Import"))+"\n                ")])],1)],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.importing,expression:"importing"}],staticClass:"fluentcrm_body fluentcrm_title_cards fc_narrow_box fc_white_inverse",staticStyle:{"margin-top":"30px","max-width":"1160px"}},[t.has_campaign_pro?[e("div",{staticClass:"fc_funnel_upload text-align-center"},[e("h3",[t._v(t._s(t.$t("Import_Recurring_Campaign")))]),t._v(" "),e("el-upload",{ref:"uploader",attrs:{drag:"",limit:1,action:t.url,multiple:!1,"on-error":t.error,"on-success":t.success}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n                        "+t._s(t.$t("Drop JSON file here or"))+" "),e("em",[t._v(t._s(t.$t("click to upload")))])])]),t._v(" "),e("h4",[t._v(t._s(t.$t("Not_Import_Recurring_Campaigns_Alert")))]),t._v(" "),t.inline_errors?e("pre",[t._v(t._s(t.inline_errors))]):t._e()],1)]:e("div",[e("generic-promo")],1)],2)])},[],!1,null,null,null).exports;const zc=[{name:"default",path:"*",redirect:"/",meta:{side_path:"/"}},{name:"no_permission",path:"/no_permission",component:c},{name:"dashboard",path:"/",component:l,props:!0,meta:{active_menu:"dashboard",permission:"fcrm_view_dashboard",side_path:"/"}},{name:"subscribers",path:"/subscribers",component:Jn,props:!0,meta:{active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/subscribers"}},{path:"/email",component:u,props:!0,meta:{parent:"email",permission:"fcrm_read_emails"},children:[{name:"campaigns",path:"campaigns",component:P,props:!0,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/campaigns"}},{name:"campaign-view",path:"campaigns/:id/view",component:Ge,props:!0,meta:{parent:"campaigns",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/campaigns"}},{name:"campaign",path:"campaigns/:id",component:Se,props:!0,meta:{parent:"campaigns",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/campaigns"}},{name:"import_email_campaigns",path:"campaigns/import/new",component:e({name:"ImportEmailCampaign",components:{GenericPromo:Te},data:function(){return{step:"upload",importing:!1,inline_errors:!1}},computed:{url:function(){var t=window.ajaxurl;return t+=(t.match(/\?/)?"&":"?")+jQuery.param({action:"fluentcrm_import_email_campaign"}),t}},methods:{success:function(t){console.log("success response"),this.$notify.success(t.message),this.$router.push({name:"campaign",params:{id:t.campaign_id}})},error:function(t){var e=JSON.parse(t.message);this.$notify.error(e.message),e.requires&&(this.inline_errors=e.requires)}}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm_settings_wrapper fc_sequence_import"},[e("div",{staticClass:"fluentcrm_header"},[e("div",{staticClass:"fluentcrm_header_title"},[e("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"campaigns"}}},[t._v("\n                    "+t._s(t.$t("Email Campaigns"))+"\n                ")]),t._v(" "),e("el-breadcrumb-item",[t._v("\n                    "+t._s(t.$t("Import"))+"\n                ")])],1)],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.importing,expression:"importing"}],staticClass:"fluentcrm_body fluentcrm_title_cards fc_narrow_box fc_white_inverse",staticStyle:{"margin-top":"30px","max-width":"1160px"}},[t.has_campaign_pro?[e("div",{staticClass:"fc_funnel_upload text-align-center"},[e("h3",[t._v(t._s(t.$t("Import_Email_Campaign")))]),t._v(" "),e("el-upload",{ref:"uploader",attrs:{drag:"",limit:1,action:t.url,multiple:!1,"on-error":t.error,"on-success":t.success}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("\n                        "+t._s(t.$t("Drop JSON file here or"))+" "),e("em",[t._v(t._s(t.$t("click to upload")))])])]),t._v(" "),e("h4",[t._v(t._s(t.$t("Not_Import_Email_Campaigns_Alert")))]),t._v(" "),t.inline_errors?e("pre",[t._v(t._s(t.inline_errors))]):t._e()],1)]:e("div",[e("generic-promo")],1)],2)])},[],!1,null,null,null).exports,props:!0,meta:{parent:"campaigns",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/campaigns"}},{name:"templates",path:"templates",component:Ke,props:!0,meta:{parent:"campaigns",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/templates"}},{name:"import_template",path:"templates/import/new",component:Ye,props:!0,meta:{parent:"templates",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/templates"}},{name:"edit_template",path:"templates/:template_id",component:Je,props:!0,meta:{parent:"templates",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/templates"}},{path:"sequences",component:Xo,props:!0,children:[{name:"email-sequences",path:"/",component:er,meta:{parent:"email-sequences",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/sequences"}},{name:"import_sequence",path:"/import_sequence",component:rr,meta:{parent:"email-sequences",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/sequences"}},{name:"edit-sequence",path:"edit/:id",component:ir,props:!0,meta:{parent:"email-sequences",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/sequences"}},{name:"edit-sequence-email",path:"edit/:sequence_id/email/:email_id",component:nr,props:!0,meta:{parent:"email-sequences",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/sequences"}},{name:"sequence-subscribers",path:"subscribers/:id/view",component:or,props:!0,meta:{parent:"email-sequences",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/sequences"}}]},{path:"recurring-campaigns",component:kc,props:!0,children:[{name:"recurring_campaigns",path:"/",component:Sc,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/recurring-campaigns"}},{name:"create_recurring_campaign",path:"create-new",component:Tc,meta:{parent:"recurring_campaigns",active_menu:"campaigns",permission:"fcrm_read_emails"}},{path:"emails/:campaign_id",component:Pc,props:!0,children:[{path:"view",name:"view_recurring_campaign",component:Oc,props:!0,meta:{parent:"recurring_campaigns",active_menu:"campaigns",side_path:"/email/recurring-campaigns"}},{path:"history",name:"past_recurring_emails",component:Fc,props:!0,meta:{parent:"recurring_campaigns",active_menu:"campaigns",side_path:"/email/recurring-campaigns"}},{path:"settings",name:"recurring_campaign_settings",component:Dc,props:!0,meta:{parent:"recurring_campaigns",active_menu:"campaigns",side_path:"/email/recurring-campaigns"}}]},{path:"emails/:campaign_id/history/:email_id",name:"recurring_email_report",component:qc,props:!0,meta:{parent:"recurring_campaigns",active_menu:"campaigns",side_path:"/email/recurring-campaigns"}}]},{name:"import_recurring_campaigns",path:"recurring-campaigns/import/new",component:Mc,props:!0,meta:{parent:"recurring_campaigns",active_menu:"campaigns",permission:"fcrm_read_emails",side_path:"/email/recurring-campaigns"}},{name:"all_emails",path:"all-emails",component:Qe,props:!0,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails"}}]},{path:"/contact-groups",component:ks,props:!0,meta:{parent:"contacts",permission:"fcrm_manage_contact_cats"},children:[{name:"lists",path:"lists",component:Ds,props:!0,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_manage_contact_cats",side_path:"/subscribers"}},{name:"tags",path:"tags",component:Fs,props:!0,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_manage_contact_cats",side_path:"/subscribers"}},{name:"dynamic_segments",path:"dynamic-segments",component:Is,props:!0,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_manage_contact_cats",side_path:"/subscribers"}},{name:"create_custom_segment",path:"dynamic-segments/create-custom",component:Rs,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_manage_contact_cats",side_path:"/subscribers"}},{name:"view_segment",path:"dynamic-segments/:slug/view/:id",props:!0,component:zs,meta:{permission:"fcrm_read_contacts",parent:"subscribers",active_menu:"contacts",side_path:"/subscribers"}},{name:"import_segment",path:"dynamic-segments/import/new",component:Bs,props:!0,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_manage_contact_cats",side_path:"/subscribers"}},{path:"companies",component:Ml,props:!0,meta:{active_menu:"contacts",parent:"contacts",permission:"fcrm_read_contacts"},children:[{name:"companies",path:"",component:pc,meta:{active_menu:"contacts",parent:"contacts",permission:"fcrm_read_contacts"}}]}]},{name:"list",path:"/lists/:listId",component:ss,props:!0,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_manage_contact_cats",side_path:"/subscribers"}},{name:"tag",path:"/tags/:tagId",component:ls,props:!0,meta:{permission:"fcrm_read_contacts",parent:"subscribers",active_menu:"contacts",side_path:"/subscribers"}},{name:"import",path:"/import",component:$s,props:!0,meta:{permission:"fcrm_manage_contacts",side_path:"/subscribers"}},{name:"forms",path:"/forms",component:cr,props:!0,meta:{parent:"forms",active_menu:"forms",permission:"fcrm_manage_forms",side_path:"/forms"}},{path:"/settings",component:va,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"},children:[{name:"email_settings",path:"email_settings",component:xa,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"business_settings",path:"/",component:Ta,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"custom_contact_fields",path:"custom_contact_fields",component:_i,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"smart_links",path:"smart_links",component:Cr,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"double-optin-settings",path:"double_optin_settings",component:Os,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"webhook-settings",path:"webhook_settings",component:za,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"settings_tools",path:"settings_tools",component:Ga,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"managers",path:"managers",component:Wa,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"rest-api",path:"reset-api",component:Qa,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"settings_compliance",path:"compliance",component:eo,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"smtp_settings",path:"smtp_settings",component:ur,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"other_settings",path:"other_settings",component:dr,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"license_settings",path:"license_settings",component:_r,meta:{active_menu:"settings",permission:"fcrm_manage_settings",side_path:"/settings"}},{name:"integration_settings",path:"integration_settings",component:pr,meta:{active_menu:"settings",side_path:"/settings"}},{name:"experimental_features",path:"experimental-features",component:gr,meta:{active_menu:"settings",side_path:"/settings"}},{name:"system_logs",path:"system-logs",component:vr,meta:{active_menu:"settings",side_path:"/settings"}},{name:"abandon_cart_settings",path:"abandon-cart-settings",component:io,meta:{active_menu:"settings",side_path:"/settings"}},{name:"activity_logs",path:"activity-logs",component:br,meta:{active_menu:"settings",side_path:"/settings"}}]},{path:"/funnels",component:no,meta:{active_menu:"funnels",permission:"fcrm_read_funnels",side_path:"/funnels"},children:[{name:"funnels",path:"/",component:ro,meta:{active_menu:"funnels",permission:"fcrm_read_funnels",side_path:"/funnels"}},{name:"edit_funnel",path:"/funnel/:funnel_id/edit",component:Lo,props:!0,meta:{active_menu:"funnels",permission:"fcrm_read_funnels",side_path:"/funnels"}},{name:"funnel_subscribers",path:"/funnel/:funnel_id/subscribers",component:Jo,props:!0,meta:{active_menu:"funnels",permission:"fcrm_read_funnels",side_path:"/funnels"}},{name:"import_funnel",path:"/funnel/import",component:Yo,meta:{active_menu:"funnels",permission:"fcrm_read_funnels",side_path:"/funnels"}},{name:"funnel_activities",path:"/funnel/all-activities",component:Qo,meta:{active_menu:"funnels",permission:"fcrm_read_funnels",side_path:"/funnels"}}]},{name:"docs",path:"/documentation",component:pl,meta:{side_path:"/documentation",active_menu:"documentation"}},{name:"addons",path:"/add-ons",component:gl,meta:{side_path:"/add-ons",active_menu:"addons"}},{name:"reports",path:"/reports",component:Sl,meta:{side_path:"/reports"}},{name:"abandon-carts",path:"/abandon-carts",component:ql,meta:{active_menu:"abandoned_carts",side_path:"/abandon-carts"}},{name:"crm_migrations",path:"/crm_migrations",component:Il,meta:{active_menu:"contacts",permission:"fcrm_manage_settings",side_path:"/subscribers"}}];var Rc={path:"/subscribers/:id",component:Cs,props:!0,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/subscribers"},children:[{name:"subscriber",path:"/",component:Vs,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/subscribers"}},{name:"subscriber_emails",path:"emails",component:ra,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/subscribers"}},{name:"subscriber_form_submissions",path:"form-submissions",component:ca,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/subscribers"}},{name:"subscriber_notes",path:"notes",component:da,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/subscribers"}},{name:"subscriber_purchases",path:"purchases",component:pa,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/subscribers"}},{name:"subscriber_support_tickets",path:"support-tickets",component:fa,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/subscribers"}},{name:"subscriber_files",path:"files",component:ha,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/subscribers"}},{name:"fluentcrm_profile_extended",path:"profile_section",component:ga,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/subscribers"}}]},Bc={path:"/companies/:company_id",props:!0,component:mc,meta:{active_menu:"contacts",parent:"contacts",permission:"fcrm_read_contacts"},children:[{name:"view_company",path:"/",component:yc,meta:{parent:"view_company",active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/companies"}},{name:"company_activities",path:"activities",component:wc,meta:{parent:"view_company",active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/companies"}},{name:"fluent_crm_company_section_extended",path:"custom_section",component:Cc,meta:{parent:"view_company",active_menu:"contacts",permission:"fcrm_read_contacts",side_path:"/companies"}}]};const Vc=e({name:"Application",data:function(){return{last_path:"",errorMessage:"",showErrorModal:!1}},methods:{verifyLicense:function(){this.$get("campaign-pro-settings/license",{verify:!0}).then(function(t){}).catch(function(t){}).finally(function(){})},pingToServer:function(){this.$get("reports/ping")}},mounted:function(){var t=this;jQuery(".update-nag,.notice, #wpbody-content > .updated, #wpbody-content > .error").not(".fc_notice").remove(),window.fcAdmin.require_verify_request&&this.verifyLicense(),this.$bus.$on("renew_options",function(e){t.renewOptions(e)}),setInterval(function(){t.pingToServer()},5e4),this.$bus.$on("show-error-modal",function(e){e.responseText&&(t.errorMessage=e.responseText,t.showErrorModal=!0)})}},function(){var t=this,e=t._self._c;return e("div",{staticClass:"fluentcrm-app"},[e("div",{staticClass:"fluentcrm-body"},[e("router-view",{key:"main_route"})],1),t._v(" "),e("el-dialog",{attrs:{visible:t.showErrorModal,title:"Server Response (Error)","append-to-body":!0,"close-on-click-modal":!1,width:"50%","show-close":!1}},[e("div",[e("el-input",{attrs:{type:"textarea",rows:15,value:t.errorMessage,readonly:""}}),t._v(" "),e("p",[t._v("FluentCRM is expecting JSON data but HTML returned")])],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.showErrorModal=!1}}},[t._v("Close")])],1)])],1)},[],!1,null,null,null).exports;var Uc=window.FLUENTCRM.applyFilters("fluentcrm_profile_routes",Rc);zc.push(Uc);var Hc=window.FLUENTCRM.applyFilters("fluentcrm_company_profile_routes",Bc);zc.push(Hc);var Gc=new window.FLUENTCRM.Router({routes:window.FLUENTCRM.applyFilters("fluentcrm_global_routes",zc),scrollBehavior:function(t,e,i){if(i)return i;var n={};return t.hash?(n.selecor=t.hash,!!document.querySelector(t.hash)&&n):{x:0,y:0}}});Gc.beforeEach(function(t,e,i){t.meta.permission?window.FLUENTCRM.hasPermission(t.meta.permission)?i():i({name:"no_permission",query:{permission:t.meta.permission}}):i()}),new window.FLUENTCRM.Vue({el:"#fluentcrm_app",render:function(t){return t(Vc)},router:Gc,watch:{$route:function(t,e){t.meta.active_menu&&jQuery(document).trigger("fluentcrm_route_change",t.meta.active_menu);var i=t.meta.side_path;i="/"==i?"":"#"+i,document.dispatchEvent(new CustomEvent("fc_route_changed",{detail:{route_to:t,route_from:e,path:i}})),window.fcrm_last_path!=i&&(window.fcrm_last_path=i,jQuery("li#toplevel_page_fluentcrm-admin ul.wp-submenu li").removeClass("current"),jQuery('li#toplevel_page_fluentcrm-admin ul.wp-submenu a[href="admin.php?page=fluentcrm-admin'+i+'"]').parent().addClass("current"))}},mounted:function(){if(this.$route.meta.active_menu){jQuery(document).trigger("fluentcrm_route_change",this.$route.meta.active_menu);var t=this.$route;document.dispatchEvent(new CustomEvent("fc_route_changed",{detail:{route_to:t}}))}}})})()})();