/*! For license information please see utils.js.LICENSE.txt */
(()=>{"use strict";var t={345:(t,e,n)=>{function r(t,e){void 0===e&&(e={});var n=document.createElement("script");return n.src=t,Object.keys(e).forEach((function(t){n.setAttribute(t,e[t]),"data-csp-nonce"===t&&n.setAttribute("nonce",e["data-csp-nonce"])})),n}function o(t,e){if(void 0===e&&(e=i()),u(t,e),"undefined"==typeof window)return e.resolve(null);var n=function(t){var e="https://www.paypal.com/sdk/js";t.sdkBaseURL&&(e=t.sdkBaseURL,delete t.sdkBaseURL),function(t){var e=t["merchant-id"],n=t["data-merchant-id"],r="",o="";Array.isArray(e)?e.length>1?(r="*",o=e.toString()):r=e.toString():"string"==typeof e&&e.length>0?r=e:"string"==typeof n&&n.length>0&&(r="*",o=n),t["merchant-id"]=r,t["data-merchant-id"]=o}(t);var n,r,o=Object.keys(t).filter((function(e){return void 0!==t[e]&&null!==t[e]&&""!==t[e]})).reduce((function(e,n){var r=t[n].toString();return"data-"===n.substring(0,5)?e.dataAttributes[n]=r:e.queryParams[n]=r,e}),{queryParams:{},dataAttributes:{}}),i=o.queryParams,a=o.dataAttributes;return{url:"".concat(e,"?").concat((n=i,r="",Object.keys(n).forEach((function(t){0!==r.length&&(r+="&"),r+=t+"="+n[t]})),r)),dataAttributes:a}}(t),o=n.url,c=n.dataAttributes,l=c["data-namespace"]||"paypal",s=a(l);return function(t,e){var n=document.querySelector('script[src="'.concat(t,'"]'));if(null===n)return null;var o=r(t,e),i=n.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(o.dataset).length)return null;var a=!0;return Object.keys(i.dataset).forEach((function(t){i.dataset[t]!==o.dataset[t]&&(a=!1)})),a?n:null}(o,c)&&s?e.resolve(s):function(t,e){void 0===e&&(e=i()),u(t,e);var n=t.url,o=t.attributes;if("string"!=typeof n||0===n.length)throw new Error("Invalid url.");if(void 0!==o&&"object"!=typeof o)throw new Error("Expected attributes to be an object.");return new e((function(t,e){if("undefined"==typeof window)return t();!function(t){var e=t.onSuccess,n=t.onError,o=r(t.url,t.attributes);o.onerror=n,o.onload=e,document.head.insertBefore(o,document.head.firstElementChild)}({url:n,attributes:o,onSuccess:function(){return t()},onError:function(){var t=new Error('The script "'.concat(n,'" failed to load.'));return window.fetch?fetch(n).then((function(n){return 200===n.status&&e(t),n.text()})).then((function(t){var n=function(t){var e=t.split("/* Original Error:")[1];return e?e.replace(/\n/g,"").replace("*/","").trim():t}(t);e(new Error(n))})).catch((function(t){e(t)})):e(t)}})}))}({url:o,attributes:c},e).then((function(){var t=a(l);if(t)return t;throw new Error("The window.".concat(l," global variable is not available."))}))}function i(){if("undefined"==typeof Promise)throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function a(t){return window[t]}function u(t,e){if("object"!=typeof t||null===t)throw new Error("Expected an options object.");if(void 0!==e&&"function"!=typeof e)throw new Error("Expected PromisePonyfill to be a function.")}n.d(e,{ve:()=>o})},567:t=>{t.exports=window.jQuery},819:t=>{t.exports=window.lodash}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{ConfigurationError:()=>lt,SHIPPING_OPTION_REGEX:()=>A,convertCartAddressToPayPal:()=>B,convertFormToData:()=>nt,convertPayPalAddressToCart:()=>H,debounce:()=>it,extractFullName:()=>z,extractShippingMethod:()=>U,fieldsToJson:()=>q,formatPaymentMethod:()=>rt,getErrorMessage:()=>F,getFieldValue:()=>M,getPage:()=>$,getPayPalQueryParams:()=>I,getRestPath:()=>Q,getRestRoute:()=>J,getSetting:()=>T,isAddPaymentMethod:()=>tt,isAdminUser:()=>at,isCart:()=>K,isCheckout:()=>X,isFieldRequired:()=>ct,isMiniCartEnabled:()=>et,isOrderPay:()=>W,isPluginConnected:()=>ot,isProduct:()=>Y,isProduction:()=>ut,isShop:()=>Z,isValid:()=>G,isValidAddress:()=>L,isValidFieldValue:()=>V,loadPayPalSdk:()=>x,setFieldValue:()=>D,setSetting:()=>R,submitErrorMessage:()=>N});var t=n(819),e=n(567),o=n.n(e);const i=window.wp.hooks;var a=n(345);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}var c=["locale"];function l(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){var e="function"==typeof Map?new Map:void 0;return s=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return f(t,arguments,y(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,t)},s(t)}function f(t,e,n){return f=d()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&p(o,n.prototype),o},f.apply(null,arguments)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=h(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j={},E=!1,_=new Map,S=null,A=/^([\w]+)\:(.+)$/,k={address_1:"address_line_1|line1",address_2:"address_line_2|line2",state:"admin_area_1|state",city:"admin_area_2|city",postcode:"postal_code",country:"country_code"},C={city:"city",state:"state",postal_code:"postcode",country_code:"country"},x=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(r,o){!n||(0,t.isEmpty)(n)||(0,t.isEqual)(n,j)?window.paypal&&!E?r(window.paypal):(i.defaultHooks.addAction("paypalInstanceCreated","wcPPCP",(function(t){r(t)})),i.defaultHooks.addAction("paypalLoadError","wcPPCP",(function(){o()}))):(j=n,window.paypal&&i.defaultHooks.doAction("paypalInstanceCleanup",window.paypal),E=!0,(0,a.ve)(P({},n)).then((function(t){r(t),i.defaultHooks.doAction("paypalInstanceCreated",t,j)})).catch((function(t){var a;console.log(t);var u,l=(null==t||null===(a=t.message)||void 0===a?void 0:a.toLowerCase())||null;if(l){if(l.includes("locale")){n.locale;var s=g(n,c);return e(s).then((function(t){r(t)}))}l.includes("client-id not recognized")||l.includes("invalid query value for client-id")?u={code:"invalid_client_id"}:l.includes("invalid query value for currency")}i.defaultHooks.doAction("paypalLoadError"),o(u)})).finally((function(){E=!1})))}))},T=function(t){return void 0!==window.wcPPCPSettings&&window.wcPPCPSettings[t]||{}},R=function(t,e){if(void 0!==window.wcPPCPSettings)return window.wcPPCPSettings[t]=e},I=function(){return T("queryParams")},M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"billing",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"shipping"!=t.substring(0,"shipping".length)&&"billing"!=t.substring(0,"billing".length)&&e&&(t="".concat(e,"_").concat(t)),n?_.get(t):o()('[name="'.concat(t,'"]')).length?o()('[name="'.concat(t,'"]')).val():_.get(t)},q=function(){var t={};return _.forEach((function(e,n){t[n]=e})),t},D=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"billing";n&&"shipping"!=t.substring(0,"shipping".length)&&"billing"!=t.substring(0,"billing".length)&&(t="".concat(n,"_").concat(t)),_.set(t,e),o()('[name="'.concat(t,'"]')).length&&o()('[name="'.concat(t,'"]')).val(e)},F=function(t){var e=T("errorMessages");return"string"==typeof t?t:null!=t&&t.code&&null!=e&&e[t.code]?e[t.code]:null!=t&&t.message?t.message:void 0},N=function(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkout";if(null==t||null===(n=t.message)||void 0===n||null===(r=n.toLowerCase())||void 0===r||!r.match(/detected popup close|window is closed/)){var a=F(t),u="woocommerce-NoticeGroup",c=o()(e);"checkout"===i&&(u+=" woocommerce-NoticeGroup-checkout"),a=Array.isArray(t)?'<div class="'+u+'"><ul class="woocommerce-error"><li>'+t.join("</li><li>")+"</li></ul></div>":"string"==typeof t&&/<[^>]*>/.test(t)?'<div class="'+u+'">'+t+"</div>":'<div class="'+u+'"><ul class="woocommerce-error"><li>'+a+"</li></ul></div>",o()(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),c.prepend(a),o().scroll_to_notices?o().scroll_to_notices(c):o()("html, body").animate({scrollTop:c.offset().top-100},1e3)}},L=function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i="undefined"==typeof wc_address_i18n_params?T("i18n"):wc_address_i18n_params;if((0,t.isEmpty)(e))return!1;if(S||(S=JSON.parse(i.locale.replace(/&quot;/g,'"'))),!e.country||(0,t.isEmpty)(e))return!1;var a=null!==(n=S)&&void 0!==n&&n[e.country]?S[e.country]:S.default;a=o().extend(!0,{},S.default,a);var u=Object.entries(a).filter((function(t){var e=b(t,2),n=e[0];return e[1],!r.includes(n)}));for(var c in a=Object.fromEntries(u)){var l;if(null!==(l=a[c])&&void 0!==l&&l.required){var s=(null==e?void 0:e[c])||null;if(!s||null==s||!s.trim())return!1}}return!0},B=function(t){var e={};for(var n in t)if(null!=k&&k[n])if(k[n].includes("|")){var r=b(k[n].split("|"),2),o=r[0];r[1],e[o]=t[n]}else e[k[n]]=t[n];return e},H=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};n=e?C:Object.fromEntries(Object.entries(k).map((function(t){var e=b(t,2),n=e[0];return[e[1],n]})));var r={};for(var o in n)if(o.includes("|")){var i,a=o.split("|"),u=v(a);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(t.hasOwnProperty(c)){r[n[o]]=t[c];break}r[n[o]]=""}}catch(t){u.e(t)}finally{u.f()}}else t.hasOwnProperty(o)?r[n[o]]=t[o]:r[n[o]]="";return r},V=function(t){var e;return!!(t=null===(e=t)||void 0===e?void 0:e.trim())},G=function(t){return V(M(t))},U=function(t){var e=t.match(A);return e?O({},e[1],e[2]):null},z=function(t){return[(t=t.trim()).split(" ").slice(0,-1).join(" "),t.split(" ").pop()]},J=function(t){var e,n,r;return(null===(e=T("generalData"))||void 0===e||null===(n=e.restRoutes)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.url)||null},Q=function(t){var e,n;return t=t.replace(/^\//,""),null===(e=T("generalData"))||void 0===e||null===(n=e.ajaxRestPath)||void 0===n?void 0:n.replace("%s",t)},$=function(){return T("generalData").page},X=function(){return"checkout"===$()},K=function(){return"cart"===$()},W=function(){return"order_pay"===$()},Y=function(){return"product"===$()},Z=function(){return"shop"===$()},tt=function(){return"add_payment_method"===$()},et=function(){return!1},nt=function(t){return t.serializeArray().reduce((function(t,e){return P(P({},t),{},O({},e.name,e.value))}),{})},rt=function(t,e){var n={};Object.keys(e).forEach((function(t){n["{".concat(t,"}")]=e[t]}));var r=t;return Object.keys(n).forEach((function(t){for(;r.includes(t);)r=r.replace(t,n[t])})),r},ot=function(){var t,e;return(null===(t=T("generalData"))||void 0===t||null===(e=t.clientId)||void 0===e?void 0:e.length)>0},it=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(e),e=setTimeout((function(){t.apply(void 0,o)}),n)}},at=function(){var t;return!0===(null===(t=T("generalData"))||void 0===t?void 0:t.is_admin)},ut=function(){var t;return"production"===(null===(t=T("generalData"))||void 0===t?void 0:t.environment)},ct=function(t){return(T("requiredFields")||[]).includes(t)},lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(i,t);var e,n,r,o=(e=i,n=d(),function(){var t,r=y(e);if(n){var o=y(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return l(this,t)});function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).name="ConfigurationError",e}return r=i,Object.defineProperty(r,"prototype",{writable:!1}),r}(s(Error))})(),(this.wcPPCP=this.wcPPCP||{}).utils=r})();
//# sourceMappingURL=utils.js.map