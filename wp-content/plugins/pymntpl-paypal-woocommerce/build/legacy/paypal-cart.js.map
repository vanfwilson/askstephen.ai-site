{"version":3,"file":"paypal-cart.js","mappings":"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","sources":["webpack://wcPPCP_legacy-frontend/webpack/bootstrap","webpack://wcPPCP_legacy-frontend/webpack/runtime/compat get default export","webpack://wcPPCP_legacy-frontend/webpack/runtime/define property getters","webpack://wcPPCP_legacy-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://wcPPCP_legacy-frontend/webpack/runtime/make namespace object","webpack://wcPPCP_legacy-frontend/external window \"jQuery\"","webpack://wcPPCP_legacy-frontend/external window [\"wp\",\"apiFetch\"]","webpack://wcPPCP_legacy-frontend/external window [\"wp\",\"hooks\"]","webpack://wcPPCP_legacy-frontend/external window [\"wcPPCP\",\"utils\"]","webpack://wcPPCP_legacy-frontend/external window \"lodash\"","webpack://wcPPCP_legacy-frontend/./assets/js/legacy/classes/class-cart-gateway.js","webpack://wcPPCP_legacy-frontend/./assets/js/legacy/classes/class-base-gateway.js","webpack://wcPPCP_legacy-frontend/external window [\"wcPPCP\",\"cart\"]","webpack://wcPPCP_legacy-frontend/external window [\"wcPPCP\",\"actions\"]","webpack://wcPPCP_legacy-frontend/./assets/js/legacy/ppcp/paypal-cart.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"jQuery\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"apiFetch\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wcPPCP\"][\"utils\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"lodash\"];","import $ from 'jquery';\nimport BaseGateway from \"./class-base-gateway\";\nimport {\n    submitErrorMessage\n} from \"@ppcp/utils\";\n\nclass CartGateway extends BaseGateway {\n\n    constructor(cart, props) {\n        super(props);\n        this.cart = cart;\n        this.initialize();\n    }\n\n    initialize() {\n        this.actions.addAction('cart_updated', this.onCartUpdated.bind(this));\n        $(window).on('resize', this.doCartHtml.bind(this));\n        super.initialize();\n        this.doCartHtml();\n    }\n\n    onInit(...params) {\n        super.onInit(...params);\n        this.cart.trigger('cart_button_on_init');\n    }\n\n    needsShipping() {\n        return this.cart.needsShipping();\n    }\n\n    getButtonContainer() {\n        return document.getElementById('wc-ppcp-cart-button-container');\n    }\n\n    onCartUpdated() {\n        super.initialize();\n        this.doCartHtml();\n    }\n\n    submitError(error) {\n        this.hideProcessing();\n        submitErrorMessage(error, 'div.woocommerce-notices-wrapper', 'checkout');\n    }\n\n    handleBillingToken(response) {\n        super.handleBillingToken(response);\n        this.processCartCheckout();\n    }\n\n    createOrder(data, actions) {\n        return this.cart.createOrder({payment_method: this.id}).catch(error => {\n            this.currentError = error;\n            return error;\n        });\n    }\n\n    doCartHtml() {\n        const $button = $('.checkout-button');\n        const width = $button.outerWidth();\n        if (width && $('.wc-ppcp-cart-payments__container').length) {\n            $('.wc-ppcp-cart-payments__container').width(width);\n        }\n        if ($button.css('float') !== 'none') {\n            $('.wc-ppcp-cart-payments__container ').css('float', $button.css('float'));\n        }\n    }\n}\n\nexport {CartGateway};","import $ from 'jquery';\nimport apiFetch from \"@wordpress/api-fetch\";\nimport {defaultHooks} from \"@wordpress/hooks\";\nimport {\n    loadPayPalSdk,\n    getFieldValue,\n    isValidAddress,\n    extractShippingMethod,\n    getRestRoute,\n    getRestPath,\n    convertPayPalAddressToCart,\n    fieldsToJson,\n    extractFullName,\n    getSetting,\n    setFieldValue,\n    isValid,\n    isValidFieldValue,\n    getPayPalQueryParams,\n    getErrorMessage\n} from \"@ppcp/utils\";\nimport {isEmpty} from \"lodash\";\n\nclass BaseGateway {\n\n    constructor({id, context, actions, container = null}) {\n        this.id = id;\n        this.actions = actions;\n        this.buttons = {};\n        this.buttonActions = {};\n        this.context = context;\n        this.settings = getSetting(`${id}_data`);\n        this.container = container ? container : `li.payment_method_${id}`;\n        this.order_field_key = `${this.id}_paypal_order_id`;\n        this.billing_token_key = `${this.id}_billing_token`;\n    }\n\n    initialize() {\n        //load the paypal script\n        this.loadPayPalScript().then(() => {\n            // setup required events;\n            this.initializeEvents();\n            // render the button\n            this.createButton();\n        });\n    }\n\n    initializeEvents() {\n\n    }\n\n    isActive() {\n        return this.getData() !== null;\n    }\n\n    /**\n     * Loads the PayPal JS SDK\n     */\n    loadPayPalScript() {\n        return new Promise((resolve, reject) => {\n            loadPayPalSdk(this.getPayPalSDKArgs()).then(paypal => {\n                this.paypal = paypal;\n                resolve();\n            }).catch(error => {\n                console.log(error);\n                if (error?.code) {\n                    this.submitError(getErrorMessage(error));\n                }\n                reject();\n            })\n        })\n    }\n\n    /**\n     * Returns params used to laod the PayPal SDK\n     * @returns {{}}\n     */\n    getPayPalSDKArgs() {\n        return getPayPalQueryParams();\n    }\n\n    getClientId() {\n        let {clientId = null, environment} = getSetting('generalData');\n        if (!clientId && environment == 'sandbox') {\n            clientId = 'sb';\n        }\n        return clientId;\n    }\n\n    getData() {\n        let data = $(`${this.container}`).find('.wc-ppcp-payment-method-data').data('payment-method-data');\n        if (!data) {\n            return null;\n        }\n        return data;\n    }\n\n    setData(data) {\n        $(`${this.container}`).find('.wc-ppcp-payment-method-data').data('payment-method-data', data);\n    }\n\n    setOption(key, value) {\n        const data = this.getData();\n        if (data) {\n            data[key] = value;\n            this.setData(data);\n        }\n    }\n\n    setVariable(key, value) {\n        const data = getSetting(`${this.id}_data`);\n        data[key] = value;\n    }\n\n    getVariable(key, defaultValue = null) {\n        const data = getSetting(`${this.id}_data`);\n        if (data.hasOwnProperty(key)) {\n            return data[key];\n        }\n        if (defaultValue) {\n            this.setVariable(key, defaultValue);\n        }\n        return defaultValue;\n    }\n\n    /**\n     * Fetches an option from the payment method data object.\n     * @param key\n     * @param defaultValue\n     * @returns {null|*}\n     */\n    getOption(key, defaultValue = null) {\n        const data = this.getData();\n        if (data.hasOwnProperty(key)) {\n            return data[key];\n        } else {\n            if (defaultValue) {\n                this.setOption(key, defaultValue);\n            }\n        }\n        return defaultValue;\n    }\n\n    createButton() {\n        const container = this.getButtonContainer();\n        if (container && !$(container).find('.paypal-buttons').length) {\n            this.getSortedFunding(this.getFunding()).forEach(source => {\n                const button = this.paypal.Buttons(this.getButtonOptions(source));\n                this.buttons[source] = button;\n                if (button.isEligible()) {\n                    if (container instanceof NodeList) {\n                        for (const node of container) {\n                            button.render(node);\n                        }\n                    } else {\n                        button.render(container);\n                    }\n                }\n            });\n            this.$button = $(container);\n            defaultHooks.doAction('wcPPCPButtonCreated', this);\n        }\n    }\n\n    getButton() {\n        return this.$button;\n    }\n\n    destroyButtons() {\n        Object.keys(this.buttons).forEach(key => {\n            if (this.buttons[key]['close']) {\n                this.buttons[key].close();\n            }\n        })\n    }\n\n    disableButtons() {\n        Object.keys(this.buttonActions).forEach(key => {\n            this.buttonActions[key].disable();\n        });\n    }\n\n    enableButtons() {\n        Object.keys(this.buttonActions).forEach(key => {\n            this.buttonActions[key].enable();\n        });\n    }\n\n    getFunding() {\n        const funding = [];\n        const settings = this.settings?.funding || [];\n        if (this.settings?.paypal_sections?.includes(this.getPage())) {\n            funding.push(paypal.FUNDING.PAYPAL);\n        }\n        if (settings.includes('paylater') && this.settings?.paylater_sections?.includes(this.getPage())) {\n            if (this.isCheckoutFlow()) {\n                funding.push(paypal.FUNDING.PAYLATER);\n            }\n        }\n        if (settings.includes('card') && this.settings?.credit_card_sections?.includes(this.getPage())) {\n            funding.push(paypal.FUNDING.CARD);\n        }\n        return funding;\n    }\n\n    isFundingActive(type) {\n        return this.settings?.funding?.includes(type);\n    }\n\n    isSectionEnabled(type, section) {\n        const key = `${type}_sections`;\n        return this.settings?.[key]?.includes(section);\n    }\n\n    getSortedFunding(funding) {\n        const sortOrder = this.settings.buttons_order || [];\n        funding.sort((a, b) => {\n            const indexA = sortOrder.indexOf(a);\n            const indexB = sortOrder.indexOf(b);\n            return indexA < indexB ? -1 : 1;\n        });\n        return funding;\n    }\n\n    getButtonContainer() {\n        return null;\n    }\n\n    getButtonOptions(source) {\n        const options = {\n            fundingSource: source,\n            style: this.getButtonStyle(source),\n            onInit: (...args) => {\n                this.onInit(source, ...args);\n                $(document.body).triggerHandler('wc_ppcp_on_init', [this, source]);\n            },\n            onClick: (...args) => {\n                this.onClick(...args);\n                $(document.body).triggerHandler('wc_ppcp_on_click', [this, source]);\n            },\n            onApprove: (data, actions) => {\n                this.onApprove(data, actions);\n                $(document.body).triggerHandler('wc_ppcp_on_approve', [this, source]);\n            },\n            onCancel: (data) => {\n                this.orderId = data.orderID;\n                $(document.body).triggerHandler('wc_ppcp_on_cancel', [this, source, data]);\n            },\n            onError: (error) => {\n                if (this.currentError) {\n                    this.submitError(this.currentError);\n                    this.currentError = null;\n                } else {\n                    this.submitError(error);\n                }\n                $(document.body).triggerHandler('wc_ppcp_on_error', [this, source, error]);\n            },\n            onDestroy: () => {\n                $(document.body).triggerHandler('wc_ppcp_on_destroy', [this, source]);\n            }\n        };\n        if (this.isCheckoutFlow()) {\n            options.createOrder = (data, actions) => {\n                return this.createOrder(data, actions);\n            }\n            if (this.needsShipping() && source !== paypal.FUNDING.VENMO) {\n                options.onShippingChange = (...args) => {\n                    return this.onShippingChange(...args);\n                }\n            }\n        } else {\n            options.createBillingAgreement = (...args) => {\n                return this.createBillingAgreement(...args);\n            }\n        }\n        return options;\n    }\n\n    needsShipping() {\n        return this.getOption('needsShipping', false);\n    }\n\n    isCheckoutFlow() {\n        return getPayPalQueryParams()?.vault !== 'true';\n    }\n\n    getTotal() {\n        return this.getOption('total', 0);\n    }\n\n    getButtonStyle(source) {\n        let style = null;\n        switch (source) {\n            case paypal.FUNDING.PAYPAL:\n                style = this.settings?.buttons?.paypal;\n                break;\n            case paypal.FUNDING.PAYLATER:\n                style = this.settings?.buttons?.paylater;\n                break;\n            case paypal.FUNDING.CARD:\n                style = {...this.settings?.buttons?.card};\n                if (style.tagline) {\n                    delete style.tagline;\n                    style.layout = 'vertical';\n                } else {\n                    style.layout = 'horizontal';\n                }\n                break;\n            case paypal.FUNDING.VENMO:\n                const {color = '', label = '', ...venmoStyle} = this.settings?.buttons?.paypal;\n                style = venmoStyle;\n                break;\n        }\n        if (style?.height) {\n            style.height = parseInt(style.height);\n        }\n        return style;\n    }\n\n    onApprove(data, actions) {\n        setFieldValue(this.order_field_key, data.orderID, '');\n        if (data.billingToken) {\n            setFieldValue(this.billing_token_key, data.billingToken, '');\n            return this.fetchBillingToken(data.billingToken).then(response => {\n                this.handleBillingToken(response, data);\n            }).catch(error => {\n                return this.submitError(error?.message);\n            });\n        } else {\n            actions.order.get().then((res) => {\n                this.handleOnApproveResponse(data, res);\n            }).catch(error => this.submitError(error));\n        }\n    }\n\n    handleOnApproveResponse(data, response) {\n        this.populateCheckoutFields(response);\n        this.processCartCheckout();\n    }\n\n    fetchBillingToken(token) {\n        return apiFetch({\n            method: 'GET',\n            path: `/wc-ppcp/v1/billing-agreement/token/${token}`\n        });\n    }\n\n    handleBillingToken(token, data) {\n        if (!isEmpty(token.payer_info.billing_address)) {\n            this.populateBillingAddressFields(convertPayPalAddressToCart(token.payer_info.billing_address));\n        }\n        if (token?.payer_info?.first_name) {\n            if (!isValid('billing_first_name')) {\n                setFieldValue('first_name', token.payer_info.first_name, 'billing');\n            }\n        }\n        if (token?.payer_info?.last_name) {\n            if (!isValid('billing_last_name')) {\n                setFieldValue('last_name', token.payer_info.last_name, 'billing');\n            }\n        }\n        if (token?.payer_info?.email) {\n            if (!isValid('billing_email')) {\n                setFieldValue('billing_email', token.payer_info.email);\n            }\n        }\n        if (token?.payer_info?.phone) {\n            if (!isValid('billing_phone')) {\n                setFieldValue('billing_phone', token.payer_info.phone);\n            }\n        }\n        if (this.needsShipping() && token.shipping_address) {\n            if (!isEmpty(token.shipping_address)) {\n                let address = convertPayPalAddressToCart(token.shipping_address);\n                this.populateNameFields(extractFullName(token.shipping_address.recipient_name ?? ''), 'shipping');\n                this.populateShippingAddressFields(address);\n                if (!isValidAddress(this.getCartFullAddress('billing'), ['phone', 'email'])) {\n                    if (!isValidFieldValue(getFieldValue('billing_first_name')) && !isValidFieldValue(getFieldValue('billing_last_name'))) {\n                        this.populateNameFields(token.shipping_address.recipient_name ?? '', 'billing');\n                    }\n                    this.populateBillingAddressFields(address);\n                }\n            }\n        }\n    }\n\n    createOrder(data, actions) {\n        return actions.order.create(args);\n    }\n\n    createBillingAgreement(data, actions, extraData = null) {\n        return apiFetch({\n            method: 'POST',\n            url: getRestPath('/wc-ppcp/v1/billing-agreement/token'),\n            data: {\n                payment_method: this.id,\n                context: this.getPage(),\n                ...extraData\n            }\n        }).then(token => {\n            return token;\n        }).catch(error => {\n            this.currentError = error;\n        })\n    }\n\n    onShippingChange(data, actions, extraData = {}) {\n        const address = convertPayPalAddressToCart(data?.shipping_address || {}, true);\n        const shipping_method = extractShippingMethod(data?.selected_shipping_option?.id || '');\n        return apiFetch({\n            method: 'POST',\n            url: getRestRoute('cart/shipping'),\n            data: {\n                order_id: data.orderID,\n                address,\n                shipping_method,\n                payment_method: this.id,\n                ...extraData\n            }\n        }).then(response => {\n            if (response.code) {\n                return actions.reject();\n            } else {\n                return actions.resolve();\n            }\n        }).catch(error => {\n            return actions.reject();\n        })\n    }\n\n    submitError(error) {\n\n    }\n\n    getShippingPrefix() {\n        return 'shipping';\n    }\n\n    getCartAddress(type) {\n        return {\n            address_1: getFieldValue('address_1', type),\n            address_2: getFieldValue('address_2', type),\n            state: getFieldValue('state', type),\n            city: getFieldValue('city', type),\n            postcode: getFieldValue('postcode', type),\n            country: getFieldValue('country', type)\n        }\n    }\n\n    getCartFullAddress(type) {\n        return {\n            first_name: getFieldValue('first_name', type),\n            last_name: getFieldValue('last_name', type),\n            address_1: getFieldValue('address_1', type),\n            address_2: getFieldValue('address_2', type),\n            state: getFieldValue('state', type),\n            city: getFieldValue('city', type),\n            postcode: getFieldValue('postcode', type),\n            country: getFieldValue('country', type)\n        }\n    }\n\n    onInit(source, data, actions) {\n        this.buttonActions[source] = actions;\n    }\n\n    onClick(data, actions) {\n\n    }\n\n    isPage(page) {\n        return this.getPage() === page;\n    }\n\n    getPage() {\n        let page = getSetting('generalData')?.page;\n        if (page == 'cart' && $(document.body).is('.woocommerce-checkout')) {\n            page = 'checkout';\n        }\n        return page;\n    }\n\n    populateShippingAddressFields(address) {\n        for (let key in address) {\n            setFieldValue(key, address[key], 'shipping');\n        }\n    }\n\n    populateBillingAddressFields(address) {\n        for (let key in address) {\n            setFieldValue(key, address[key], 'billing');\n        }\n    }\n\n    populateNameFields(name, prefix = '') {\n        let first_name, last_name;\n        if (Array.isArray(name)) {\n            [first_name, last_name] = name;\n        } else {\n            ({given_name: first_name, surname: last_name} = name);\n        }\n        setFieldValue('first_name', first_name, prefix);\n        setFieldValue('last_name', last_name, prefix);\n    }\n\n    populateCheckoutFields(response) {\n        if (!isEmpty(response?.payer?.address)) {\n            let address = convertPayPalAddressToCart(response.payer.address);\n            this.populateBillingAddressFields(address);\n        }\n        if (response?.payer?.name) {\n            this.populateNameFields(response.payer.name, 'billing');\n        }\n        if (response?.payer?.email_address) {\n            setFieldValue('billing_email', response.payer.email_address);\n        }\n        if (response?.payer?.phone?.phone_number?.national_number) {\n            setFieldValue('billing_phone', response.payer.phone.phone_number.national_number);\n            setFieldValue('shipping_phone', response.payer.phone.phone_number.national_number);\n        }\n        if (this.needsShipping() && response?.purchase_units?.[0]?.shipping) {\n            const address = convertPayPalAddressToCart(response.purchase_units[0].shipping.address)\n            this.populateShippingAddressFields(address);\n            if (response.purchase_units[0].shipping?.name?.full_name) {\n                const name = extractFullName(response.purchase_units[0].shipping.name.full_name);\n                this.populateNameFields(name, 'shipping');\n            }\n            // add billing address if possible\n            if (!isValidAddress(this.getCartFullAddress('billing'), ['phone', 'email'])) {\n                this.populateBillingAddressFields(address);\n            }\n        }\n    }\n\n    processCartCheckout() {\n        this.showProcessing();\n        return apiFetch({\n            method: 'POST',\n            url: getRestRoute('cart/checkout'),\n            data: this.getCartCheckoutData()\n        }).then(response => {\n            if (response.result && 'success' == response.result) {\n                window.location = response.redirect;\n            } else {\n                if (response.messages) {\n                    return this.submitError(response.messages);\n                }\n            }\n        }).catch(error => {\n            if (error.code) {\n                this.submitError(error.message);\n            }\n        });\n    }\n\n    getCartCheckoutData() {\n        return {payment_method: this.id, context: this.getPage(), ...fieldsToJson()};\n    }\n\n    getProcessingSelector() {\n        return 'body';\n    }\n\n    showProcessing() {\n        $(this.getProcessingSelector())?.block({\n            message: this.getProcessingMessage(),\n            overlayCSS: {\n                background: '#fff',\n                opacity: 0.6\n            }\n        });\n    }\n\n    hideProcessing() {\n        $(this.getProcessingSelector())?.unblock();\n    }\n\n    getProcessingMessage() {\n        return `<div class=\"wc-ppcp-loader\">\n                        <div></div>\n                        <div></div>\n                        <div></div>\n                      </div>`;\n    }\n\n    getFullName(prefix) {\n        const names = [\n            getFieldValue('first_name', prefix),\n            getFieldValue('last_name', prefix)\n        ].filter(Boolean);\n        if (names.length == 0) {\n            return null;\n        } else if (names.length == 1) {\n            return names[0];\n        }\n        return `${names[0]} ${names[1]}`\n    }\n}\n\nexport {BaseGateway};\nexport default BaseGateway;","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wcPPCP\"][\"cart\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wcPPCP\"][\"actions\"];","import {CartGateway} from '../classes';\nimport cart from '@ppcp/cart';\nimport Actions from '@ppcp/actions';\n\nnew CartGateway(cart, {id: 'ppcp', actions: new Actions(), context: 'cart'});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","window","CartGateway","_BaseGateway","_inherits","_super","cart","props","_this","_classCallCheck","initialize","this","actions","addAction","onCartUpdated","bind","$","on","doCartHtml","_get","_getPrototypeOf","_get2","_len","arguments","length","params","Array","_key","apply","concat","trigger","needsShipping","document","getElementById","error","hideProcessing","submitErrorMessage","response","processCartCheckout","data","_this2","createOrder","payment_method","id","catch","currentError","$button","width","outerWidth","css","BaseGateway","_ref","context","_ref$container","container","buttons","buttonActions","settings","getSetting","order_field_key","billing_token_key","loadPayPalScript","then","initializeEvents","createButton","getData","Promise","resolve","reject","loadPayPalSdk","getPayPalSDKArgs","paypal","console","log","code","submitError","getErrorMessage","getPayPalQueryParams","_getSetting","_getSetting$clientId","clientId","environment","find","setData","defaultValue","undefined","setVariable","setOption","_this3","getButtonContainer","getSortedFunding","getFunding","forEach","source","button","Buttons","getButtonOptions","isEligible","NodeList","_step","_iterator","_createForOfIteratorHelper","s","n","done","node","render","err","e","f","defaultHooks","_this4","keys","close","_this5","disable","_this6","enable","_this$settings","_this$settings2","_this$settings2$paypa","_this$settings3","_this$settings3$payla","_this$settings4","_this$settings4$credi","funding","paypal_sections","includes","getPage","push","FUNDING","PAYPAL","paylater_sections","isCheckoutFlow","PAYLATER","credit_card_sections","CARD","type","_this$settings5","_this$settings5$fundi","section","_this$settings6","_this$settings6$key","sortOrder","buttons_order","sort","b","indexOf","_this7","options","fundingSource","style","getButtonStyle","onInit","args","body","triggerHandler","onClick","onApprove","onCancel","orderId","orderID","onError","onDestroy","VENMO","onShippingChange","createBillingAgreement","getOption","_getPayPalQueryParams","vault","_this$settings7","_this$settings7$butto","_this$settings8","_this$settings8$butto","_this$settings9","_this$settings9$butto","_this$settings10","_this$settings10$butt","_style","paylater","_objectSpread","card","tagline","layout","_this$settings$button","color","label","_objectWithoutProperties","_excluded","height","parseInt","_this8","setFieldValue","billingToken","fetchBillingToken","handleBillingToken","message","order","res","handleOnApproveResponse","populateCheckoutFields","token","apiFetch","method","path","_token$payer_info","_token$payer_info2","_token$payer_info3","_token$payer_info4","isEmpty","payer_info","billing_address","populateBillingAddressFields","convertPayPalAddressToCart","first_name","isValid","last_name","email","phone","shipping_address","_token$shipping_addre","_token$shipping_addre2","address","populateNameFields","extractFullName","recipient_name","populateShippingAddressFields","isValidAddress","getCartFullAddress","isValidFieldValue","getFieldValue","create","_this9","extraData","url","getRestPath","_data$selected_shippi","shipping_method","extractShippingMethod","selected_shipping_option","getRestRoute","order_id","address_1","address_2","state","city","postcode","country","page","_getSetting2","is","name","prefix","isArray","_name","_slicedToArray","given_name","surname","_response$payer","_response$payer2","_response$payer3","_response$payer4","_response$payer4$phon","_response$payer4$phon2","_response$purchase_un","_response$purchase_un2","payer","email_address","phone_number","national_number","purchase_units","shipping","_response$purchase_un3","_response$purchase_un4","full_name","_this10","showProcessing","getCartCheckoutData","result","location","redirect","messages","fieldsToJson","_$","getProcessingSelector","block","getProcessingMessage","overlayCSS","background","opacity","_$2","unblock","names","filter","Boolean","Actions"],"sourceRoot":""}